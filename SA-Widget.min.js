/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
function toast(n, t, i, r) {
    n == "success" ? $.notification({
        content: t,
        title: i,
        timeout: r != undefined ? r : 7e3,
        click: function() {
            $(this).remove()
        },
        showTime: !0,
        type: "success bg-light-green"
    }) : n == "warning" ? ($.notification({
        content: t,
        title: i,
        click: function() {
            $(this).remove()
        },
        showTime: !0,
        timeout: r != undefined ? r : 4e3,
        type: "warning bg-orange"
    }),
    $("#toastWarn")[0].play(),
    $("#toastWarn")[0].volume = .3) : n == "info" ? $.notification({
        content: t,
        title: i,
        timeout: r != undefined ? r : 3500,
        click: function() {
            $(this).remove()
        },
        showTime: !0,
        type: "info bg-sa-blue"
    }) : n == "error" && ($.notification({
        content: t,
        title: i,
        timeout: r != undefined ? r : 3e3,
        click: function() {
            $(this).remove()
        },
        type: "error bg-red"
    }),
    $("#toastErr")[0].play(),
    $("#toastErr")[0].volume = .5)
}
function Settheme(n) {
    theme = n;
    window.localStorage.setItem("theme", theme)
}
function SetMagnifyBool(n) {
    MagnifyBool = n;
    window.localStorage.setItem("MagnifyBool", MagnifyBool)
}
function SetZoomFactor(n) {
    ZoomFactor = n;
    window.localStorage.setItem("ZoomFactor", ZoomFactor)
}
function SetglobalFontFamily(n) {
    globalFontFamily = n;
    window.localStorage.setItem("globalFontFamily", globalFontFamily)
}
function SetlineHeight(n) {
    lineHeight = n;
    window.localStorage.setItem("lineHeight", lineHeight)
}
function SetletterSpacing(n) {
    letterSpacing = n;
    window.localStorage.setItem("letterSpacing", letterSpacing)
}
function SetwordSpacing(n) {
    wordSpacing = n;
    window.localStorage.setItem("wordSpacing", wordSpacing)
}
function SettitleFontSize(n) {
    titleFontSize = n;
    window.localStorage.setItem("titleFontSize", titleFontSize)
}
function getParameterByName(n) {
    n = n.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var i = new RegExp("[\\?&]" + n + "=([^&#]*)")
      , t = i.exec(location.search);
    return t === null ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
}
var fabric, CryptoJS, eid, epass, host, isSynced, waitSync, savedData, HostModalCtrl, ModalInstanceCtrl, QMediaModalInstanceCtrl, HotspotAnswerInitializer, matchingSVG;
!function(n, t) {
    "object" == typeof module && "object" == typeof module.exports ? module.exports = n.document ? t(n, !0) : function(n) {
        if (!n.document)
            throw new Error("jQuery requires a window with a document");
        return t(n)
    }
    : t(n)
}("undefined" != typeof window ? window : this, function(n, t) {
    function ui(n) {
        var t = n.length
          , r = i.type(n);
        return "function" === r || i.isWindow(n) ? !1 : 1 === n.nodeType && t ? !0 : "array" === r || 0 === t || "number" == typeof t && t > 0 && t - 1 in n
    }
    function fi(n, t, r) {
        if (i.isFunction(t))
            return i.grep(n, function(n, i) {
                return !!t.call(n, i, n) !== r
            });
        if (t.nodeType)
            return i.grep(n, function(n) {
                return n === t !== r
            });
        if ("string" == typeof t) {
            if (ef.test(t))
                return i.filter(t, n, r);
            t = i.filter(t, n)
        }
        return i.grep(n, function(n) {
            return et.call(t, n) >= 0 !== r
        })
    }
    function ur(n, t) {
        while ((n = n[t]) && 1 !== n.nodeType)
            ;
        return n
    }
    function of(n) {
        var t = ei[n] = {};
        return i.each(n.match(c) || [], function(n, i) {
            t[i] = !0
        }),
        t
    }
    function ct() {
        u.removeEventListener("DOMContentLoaded", ct, !1);
        n.removeEventListener("load", ct, !1);
        i.ready()
    }
    function p() {
        Object.defineProperty(this.cache = {}, 0, {
            get: function() {
                return {}
            }
        });
        this.expando = i.expando + Math.random()
    }
    function fr(n, t, r) {
        var u;
        if (void 0 === r && 1 === n.nodeType)
            if (u = "data-" + t.replace(hf, "-$1").toLowerCase(),
            r = n.getAttribute(u),
            "string" == typeof r) {
                try {
                    r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : sf.test(r) ? i.parseJSON(r) : r
                } catch (f) {}
                e.set(n, t, r)
            } else
                r = void 0;
        return r
    }
    function at() {
        return !0
    }
    function g() {
        return !1
    }
    function hr() {
        try {
            return u.activeElement
        } catch (n) {}
    }
    function vr(n, t) {
        return i.nodeName(n, "table") && i.nodeName(11 !== t.nodeType ? t : t.firstChild, "tr") ? n.getElementsByTagName("tbody")[0] || n.appendChild(n.ownerDocument.createElement("tbody")) : n
    }
    function bf(n) {
        return n.type = (null !== n.getAttribute("type")) + "/" + n.type,
        n
    }
    function kf(n) {
        var t = pf.exec(n.type);
        return t ? n.type = t[1] : n.removeAttribute("type"),
        n
    }
    function oi(n, t) {
        for (var i = 0, u = n.length; u > i; i++)
            r.set(n[i], "globalEval", !t || r.get(t[i], "globalEval"))
    }
    function yr(n, t) {
        var u, c, f, s, h, l, a, o;
        if (1 === t.nodeType) {
            if (r.hasData(n) && (s = r.access(n),
            h = r.set(t, s),
            o = s.events)) {
                delete h.handle;
                h.events = {};
                for (f in o)
                    for (u = 0,
                    c = o[f].length; c > u; u++)
                        i.event.add(t, f, o[f][u])
            }
            e.hasData(n) && (l = e.access(n),
            a = i.extend({}, l),
            e.set(t, a))
        }
    }
    function o(n, t) {
        var r = n.getElementsByTagName ? n.getElementsByTagName(t || "*") : n.querySelectorAll ? n.querySelectorAll(t || "*") : [];
        return void 0 === t || t && i.nodeName(n, t) ? i.merge([n], r) : r
    }
    function df(n, t) {
        var i = t.nodeName.toLowerCase();
        "input" === i && er.test(n.type) ? t.checked = n.checked : ("input" === i || "textarea" === i) && (t.defaultValue = n.defaultValue)
    }
    function pr(t, r) {
        var f, u = i(r.createElement(t)).appendTo(r.body), e = n.getDefaultComputedStyle && (f = n.getDefaultComputedStyle(u[0])) ? f.display : i.css(u[0], "display");
        return u.detach(),
        e
    }
    function hi(n) {
        var r = u
          , t = si[n];
        return t || (t = pr(n, r),
        "none" !== t && t || (vt = (vt || i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),
        r = vt[0].contentDocument,
        r.write(),
        r.close(),
        t = pr(n, r),
        vt.detach()),
        si[n] = t),
        t
    }
    function rt(n, t, r) {
        var e, o, s, u, f = n.style;
        return r = r || yt(n),
        r && (u = r.getPropertyValue(t) || r[t]),
        r && ("" !== u || i.contains(n.ownerDocument, n) || (u = i.style(n, t)),
        ci.test(u) && wr.test(t) && (e = f.width,
        o = f.minWidth,
        s = f.maxWidth,
        f.minWidth = f.maxWidth = f.width = u,
        u = r.width,
        f.width = e,
        f.minWidth = o,
        f.maxWidth = s)),
        void 0 !== u ? u + "" : u
    }
    function br(n, t) {
        return {
            get: function() {
                return n() ? void delete this.get : (this.get = t).apply(this, arguments)
            }
        }
    }
    function gr(n, t) {
        if (t in n)
            return t;
        for (var r = t[0].toUpperCase() + t.slice(1), u = t, i = dr.length; i--; )
            if (t = dr[i] + r,
            t in n)
                return t;
        return u
    }
    function nu(n, t, i) {
        var r = ne.exec(t);
        return r ? Math.max(0, r[1] - (i || 0)) + (r[2] || "px") : t
    }
    function tu(n, t, r, u, f) {
        for (var e = r === (u ? "border" : "content") ? 4 : "width" === t ? 1 : 0, o = 0; 4 > e; e += 2)
            "margin" === r && (o += i.css(n, r + w[e], !0, f)),
            u ? ("content" === r && (o -= i.css(n, "padding" + w[e], !0, f)),
            "margin" !== r && (o -= i.css(n, "border" + w[e] + "Width", !0, f))) : (o += i.css(n, "padding" + w[e], !0, f),
            "padding" !== r && (o += i.css(n, "border" + w[e] + "Width", !0, f)));
        return o
    }
    function iu(n, t, r) {
        var o = !0
          , u = "width" === t ? n.offsetWidth : n.offsetHeight
          , e = yt(n)
          , s = "border-box" === i.css(n, "boxSizing", !1, e);
        if (0 >= u || null == u) {
            if (u = rt(n, t, e),
            (0 > u || null == u) && (u = n.style[t]),
            ci.test(u))
                return u;
            o = s && (f.boxSizingReliable() || u === n.style[t]);
            u = parseFloat(u) || 0
        }
        return u + tu(n, t, r || (s ? "border" : "content"), o, e) + "px"
    }
    function ru(n, t) {
        for (var e, u, s, o = [], f = 0, h = n.length; h > f; f++)
            u = n[f],
            u.style && (o[f] = r.get(u, "olddisplay"),
            e = u.style.display,
            t ? (o[f] || "none" !== e || (u.style.display = ""),
            "" === u.style.display && it(u) && (o[f] = r.access(u, "olddisplay", hi(u.nodeName)))) : (s = it(u),
            "none" === e && s || r.set(u, "olddisplay", s ? e : i.css(u, "display"))));
        for (f = 0; h > f; f++)
            u = n[f],
            u.style && (t && "none" !== u.style.display && "" !== u.style.display || (u.style.display = t ? o[f] || "" : "none"));
        return n
    }
    function s(n, t, i, r, u) {
        return new s.prototype.init(n,t,i,r,u)
    }
    function fu() {
        return setTimeout(function() {
            nt = void 0
        }),
        nt = i.now()
    }
    function bt(n, t) {
        var r, u = 0, i = {
            height: n
        };
        for (t = t ? 1 : 0; 4 > u; u += 2 - t)
            r = w[u],
            i["margin" + r] = i["padding" + r] = n;
        return t && (i.opacity = i.width = n),
        i
    }
    function eu(n, t, i) {
        for (var u, f = (ut[t] || []).concat(ut["*"]), r = 0, e = f.length; e > r; r++)
            if (u = f[r].call(i, t, n))
                return u
    }
    function fe(n, t, u) {
        var f, a, p, v, o, w, h, b, l = this, y = {}, s = n.style, c = n.nodeType && it(n), e = r.get(n, "fxshow");
        u.queue || (o = i._queueHooks(n, "fx"),
        null == o.unqueued && (o.unqueued = 0,
        w = o.empty.fire,
        o.empty.fire = function() {
            o.unqueued || w()
        }
        ),
        o.unqueued++,
        l.always(function() {
            l.always(function() {
                o.unqueued--;
                i.queue(n, "fx").length || o.empty.fire()
            })
        }));
        1 === n.nodeType && ("height"in t || "width"in t) && (u.overflow = [s.overflow, s.overflowX, s.overflowY],
        h = i.css(n, "display"),
        b = "none" === h ? r.get(n, "olddisplay") || hi(n.nodeName) : h,
        "inline" === b && "none" === i.css(n, "float") && (s.display = "inline-block"));
        u.overflow && (s.overflow = "hidden",
        l.always(function() {
            s.overflow = u.overflow[0];
            s.overflowX = u.overflow[1];
            s.overflowY = u.overflow[2]
        }));
        for (f in t)
            if (a = t[f],
            re.exec(a)) {
                if (delete t[f],
                p = p || "toggle" === a,
                a === (c ? "hide" : "show")) {
                    if ("show" !== a || !e || void 0 === e[f])
                        continue;
                    c = !0
                }
                y[f] = e && e[f] || i.style(n, f)
            } else
                h = void 0;
        if (i.isEmptyObject(y))
            "inline" === ("none" === h ? hi(n.nodeName) : h) && (s.display = h);
        else {
            e ? "hidden"in e && (c = e.hidden) : e = r.access(n, "fxshow", {});
            p && (e.hidden = !c);
            c ? i(n).show() : l.done(function() {
                i(n).hide()
            });
            l.done(function() {
                var t;
                r.remove(n, "fxshow");
                for (t in y)
                    i.style(n, t, y[t])
            });
            for (f in y)
                v = eu(c ? e[f] : 0, f, l),
                f in e || (e[f] = v.start,
                c && (v.end = v.start,
                v.start = "width" === f || "height" === f ? 1 : 0))
        }
    }
    function ee(n, t) {
        var r, f, e, u, o;
        for (r in n)
            if (f = i.camelCase(r),
            e = t[f],
            u = n[r],
            i.isArray(u) && (e = u[1],
            u = n[r] = u[0]),
            r !== f && (n[f] = u,
            delete n[r]),
            o = i.cssHooks[f],
            o && "expand"in o) {
                u = o.expand(u);
                delete n[f];
                for (r in u)
                    r in n || (n[r] = u[r],
                    t[r] = e)
            } else
                t[f] = e
    }
    function ou(n, t, r) {
        var h, e, o = 0, l = wt.length, f = i.Deferred().always(function() {
            delete c.elem
        }), c = function() {
            if (e)
                return !1;
            for (var s = nt || fu(), t = Math.max(0, u.startTime + u.duration - s), h = t / u.duration || 0, i = 1 - h, r = 0, o = u.tweens.length; o > r; r++)
                u.tweens[r].run(i);
            return f.notifyWith(n, [u, i, t]),
            1 > i && o ? t : (f.resolveWith(n, [u]),
            !1)
        }, u = f.promise({
            elem: n,
            props: i.extend({}, t),
            opts: i.extend(!0, {
                specialEasing: {}
            }, r),
            originalProperties: t,
            originalOptions: r,
            startTime: nt || fu(),
            duration: r.duration,
            tweens: [],
            createTween: function(t, r) {
                var f = i.Tween(n, u.opts, t, r, u.opts.specialEasing[t] || u.opts.easing);
                return u.tweens.push(f),
                f
            },
            stop: function(t) {
                var i = 0
                  , r = t ? u.tweens.length : 0;
                if (e)
                    return this;
                for (e = !0; r > i; i++)
                    u.tweens[i].run(1);
                return t ? f.resolveWith(n, [u, t]) : f.rejectWith(n, [u, t]),
                this
            }
        }), s = u.props;
        for (ee(s, u.opts.specialEasing); l > o; o++)
            if (h = wt[o].call(u, n, s, u.opts))
                return h;
        return i.map(s, eu, u),
        i.isFunction(u.opts.start) && u.opts.start.call(n, u),
        i.fx.timer(i.extend(c, {
            elem: n,
            anim: u,
            queue: u.opts.queue
        })),
        u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always)
    }
    function pu(n) {
        return function(t, r) {
            "string" != typeof t && (r = t,
            t = "*");
            var u, f = 0, e = t.toLowerCase().match(c) || [];
            if (i.isFunction(r))
                while (u = e[f++])
                    "+" === u[0] ? (u = u.slice(1) || "*",
                    (n[u] = n[u] || []).unshift(r)) : (n[u] = n[u] || []).push(r)
        }
    }
    function wu(n, t, r, u) {
        function e(s) {
            var h;
            return f[s] = !0,
            i.each(n[s] || [], function(n, i) {
                var s = i(t, r, u);
                return "string" != typeof s || o || f[s] ? o ? !(h = s) : void 0 : (t.dataTypes.unshift(s),
                e(s),
                !1)
            }),
            h
        }
        var f = {}
          , o = n === li;
        return e(t.dataTypes[0]) || !f["*"] && e("*")
    }
    function ai(n, t) {
        var r, u, f = i.ajaxSettings.flatOptions || {};
        for (r in t)
            void 0 !== t[r] && ((f[r] ? n : u || (u = {}))[r] = t[r]);
        return u && i.extend(!0, n, u),
        n
    }
    function ae(n, t, i) {
        for (var e, u, f, o, s = n.contents, r = n.dataTypes; "*" === r[0]; )
            r.shift(),
            void 0 === e && (e = n.mimeType || t.getResponseHeader("Content-Type"));
        if (e)
            for (u in s)
                if (s[u] && s[u].test(e)) {
                    r.unshift(u);
                    break
                }
        if (r[0]in i)
            f = r[0];
        else {
            for (u in i) {
                if (!r[0] || n.converters[u + " " + r[0]]) {
                    f = u;
                    break
                }
                o || (o = u)
            }
            f = f || o
        }
        if (f)
            return (f !== r[0] && r.unshift(f),
            i[f])
    }
    function ve(n, t, i, r) {
        var h, u, f, s, e, o = {}, c = n.dataTypes.slice();
        if (c[1])
            for (f in n.converters)
                o[f.toLowerCase()] = n.converters[f];
        for (u = c.shift(); u; )
            if (n.responseFields[u] && (i[n.responseFields[u]] = t),
            !e && r && n.dataFilter && (t = n.dataFilter(t, n.dataType)),
            e = u,
            u = c.shift())
                if ("*" === u)
                    u = e;
                else if ("*" !== e && e !== u) {
                    if (f = o[e + " " + u] || o["* " + u],
                    !f)
                        for (h in o)
                            if (s = h.split(" "),
                            s[1] === u && (f = o[e + " " + s[0]] || o["* " + s[0]])) {
                                f === !0 ? f = o[h] : o[h] !== !0 && (u = s[0],
                                c.unshift(s[1]));
                                break
                            }
                    if (f !== !0)
                        if (f && n.throws)
                            t = f(t);
                        else
                            try {
                                t = f(t)
                            } catch (l) {
                                return {
                                    state: "parsererror",
                                    error: f ? l : "No conversion from " + e + " to " + u
                                }
                            }
                }
        return {
            state: "success",
            data: t
        }
    }
    function vi(n, t, r, u) {
        var f;
        if (i.isArray(t))
            i.each(t, function(t, i) {
                r || pe.test(n) ? u(n, i) : vi(n + "[" + ("object" == typeof i ? t : "") + "]", i, r, u)
            });
        else if (r || "object" !== i.type(t))
            u(n, t);
        else
            for (f in t)
                vi(n + "[" + f + "]", t[f], r, u)
    }
    function ku(n) {
        return i.isWindow(n) ? n : 9 === n.nodeType && n.defaultView
    }
    var k = [], a = k.slice, bi = k.concat, ii = k.push, et = k.indexOf, ot = {}, nf = ot.toString, ri = ot.hasOwnProperty, f = {}, u = n.document, ki = "2.1.1", i = function(n, t) {
        return new i.fn.init(n,t)
    }, tf = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, rf = /^-ms-/, uf = /-([\da-z])/gi, ff = function(n, t) {
        return t.toUpperCase()
    }, y, st, nr, tr, ir, rr, c, ei, ht, l, d, vt, si, oe, su, tt, hu, kt, cu, dt, gt, yi, ti, pi, wi, du, gu;
    i.fn = i.prototype = {
        jquery: ki,
        constructor: i,
        selector: "",
        length: 0,
        toArray: function() {
            return a.call(this)
        },
        get: function(n) {
            return null != n ? 0 > n ? this[n + this.length] : this[n] : a.call(this)
        },
        pushStack: function(n) {
            var t = i.merge(this.constructor(), n);
            return t.prevObject = this,
            t.context = this.context,
            t
        },
        each: function(n, t) {
            return i.each(this, n, t)
        },
        map: function(n) {
            return this.pushStack(i.map(this, function(t, i) {
                return n.call(t, i, t)
            }))
        },
        slice: function() {
            return this.pushStack(a.apply(this, arguments))
        },
        first: function() {
            return this.eq(0)
        },
        last: function() {
            return this.eq(-1)
        },
        eq: function(n) {
            var i = this.length
              , t = +n + (0 > n ? i : 0);
            return this.pushStack(t >= 0 && i > t ? [this[t]] : [])
        },
        end: function() {
            return this.prevObject || this.constructor(null)
        },
        push: ii,
        sort: k.sort,
        splice: k.splice
    };
    i.extend = i.fn.extend = function() {
        var e, f, r, t, o, s, n = arguments[0] || {}, u = 1, c = arguments.length, h = !1;
        for ("boolean" == typeof n && (h = n,
        n = arguments[u] || {},
        u++),
        "object" == typeof n || i.isFunction(n) || (n = {}),
        u === c && (n = this,
        u--); c > u; u++)
            if (null != (e = arguments[u]))
                for (f in e)
                    r = n[f],
                    t = e[f],
                    n !== t && (h && t && (i.isPlainObject(t) || (o = i.isArray(t))) ? (o ? (o = !1,
                    s = r && i.isArray(r) ? r : []) : s = r && i.isPlainObject(r) ? r : {},
                    n[f] = i.extend(h, s, t)) : void 0 !== t && (n[f] = t));
        return n
    }
    ;
    i.extend({
        expando: "jQuery" + (ki + Math.random()).replace(/\D/g, ""),
        isReady: !0,
        error: function(n) {
            throw new Error(n);
        },
        noop: function() {},
        isFunction: function(n) {
            return "function" === i.type(n)
        },
        isArray: Array.isArray,
        isWindow: function(n) {
            return null != n && n === n.window
        },
        isNumeric: function(n) {
            return !i.isArray(n) && n - parseFloat(n) >= 0
        },
        isPlainObject: function(n) {
            return "object" !== i.type(n) || n.nodeType || i.isWindow(n) ? !1 : n.constructor && !ri.call(n.constructor.prototype, "isPrototypeOf") ? !1 : !0
        },
        isEmptyObject: function(n) {
            for (var t in n)
                return !1;
            return !0
        },
        type: function(n) {
            return null == n ? n + "" : "object" == typeof n || "function" == typeof n ? ot[nf.call(n)] || "object" : typeof n
        },
        globalEval: function(n) {
            var t, r = eval;
            n = i.trim(n);
            n && (1 === n.indexOf("use strict") ? (t = u.createElement("script"),
            t.text = n,
            u.head.appendChild(t).parentNode.removeChild(t)) : r(n))
        },
        camelCase: function(n) {
            return n.replace(rf, "ms-").replace(uf, ff)
        },
        nodeName: function(n, t) {
            return n.nodeName && n.nodeName.toLowerCase() === t.toLowerCase()
        },
        each: function(n, t, i) {
            var u, r = 0, f = n.length, e = ui(n);
            if (i) {
                if (e) {
                    for (; f > r; r++)
                        if (u = t.apply(n[r], i),
                        u === !1)
                            break
                } else
                    for (r in n)
                        if (u = t.apply(n[r], i),
                        u === !1)
                            break
            } else if (e) {
                for (; f > r; r++)
                    if (u = t.call(n[r], r, n[r]),
                    u === !1)
                        break
            } else
                for (r in n)
                    if (u = t.call(n[r], r, n[r]),
                    u === !1)
                        break;
            return n
        },
        trim: function(n) {
            return null == n ? "" : (n + "").replace(tf, "")
        },
        makeArray: function(n, t) {
            var r = t || [];
            return null != n && (ui(Object(n)) ? i.merge(r, "string" == typeof n ? [n] : n) : ii.call(r, n)),
            r
        },
        inArray: function(n, t, i) {
            return null == t ? -1 : et.call(t, n, i)
        },
        merge: function(n, t) {
            for (var u = +t.length, i = 0, r = n.length; u > i; i++)
                n[r++] = t[i];
            return n.length = r,
            n
        },
        grep: function(n, t, i) {
            for (var u, f = [], r = 0, e = n.length, o = !i; e > r; r++)
                u = !t(n[r], r),
                u !== o && f.push(n[r]);
            return f
        },
        map: function(n, t, i) {
            var u, r = 0, e = n.length, o = ui(n), f = [];
            if (o)
                for (; e > r; r++)
                    u = t(n[r], r, i),
                    null != u && f.push(u);
            else
                for (r in n)
                    u = t(n[r], r, i),
                    null != u && f.push(u);
            return bi.apply([], f)
        },
        guid: 1,
        proxy: function(n, t) {
            var u, f, r;
            return "string" == typeof t && (u = n[t],
            t = n,
            n = u),
            i.isFunction(n) ? (f = a.call(arguments, 2),
            r = function() {
                return n.apply(t || this, f.concat(a.call(arguments)))
            }
            ,
            r.guid = n.guid = n.guid || i.guid++,
            r) : void 0
        },
        now: Date.now,
        support: f
    });
    i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(n, t) {
        ot["[object " + t + "]"] = t.toLowerCase()
    });
    y = function(n) {
        function r(n, t, i, r) {
            var w, h, c, v, k, y, d, l, nt, g;
            if ((t ? t.ownerDocument || t : s) !== e && p(t),
            t = t || e,
            i = i || [],
            !n || "string" != typeof n)
                return i;
            if (1 !== (v = t.nodeType) && 9 !== v)
                return [];
            if (a && !r) {
                if (w = sr.exec(n))
                    if (c = w[1]) {
                        if (9 === v) {
                            if (h = t.getElementById(c),
                            !h || !h.parentNode)
                                return i;
                            if (h.id === c)
                                return i.push(h),
                                i
                        } else if (t.ownerDocument && (h = t.ownerDocument.getElementById(c)) && ot(t, h) && h.id === c)
                            return i.push(h),
                            i
                    } else {
                        if (w[2])
                            return b.apply(i, t.getElementsByTagName(n)),
                            i;
                        if ((c = w[3]) && u.getElementsByClassName && t.getElementsByClassName)
                            return b.apply(i, t.getElementsByClassName(c)),
                            i
                    }
                if (u.qsa && (!o || !o.test(n))) {
                    if (l = d = f,
                    nt = t,
                    g = 9 === v && n,
                    1 === v && "object" !== t.nodeName.toLowerCase()) {
                        for (y = et(n),
                        (d = t.getAttribute("id")) ? l = d.replace(hr, "\\$&") : t.setAttribute("id", l),
                        l = "[id='" + l + "'] ",
                        k = y.length; k--; )
                            y[k] = l + yt(y[k]);
                        nt = gt.test(n) && ii(t.parentNode) || t;
                        g = y.join(",")
                    }
                    if (g)
                        try {
                            return b.apply(i, nt.querySelectorAll(g)),
                            i
                        } catch (tt) {} finally {
                            d || t.removeAttribute("id")
                        }
                }
            }
            return si(n.replace(at, "$1"), t, i, r)
        }
        function ni() {
            function n(r, u) {
                return i.push(r + " ") > t.cacheLength && delete n[i.shift()],
                n[r + " "] = u
            }
            var i = [];
            return n
        }
        function h(n) {
            return n[f] = !0,
            n
        }
        function c(n) {
            var t = e.createElement("div");
            try {
                return !!n(t)
            } catch (i) {
                return !1
            } finally {
                t.parentNode && t.parentNode.removeChild(t);
                t = null
            }
        }
        function ti(n, i) {
            for (var u = n.split("|"), r = n.length; r--; )
                t.attrHandle[u[r]] = i
        }
        function wi(n, t) {
            var i = t && n
              , r = i && 1 === n.nodeType && 1 === t.nodeType && (~t.sourceIndex || ai) - (~n.sourceIndex || ai);
            if (r)
                return r;
            if (i)
                while (i = i.nextSibling)
                    if (i === t)
                        return -1;
            return n ? 1 : -1
        }
        function cr(n) {
            return function(t) {
                var i = t.nodeName.toLowerCase();
                return "input" === i && t.type === n
            }
        }
        function lr(n) {
            return function(t) {
                var i = t.nodeName.toLowerCase();
                return ("input" === i || "button" === i) && t.type === n
            }
        }
        function tt(n) {
            return h(function(t) {
                return t = +t,
                h(function(i, r) {
                    for (var u, f = n([], i.length, t), e = f.length; e--; )
                        i[u = f[e]] && (i[u] = !(r[u] = i[u]))
                })
            })
        }
        function ii(n) {
            return n && typeof n.getElementsByTagName !== ut && n
        }
        function bi() {}
        function yt(n) {
            for (var t = 0, r = n.length, i = ""; r > t; t++)
                i += n[t].value;
            return i
        }
        function ri(n, t, i) {
            var r = t.dir
              , u = i && "parentNode" === r
              , e = ki++;
            return t.first ? function(t, i, f) {
                while (t = t[r])
                    if (1 === t.nodeType || u)
                        return n(t, i, f)
            }
            : function(t, i, o) {
                var s, h, c = [v, e];
                if (o) {
                    while (t = t[r])
                        if ((1 === t.nodeType || u) && n(t, i, o))
                            return !0
                } else
                    while (t = t[r])
                        if (1 === t.nodeType || u) {
                            if (h = t[f] || (t[f] = {}),
                            (s = h[r]) && s[0] === v && s[1] === e)
                                return c[2] = s[2];
                            if (h[r] = c,
                            c[2] = n(t, i, o))
                                return !0
                        }
            }
        }
        function ui(n) {
            return n.length > 1 ? function(t, i, r) {
                for (var u = n.length; u--; )
                    if (!n[u](t, i, r))
                        return !1;
                return !0
            }
            : n[0]
        }
        function ar(n, t, i) {
            for (var u = 0, f = t.length; f > u; u++)
                r(n, t[u], i);
            return i
        }
        function pt(n, t, i, r, u) {
            for (var e, o = [], f = 0, s = n.length, h = null != t; s > f; f++)
                (e = n[f]) && (!i || i(e, r, u)) && (o.push(e),
                h && t.push(f));
            return o
        }
        function fi(n, t, i, r, u, e) {
            return r && !r[f] && (r = fi(r)),
            u && !u[f] && (u = fi(u, e)),
            h(function(f, e, o, s) {
                var l, c, a, p = [], y = [], w = e.length, k = f || ar(t || "*", o.nodeType ? [o] : o, []), v = !n || !f && t ? k : pt(k, p, n, o, s), h = i ? u || (f ? n : w || r) ? [] : e : v;
                if (i && i(v, h, o, s),
                r)
                    for (l = pt(h, y),
                    r(l, [], o, s),
                    c = l.length; c--; )
                        (a = l[c]) && (h[y[c]] = !(v[y[c]] = a));
                if (f) {
                    if (u || n) {
                        if (u) {
                            for (l = [],
                            c = h.length; c--; )
                                (a = h[c]) && l.push(v[c] = a);
                            u(null, h = [], l, s)
                        }
                        for (c = h.length; c--; )
                            (a = h[c]) && (l = u ? nt.call(f, a) : p[c]) > -1 && (f[l] = !(e[l] = a))
                    }
                } else
                    h = pt(h === e ? h.splice(w, h.length) : h),
                    u ? u(null, e, h, s) : b.apply(e, h)
            })
        }
        function ei(n) {
            for (var s, u, r, o = n.length, h = t.relative[n[0].type], c = h || t.relative[" "], i = h ? 1 : 0, l = ri(function(n) {
                return n === s
            }, c, !0), a = ri(function(n) {
                return nt.call(s, n) > -1
            }, c, !0), e = [function(n, t, i) {
                return !h && (i || t !== ct) || ((s = t).nodeType ? l(n, t, i) : a(n, t, i))
            }
            ]; o > i; i++)
                if (u = t.relative[n[i].type])
                    e = [ri(ui(e), u)];
                else {
                    if (u = t.filter[n[i].type].apply(null, n[i].matches),
                    u[f]) {
                        for (r = ++i; o > r; r++)
                            if (t.relative[n[r].type])
                                break;
                        return fi(i > 1 && ui(e), i > 1 && yt(n.slice(0, i - 1).concat({
                            value: " " === n[i - 2].type ? "*" : ""
                        })).replace(at, "$1"), u, r > i && ei(n.slice(i, r)), o > r && ei(n = n.slice(r)), o > r && yt(n))
                    }
                    e.push(u)
                }
            return ui(e)
        }
        function vr(n, i) {
            var u = i.length > 0
              , f = n.length > 0
              , o = function(o, s, h, c, l) {
                var y, d, w, k = 0, a = "0", g = o && [], p = [], nt = ct, tt = o || f && t.find.TAG("*", l), it = v += null == nt ? 1 : Math.random() || .1, rt = tt.length;
                for (l && (ct = s !== e && s); a !== rt && null != (y = tt[a]); a++) {
                    if (f && y) {
                        for (d = 0; w = n[d++]; )
                            if (w(y, s, h)) {
                                c.push(y);
                                break
                            }
                        l && (v = it)
                    }
                    u && ((y = !w && y) && k--,
                    o && g.push(y))
                }
                if (k += a,
                u && a !== k) {
                    for (d = 0; w = i[d++]; )
                        w(g, p, s, h);
                    if (o) {
                        if (k > 0)
                            while (a--)
                                g[a] || p[a] || (p[a] = gi.call(c));
                        p = pt(p)
                    }
                    b.apply(c, p);
                    l && !o && p.length > 0 && k + i.length > 1 && r.uniqueSort(c)
                }
                return l && (v = it,
                ct = nt),
                g
            };
            return u ? h(o) : o
        }
        var it, u, t, ht, oi, et, wt, si, ct, y, rt, p, e, l, a, o, g, lt, ot, f = "sizzle" + -new Date, s = n.document, v = 0, ki = 0, hi = ni(), ci = ni(), li = ni(), bt = function(n, t) {
            return n === t && (rt = !0),
            0
        }, ut = "undefined", ai = -2147483648, di = {}.hasOwnProperty, w = [], gi = w.pop, nr = w.push, b = w.push, vi = w.slice, nt = w.indexOf || function(n) {
            for (var t = 0, i = this.length; i > t; t++)
                if (this[t] === n)
                    return t;
            return -1
        }
        , kt = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", i = "[\\x20\\t\\r\\n\\f]", ft = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", yi = ft.replace("w", "w#"), pi = "\\[" + i + "*(" + ft + ")(?:" + i + "*([*^$|!~]?=)" + i + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + yi + "))|)" + i + "*\\]", dt = ":(" + ft + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + pi + ")*)|.*)\\)|)", at = new RegExp("^" + i + "+|((?:^|[^\\\\])(?:\\\\.)*)" + i + "+$","g"), tr = new RegExp("^" + i + "*," + i + "*"), ir = new RegExp("^" + i + "*([>+~]|" + i + ")" + i + "*"), rr = new RegExp("=" + i + "*([^\\]'\"]*?)" + i + "*\\]","g"), ur = new RegExp(dt), fr = new RegExp("^" + yi + "$"), vt = {
            ID: new RegExp("^#(" + ft + ")"),
            CLASS: new RegExp("^\\.(" + ft + ")"),
            TAG: new RegExp("^(" + ft.replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + pi),
            PSEUDO: new RegExp("^" + dt),
            CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + i + "*(even|odd|(([+-]|)(\\d*)n|)" + i + "*(?:([+-]|)" + i + "*(\\d+)|))" + i + "*\\)|)","i"),
            bool: new RegExp("^(?:" + kt + ")$","i"),
            needsContext: new RegExp("^" + i + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + i + "*((?:-\\d)?\\d*)" + i + "*\\)|)(?=[^-]|$)","i")
        }, er = /^(?:input|select|textarea|button)$/i, or = /^h\d$/i, st = /^[^{]+\{\s*\[native \w/, sr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, gt = /[+~]/, hr = /'|\\/g, k = new RegExp("\\\\([\\da-f]{1,6}" + i + "?|(" + i + ")|.)","ig"), d = function(n, t, i) {
            var r = "0x" + t - 65536;
            return r !== r || i ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(r >> 10 | 55296, 1023 & r | 56320)
        };
        try {
            b.apply(w = vi.call(s.childNodes), s.childNodes);
            w[s.childNodes.length].nodeType
        } catch (yr) {
            b = {
                apply: w.length ? function(n, t) {
                    nr.apply(n, vi.call(t))
                }
                : function(n, t) {
                    for (var i = n.length, r = 0; n[i++] = t[r++]; )
                        ;
                    n.length = i - 1
                }
            }
        }
        u = r.support = {};
        oi = r.isXML = function(n) {
            var t = n && (n.ownerDocument || n).documentElement;
            return t ? "HTML" !== t.nodeName : !1
        }
        ;
        p = r.setDocument = function(n) {
            var v, r = n ? n.ownerDocument || n : s, h = r.defaultView;
            return r !== e && 9 === r.nodeType && r.documentElement ? (e = r,
            l = r.documentElement,
            a = !oi(r),
            h && h !== h.top && (h.addEventListener ? h.addEventListener("unload", function() {
                p()
            }, !1) : h.attachEvent && h.attachEvent("onunload", function() {
                p()
            })),
            u.attributes = c(function(n) {
                return n.className = "i",
                !n.getAttribute("className")
            }),
            u.getElementsByTagName = c(function(n) {
                return n.appendChild(r.createComment("")),
                !n.getElementsByTagName("*").length
            }),
            u.getElementsByClassName = st.test(r.getElementsByClassName) && c(function(n) {
                return n.innerHTML = "<div class='a'><\/div><div class='a i'><\/div>",
                n.firstChild.className = "i",
                2 === n.getElementsByClassName("i").length
            }),
            u.getById = c(function(n) {
                return l.appendChild(n).id = f,
                !r.getElementsByName || !r.getElementsByName(f).length
            }),
            u.getById ? (t.find.ID = function(n, t) {
                if (typeof t.getElementById !== ut && a) {
                    var i = t.getElementById(n);
                    return i && i.parentNode ? [i] : []
                }
            }
            ,
            t.filter.ID = function(n) {
                var t = n.replace(k, d);
                return function(n) {
                    return n.getAttribute("id") === t
                }
            }
            ) : (delete t.find.ID,
            t.filter.ID = function(n) {
                var t = n.replace(k, d);
                return function(n) {
                    var i = typeof n.getAttributeNode !== ut && n.getAttributeNode("id");
                    return i && i.value === t
                }
            }
            ),
            t.find.TAG = u.getElementsByTagName ? function(n, t) {
                if (typeof t.getElementsByTagName !== ut)
                    return t.getElementsByTagName(n)
            }
            : function(n, t) {
                var i, r = [], f = 0, u = t.getElementsByTagName(n);
                if ("*" === n) {
                    while (i = u[f++])
                        1 === i.nodeType && r.push(i);
                    return r
                }
                return u
            }
            ,
            t.find.CLASS = u.getElementsByClassName && function(n, t) {
                if (typeof t.getElementsByClassName !== ut && a)
                    return t.getElementsByClassName(n)
            }
            ,
            g = [],
            o = [],
            (u.qsa = st.test(r.querySelectorAll)) && (c(function(n) {
                n.innerHTML = "<select msallowclip=''><option selected=''><\/option><\/select>";
                n.querySelectorAll("[msallowclip^='']").length && o.push("[*^$]=" + i + "*(?:''|\"\")");
                n.querySelectorAll("[selected]").length || o.push("\\[" + i + "*(?:value|" + kt + ")");
                n.querySelectorAll(":checked").length || o.push(":checked")
            }),
            c(function(n) {
                var t = r.createElement("input");
                t.setAttribute("type", "hidden");
                n.appendChild(t).setAttribute("name", "D");
                n.querySelectorAll("[name=d]").length && o.push("name" + i + "*[*^$|!~]?=");
                n.querySelectorAll(":enabled").length || o.push(":enabled", ":disabled");
                n.querySelectorAll("*,:x");
                o.push(",.*:")
            })),
            (u.matchesSelector = st.test(lt = l.matches || l.webkitMatchesSelector || l.mozMatchesSelector || l.oMatchesSelector || l.msMatchesSelector)) && c(function(n) {
                u.disconnectedMatch = lt.call(n, "div");
                lt.call(n, "[s!='']:x");
                g.push("!=", dt)
            }),
            o = o.length && new RegExp(o.join("|")),
            g = g.length && new RegExp(g.join("|")),
            v = st.test(l.compareDocumentPosition),
            ot = v || st.test(l.contains) ? function(n, t) {
                var r = 9 === n.nodeType ? n.documentElement : n
                  , i = t && t.parentNode;
                return n === i || !(!i || 1 !== i.nodeType || !(r.contains ? r.contains(i) : n.compareDocumentPosition && 16 & n.compareDocumentPosition(i)))
            }
            : function(n, t) {
                if (t)
                    while (t = t.parentNode)
                        if (t === n)
                            return !0;
                return !1
            }
            ,
            bt = v ? function(n, t) {
                if (n === t)
                    return rt = !0,
                    0;
                var i = !n.compareDocumentPosition - !t.compareDocumentPosition;
                return i ? i : (i = (n.ownerDocument || n) === (t.ownerDocument || t) ? n.compareDocumentPosition(t) : 1,
                1 & i || !u.sortDetached && t.compareDocumentPosition(n) === i ? n === r || n.ownerDocument === s && ot(s, n) ? -1 : t === r || t.ownerDocument === s && ot(s, t) ? 1 : y ? nt.call(y, n) - nt.call(y, t) : 0 : 4 & i ? -1 : 1)
            }
            : function(n, t) {
                if (n === t)
                    return rt = !0,
                    0;
                var i, u = 0, o = n.parentNode, h = t.parentNode, f = [n], e = [t];
                if (!o || !h)
                    return n === r ? -1 : t === r ? 1 : o ? -1 : h ? 1 : y ? nt.call(y, n) - nt.call(y, t) : 0;
                if (o === h)
                    return wi(n, t);
                for (i = n; i = i.parentNode; )
                    f.unshift(i);
                for (i = t; i = i.parentNode; )
                    e.unshift(i);
                while (f[u] === e[u])
                    u++;
                return u ? wi(f[u], e[u]) : f[u] === s ? -1 : e[u] === s ? 1 : 0
            }
            ,
            r) : e
        }
        ;
        r.matches = function(n, t) {
            return r(n, null, null, t)
        }
        ;
        r.matchesSelector = function(n, t) {
            if ((n.ownerDocument || n) !== e && p(n),
            t = t.replace(rr, "='$1']"),
            !(!u.matchesSelector || !a || g && g.test(t) || o && o.test(t)))
                try {
                    var i = lt.call(n, t);
                    if (i || u.disconnectedMatch || n.document && 11 !== n.document.nodeType)
                        return i
                } catch (f) {}
            return r(t, e, null, [n]).length > 0
        }
        ;
        r.contains = function(n, t) {
            return (n.ownerDocument || n) !== e && p(n),
            ot(n, t)
        }
        ;
        r.attr = function(n, i) {
            (n.ownerDocument || n) !== e && p(n);
            var f = t.attrHandle[i.toLowerCase()]
              , r = f && di.call(t.attrHandle, i.toLowerCase()) ? f(n, i, !a) : void 0;
            return void 0 !== r ? r : u.attributes || !a ? n.getAttribute(i) : (r = n.getAttributeNode(i)) && r.specified ? r.value : null
        }
        ;
        r.error = function(n) {
            throw new Error("Syntax error, unrecognized expression: " + n);
        }
        ;
        r.uniqueSort = function(n) {
            var r, f = [], t = 0, i = 0;
            if (rt = !u.detectDuplicates,
            y = !u.sortStable && n.slice(0),
            n.sort(bt),
            rt) {
                while (r = n[i++])
                    r === n[i] && (t = f.push(i));
                while (t--)
                    n.splice(f[t], 1)
            }
            return y = null,
            n
        }
        ;
        ht = r.getText = function(n) {
            var r, i = "", u = 0, t = n.nodeType;
            if (t) {
                if (1 === t || 9 === t || 11 === t) {
                    if ("string" == typeof n.textContent)
                        return n.textContent;
                    for (n = n.firstChild; n; n = n.nextSibling)
                        i += ht(n)
                } else if (3 === t || 4 === t)
                    return n.nodeValue
            } else
                while (r = n[u++])
                    i += ht(r);
            return i
        }
        ;
        t = r.selectors = {
            cacheLength: 50,
            createPseudo: h,
            match: vt,
            attrHandle: {},
            find: {},
            relative: {
                ">": {
                    dir: "parentNode",
                    first: !0
                },
                " ": {
                    dir: "parentNode"
                },
                "+": {
                    dir: "previousSibling",
                    first: !0
                },
                "~": {
                    dir: "previousSibling"
                }
            },
            preFilter: {
                ATTR: function(n) {
                    return n[1] = n[1].replace(k, d),
                    n[3] = (n[3] || n[4] || n[5] || "").replace(k, d),
                    "~=" === n[2] && (n[3] = " " + n[3] + " "),
                    n.slice(0, 4)
                },
                CHILD: function(n) {
                    return n[1] = n[1].toLowerCase(),
                    "nth" === n[1].slice(0, 3) ? (n[3] || r.error(n[0]),
                    n[4] = +(n[4] ? n[5] + (n[6] || 1) : 2 * ("even" === n[3] || "odd" === n[3])),
                    n[5] = +(n[7] + n[8] || "odd" === n[3])) : n[3] && r.error(n[0]),
                    n
                },
                PSEUDO: function(n) {
                    var i, t = !n[6] && n[2];
                    return vt.CHILD.test(n[0]) ? null : (n[3] ? n[2] = n[4] || n[5] || "" : t && ur.test(t) && (i = et(t, !0)) && (i = t.indexOf(")", t.length - i) - t.length) && (n[0] = n[0].slice(0, i),
                    n[2] = t.slice(0, i)),
                    n.slice(0, 3))
                }
            },
            filter: {
                TAG: function(n) {
                    var t = n.replace(k, d).toLowerCase();
                    return "*" === n ? function() {
                        return !0
                    }
                    : function(n) {
                        return n.nodeName && n.nodeName.toLowerCase() === t
                    }
                },
                CLASS: function(n) {
                    var t = hi[n + " "];
                    return t || (t = new RegExp("(^|" + i + ")" + n + "(" + i + "|$)")) && hi(n, function(n) {
                        return t.test("string" == typeof n.className && n.className || typeof n.getAttribute !== ut && n.getAttribute("class") || "")
                    })
                },
                ATTR: function(n, t, i) {
                    return function(u) {
                        var f = r.attr(u, n);
                        return null == f ? "!=" === t : t ? (f += "",
                        "=" === t ? f === i : "!=" === t ? f !== i : "^=" === t ? i && 0 === f.indexOf(i) : "*=" === t ? i && f.indexOf(i) > -1 : "$=" === t ? i && f.slice(-i.length) === i : "~=" === t ? (" " + f + " ").indexOf(i) > -1 : "|=" === t ? f === i || f.slice(0, i.length + 1) === i + "-" : !1) : !0
                    }
                },
                CHILD: function(n, t, i, r, u) {
                    var s = "nth" !== n.slice(0, 3)
                      , o = "last" !== n.slice(-4)
                      , e = "of-type" === t;
                    return 1 === r && 0 === u ? function(n) {
                        return !!n.parentNode
                    }
                    : function(t, i, h) {
                        var a, k, c, l, y, w, b = s !== o ? "nextSibling" : "previousSibling", p = t.parentNode, g = e && t.nodeName.toLowerCase(), d = !h && !e;
                        if (p) {
                            if (s) {
                                while (b) {
                                    for (c = t; c = c[b]; )
                                        if (e ? c.nodeName.toLowerCase() === g : 1 === c.nodeType)
                                            return !1;
                                    w = b = "only" === n && !w && "nextSibling"
                                }
                                return !0
                            }
                            if (w = [o ? p.firstChild : p.lastChild],
                            o && d) {
                                for (k = p[f] || (p[f] = {}),
                                a = k[n] || [],
                                y = a[0] === v && a[1],
                                l = a[0] === v && a[2],
                                c = y && p.childNodes[y]; c = ++y && c && c[b] || (l = y = 0) || w.pop(); )
                                    if (1 === c.nodeType && ++l && c === t) {
                                        k[n] = [v, y, l];
                                        break
                                    }
                            } else if (d && (a = (t[f] || (t[f] = {}))[n]) && a[0] === v)
                                l = a[1];
                            else
                                while (c = ++y && c && c[b] || (l = y = 0) || w.pop())
                                    if ((e ? c.nodeName.toLowerCase() === g : 1 === c.nodeType) && ++l && (d && ((c[f] || (c[f] = {}))[n] = [v, l]),
                                    c === t))
                                        break;
                            return l -= u,
                            l === r || l % r == 0 && l / r >= 0
                        }
                    }
                },
                PSEUDO: function(n, i) {
                    var e, u = t.pseudos[n] || t.setFilters[n.toLowerCase()] || r.error("unsupported pseudo: " + n);
                    return u[f] ? u(i) : u.length > 1 ? (e = [n, n, "", i],
                    t.setFilters.hasOwnProperty(n.toLowerCase()) ? h(function(n, t) {
                        for (var r, f = u(n, i), e = f.length; e--; )
                            r = nt.call(n, f[e]),
                            n[r] = !(t[r] = f[e])
                    }) : function(n) {
                        return u(n, 0, e)
                    }
                    ) : u
                }
            },
            pseudos: {
                not: h(function(n) {
                    var i = []
                      , r = []
                      , t = wt(n.replace(at, "$1"));
                    return t[f] ? h(function(n, i, r, u) {
                        for (var e, o = t(n, null, u, []), f = n.length; f--; )
                            (e = o[f]) && (n[f] = !(i[f] = e))
                    }) : function(n, u, f) {
                        return i[0] = n,
                        t(i, null, f, r),
                        !r.pop()
                    }
                }),
                has: h(function(n) {
                    return function(t) {
                        return r(n, t).length > 0
                    }
                }),
                contains: h(function(n) {
                    return function(t) {
                        return (t.textContent || t.innerText || ht(t)).indexOf(n) > -1
                    }
                }),
                lang: h(function(n) {
                    return fr.test(n || "") || r.error("unsupported lang: " + n),
                    n = n.replace(k, d).toLowerCase(),
                    function(t) {
                        var i;
                        do
                            if (i = a ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang"))
                                return i = i.toLowerCase(),
                                i === n || 0 === i.indexOf(n + "-");
                        while ((t = t.parentNode) && 1 === t.nodeType);return !1
                    }
                }),
                target: function(t) {
                    var i = n.location && n.location.hash;
                    return i && i.slice(1) === t.id
                },
                root: function(n) {
                    return n === l
                },
                focus: function(n) {
                    return n === e.activeElement && (!e.hasFocus || e.hasFocus()) && !!(n.type || n.href || ~n.tabIndex)
                },
                enabled: function(n) {
                    return n.disabled === !1
                },
                disabled: function(n) {
                    return n.disabled === !0
                },
                checked: function(n) {
                    var t = n.nodeName.toLowerCase();
                    return "input" === t && !!n.checked || "option" === t && !!n.selected
                },
                selected: function(n) {
                    return n.parentNode && n.parentNode.selectedIndex,
                    n.selected === !0
                },
                empty: function(n) {
                    for (n = n.firstChild; n; n = n.nextSibling)
                        if (n.nodeType < 6)
                            return !1;
                    return !0
                },
                parent: function(n) {
                    return !t.pseudos.empty(n)
                },
                header: function(n) {
                    return or.test(n.nodeName)
                },
                input: function(n) {
                    return er.test(n.nodeName)
                },
                button: function(n) {
                    var t = n.nodeName.toLowerCase();
                    return "input" === t && "button" === n.type || "button" === t
                },
                text: function(n) {
                    var t;
                    return "input" === n.nodeName.toLowerCase() && "text" === n.type && (null == (t = n.getAttribute("type")) || "text" === t.toLowerCase())
                },
                first: tt(function() {
                    return [0]
                }),
                last: tt(function(n, t) {
                    return [t - 1]
                }),
                eq: tt(function(n, t, i) {
                    return [0 > i ? i + t : i]
                }),
                even: tt(function(n, t) {
                    for (var i = 0; t > i; i += 2)
                        n.push(i);
                    return n
                }),
                odd: tt(function(n, t) {
                    for (var i = 1; t > i; i += 2)
                        n.push(i);
                    return n
                }),
                lt: tt(function(n, t, i) {
                    for (var r = 0 > i ? i + t : i; --r >= 0; )
                        n.push(r);
                    return n
                }),
                gt: tt(function(n, t, i) {
                    for (var r = 0 > i ? i + t : i; ++r < t; )
                        n.push(r);
                    return n
                })
            }
        };
        t.pseudos.nth = t.pseudos.eq;
        for (it in {
            radio: !0,
            checkbox: !0,
            file: !0,
            password: !0,
            image: !0
        })
            t.pseudos[it] = cr(it);
        for (it in {
            submit: !0,
            reset: !0
        })
            t.pseudos[it] = lr(it);
        return bi.prototype = t.filters = t.pseudos,
        t.setFilters = new bi,
        et = r.tokenize = function(n, i) {
            var e, f, s, o, u, h, c, l = ci[n + " "];
            if (l)
                return i ? 0 : l.slice(0);
            for (u = n,
            h = [],
            c = t.preFilter; u; ) {
                (!e || (f = tr.exec(u))) && (f && (u = u.slice(f[0].length) || u),
                h.push(s = []));
                e = !1;
                (f = ir.exec(u)) && (e = f.shift(),
                s.push({
                    value: e,
                    type: f[0].replace(at, " ")
                }),
                u = u.slice(e.length));
                for (o in t.filter)
                    (f = vt[o].exec(u)) && (!c[o] || (f = c[o](f))) && (e = f.shift(),
                    s.push({
                        value: e,
                        type: o,
                        matches: f
                    }),
                    u = u.slice(e.length));
                if (!e)
                    break
            }
            return i ? u.length : u ? r.error(n) : ci(n, h).slice(0)
        }
        ,
        wt = r.compile = function(n, t) {
            var r, u = [], e = [], i = li[n + " "];
            if (!i) {
                for (t || (t = et(n)),
                r = t.length; r--; )
                    i = ei(t[r]),
                    i[f] ? u.push(i) : e.push(i);
                i = li(n, vr(e, u));
                i.selector = n
            }
            return i
        }
        ,
        si = r.select = function(n, i, r, f) {
            var s, e, o, l, v, c = "function" == typeof n && n, h = !f && et(n = c.selector || n);
            if (r = r || [],
            1 === h.length) {
                if (e = h[0] = h[0].slice(0),
                e.length > 2 && "ID" === (o = e[0]).type && u.getById && 9 === i.nodeType && a && t.relative[e[1].type]) {
                    if (i = (t.find.ID(o.matches[0].replace(k, d), i) || [])[0],
                    !i)
                        return r;
                    c && (i = i.parentNode);
                    n = n.slice(e.shift().value.length)
                }
                for (s = vt.needsContext.test(n) ? 0 : e.length; s--; ) {
                    if (o = e[s],
                    t.relative[l = o.type])
                        break;
                    if ((v = t.find[l]) && (f = v(o.matches[0].replace(k, d), gt.test(e[0].type) && ii(i.parentNode) || i))) {
                        if (e.splice(s, 1),
                        n = f.length && yt(e),
                        !n)
                            return b.apply(r, f),
                            r;
                        break
                    }
                }
            }
            return (c || wt(n, h))(f, i, !a, r, gt.test(n) && ii(i.parentNode) || i),
            r
        }
        ,
        u.sortStable = f.split("").sort(bt).join("") === f,
        u.detectDuplicates = !!rt,
        p(),
        u.sortDetached = c(function(n) {
            return 1 & n.compareDocumentPosition(e.createElement("div"))
        }),
        c(function(n) {
            return n.innerHTML = "<a href='#'><\/a>",
            "#" === n.firstChild.getAttribute("href")
        }) || ti("type|href|height|width", function(n, t, i) {
            if (!i)
                return n.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
        }),
        u.attributes && c(function(n) {
            return n.innerHTML = "<input/>",
            n.firstChild.setAttribute("value", ""),
            "" === n.firstChild.getAttribute("value")
        }) || ti("value", function(n, t, i) {
            if (!i && "input" === n.nodeName.toLowerCase())
                return n.defaultValue
        }),
        c(function(n) {
            return null == n.getAttribute("disabled")
        }) || ti(kt, function(n, t, i) {
            var r;
            if (!i)
                return n[t] === !0 ? t.toLowerCase() : (r = n.getAttributeNode(t)) && r.specified ? r.value : null
        }),
        r
    }(n);
    i.find = y;
    i.expr = y.selectors;
    i.expr[":"] = i.expr.pseudos;
    i.unique = y.uniqueSort;
    i.text = y.getText;
    i.isXMLDoc = y.isXML;
    i.contains = y.contains;
    var di = i.expr.match.needsContext
      , gi = /^<(\w+)\s*\/?>(?:<\/\1>|)$/
      , ef = /^.[^:#\[\.,]*$/;
    i.filter = function(n, t, r) {
        var u = t[0];
        return r && (n = ":not(" + n + ")"),
        1 === t.length && 1 === u.nodeType ? i.find.matchesSelector(u, n) ? [u] : [] : i.find.matches(n, i.grep(t, function(n) {
            return 1 === n.nodeType
        }))
    }
    ;
    i.fn.extend({
        find: function(n) {
            var t, u = this.length, r = [], f = this;
            if ("string" != typeof n)
                return this.pushStack(i(n).filter(function() {
                    for (t = 0; u > t; t++)
                        if (i.contains(f[t], this))
                            return !0
                }));
            for (t = 0; u > t; t++)
                i.find(n, f[t], r);
            return r = this.pushStack(u > 1 ? i.unique(r) : r),
            r.selector = this.selector ? this.selector + " " + n : n,
            r
        },
        filter: function(n) {
            return this.pushStack(fi(this, n || [], !1))
        },
        not: function(n) {
            return this.pushStack(fi(this, n || [], !0))
        },
        is: function(n) {
            return !!fi(this, "string" == typeof n && di.test(n) ? i(n) : n || [], !1).length
        }
    });
    nr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;
    tr = i.fn.init = function(n, t) {
        var r, f;
        if (!n)
            return this;
        if ("string" == typeof n) {
            if (r = "<" === n[0] && ">" === n[n.length - 1] && n.length >= 3 ? [null, n, null] : nr.exec(n),
            !r || !r[1] && t)
                return !t || t.jquery ? (t || st).find(n) : this.constructor(t).find(n);
            if (r[1]) {
                if (t = t instanceof i ? t[0] : t,
                i.merge(this, i.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : u, !0)),
                gi.test(r[1]) && i.isPlainObject(t))
                    for (r in t)
                        i.isFunction(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
                return this
            }
            return f = u.getElementById(r[2]),
            f && f.parentNode && (this.length = 1,
            this[0] = f),
            this.context = u,
            this.selector = n,
            this
        }
        return n.nodeType ? (this.context = this[0] = n,
        this.length = 1,
        this) : i.isFunction(n) ? "undefined" != typeof st.ready ? st.ready(n) : n(i) : (void 0 !== n.selector && (this.selector = n.selector,
        this.context = n.context),
        i.makeArray(n, this))
    }
    ;
    tr.prototype = i.fn;
    st = i(u);
    ir = /^(?:parents|prev(?:Until|All))/;
    rr = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    i.extend({
        dir: function(n, t, r) {
            for (var u = [], f = void 0 !== r; (n = n[t]) && 9 !== n.nodeType; )
                if (1 === n.nodeType) {
                    if (f && i(n).is(r))
                        break;
                    u.push(n)
                }
            return u
        },
        sibling: function(n, t) {
            for (var i = []; n; n = n.nextSibling)
                1 === n.nodeType && n !== t && i.push(n);
            return i
        }
    });
    i.fn.extend({
        has: function(n) {
            var t = i(n, this)
              , r = t.length;
            return this.filter(function() {
                for (var n = 0; r > n; n++)
                    if (i.contains(this, t[n]))
                        return !0
            })
        },
        closest: function(n, t) {
            for (var r, f = 0, o = this.length, u = [], e = di.test(n) || "string" != typeof n ? i(n, t || this.context) : 0; o > f; f++)
                for (r = this[f]; r && r !== t; r = r.parentNode)
                    if (r.nodeType < 11 && (e ? e.index(r) > -1 : 1 === r.nodeType && i.find.matchesSelector(r, n))) {
                        u.push(r);
                        break
                    }
            return this.pushStack(u.length > 1 ? i.unique(u) : u)
        },
        index: function(n) {
            return n ? "string" == typeof n ? et.call(i(n), this[0]) : et.call(this, n.jquery ? n[0] : n) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        },
        add: function(n, t) {
            return this.pushStack(i.unique(i.merge(this.get(), i(n, t))))
        },
        addBack: function(n) {
            return this.add(null == n ? this.prevObject : this.prevObject.filter(n))
        }
    });
    i.each({
        parent: function(n) {
            var t = n.parentNode;
            return t && 11 !== t.nodeType ? t : null
        },
        parents: function(n) {
            return i.dir(n, "parentNode")
        },
        parentsUntil: function(n, t, r) {
            return i.dir(n, "parentNode", r)
        },
        next: function(n) {
            return ur(n, "nextSibling")
        },
        prev: function(n) {
            return ur(n, "previousSibling")
        },
        nextAll: function(n) {
            return i.dir(n, "nextSibling")
        },
        prevAll: function(n) {
            return i.dir(n, "previousSibling")
        },
        nextUntil: function(n, t, r) {
            return i.dir(n, "nextSibling", r)
        },
        prevUntil: function(n, t, r) {
            return i.dir(n, "previousSibling", r)
        },
        siblings: function(n) {
            return i.sibling((n.parentNode || {}).firstChild, n)
        },
        children: function(n) {
            return i.sibling(n.firstChild)
        },
        contents: function(n) {
            return n.contentDocument || i.merge([], n.childNodes)
        }
    }, function(n, t) {
        i.fn[n] = function(r, u) {
            var f = i.map(this, t, r);
            return "Until" !== n.slice(-5) && (u = r),
            u && "string" == typeof u && (f = i.filter(u, f)),
            this.length > 1 && (rr[n] || i.unique(f),
            ir.test(n) && f.reverse()),
            this.pushStack(f)
        }
    });
    c = /\S+/g;
    ei = {};
    i.Callbacks = function(n) {
        n = "string" == typeof n ? ei[n] || of(n) : i.extend({}, n);
        var u, h, o, c, f, e, t = [], r = !n.once && [], l = function(i) {
            for (u = n.memory && i,
            h = !0,
            e = c || 0,
            c = 0,
            f = t.length,
            o = !0; t && f > e; e++)
                if (t[e].apply(i[0], i[1]) === !1 && n.stopOnFalse) {
                    u = !1;
                    break
                }
            o = !1;
            t && (r ? r.length && l(r.shift()) : u ? t = [] : s.disable())
        }, s = {
            add: function() {
                if (t) {
                    var r = t.length;
                    !function e(r) {
                        i.each(r, function(r, u) {
                            var f = i.type(u);
                            "function" === f ? n.unique && s.has(u) || t.push(u) : u && u.length && "string" !== f && e(u)
                        })
                    }(arguments);
                    o ? f = t.length : u && (c = r,
                    l(u))
                }
                return this
            },
            remove: function() {
                return t && i.each(arguments, function(n, r) {
                    for (var u; (u = i.inArray(r, t, u)) > -1; )
                        t.splice(u, 1),
                        o && (f >= u && f--,
                        e >= u && e--)
                }),
                this
            },
            has: function(n) {
                return n ? i.inArray(n, t) > -1 : !(!t || !t.length)
            },
            empty: function() {
                return t = [],
                f = 0,
                this
            },
            disable: function() {
                return t = r = u = void 0,
                this
            },
            disabled: function() {
                return !t
            },
            lock: function() {
                return r = void 0,
                u || s.disable(),
                this
            },
            locked: function() {
                return !r
            },
            fireWith: function(n, i) {
                return !t || h && !r || (i = i || [],
                i = [n, i.slice ? i.slice() : i],
                o ? r.push(i) : l(i)),
                this
            },
            fire: function() {
                return s.fireWith(this, arguments),
                this
            },
            fired: function() {
                return !!h
            }
        };
        return s
    }
    ;
    i.extend({
        Deferred: function(n) {
            var u = [["resolve", "done", i.Callbacks("once memory"), "resolved"], ["reject", "fail", i.Callbacks("once memory"), "rejected"], ["notify", "progress", i.Callbacks("memory")]]
              , f = "pending"
              , r = {
                state: function() {
                    return f
                },
                always: function() {
                    return t.done(arguments).fail(arguments),
                    this
                },
                then: function() {
                    var n = arguments;
                    return i.Deferred(function(f) {
                        i.each(u, function(u, e) {
                            var o = i.isFunction(n[u]) && n[u];
                            t[e[1]](function() {
                                var n = o && o.apply(this, arguments);
                                n && i.isFunction(n.promise) ? n.promise().done(f.resolve).fail(f.reject).progress(f.notify) : f[e[0] + "With"](this === r ? f.promise() : this, o ? [n] : arguments)
                            })
                        });
                        n = null
                    }).promise()
                },
                promise: function(n) {
                    return null != n ? i.extend(n, r) : r
                }
            }
              , t = {};
            return r.pipe = r.then,
            i.each(u, function(n, i) {
                var e = i[2]
                  , o = i[3];
                r[i[1]] = e.add;
                o && e.add(function() {
                    f = o
                }, u[1 ^ n][2].disable, u[2][2].lock);
                t[i[0]] = function() {
                    return t[i[0] + "With"](this === t ? r : this, arguments),
                    this
                }
                ;
                t[i[0] + "With"] = e.fireWith
            }),
            r.promise(t),
            n && n.call(t, t),
            t
        },
        when: function(n) {
            var t = 0, u = a.call(arguments), r = u.length, e = 1 !== r || n && i.isFunction(n.promise) ? r : 0, f = 1 === e ? n : i.Deferred(), h = function(n, t, i) {
                return function(r) {
                    t[n] = this;
                    i[n] = arguments.length > 1 ? a.call(arguments) : r;
                    i === o ? f.notifyWith(t, i) : --e || f.resolveWith(t, i)
                }
            }, o, c, s;
            if (r > 1)
                for (o = new Array(r),
                c = new Array(r),
                s = new Array(r); r > t; t++)
                    u[t] && i.isFunction(u[t].promise) ? u[t].promise().done(h(t, s, u)).fail(f.reject).progress(h(t, c, o)) : --e;
            return e || f.resolveWith(s, u),
            f.promise()
        }
    });
    i.fn.ready = function(n) {
        return i.ready.promise().done(n),
        this
    }
    ;
    i.extend({
        isReady: !1,
        readyWait: 1,
        holdReady: function(n) {
            n ? i.readyWait++ : i.ready(!0)
        },
        ready: function(n) {
            (n === !0 ? --i.readyWait : i.isReady) || (i.isReady = !0,
            n !== !0 && --i.readyWait > 0 || (ht.resolveWith(u, [i]),
            i.fn.triggerHandler && (i(u).triggerHandler("ready"),
            i(u).off("ready"))))
        }
    });
    i.ready.promise = function(t) {
        return ht || (ht = i.Deferred(),
        "complete" === u.readyState ? setTimeout(i.ready) : (u.addEventListener("DOMContentLoaded", ct, !1),
        n.addEventListener("load", ct, !1))),
        ht.promise(t)
    }
    ;
    i.ready.promise();
    l = i.access = function(n, t, r, u, f, e, o) {
        var s = 0
          , c = n.length
          , h = null == r;
        if ("object" === i.type(r)) {
            f = !0;
            for (s in r)
                i.access(n, t, s, r[s], !0, e, o)
        } else if (void 0 !== u && (f = !0,
        i.isFunction(u) || (o = !0),
        h && (o ? (t.call(n, u),
        t = null) : (h = t,
        t = function(n, t, r) {
            return h.call(i(n), r)
        }
        )),
        t))
            for (; c > s; s++)
                t(n[s], r, o ? u : u.call(n[s], s, t(n[s], r)));
        return f ? n : h ? t.call(n) : c ? t(n[0], r) : e
    }
    ;
    i.acceptData = function(n) {
        return 1 === n.nodeType || 9 === n.nodeType || !+n.nodeType
    }
    ;
    p.uid = 1;
    p.accepts = i.acceptData;
    p.prototype = {
        key: function(n) {
            if (!p.accepts(n))
                return 0;
            var r = {}
              , t = n[this.expando];
            if (!t) {
                t = p.uid++;
                try {
                    r[this.expando] = {
                        value: t
                    };
                    Object.defineProperties(n, r)
                } catch (u) {
                    r[this.expando] = t;
                    i.extend(n, r)
                }
            }
            return this.cache[t] || (this.cache[t] = {}),
            t
        },
        set: function(n, t, r) {
            var f, e = this.key(n), u = this.cache[e];
            if ("string" == typeof t)
                u[t] = r;
            else if (i.isEmptyObject(u))
                i.extend(this.cache[e], t);
            else
                for (f in t)
                    u[f] = t[f];
            return u
        },
        get: function(n, t) {
            var i = this.cache[this.key(n)];
            return void 0 === t ? i : i[t]
        },
        access: function(n, t, r) {
            var u;
            return void 0 === t || t && "string" == typeof t && void 0 === r ? (u = this.get(n, t),
            void 0 !== u ? u : this.get(n, i.camelCase(t))) : (this.set(n, t, r),
            void 0 !== r ? r : t)
        },
        remove: function(n, t) {
            var u, r, f, o = this.key(n), e = this.cache[o];
            if (void 0 === t)
                this.cache[o] = {};
            else
                for (i.isArray(t) ? r = t.concat(t.map(i.camelCase)) : (f = i.camelCase(t),
                (t in e) ? r = [t, f] : (r = f,
                r = (r in e) ? [r] : r.match(c) || [])),
                u = r.length; u--; )
                    delete e[r[u]]
        },
        hasData: function(n) {
            return !i.isEmptyObject(this.cache[n[this.expando]] || {})
        },
        discard: function(n) {
            n[this.expando] && delete this.cache[n[this.expando]]
        }
    };
    var r = new p
      , e = new p
      , sf = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/
      , hf = /([A-Z])/g;
    i.extend({
        hasData: function(n) {
            return e.hasData(n) || r.hasData(n)
        },
        data: function(n, t, i) {
            return e.access(n, t, i)
        },
        removeData: function(n, t) {
            e.remove(n, t)
        },
        _data: function(n, t, i) {
            return r.access(n, t, i)
        },
        _removeData: function(n, t) {
            r.remove(n, t)
        }
    });
    i.fn.extend({
        data: function(n, t) {
            var o, f, s, u = this[0], h = u && u.attributes;
            if (void 0 === n) {
                if (this.length && (s = e.get(u),
                1 === u.nodeType && !r.get(u, "hasDataAttrs"))) {
                    for (o = h.length; o--; )
                        h[o] && (f = h[o].name,
                        0 === f.indexOf("data-") && (f = i.camelCase(f.slice(5)),
                        fr(u, f, s[f])));
                    r.set(u, "hasDataAttrs", !0)
                }
                return s
            }
            return "object" == typeof n ? this.each(function() {
                e.set(this, n)
            }) : l(this, function(t) {
                var r, f = i.camelCase(n);
                if (u && void 0 === t) {
                    if ((r = e.get(u, n),
                    void 0 !== r) || (r = e.get(u, f),
                    void 0 !== r) || (r = fr(u, f, void 0),
                    void 0 !== r))
                        return r
                } else
                    this.each(function() {
                        var i = e.get(this, f);
                        e.set(this, f, t);
                        -1 !== n.indexOf("-") && void 0 !== i && e.set(this, n, t)
                    })
            }, null, t, arguments.length > 1, null, !0)
        },
        removeData: function(n) {
            return this.each(function() {
                e.remove(this, n)
            })
        }
    });
    i.extend({
        queue: function(n, t, u) {
            var f;
            if (n)
                return (t = (t || "fx") + "queue",
                f = r.get(n, t),
                u && (!f || i.isArray(u) ? f = r.access(n, t, i.makeArray(u)) : f.push(u)),
                f || [])
        },
        dequeue: function(n, t) {
            t = t || "fx";
            var r = i.queue(n, t)
              , e = r.length
              , u = r.shift()
              , f = i._queueHooks(n, t)
              , o = function() {
                i.dequeue(n, t)
            };
            "inprogress" === u && (u = r.shift(),
            e--);
            u && ("fx" === t && r.unshift("inprogress"),
            delete f.stop,
            u.call(n, o, f));
            !e && f && f.empty.fire()
        },
        _queueHooks: function(n, t) {
            var u = t + "queueHooks";
            return r.get(n, u) || r.access(n, u, {
                empty: i.Callbacks("once memory").add(function() {
                    r.remove(n, [t + "queue", u])
                })
            })
        }
    });
    i.fn.extend({
        queue: function(n, t) {
            var r = 2;
            return "string" != typeof n && (t = n,
            n = "fx",
            r--),
            arguments.length < r ? i.queue(this[0], n) : void 0 === t ? this : this.each(function() {
                var r = i.queue(this, n, t);
                i._queueHooks(this, n);
                "fx" === n && "inprogress" !== r[0] && i.dequeue(this, n)
            })
        },
        dequeue: function(n) {
            return this.each(function() {
                i.dequeue(this, n)
            })
        },
        clearQueue: function(n) {
            return this.queue(n || "fx", [])
        },
        promise: function(n, t) {
            var u, e = 1, o = i.Deferred(), f = this, s = this.length, h = function() {
                --e || o.resolveWith(f, [f])
            };
            for ("string" != typeof n && (t = n,
            n = void 0),
            n = n || "fx"; s--; )
                u = r.get(f[s], n + "queueHooks"),
                u && u.empty && (e++,
                u.empty.add(h));
            return h(),
            o.promise(t)
        }
    });
    var lt = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source
      , w = ["Top", "Right", "Bottom", "Left"]
      , it = function(n, t) {
        return n = t || n,
        "none" === i.css(n, "display") || !i.contains(n.ownerDocument, n)
    }
      , er = /^(?:checkbox|radio)$/i;
    !function() {
        var i = u.createDocumentFragment()
          , n = i.appendChild(u.createElement("div"))
          , t = u.createElement("input");
        t.setAttribute("type", "radio");
        t.setAttribute("checked", "checked");
        t.setAttribute("name", "t");
        n.appendChild(t);
        f.checkClone = n.cloneNode(!0).cloneNode(!0).lastChild.checked;
        n.innerHTML = "<textarea>x<\/textarea>";
        f.noCloneChecked = !!n.cloneNode(!0).lastChild.defaultValue
    }();
    d = "undefined";
    f.focusinBubbles = "onfocusin"in n;
    var cf = /^key/
      , lf = /^(?:mouse|pointer|contextmenu)|click/
      , or = /^(?:focusinfocus|focusoutblur)$/
      , sr = /^([^.]*)(?:\.(.+)|)$/;
    i.event = {
        global: {},
        add: function(n, t, u, f, e) {
            var v, y, w, p, b, h, s, l, o, k, g, a = r.get(n);
            if (a)
                for (u.handler && (v = u,
                u = v.handler,
                e = v.selector),
                u.guid || (u.guid = i.guid++),
                (p = a.events) || (p = a.events = {}),
                (y = a.handle) || (y = a.handle = function(t) {
                    if (typeof i !== d && i.event.triggered !== t.type)
                        return i.event.dispatch.apply(n, arguments)
                }
                ),
                t = (t || "").match(c) || [""],
                b = t.length; b--; )
                    w = sr.exec(t[b]) || [],
                    o = g = w[1],
                    k = (w[2] || "").split(".").sort(),
                    o && (s = i.event.special[o] || {},
                    o = (e ? s.delegateType : s.bindType) || o,
                    s = i.event.special[o] || {},
                    h = i.extend({
                        type: o,
                        origType: g,
                        data: f,
                        handler: u,
                        guid: u.guid,
                        selector: e,
                        needsContext: e && i.expr.match.needsContext.test(e),
                        namespace: k.join(".")
                    }, v),
                    (l = p[o]) || (l = p[o] = [],
                    l.delegateCount = 0,
                    s.setup && s.setup.call(n, f, k, y) !== !1 || n.addEventListener && n.addEventListener(o, y, !1)),
                    s.add && (s.add.call(n, h),
                    h.handler.guid || (h.handler.guid = u.guid)),
                    e ? l.splice(l.delegateCount++, 0, h) : l.push(h),
                    i.event.global[o] = !0)
        },
        remove: function(n, t, u, f, e) {
            var p, k, h, v, w, s, l, a, o, b, d, y = r.hasData(n) && r.get(n);
            if (y && (v = y.events)) {
                for (t = (t || "").match(c) || [""],
                w = t.length; w--; )
                    if (h = sr.exec(t[w]) || [],
                    o = d = h[1],
                    b = (h[2] || "").split(".").sort(),
                    o) {
                        for (l = i.event.special[o] || {},
                        o = (f ? l.delegateType : l.bindType) || o,
                        a = v[o] || [],
                        h = h[2] && new RegExp("(^|\\.)" + b.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                        k = p = a.length; p--; )
                            s = a[p],
                            !e && d !== s.origType || u && u.guid !== s.guid || h && !h.test(s.namespace) || f && f !== s.selector && ("**" !== f || !s.selector) || (a.splice(p, 1),
                            s.selector && a.delegateCount--,
                            l.remove && l.remove.call(n, s));
                        k && !a.length && (l.teardown && l.teardown.call(n, b, y.handle) !== !1 || i.removeEvent(n, o, y.handle),
                        delete v[o])
                    } else
                        for (o in v)
                            i.event.remove(n, o + t[w], u, f, !0);
                i.isEmptyObject(v) && (delete y.handle,
                r.remove(n, "events"))
            }
        },
        trigger: function(t, f, e, o) {
            var w, s, c, b, a, v, l, p = [e || u], h = ri.call(t, "type") ? t.type : t, y = ri.call(t, "namespace") ? t.namespace.split(".") : [];
            if (s = c = e = e || u,
            3 !== e.nodeType && 8 !== e.nodeType && !or.test(h + i.event.triggered) && (h.indexOf(".") >= 0 && (y = h.split("."),
            h = y.shift(),
            y.sort()),
            a = h.indexOf(":") < 0 && "on" + h,
            t = t[i.expando] ? t : new i.Event(h,"object" == typeof t && t),
            t.isTrigger = o ? 2 : 3,
            t.namespace = y.join("."),
            t.namespace_re = t.namespace ? new RegExp("(^|\\.)" + y.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
            t.result = void 0,
            t.target || (t.target = e),
            f = null == f ? [t] : i.makeArray(f, [t]),
            l = i.event.special[h] || {},
            o || !l.trigger || l.trigger.apply(e, f) !== !1)) {
                if (!o && !l.noBubble && !i.isWindow(e)) {
                    for (b = l.delegateType || h,
                    or.test(b + h) || (s = s.parentNode); s; s = s.parentNode)
                        p.push(s),
                        c = s;
                    c === (e.ownerDocument || u) && p.push(c.defaultView || c.parentWindow || n)
                }
                for (w = 0; (s = p[w++]) && !t.isPropagationStopped(); )
                    t.type = w > 1 ? b : l.bindType || h,
                    v = (r.get(s, "events") || {})[t.type] && r.get(s, "handle"),
                    v && v.apply(s, f),
                    v = a && s[a],
                    v && v.apply && i.acceptData(s) && (t.result = v.apply(s, f),
                    t.result === !1 && t.preventDefault());
                return t.type = h,
                o || t.isDefaultPrevented() || l._default && l._default.apply(p.pop(), f) !== !1 || !i.acceptData(e) || a && i.isFunction(e[h]) && !i.isWindow(e) && (c = e[a],
                c && (e[a] = null),
                i.event.triggered = h,
                e[h](),
                i.event.triggered = void 0,
                c && (e[a] = c)),
                t.result
            }
        },
        dispatch: function(n) {
            n = i.event.fix(n);
            var o, s, e, u, t, h = [], c = a.call(arguments), l = (r.get(this, "events") || {})[n.type] || [], f = i.event.special[n.type] || {};
            if (c[0] = n,
            n.delegateTarget = this,
            !f.preDispatch || f.preDispatch.call(this, n) !== !1) {
                for (h = i.event.handlers.call(this, n, l),
                o = 0; (u = h[o++]) && !n.isPropagationStopped(); )
                    for (n.currentTarget = u.elem,
                    s = 0; (t = u.handlers[s++]) && !n.isImmediatePropagationStopped(); )
                        (!n.namespace_re || n.namespace_re.test(t.namespace)) && (n.handleObj = t,
                        n.data = t.data,
                        e = ((i.event.special[t.origType] || {}).handle || t.handler).apply(u.elem, c),
                        void 0 !== e && (n.result = e) === !1 && (n.preventDefault(),
                        n.stopPropagation()));
                return f.postDispatch && f.postDispatch.call(this, n),
                n.result
            }
        },
        handlers: function(n, t) {
            var e, u, f, o, h = [], s = t.delegateCount, r = n.target;
            if (s && r.nodeType && (!n.button || "click" !== n.type))
                for (; r !== this; r = r.parentNode || this)
                    if (r.disabled !== !0 || "click" !== n.type) {
                        for (u = [],
                        e = 0; s > e; e++)
                            o = t[e],
                            f = o.selector + " ",
                            void 0 === u[f] && (u[f] = o.needsContext ? i(f, this).index(r) >= 0 : i.find(f, this, null, [r]).length),
                            u[f] && u.push(o);
                        u.length && h.push({
                            elem: r,
                            handlers: u
                        })
                    }
            return s < t.length && h.push({
                elem: this,
                handlers: t.slice(s)
            }),
            h
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(n, t) {
                return null == n.which && (n.which = null != t.charCode ? t.charCode : t.keyCode),
                n
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(n, t) {
                var e, i, r, f = t.button;
                return null == n.pageX && null != t.clientX && (e = n.target.ownerDocument || u,
                i = e.documentElement,
                r = e.body,
                n.pageX = t.clientX + (i && i.scrollLeft || r && r.scrollLeft || 0) - (i && i.clientLeft || r && r.clientLeft || 0),
                n.pageY = t.clientY + (i && i.scrollTop || r && r.scrollTop || 0) - (i && i.clientTop || r && r.clientTop || 0)),
                n.which || void 0 === f || (n.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0),
                n
            }
        },
        fix: function(n) {
            if (n[i.expando])
                return n;
            var f, e, o, r = n.type, s = n, t = this.fixHooks[r];
            for (t || (this.fixHooks[r] = t = lf.test(r) ? this.mouseHooks : cf.test(r) ? this.keyHooks : {}),
            o = t.props ? this.props.concat(t.props) : this.props,
            n = new i.Event(s),
            f = o.length; f--; )
                e = o[f],
                n[e] = s[e];
            return n.target || (n.target = u),
            3 === n.target.nodeType && (n.target = n.target.parentNode),
            t.filter ? t.filter(n, s) : n
        },
        special: {
            load: {
                noBubble: !0
            },
            focus: {
                trigger: function() {
                    if (this !== hr() && this.focus)
                        return (this.focus(),
                        !1)
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    if (this === hr() && this.blur)
                        return (this.blur(),
                        !1)
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    if ("checkbox" === this.type && this.click && i.nodeName(this, "input"))
                        return (this.click(),
                        !1)
                },
                _default: function(n) {
                    return i.nodeName(n.target, "a")
                }
            },
            beforeunload: {
                postDispatch: function(n) {
                    void 0 !== n.result && n.originalEvent && (n.originalEvent.returnValue = n.result)
                }
            }
        },
        simulate: function(n, t, r, u) {
            var f = i.extend(new i.Event, r, {
                type: n,
                isSimulated: !0,
                originalEvent: {}
            });
            u ? i.event.trigger(f, null, t) : i.event.dispatch.call(t, f);
            f.isDefaultPrevented() && r.preventDefault()
        }
    };
    i.removeEvent = function(n, t, i) {
        n.removeEventListener && n.removeEventListener(t, i, !1)
    }
    ;
    i.Event = function(n, t) {
        return this instanceof i.Event ? (n && n.type ? (this.originalEvent = n,
        this.type = n.type,
        this.isDefaultPrevented = n.defaultPrevented || void 0 === n.defaultPrevented && n.returnValue === !1 ? at : g) : this.type = n,
        t && i.extend(this, t),
        this.timeStamp = n && n.timeStamp || i.now(),
        void (this[i.expando] = !0)) : new i.Event(n,t)
    }
    ;
    i.Event.prototype = {
        isDefaultPrevented: g,
        isPropagationStopped: g,
        isImmediatePropagationStopped: g,
        preventDefault: function() {
            var n = this.originalEvent;
            this.isDefaultPrevented = at;
            n && n.preventDefault && n.preventDefault()
        },
        stopPropagation: function() {
            var n = this.originalEvent;
            this.isPropagationStopped = at;
            n && n.stopPropagation && n.stopPropagation()
        },
        stopImmediatePropagation: function() {
            var n = this.originalEvent;
            this.isImmediatePropagationStopped = at;
            n && n.stopImmediatePropagation && n.stopImmediatePropagation();
            this.stopPropagation()
        }
    };
    i.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(n, t) {
        i.event.special[n] = {
            delegateType: t,
            bindType: t,
            handle: function(n) {
                var u, f = this, r = n.relatedTarget, e = n.handleObj;
                return (!r || r !== f && !i.contains(f, r)) && (n.type = e.origType,
                u = e.handler.apply(this, arguments),
                n.type = t),
                u
            }
        }
    });
    f.focusinBubbles || i.each({
        focus: "focusin",
        blur: "focusout"
    }, function(n, t) {
        var u = function(n) {
            i.event.simulate(t, n.target, i.event.fix(n), !0)
        };
        i.event.special[t] = {
            setup: function() {
                var i = this.ownerDocument || this
                  , f = r.access(i, t);
                f || i.addEventListener(n, u, !0);
                r.access(i, t, (f || 0) + 1)
            },
            teardown: function() {
                var i = this.ownerDocument || this
                  , f = r.access(i, t) - 1;
                f ? r.access(i, t, f) : (i.removeEventListener(n, u, !0),
                r.remove(i, t))
            }
        }
    });
    i.fn.extend({
        on: function(n, t, r, u, f) {
            var e, o;
            if ("object" == typeof n) {
                "string" != typeof t && (r = r || t,
                t = void 0);
                for (o in n)
                    this.on(o, t, r, n[o], f);
                return this
            }
            if (null == r && null == u ? (u = t,
            r = t = void 0) : null == u && ("string" == typeof t ? (u = r,
            r = void 0) : (u = r,
            r = t,
            t = void 0)),
            u === !1)
                u = g;
            else if (!u)
                return this;
            return 1 === f && (e = u,
            u = function(n) {
                return i().off(n),
                e.apply(this, arguments)
            }
            ,
            u.guid = e.guid || (e.guid = i.guid++)),
            this.each(function() {
                i.event.add(this, n, u, r, t)
            })
        },
        one: function(n, t, i, r) {
            return this.on(n, t, i, r, 1)
        },
        off: function(n, t, r) {
            var u, f;
            if (n && n.preventDefault && n.handleObj)
                return u = n.handleObj,
                i(n.delegateTarget).off(u.namespace ? u.origType + "." + u.namespace : u.origType, u.selector, u.handler),
                this;
            if ("object" == typeof n) {
                for (f in n)
                    this.off(f, t, n[f]);
                return this
            }
            return (t === !1 || "function" == typeof t) && (r = t,
            t = void 0),
            r === !1 && (r = g),
            this.each(function() {
                i.event.remove(this, n, r, t)
            })
        },
        trigger: function(n, t) {
            return this.each(function() {
                i.event.trigger(n, t, this)
            })
        },
        triggerHandler: function(n, t) {
            var r = this[0];
            if (r)
                return i.event.trigger(n, t, r, !0)
        }
    });
    var cr = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
      , lr = /<([\w:]+)/
      , af = /<|&#?\w+;/
      , vf = /<(?:script|style|link)/i
      , yf = /checked\s*(?:[^=]|=\s*.checked.)/i
      , ar = /^$|\/(?:java|ecma)script/i
      , pf = /^true\/(.*)/
      , wf = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g
      , h = {
        option: [1, "<select multiple='multiple'>", "<\/select>"],
        thead: [1, "<table>", "<\/table>"],
        col: [2, "<table><colgroup>", "<\/colgroup><\/table>"],
        tr: [2, "<table><tbody>", "<\/tbody><\/table>"],
        td: [3, "<table><tbody><tr>", "<\/tr><\/tbody><\/table>"],
        _default: [0, "", ""]
    };
    h.optgroup = h.option;
    h.tbody = h.tfoot = h.colgroup = h.caption = h.thead;
    h.th = h.td;
    i.extend({
        clone: function(n, t, r) {
            var u, c, s, e, h = n.cloneNode(!0), l = i.contains(n.ownerDocument, n);
            if (!(f.noCloneChecked || 1 !== n.nodeType && 11 !== n.nodeType || i.isXMLDoc(n)))
                for (e = o(h),
                s = o(n),
                u = 0,
                c = s.length; c > u; u++)
                    df(s[u], e[u]);
            if (t)
                if (r)
                    for (s = s || o(n),
                    e = e || o(h),
                    u = 0,
                    c = s.length; c > u; u++)
                        yr(s[u], e[u]);
                else
                    yr(n, h);
            return e = o(h, "script"),
            e.length > 0 && oi(e, !l && o(n, "script")),
            h
        },
        buildFragment: function(n, t, r, u) {
            for (var f, e, y, l, p, a, s = t.createDocumentFragment(), v = [], c = 0, w = n.length; w > c; c++)
                if (f = n[c],
                f || 0 === f)
                    if ("object" === i.type(f))
                        i.merge(v, f.nodeType ? [f] : f);
                    else if (af.test(f)) {
                        for (e = e || s.appendChild(t.createElement("div")),
                        y = (lr.exec(f) || ["", ""])[1].toLowerCase(),
                        l = h[y] || h._default,
                        e.innerHTML = l[1] + f.replace(cr, "<$1><\/$2>") + l[2],
                        a = l[0]; a--; )
                            e = e.lastChild;
                        i.merge(v, e.childNodes);
                        e = s.firstChild;
                        e.textContent = ""
                    } else
                        v.push(t.createTextNode(f));
            for (s.textContent = "",
            c = 0; f = v[c++]; )
                if ((!u || -1 === i.inArray(f, u)) && (p = i.contains(f.ownerDocument, f),
                e = o(s.appendChild(f), "script"),
                p && oi(e),
                r))
                    for (a = 0; f = e[a++]; )
                        ar.test(f.type || "") && r.push(f);
            return s
        },
        cleanData: function(n) {
            for (var f, t, o, u, h = i.event.special, s = 0; void 0 !== (t = n[s]); s++) {
                if (i.acceptData(t) && (u = t[r.expando],
                u && (f = r.cache[u]))) {
                    if (f.events)
                        for (o in f.events)
                            h[o] ? i.event.remove(t, o) : i.removeEvent(t, o, f.handle);
                    r.cache[u] && delete r.cache[u]
                }
                delete e.cache[t[e.expando]]
            }
        }
    });
    i.fn.extend({
        text: function(n) {
            return l(this, function(n) {
                return void 0 === n ? i.text(this) : this.empty().each(function() {
                    (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = n)
                })
            }, null, n, arguments.length)
        },
        append: function() {
            return this.domManip(arguments, function(n) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = vr(this, n);
                    t.appendChild(n)
                }
            })
        },
        prepend: function() {
            return this.domManip(arguments, function(n) {
                if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                    var t = vr(this, n);
                    t.insertBefore(n, t.firstChild)
                }
            })
        },
        before: function() {
            return this.domManip(arguments, function(n) {
                this.parentNode && this.parentNode.insertBefore(n, this)
            })
        },
        after: function() {
            return this.domManip(arguments, function(n) {
                this.parentNode && this.parentNode.insertBefore(n, this.nextSibling)
            })
        },
        remove: function(n, t) {
            for (var r, f = n ? i.filter(n, this) : this, u = 0; null != (r = f[u]); u++)
                t || 1 !== r.nodeType || i.cleanData(o(r)),
                r.parentNode && (t && i.contains(r.ownerDocument, r) && oi(o(r, "script")),
                r.parentNode.removeChild(r));
            return this
        },
        empty: function() {
            for (var n, t = 0; null != (n = this[t]); t++)
                1 === n.nodeType && (i.cleanData(o(n, !1)),
                n.textContent = "");
            return this
        },
        clone: function(n, t) {
            return n = null == n ? !1 : n,
            t = null == t ? n : t,
            this.map(function() {
                return i.clone(this, n, t)
            })
        },
        html: function(n) {
            return l(this, function(n) {
                var t = this[0] || {}
                  , r = 0
                  , u = this.length;
                if (void 0 === n && 1 === t.nodeType)
                    return t.innerHTML;
                if ("string" == typeof n && !vf.test(n) && !h[(lr.exec(n) || ["", ""])[1].toLowerCase()]) {
                    n = n.replace(cr, "<$1><\/$2>");
                    try {
                        for (; u > r; r++)
                            t = this[r] || {},
                            1 === t.nodeType && (i.cleanData(o(t, !1)),
                            t.innerHTML = n);
                        t = 0
                    } catch (f) {}
                }
                t && this.empty().append(n)
            }, null, n, arguments.length)
        },
        replaceWith: function() {
            var n = arguments[0];
            return this.domManip(arguments, function(t) {
                n = this.parentNode;
                i.cleanData(o(this));
                n && n.replaceChild(t, this)
            }),
            n && (n.length || n.nodeType) ? this : this.remove()
        },
        detach: function(n) {
            return this.remove(n, !0)
        },
        domManip: function(n, t) {
            n = bi.apply([], n);
            var h, v, s, c, u, y, e = 0, l = this.length, w = this, b = l - 1, a = n[0], p = i.isFunction(a);
            if (p || l > 1 && "string" == typeof a && !f.checkClone && yf.test(a))
                return this.each(function(i) {
                    var r = w.eq(i);
                    p && (n[0] = a.call(this, i, r.html()));
                    r.domManip(n, t)
                });
            if (l && (h = i.buildFragment(n, this[0].ownerDocument, !1, this),
            v = h.firstChild,
            1 === h.childNodes.length && (h = v),
            v)) {
                for (s = i.map(o(h, "script"), bf),
                c = s.length; l > e; e++)
                    u = h,
                    e !== b && (u = i.clone(u, !0, !0),
                    c && i.merge(s, o(u, "script"))),
                    t.call(this[e], u, e);
                if (c)
                    for (y = s[s.length - 1].ownerDocument,
                    i.map(s, kf),
                    e = 0; c > e; e++)
                        u = s[e],
                        ar.test(u.type || "") && !r.access(u, "globalEval") && i.contains(y, u) && (u.src ? i._evalUrl && i._evalUrl(u.src) : i.globalEval(u.textContent.replace(wf, "")))
            }
            return this
        }
    });
    i.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(n, t) {
        i.fn[n] = function(n) {
            for (var u, f = [], e = i(n), o = e.length - 1, r = 0; o >= r; r++)
                u = r === o ? this : this.clone(!0),
                i(e[r])[t](u),
                ii.apply(f, u.get());
            return this.pushStack(f)
        }
    });
    si = {};
    var wr = /^margin/
      , ci = new RegExp("^(" + lt + ")(?!px)[a-z%]+$","i")
      , yt = function(n) {
        return n.ownerDocument.defaultView.getComputedStyle(n, null)
    };
    !function() {
        var s, o, e = u.documentElement, r = u.createElement("div"), t = u.createElement("div");
        if (t.style) {
            t.style.backgroundClip = "content-box";
            t.cloneNode(!0).style.backgroundClip = "";
            f.clearCloneStyle = "content-box" === t.style.backgroundClip;
            r.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute";
            r.appendChild(t);
            function h() {
                t.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
                t.innerHTML = "";
                e.appendChild(r);
                var i = n.getComputedStyle(t, null);
                s = "1%" !== i.top;
                o = "4px" === i.width;
                e.removeChild(r)
            }
            n.getComputedStyle && i.extend(f, {
                pixelPosition: function() {
                    return h(),
                    s
                },
                boxSizingReliable: function() {
                    return null == o && h(),
                    o
                },
                reliableMarginRight: function() {
                    var f, i = t.appendChild(u.createElement("div"));
                    return i.style.cssText = t.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",
                    i.style.marginRight = i.style.width = "0",
                    t.style.width = "1px",
                    e.appendChild(r),
                    f = !parseFloat(n.getComputedStyle(i, null).marginRight),
                    e.removeChild(r),
                    f
                }
            })
        }
    }();
    i.swap = function(n, t, i, r) {
        var f, u, e = {};
        for (u in t)
            e[u] = n.style[u],
            n.style[u] = t[u];
        f = i.apply(n, r || []);
        for (u in t)
            n.style[u] = e[u];
        return f
    }
    ;
    var gf = /^(none|table(?!-c[ea]).+)/
      , ne = new RegExp("^(" + lt + ")(.*)$","i")
      , te = new RegExp("^([+-])=(" + lt + ")","i")
      , ie = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }
      , kr = {
        letterSpacing: "0",
        fontWeight: "400"
    }
      , dr = ["Webkit", "O", "Moz", "ms"];
    i.extend({
        cssHooks: {
            opacity: {
                get: function(n, t) {
                    if (t) {
                        var i = rt(n, "opacity");
                        return "" === i ? "1" : i
                    }
                }
            }
        },
        cssNumber: {
            columnCount: !0,
            fillOpacity: !0,
            flexGrow: !0,
            flexShrink: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            order: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            float: "cssFloat"
        },
        style: function(n, t, r, u) {
            if (n && 3 !== n.nodeType && 8 !== n.nodeType && n.style) {
                var o, h, e, s = i.camelCase(t), c = n.style;
                return t = i.cssProps[s] || (i.cssProps[s] = gr(c, s)),
                e = i.cssHooks[t] || i.cssHooks[s],
                void 0 === r ? e && "get"in e && void 0 !== (o = e.get(n, !1, u)) ? o : c[t] : (h = typeof r,
                "string" === h && (o = te.exec(r)) && (r = (o[1] + 1) * o[2] + parseFloat(i.css(n, t)),
                h = "number"),
                null != r && r === r && ("number" !== h || i.cssNumber[s] || (r += "px"),
                f.clearCloneStyle || "" !== r || 0 !== t.indexOf("background") || (c[t] = "inherit"),
                e && "set"in e && void 0 === (r = e.set(n, r, u)) || (c[t] = r)),
                void 0)
            }
        },
        css: function(n, t, r, u) {
            var f, s, e, o = i.camelCase(t);
            return t = i.cssProps[o] || (i.cssProps[o] = gr(n.style, o)),
            e = i.cssHooks[t] || i.cssHooks[o],
            e && "get"in e && (f = e.get(n, !0, r)),
            void 0 === f && (f = rt(n, t, u)),
            "normal" === f && t in kr && (f = kr[t]),
            "" === r || r ? (s = parseFloat(f),
            r === !0 || i.isNumeric(s) ? s || 0 : f) : f
        }
    });
    i.each(["height", "width"], function(n, t) {
        i.cssHooks[t] = {
            get: function(n, r, u) {
                if (r)
                    return gf.test(i.css(n, "display")) && 0 === n.offsetWidth ? i.swap(n, ie, function() {
                        return iu(n, t, u)
                    }) : iu(n, t, u)
            },
            set: function(n, r, u) {
                var f = u && yt(n);
                return nu(n, r, u ? tu(n, t, u, "border-box" === i.css(n, "boxSizing", !1, f), f) : 0)
            }
        }
    });
    i.cssHooks.marginRight = br(f.reliableMarginRight, function(n, t) {
        if (t)
            return i.swap(n, {
                display: "inline-block"
            }, rt, [n, "marginRight"])
    });
    i.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(n, t) {
        i.cssHooks[n + t] = {
            expand: function(i) {
                for (var r = 0, f = {}, u = "string" == typeof i ? i.split(" ") : [i]; 4 > r; r++)
                    f[n + w[r] + t] = u[r] || u[r - 2] || u[0];
                return f
            }
        };
        wr.test(n) || (i.cssHooks[n + t].set = nu)
    });
    i.fn.extend({
        css: function(n, t) {
            return l(this, function(n, t, r) {
                var f, e, o = {}, u = 0;
                if (i.isArray(t)) {
                    for (f = yt(n),
                    e = t.length; e > u; u++)
                        o[t[u]] = i.css(n, t[u], !1, f);
                    return o
                }
                return void 0 !== r ? i.style(n, t, r) : i.css(n, t)
            }, n, t, arguments.length > 1)
        },
        show: function() {
            return ru(this, !0)
        },
        hide: function() {
            return ru(this)
        },
        toggle: function(n) {
            return "boolean" == typeof n ? n ? this.show() : this.hide() : this.each(function() {
                it(this) ? i(this).show() : i(this).hide()
            })
        }
    });
    i.Tween = s;
    s.prototype = {
        constructor: s,
        init: function(n, t, r, u, f, e) {
            this.elem = n;
            this.prop = r;
            this.easing = f || "swing";
            this.options = t;
            this.start = this.now = this.cur();
            this.end = u;
            this.unit = e || (i.cssNumber[r] ? "" : "px")
        },
        cur: function() {
            var n = s.propHooks[this.prop];
            return n && n.get ? n.get(this) : s.propHooks._default.get(this)
        },
        run: function(n) {
            var r, t = s.propHooks[this.prop];
            return this.pos = r = this.options.duration ? i.easing[this.easing](n, this.options.duration * n, 0, 1, this.options.duration) : n,
            this.now = (this.end - this.start) * r + this.start,
            this.options.step && this.options.step.call(this.elem, this.now, this),
            t && t.set ? t.set(this) : s.propHooks._default.set(this),
            this
        }
    };
    s.prototype.init.prototype = s.prototype;
    s.propHooks = {
        _default: {
            get: function(n) {
                var t;
                return null == n.elem[n.prop] || n.elem.style && null != n.elem.style[n.prop] ? (t = i.css(n.elem, n.prop, ""),
                t && "auto" !== t ? t : 0) : n.elem[n.prop]
            },
            set: function(n) {
                i.fx.step[n.prop] ? i.fx.step[n.prop](n) : n.elem.style && (null != n.elem.style[i.cssProps[n.prop]] || i.cssHooks[n.prop]) ? i.style(n.elem, n.prop, n.now + n.unit) : n.elem[n.prop] = n.now
            }
        }
    };
    s.propHooks.scrollTop = s.propHooks.scrollLeft = {
        set: function(n) {
            n.elem.nodeType && n.elem.parentNode && (n.elem[n.prop] = n.now)
        }
    };
    i.easing = {
        linear: function(n) {
            return n
        },
        swing: function(n) {
            return .5 - Math.cos(n * Math.PI) / 2
        }
    };
    i.fx = s.prototype.init;
    i.fx.step = {};
    var nt, pt, re = /^(?:toggle|show|hide)$/, uu = new RegExp("^(?:([+-])=|)(" + lt + ")([a-z%]*)$","i"), ue = /queueHooks$/, wt = [fe], ut = {
        "*": [function(n, t) {
            var f = this.createTween(n, t)
              , s = f.cur()
              , r = uu.exec(t)
              , e = r && r[3] || (i.cssNumber[n] ? "" : "px")
              , u = (i.cssNumber[n] || "px" !== e && +s) && uu.exec(i.css(f.elem, n))
              , o = 1
              , h = 20;
            if (u && u[3] !== e) {
                e = e || u[3];
                r = r || [];
                u = +s || 1;
                do
                    o = o || ".5",
                    u /= o,
                    i.style(f.elem, n, u + e);
                while (o !== (o = f.cur() / s) && 1 !== o && --h)
            }
            return r && (u = f.start = +u || +s || 0,
            f.unit = e,
            f.end = r[1] ? u + (r[1] + 1) * r[2] : +r[2]),
            f
        }
        ]
    };
    i.Animation = i.extend(ou, {
        tweener: function(n, t) {
            i.isFunction(n) ? (t = n,
            n = ["*"]) : n = n.split(" ");
            for (var r, u = 0, f = n.length; f > u; u++)
                r = n[u],
                ut[r] = ut[r] || [],
                ut[r].unshift(t)
        },
        prefilter: function(n, t) {
            t ? wt.unshift(n) : wt.push(n)
        }
    });
    i.speed = function(n, t, r) {
        var u = n && "object" == typeof n ? i.extend({}, n) : {
            complete: r || !r && t || i.isFunction(n) && n,
            duration: n,
            easing: r && t || t && !i.isFunction(t) && t
        };
        return u.duration = i.fx.off ? 0 : "number" == typeof u.duration ? u.duration : u.duration in i.fx.speeds ? i.fx.speeds[u.duration] : i.fx.speeds._default,
        (null == u.queue || u.queue === !0) && (u.queue = "fx"),
        u.old = u.complete,
        u.complete = function() {
            i.isFunction(u.old) && u.old.call(this);
            u.queue && i.dequeue(this, u.queue)
        }
        ,
        u
    }
    ;
    i.fn.extend({
        fadeTo: function(n, t, i, r) {
            return this.filter(it).css("opacity", 0).show().end().animate({
                opacity: t
            }, n, i, r)
        },
        animate: function(n, t, u, f) {
            var s = i.isEmptyObject(n)
              , o = i.speed(t, u, f)
              , e = function() {
                var t = ou(this, i.extend({}, n), o);
                (s || r.get(this, "finish")) && t.stop(!0)
            };
            return e.finish = e,
            s || o.queue === !1 ? this.each(e) : this.queue(o.queue, e)
        },
        stop: function(n, t, u) {
            var f = function(n) {
                var t = n.stop;
                delete n.stop;
                t(u)
            };
            return "string" != typeof n && (u = t,
            t = n,
            n = void 0),
            t && n !== !1 && this.queue(n || "fx", []),
            this.each(function() {
                var s = !0
                  , t = null != n && n + "queueHooks"
                  , o = i.timers
                  , e = r.get(this);
                if (t)
                    e[t] && e[t].stop && f(e[t]);
                else
                    for (t in e)
                        e[t] && e[t].stop && ue.test(t) && f(e[t]);
                for (t = o.length; t--; )
                    o[t].elem !== this || null != n && o[t].queue !== n || (o[t].anim.stop(u),
                    s = !1,
                    o.splice(t, 1));
                (s || !u) && i.dequeue(this, n)
            })
        },
        finish: function(n) {
            return n !== !1 && (n = n || "fx"),
            this.each(function() {
                var t, e = r.get(this), u = e[n + "queue"], o = e[n + "queueHooks"], f = i.timers, s = u ? u.length : 0;
                for (e.finish = !0,
                i.queue(this, n, []),
                o && o.stop && o.stop.call(this, !0),
                t = f.length; t--; )
                    f[t].elem === this && f[t].queue === n && (f[t].anim.stop(!0),
                    f.splice(t, 1));
                for (t = 0; s > t; t++)
                    u[t] && u[t].finish && u[t].finish.call(this);
                delete e.finish
            })
        }
    });
    i.each(["toggle", "show", "hide"], function(n, t) {
        var r = i.fn[t];
        i.fn[t] = function(n, i, u) {
            return null == n || "boolean" == typeof n ? r.apply(this, arguments) : this.animate(bt(t, !0), n, i, u)
        }
    });
    i.each({
        slideDown: bt("show"),
        slideUp: bt("hide"),
        slideToggle: bt("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(n, t) {
        i.fn[n] = function(n, i, r) {
            return this.animate(t, n, i, r)
        }
    });
    i.timers = [];
    i.fx.tick = function() {
        var r, n = 0, t = i.timers;
        for (nt = i.now(); n < t.length; n++)
            r = t[n],
            r() || t[n] !== r || t.splice(n--, 1);
        t.length || i.fx.stop();
        nt = void 0
    }
    ;
    i.fx.timer = function(n) {
        i.timers.push(n);
        n() ? i.fx.start() : i.timers.pop()
    }
    ;
    i.fx.interval = 13;
    i.fx.start = function() {
        pt || (pt = setInterval(i.fx.tick, i.fx.interval))
    }
    ;
    i.fx.stop = function() {
        clearInterval(pt);
        pt = null
    }
    ;
    i.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    };
    i.fn.delay = function(n, t) {
        return n = i.fx ? i.fx.speeds[n] || n : n,
        t = t || "fx",
        this.queue(t, function(t, i) {
            var r = setTimeout(t, n);
            i.stop = function() {
                clearTimeout(r)
            }
        })
    }
    ,
    function() {
        var n = u.createElement("input")
          , t = u.createElement("select")
          , i = t.appendChild(u.createElement("option"));
        n.type = "checkbox";
        f.checkOn = "" !== n.value;
        f.optSelected = i.selected;
        t.disabled = !0;
        f.optDisabled = !i.disabled;
        n = u.createElement("input");
        n.value = "t";
        n.type = "radio";
        f.radioValue = "t" === n.value
    }();
    tt = i.expr.attrHandle;
    i.fn.extend({
        attr: function(n, t) {
            return l(this, i.attr, n, t, arguments.length > 1)
        },
        removeAttr: function(n) {
            return this.each(function() {
                i.removeAttr(this, n)
            })
        }
    });
    i.extend({
        attr: function(n, t, r) {
            var u, f, e = n.nodeType;
            if (n && 3 !== e && 8 !== e && 2 !== e)
                return typeof n.getAttribute === d ? i.prop(n, t, r) : (1 === e && i.isXMLDoc(n) || (t = t.toLowerCase(),
                u = i.attrHooks[t] || (i.expr.match.bool.test(t) ? su : oe)),
                void 0 === r ? u && "get"in u && null !== (f = u.get(n, t)) ? f : (f = i.find.attr(n, t),
                null == f ? void 0 : f) : null !== r ? u && "set"in u && void 0 !== (f = u.set(n, r, t)) ? f : (n.setAttribute(t, r + ""),
                r) : void i.removeAttr(n, t))
        },
        removeAttr: function(n, t) {
            var r, u, e = 0, f = t && t.match(c);
            if (f && 1 === n.nodeType)
                while (r = f[e++])
                    u = i.propFix[r] || r,
                    i.expr.match.bool.test(r) && (n[u] = !1),
                    n.removeAttribute(r)
        },
        attrHooks: {
            type: {
                set: function(n, t) {
                    if (!f.radioValue && "radio" === t && i.nodeName(n, "input")) {
                        var r = n.value;
                        return n.setAttribute("type", t),
                        r && (n.value = r),
                        t
                    }
                }
            }
        }
    });
    su = {
        set: function(n, t, r) {
            return t === !1 ? i.removeAttr(n, r) : n.setAttribute(r, r),
            r
        }
    };
    i.each(i.expr.match.bool.source.match(/\w+/g), function(n, t) {
        var r = tt[t] || i.find.attr;
        tt[t] = function(n, t, i) {
            var u, f;
            return i || (f = tt[t],
            tt[t] = u,
            u = null != r(n, t, i) ? t.toLowerCase() : null,
            tt[t] = f),
            u
        }
    });
    hu = /^(?:input|select|textarea|button)$/i;
    i.fn.extend({
        prop: function(n, t) {
            return l(this, i.prop, n, t, arguments.length > 1)
        },
        removeProp: function(n) {
            return this.each(function() {
                delete this[i.propFix[n] || n]
            })
        }
    });
    i.extend({
        propFix: {
            "for": "htmlFor",
            "class": "className"
        },
        prop: function(n, t, r) {
            var f, u, o, e = n.nodeType;
            if (n && 3 !== e && 8 !== e && 2 !== e)
                return o = 1 !== e || !i.isXMLDoc(n),
                o && (t = i.propFix[t] || t,
                u = i.propHooks[t]),
                void 0 !== r ? u && "set"in u && void 0 !== (f = u.set(n, r, t)) ? f : n[t] = r : u && "get"in u && null !== (f = u.get(n, t)) ? f : n[t]
        },
        propHooks: {
            tabIndex: {
                get: function(n) {
                    return n.hasAttribute("tabindex") || hu.test(n.nodeName) || n.href ? n.tabIndex : -1
                }
            }
        }
    });
    f.optSelected || (i.propHooks.selected = {
        get: function(n) {
            var t = n.parentNode;
            return t && t.parentNode && t.parentNode.selectedIndex,
            null
        }
    });
    i.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
        i.propFix[this.toLowerCase()] = this
    });
    kt = /[\t\r\n\f]/g;
    i.fn.extend({
        addClass: function(n) {
            var o, t, r, u, s, f, h = "string" == typeof n && n, e = 0, l = this.length;
            if (i.isFunction(n))
                return this.each(function(t) {
                    i(this).addClass(n.call(this, t, this.className))
                });
            if (h)
                for (o = (n || "").match(c) || []; l > e; e++)
                    if (t = this[e],
                    r = 1 === t.nodeType && (t.className ? (" " + t.className + " ").replace(kt, " ") : " ")) {
                        for (s = 0; u = o[s++]; )
                            r.indexOf(" " + u + " ") < 0 && (r += u + " ");
                        f = i.trim(r);
                        t.className !== f && (t.className = f)
                    }
            return this
        },
        removeClass: function(n) {
            var o, t, r, u, s, f, h = 0 === arguments.length || "string" == typeof n && n, e = 0, l = this.length;
            if (i.isFunction(n))
                return this.each(function(t) {
                    i(this).removeClass(n.call(this, t, this.className))
                });
            if (h)
                for (o = (n || "").match(c) || []; l > e; e++)
                    if (t = this[e],
                    r = 1 === t.nodeType && (t.className ? (" " + t.className + " ").replace(kt, " ") : "")) {
                        for (s = 0; u = o[s++]; )
                            while (r.indexOf(" " + u + " ") >= 0)
                                r = r.replace(" " + u + " ", " ");
                        f = n ? i.trim(r) : "";
                        t.className !== f && (t.className = f)
                    }
            return this
        },
        toggleClass: function(n, t) {
            var u = typeof n;
            return "boolean" == typeof t && "string" === u ? t ? this.addClass(n) : this.removeClass(n) : this.each(i.isFunction(n) ? function(r) {
                i(this).toggleClass(n.call(this, r, this.className, t), t)
            }
            : function() {
                if ("string" === u)
                    for (var t, e = 0, f = i(this), o = n.match(c) || []; t = o[e++]; )
                        f.hasClass(t) ? f.removeClass(t) : f.addClass(t);
                else
                    (u === d || "boolean" === u) && (this.className && r.set(this, "__className__", this.className),
                    this.className = this.className || n === !1 ? "" : r.get(this, "__className__") || "")
            }
            )
        },
        hasClass: function(n) {
            for (var i = " " + n + " ", t = 0, r = this.length; r > t; t++)
                if (1 === this[t].nodeType && (" " + this[t].className + " ").replace(kt, " ").indexOf(i) >= 0)
                    return !0;
            return !1
        }
    });
    cu = /\r/g;
    i.fn.extend({
        val: function(n) {
            var t, r, f, u = this[0];
            return arguments.length ? (f = i.isFunction(n),
            this.each(function(r) {
                var u;
                1 === this.nodeType && (u = f ? n.call(this, r, i(this).val()) : n,
                null == u ? u = "" : "number" == typeof u ? u += "" : i.isArray(u) && (u = i.map(u, function(n) {
                    return null == n ? "" : n + ""
                })),
                t = i.valHooks[this.type] || i.valHooks[this.nodeName.toLowerCase()],
                t && "set"in t && void 0 !== t.set(this, u, "value") || (this.value = u))
            })) : u ? (t = i.valHooks[u.type] || i.valHooks[u.nodeName.toLowerCase()],
            t && "get"in t && void 0 !== (r = t.get(u, "value")) ? r : (r = u.value,
            "string" == typeof r ? r.replace(cu, "") : null == r ? "" : r)) : void 0
        }
    });
    i.extend({
        valHooks: {
            option: {
                get: function(n) {
                    var t = i.find.attr(n, "value");
                    return null != t ? t : i.trim(i.text(n))
                }
            },
            select: {
                get: function(n) {
                    for (var o, t, s = n.options, r = n.selectedIndex, u = "select-one" === n.type || 0 > r, h = u ? null : [], c = u ? r + 1 : s.length, e = 0 > r ? c : u ? r : 0; c > e; e++)
                        if (t = s[e],
                        !(!t.selected && e !== r || (f.optDisabled ? t.disabled : null !== t.getAttribute("disabled")) || t.parentNode.disabled && i.nodeName(t.parentNode, "optgroup"))) {
                            if (o = i(t).val(),
                            u)
                                return o;
                            h.push(o)
                        }
                    return h
                },
                set: function(n, t) {
                    for (var u, r, f = n.options, e = i.makeArray(t), o = f.length; o--; )
                        r = f[o],
                        (r.selected = i.inArray(r.value, e) >= 0) && (u = !0);
                    return u || (n.selectedIndex = -1),
                    e
                }
            }
        }
    });
    i.each(["radio", "checkbox"], function() {
        i.valHooks[this] = {
            set: function(n, t) {
                if (i.isArray(t))
                    return n.checked = i.inArray(i(n).val(), t) >= 0
            }
        };
        f.checkOn || (i.valHooks[this].get = function(n) {
            return null === n.getAttribute("value") ? "on" : n.value
        }
        )
    });
    i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(n, t) {
        i.fn[t] = function(n, i) {
            return arguments.length > 0 ? this.on(t, null, n, i) : this.trigger(t)
        }
    });
    i.fn.extend({
        hover: function(n, t) {
            return this.mouseenter(n).mouseleave(t || n)
        },
        bind: function(n, t, i) {
            return this.on(n, null, t, i)
        },
        unbind: function(n, t) {
            return this.off(n, null, t)
        },
        delegate: function(n, t, i, r) {
            return this.on(t, n, i, r)
        },
        undelegate: function(n, t, i) {
            return 1 === arguments.length ? this.off(n, "**") : this.off(t, n || "**", i)
        }
    });
    dt = i.now();
    gt = /\?/;
    i.parseJSON = function(n) {
        return JSON.parse(n + "")
    }
    ;
    i.parseXML = function(n) {
        var t, r;
        if (!n || "string" != typeof n)
            return null;
        try {
            r = new DOMParser;
            t = r.parseFromString(n, "text/xml")
        } catch (u) {
            t = void 0
        }
        return (!t || t.getElementsByTagName("parsererror").length) && i.error("Invalid XML: " + n),
        t
    }
    ;
    var b, v, se = /#.*$/, lu = /([?&])_=[^&]*/, he = /^(.*?):[ \t]*([^\r\n]*)$/gm, ce = /^(?:GET|HEAD)$/, le = /^\/\//, au = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, vu = {}, li = {}, yu = "*/".concat("*");
    try {
        v = location.href
    } catch (ge) {
        v = u.createElement("a");
        v.href = "";
        v = v.href
    }
    b = au.exec(v.toLowerCase()) || [];
    i.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: v,
            type: "GET",
            isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(b[1]),
            global: !0,
            processData: !0,
            async: !0,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": yu,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": !0,
                "text json": i.parseJSON,
                "text xml": i.parseXML
            },
            flatOptions: {
                url: !0,
                context: !0
            }
        },
        ajaxSetup: function(n, t) {
            return t ? ai(ai(n, i.ajaxSettings), t) : ai(i.ajaxSettings, n)
        },
        ajaxPrefilter: pu(vu),
        ajaxTransport: pu(li),
        ajax: function(n, t) {
            function w(n, t, s, h) {
                var v, it, b, y, w, c = t;
                2 !== e && (e = 2,
                d && clearTimeout(d),
                l = void 0,
                k = h || "",
                u.readyState = n > 0 ? 4 : 0,
                v = n >= 200 && 300 > n || 304 === n,
                s && (y = ae(r, u, s)),
                y = ve(r, y, u, v),
                v ? (r.ifModified && (w = u.getResponseHeader("Last-Modified"),
                w && (i.lastModified[f] = w),
                w = u.getResponseHeader("etag"),
                w && (i.etag[f] = w)),
                204 === n || "HEAD" === r.type ? c = "nocontent" : 304 === n ? c = "notmodified" : (c = y.state,
                it = y.data,
                b = y.error,
                v = !b)) : (b = c,
                (n || !c) && (c = "error",
                0 > n && (n = 0))),
                u.status = n,
                u.statusText = (t || c) + "",
                v ? nt.resolveWith(o, [it, c, u]) : nt.rejectWith(o, [u, c, b]),
                u.statusCode(p),
                p = void 0,
                a && g.trigger(v ? "ajaxSuccess" : "ajaxError", [u, r, v ? it : b]),
                tt.fireWith(o, [u, c]),
                a && (g.trigger("ajaxComplete", [u, r]),
                --i.active || i.event.trigger("ajaxStop")))
            }
            "object" == typeof n && (t = n,
            n = void 0);
            t = t || {};
            var l, f, k, y, d, s, a, h, r = i.ajaxSetup({}, t), o = r.context || r, g = r.context && (o.nodeType || o.jquery) ? i(o) : i.event, nt = i.Deferred(), tt = i.Callbacks("once memory"), p = r.statusCode || {}, it = {}, rt = {}, e = 0, ut = "canceled", u = {
                readyState: 0,
                getResponseHeader: function(n) {
                    var t;
                    if (2 === e) {
                        if (!y)
                            for (y = {}; t = he.exec(k); )
                                y[t[1].toLowerCase()] = t[2];
                        t = y[n.toLowerCase()]
                    }
                    return null == t ? null : t
                },
                getAllResponseHeaders: function() {
                    return 2 === e ? k : null
                },
                setRequestHeader: function(n, t) {
                    var i = n.toLowerCase();
                    return e || (n = rt[i] = rt[i] || n,
                    it[n] = t),
                    this
                },
                overrideMimeType: function(n) {
                    return e || (r.mimeType = n),
                    this
                },
                statusCode: function(n) {
                    var t;
                    if (n)
                        if (2 > e)
                            for (t in n)
                                p[t] = [p[t], n[t]];
                        else
                            u.always(n[u.status]);
                    return this
                },
                abort: function(n) {
                    var t = n || ut;
                    return l && l.abort(t),
                    w(0, t),
                    this
                }
            };
            if (nt.promise(u).complete = tt.add,
            u.success = u.done,
            u.error = u.fail,
            r.url = ((n || r.url || v) + "").replace(se, "").replace(le, b[1] + "//"),
            r.type = t.method || t.type || r.method || r.type,
            r.dataTypes = i.trim(r.dataType || "*").toLowerCase().match(c) || [""],
            null == r.crossDomain && (s = au.exec(r.url.toLowerCase()),
            r.crossDomain = !(!s || s[1] === b[1] && s[2] === b[2] && (s[3] || ("http:" === s[1] ? "80" : "443")) === (b[3] || ("http:" === b[1] ? "80" : "443")))),
            r.data && r.processData && "string" != typeof r.data && (r.data = i.param(r.data, r.traditional)),
            wu(vu, r, t, u),
            2 === e)
                return u;
            a = r.global;
            a && 0 == i.active++ && i.event.trigger("ajaxStart");
            r.type = r.type.toUpperCase();
            r.hasContent = !ce.test(r.type);
            f = r.url;
            r.hasContent || (r.data && (f = r.url += (gt.test(f) ? "&" : "?") + r.data,
            delete r.data),
            r.cache === !1 && (r.url = lu.test(f) ? f.replace(lu, "$1_=" + dt++) : f + (gt.test(f) ? "&" : "?") + "_=" + dt++));
            r.ifModified && (i.lastModified[f] && u.setRequestHeader("If-Modified-Since", i.lastModified[f]),
            i.etag[f] && u.setRequestHeader("If-None-Match", i.etag[f]));
            (r.data && r.hasContent && r.contentType !== !1 || t.contentType) && u.setRequestHeader("Content-Type", r.contentType);
            u.setRequestHeader("Accept", r.dataTypes[0] && r.accepts[r.dataTypes[0]] ? r.accepts[r.dataTypes[0]] + ("*" !== r.dataTypes[0] ? ", " + yu + "; q=0.01" : "") : r.accepts["*"]);
            for (h in r.headers)
                u.setRequestHeader(h, r.headers[h]);
            if (r.beforeSend && (r.beforeSend.call(o, u, r) === !1 || 2 === e))
                return u.abort();
            ut = "abort";
            for (h in {
                success: 1,
                error: 1,
                complete: 1
            })
                u[h](r[h]);
            if (l = wu(li, r, t, u)) {
                u.readyState = 1;
                a && g.trigger("ajaxSend", [u, r]);
                r.async && r.timeout > 0 && (d = setTimeout(function() {
                    u.abort("timeout")
                }, r.timeout));
                try {
                    e = 1;
                    l.send(it, w)
                } catch (ft) {
                    if (!(2 > e))
                        throw ft;
                    w(-1, ft)
                }
            } else
                w(-1, "No Transport");
            return u
        },
        getJSON: function(n, t, r) {
            return i.get(n, t, r, "json")
        },
        getScript: function(n, t) {
            return i.get(n, void 0, t, "script")
        }
    });
    i.each(["get", "post"], function(n, t) {
        i[t] = function(n, r, u, f) {
            return i.isFunction(r) && (f = f || u,
            u = r,
            r = void 0),
            i.ajax({
                url: n,
                type: t,
                dataType: f,
                data: r,
                success: u
            })
        }
    });
    i.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(n, t) {
        i.fn[t] = function(n) {
            return this.on(t, n)
        }
    });
    i._evalUrl = function(n) {
        return i.ajax({
            url: n,
            type: "GET",
            dataType: "script",
            async: !1,
            global: !1,
            throws: !0
        })
    }
    ;
    i.fn.extend({
        wrapAll: function(n) {
            var t;
            return i.isFunction(n) ? this.each(function(t) {
                i(this).wrapAll(n.call(this, t))
            }) : (this[0] && (t = i(n, this[0].ownerDocument).eq(0).clone(!0),
            this[0].parentNode && t.insertBefore(this[0]),
            t.map(function() {
                for (var n = this; n.firstElementChild; )
                    n = n.firstElementChild;
                return n
            }).append(this)),
            this)
        },
        wrapInner: function(n) {
            return this.each(i.isFunction(n) ? function(t) {
                i(this).wrapInner(n.call(this, t))
            }
            : function() {
                var t = i(this)
                  , r = t.contents();
                r.length ? r.wrapAll(n) : t.append(n)
            }
            )
        },
        wrap: function(n) {
            var t = i.isFunction(n);
            return this.each(function(r) {
                i(this).wrapAll(t ? n.call(this, r) : n)
            })
        },
        unwrap: function() {
            return this.parent().each(function() {
                i.nodeName(this, "body") || i(this).replaceWith(this.childNodes)
            }).end()
        }
    });
    i.expr.filters.hidden = function(n) {
        return n.offsetWidth <= 0 && n.offsetHeight <= 0
    }
    ;
    i.expr.filters.visible = function(n) {
        return !i.expr.filters.hidden(n)
    }
    ;
    var ye = /%20/g
      , pe = /\[\]$/
      , bu = /\r?\n/g
      , we = /^(?:submit|button|image|reset|file)$/i
      , be = /^(?:input|select|textarea|keygen)/i;
    i.param = function(n, t) {
        var r, u = [], f = function(n, t) {
            t = i.isFunction(t) ? t() : null == t ? "" : t;
            u[u.length] = encodeURIComponent(n) + "=" + encodeURIComponent(t)
        };
        if (void 0 === t && (t = i.ajaxSettings && i.ajaxSettings.traditional),
        i.isArray(n) || n.jquery && !i.isPlainObject(n))
            i.each(n, function() {
                f(this.name, this.value)
            });
        else
            for (r in n)
                vi(r, n[r], t, f);
        return u.join("&").replace(ye, "+")
    }
    ;
    i.fn.extend({
        serialize: function() {
            return i.param(this.serializeArray())
        },
        serializeArray: function() {
            return this.map(function() {
                var n = i.prop(this, "elements");
                return n ? i.makeArray(n) : this
            }).filter(function() {
                var n = this.type;
                return this.name && !i(this).is(":disabled") && be.test(this.nodeName) && !we.test(n) && (this.checked || !er.test(n))
            }).map(function(n, t) {
                var r = i(this).val();
                return null == r ? null : i.isArray(r) ? i.map(r, function(n) {
                    return {
                        name: t.name,
                        value: n.replace(bu, "\r\n")
                    }
                }) : {
                    name: t.name,
                    value: r.replace(bu, "\r\n")
                }
            }).get()
        }
    });
    i.ajaxSettings.xhr = function() {
        try {
            return new XMLHttpRequest
        } catch (n) {}
    }
    ;
    var ke = 0
      , ni = {}
      , de = {
        0: 200,
        1223: 204
    }
      , ft = i.ajaxSettings.xhr();
    return n.ActiveXObject && i(n).on("unload", function() {
        for (var n in ni)
            ni[n]()
    }),
    f.cors = !!ft && "withCredentials"in ft,
    f.ajax = ft = !!ft,
    i.ajaxTransport(function(n) {
        var t;
        if (f.cors || ft && !n.crossDomain)
            return {
                send: function(i, r) {
                    var f, u = n.xhr(), e = ++ke;
                    if (u.open(n.type, n.url, n.async, n.username, n.password),
                    n.xhrFields)
                        for (f in n.xhrFields)
                            u[f] = n.xhrFields[f];
                    n.mimeType && u.overrideMimeType && u.overrideMimeType(n.mimeType);
                    n.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                    for (f in i)
                        u.setRequestHeader(f, i[f]);
                    t = function(n) {
                        return function() {
                            t && (delete ni[e],
                            t = u.onload = u.onerror = null,
                            "abort" === n ? u.abort() : "error" === n ? r(u.status, u.statusText) : r(de[u.status] || u.status, u.statusText, "string" == typeof u.responseText ? {
                                text: u.responseText
                            } : void 0, u.getAllResponseHeaders()))
                        }
                    }
                    ;
                    u.onload = t();
                    u.onerror = t("error");
                    t = ni[e] = t("abort");
                    try {
                        u.send(n.hasContent && n.data || null)
                    } catch (o) {
                        if (t)
                            throw o;
                    }
                },
                abort: function() {
                    t && t()
                }
            }
    }),
    i.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /(?:java|ecma)script/
        },
        converters: {
            "text script": function(n) {
                return i.globalEval(n),
                n
            }
        }
    }),
    i.ajaxPrefilter("script", function(n) {
        void 0 === n.cache && (n.cache = !1);
        n.crossDomain && (n.type = "GET")
    }),
    i.ajaxTransport("script", function(n) {
        if (n.crossDomain) {
            var r, t;
            return {
                send: function(f, e) {
                    r = i("<script>").prop({
                        async: !0,
                        charset: n.scriptCharset,
                        src: n.url
                    }).on("load error", t = function(n) {
                        r.remove();
                        t = null;
                        n && e("error" === n.type ? 404 : 200, n.type)
                    }
                    );
                    u.head.appendChild(r[0])
                },
                abort: function() {
                    t && t()
                }
            }
        }
    }),
    yi = [],
    ti = /(=)\?(?=&|$)|\?\?/,
    i.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            var n = yi.pop() || i.expando + "_" + dt++;
            return this[n] = !0,
            n
        }
    }),
    i.ajaxPrefilter("json jsonp", function(t, r, u) {
        var f, o, e, s = t.jsonp !== !1 && (ti.test(t.url) ? "url" : "string" == typeof t.data && !(t.contentType || "").indexOf("application/x-www-form-urlencoded") && ti.test(t.data) && "data");
        if (s || "jsonp" === t.dataTypes[0])
            return (f = t.jsonpCallback = i.isFunction(t.jsonpCallback) ? t.jsonpCallback() : t.jsonpCallback,
            s ? t[s] = t[s].replace(ti, "$1" + f) : t.jsonp !== !1 && (t.url += (gt.test(t.url) ? "&" : "?") + t.jsonp + "=" + f),
            t.converters["script json"] = function() {
                return e || i.error(f + " was not called"),
                e[0]
            }
            ,
            t.dataTypes[0] = "json",
            o = n[f],
            n[f] = function() {
                e = arguments
            }
            ,
            u.always(function() {
                n[f] = o;
                t[f] && (t.jsonpCallback = r.jsonpCallback,
                yi.push(f));
                e && i.isFunction(o) && o(e[0]);
                e = o = void 0
            }),
            "script")
    }),
    i.parseHTML = function(n, t, r) {
        if (!n || "string" != typeof n)
            return null;
        "boolean" == typeof t && (r = t,
        t = !1);
        t = t || u;
        var f = gi.exec(n)
          , e = !r && [];
        return f ? [t.createElement(f[1])] : (f = i.buildFragment([n], t, e),
        e && e.length && i(e).remove(),
        i.merge([], f.childNodes))
    }
    ,
    pi = i.fn.load,
    i.fn.load = function(n, t, r) {
        if ("string" != typeof n && pi)
            return pi.apply(this, arguments);
        var u, o, s, f = this, e = n.indexOf(" ");
        return e >= 0 && (u = i.trim(n.slice(e)),
        n = n.slice(0, e)),
        i.isFunction(t) ? (r = t,
        t = void 0) : t && "object" == typeof t && (o = "POST"),
        f.length > 0 && i.ajax({
            url: n,
            type: o,
            dataType: "html",
            data: t
        }).done(function(n) {
            s = arguments;
            f.html(u ? i("<div>").append(i.parseHTML(n)).find(u) : n)
        }).complete(r && function(n, t) {
            f.each(r, s || [n.responseText, t, n])
        }
        ),
        this
    }
    ,
    i.expr.filters.animated = function(n) {
        return i.grep(i.timers, function(t) {
            return n === t.elem
        }).length
    }
    ,
    wi = n.document.documentElement,
    i.offset = {
        setOffset: function(n, t, r) {
            var e, o, s, h, u, c, v, l = i.css(n, "position"), a = i(n), f = {};
            "static" === l && (n.style.position = "relative");
            u = a.offset();
            s = i.css(n, "top");
            c = i.css(n, "left");
            v = ("absolute" === l || "fixed" === l) && (s + c).indexOf("auto") > -1;
            v ? (e = a.position(),
            h = e.top,
            o = e.left) : (h = parseFloat(s) || 0,
            o = parseFloat(c) || 0);
            i.isFunction(t) && (t = t.call(n, r, u));
            null != t.top && (f.top = t.top - u.top + h);
            null != t.left && (f.left = t.left - u.left + o);
            "using"in t ? t.using.call(n, f) : a.css(f)
        }
    },
    i.fn.extend({
        offset: function(n) {
            if (arguments.length)
                return void 0 === n ? this : this.each(function(t) {
                    i.offset.setOffset(this, n, t)
                });
            var r, f, t = this[0], u = {
                top: 0,
                left: 0
            }, e = t && t.ownerDocument;
            if (e)
                return r = e.documentElement,
                i.contains(r, t) ? (typeof t.getBoundingClientRect !== d && (u = t.getBoundingClientRect()),
                f = ku(e),
                {
                    top: u.top + f.pageYOffset - r.clientTop,
                    left: u.left + f.pageXOffset - r.clientLeft
                }) : u
        },
        position: function() {
            if (this[0]) {
                var n, r, u = this[0], t = {
                    top: 0,
                    left: 0
                };
                return "fixed" === i.css(u, "position") ? r = u.getBoundingClientRect() : (n = this.offsetParent(),
                r = this.offset(),
                i.nodeName(n[0], "html") || (t = n.offset()),
                t.top += i.css(n[0], "borderTopWidth", !0),
                t.left += i.css(n[0], "borderLeftWidth", !0)),
                {
                    top: r.top - t.top - i.css(u, "marginTop", !0),
                    left: r.left - t.left - i.css(u, "marginLeft", !0)
                }
            }
        },
        offsetParent: function() {
            return this.map(function() {
                for (var n = this.offsetParent || wi; n && !i.nodeName(n, "html") && "static" === i.css(n, "position"); )
                    n = n.offsetParent;
                return n || wi
            })
        }
    }),
    i.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(t, r) {
        var u = "pageYOffset" === r;
        i.fn[t] = function(i) {
            return l(this, function(t, i, f) {
                var e = ku(t);
                return void 0 === f ? e ? e[r] : t[i] : void (e ? e.scrollTo(u ? n.pageXOffset : f, u ? f : n.pageYOffset) : t[i] = f)
            }, t, i, arguments.length, null)
        }
    }),
    i.each(["top", "left"], function(n, t) {
        i.cssHooks[t] = br(f.pixelPosition, function(n, r) {
            if (r)
                return (r = rt(n, t),
                ci.test(r) ? i(n).position()[t] + "px" : r)
        })
    }),
    i.each({
        Height: "height",
        Width: "width"
    }, function(n, t) {
        i.each({
            padding: "inner" + n,
            content: t,
            "": "outer" + n
        }, function(r, u) {
            i.fn[u] = function(u, f) {
                var e = arguments.length && (r || "boolean" != typeof u)
                  , o = r || (u === !0 || f === !0 ? "margin" : "border");
                return l(this, function(t, r, u) {
                    var f;
                    return i.isWindow(t) ? t.document.documentElement["client" + n] : 9 === t.nodeType ? (f = t.documentElement,
                    Math.max(t.body["scroll" + n], f["scroll" + n], t.body["offset" + n], f["offset" + n], f["client" + n])) : void 0 === u ? i.css(t, r, o) : i.style(t, r, u, o)
                }, t, e ? u : void 0, e, null)
            }
        })
    }),
    i.fn.size = function() {
        return this.length
    }
    ,
    i.fn.andSelf = i.fn.addBack,
    "function" == typeof define && define.amd && define("jquery", [], function() {
        return i
    }),
    du = n.jQuery,
    gu = n.$,
    i.noConflict = function(t) {
        return n.$ === i && (n.$ = gu),
        t && n.jQuery === i && (n.jQuery = du),
        i
    }
    ,
    typeof t === d && (n.jQuery = n.$ = i),
    i
});
/*! jQuery Migrate v1.2.1 | (c) 2005, 2013 jQuery Foundation, Inc. and other contributors | jquery.org/license */
jQuery.migrateMute === void 0 && (jQuery.migrateMute = !0),
function(n, t, i) {
    function r(i) {
        var r = t.console;
        o[i] || (o[i] = !0,
        n.migrateWarnings.push(i),
        r && r.warn && !n.migrateMute && (r.warn("JQMIGRATE: " + i),
        n.migrateTrace && r.trace && r.trace()))
    }
    function e(t, u, f, e) {
        if (Object.defineProperty)
            try {
                return Object.defineProperty(t, u, {
                    configurable: !0,
                    enumerable: !0,
                    get: function() {
                        return r(e),
                        f
                    },
                    set: function(n) {
                        r(e);
                        f = n
                    }
                }),
                i
            } catch (o) {}
        n._definePropertyBroken = !0;
        t[u] = f
    }
    var o = {}, l, a, v;
    n.migrateWarnings = [];
    !n.migrateMute && t.console && t.console.log && t.console.log("JQMIGRATE: Logging is active");
    n.migrateTrace === i && (n.migrateTrace = !0);
    n.migrateReset = function() {
        o = {};
        n.migrateWarnings.length = 0
    }
    ;
    "BackCompat" === document.compatMode && r("jQuery is not compatible with Quirks Mode");
    var s = n("<input/>", {
        size: 1
    }).attr("size") && n.attrFn
      , h = n.attr
      , g = n.attrHooks.value && n.attrHooks.value.get || function() {
        return null
    }
      , nt = n.attrHooks.value && n.attrHooks.value.set || function() {
        return i
    }
      , tt = /^(?:input|button)$/i
      , it = /^[238]$/
      , rt = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i
      , ut = /^(?:checked|selected)$/i;
    e(n, "attrFn", s || {}, "jQuery.attrFn is deprecated");
    n.attr = function(t, u, f, e) {
        var o = u.toLowerCase()
          , c = t && t.nodeType;
        return e && (4 > h.length && r("jQuery.fn.attr( props, pass ) is deprecated"),
        t && !it.test(c) && (s ? u in s : n.isFunction(n.fn[u]))) ? n(t)[u](f) : ("type" === u && f !== i && tt.test(t.nodeName) && t.parentNode && r("Can't change the 'type' of an input or button in IE 6/7/8"),
        !n.attrHooks[o] && rt.test(o) && (n.attrHooks[o] = {
            get: function(t, r) {
                var u, f = n.prop(t, r);
                return f === !0 || "boolean" != typeof f && (u = t.getAttributeNode(r)) && u.nodeValue !== !1 ? r.toLowerCase() : i
            },
            set: function(t, i, r) {
                var u;
                return i === !1 ? n.removeAttr(t, r) : (u = n.propFix[r] || r,
                u in t && (t[u] = !0),
                t.setAttribute(r, r.toLowerCase())),
                r
            }
        },
        ut.test(o) && r("jQuery.fn.attr('" + o + "') may use property instead of attribute")),
        h.call(n, t, u, f))
    }
    ;
    n.attrHooks.value = {
        get: function(n, t) {
            var i = (n.nodeName || "").toLowerCase();
            return "button" === i ? g.apply(this, arguments) : ("input" !== i && "option" !== i && r("jQuery.fn.attr('value') no longer gets properties"),
            t in n ? n.value : null)
        },
        set: function(n, t) {
            var u = (n.nodeName || "").toLowerCase();
            return "button" === u ? nt.apply(this, arguments) : ("input" !== u && "option" !== u && r("jQuery.fn.attr('value', val) no longer sets properties"),
            n.value = t,
            i)
        }
    };
    var f, u, c = n.fn.init, ft = n.parseJSON, et = /^([^<]*)(<[\w\W]+>)([^>]*)$/;
    n.fn.init = function(t, i, u) {
        var f;
        return t && "string" == typeof t && !n.isPlainObject(i) && (f = et.exec(n.trim(t))) && f[0] && ("<" !== t.charAt(0) && r("$(html) HTML strings must start with '<' character"),
        f[3] && r("$(html) HTML text after last tag is ignored"),
        "#" === f[0].charAt(0) && (r("HTML string cannot start with a '#' character"),
        n.error("JQMIGRATE: Invalid selector string (XSS)")),
        i && i.context && (i = i.context),
        n.parseHTML) ? c.call(this, n.parseHTML(f[2], i, !0), i, u) : c.apply(this, arguments)
    }
    ;
    n.fn.init.prototype = n.fn;
    n.parseJSON = function(n) {
        return n || null === n ? ft.apply(this, arguments) : (r("jQuery.parseJSON requires a valid JSON string"),
        null)
    }
    ;
    n.uaMatch = function(n) {
        n = n.toLowerCase();
        var t = /(chrome)[ \/]([\w.]+)/.exec(n) || /(webkit)[ \/]([\w.]+)/.exec(n) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n) || /(msie) ([\w.]+)/.exec(n) || 0 > n.indexOf("compatible") && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n) || [];
        return {
            browser: t[1] || "",
            version: t[2] || "0"
        }
    }
    ;
    n.browser || (f = n.uaMatch(navigator.userAgent),
    u = {},
    f.browser && (u[f.browser] = !0,
    u.version = f.version),
    u.chrome ? u.webkit = !0 : u.webkit && (u.safari = !0),
    n.browser = u);
    e(n, "browser", n.browser, "jQuery.browser is deprecated");
    n.sub = function() {
        function t(n, i) {
            return new t.fn.init(n,i)
        }
        n.extend(!0, t, this);
        t.superclass = this;
        t.fn = t.prototype = this();
        t.fn.constructor = t;
        t.sub = this.sub;
        t.fn.init = function(r, u) {
            return u && u instanceof n && !(u instanceof t) && (u = t(u)),
            n.fn.init.call(this, r, u, i)
        }
        ;
        t.fn.init.prototype = t.fn;
        var i = t(document);
        return r("jQuery.sub() is deprecated"),
        t
    }
    ;
    n.ajaxSetup({
        converters: {
            "text json": n.parseJSON
        }
    });
    l = n.fn.data;
    n.fn.data = function(t) {
        var f, u, e = this[0];
        return !e || "events" !== t || 1 !== arguments.length || (f = n.data(e, t),
        u = n._data(e, t),
        f !== i && f !== u || u === i) ? l.apply(this, arguments) : (r("Use of jQuery.fn.data('events') is deprecated"),
        u)
    }
    ;
    a = /\/(java|ecma)script/i;
    v = n.fn.andSelf || n.fn.addBack;
    n.fn.andSelf = function() {
        return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),
        v.apply(this, arguments)
    }
    ;
    n.clean || (n.clean = function(t, u, f, e) {
        u = u || document;
        u = !u.nodeType && u[0] || u;
        u = u.ownerDocument || u;
        r("jQuery.clean() is deprecated");
        var s, o, c, l, h = [];
        if (n.merge(h, n.buildFragment(t, u).childNodes),
        f)
            for (c = function(n) {
                return !n.type || a.test(n.type) ? e ? e.push(n.parentNode ? n.parentNode.removeChild(n) : n) : f.appendChild(n) : i
            }
            ,
            s = 0; null != (o = h[s]); s++)
                n.nodeName(o, "script") && c(o) || (f.appendChild(o),
                o.getElementsByTagName !== i && (l = n.grep(n.merge([], o.getElementsByTagName("script")), c),
                h.splice.apply(h, [s + 1, 0].concat(l)),
                s += l.length));
        return h
    }
    );
    var ot = n.event.add
      , st = n.event.remove
      , ht = n.event.trigger
      , ct = n.fn.toggle
      , y = n.fn.live
      , p = n.fn.die
      , w = "ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess"
      , b = RegExp("\\b(?:" + w + ")\\b")
      , k = /(?:^|\s)hover(\.\S+|)\b/
      , d = function(t) {
        return "string" != typeof t || n.event.special.hover ? t : (k.test(t) && r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),
        t && t.replace(k, "mouseenter$1 mouseleave$1"))
    };
    n.event.props && "attrChange" !== n.event.props[0] && n.event.props.unshift("attrChange", "attrName", "relatedNode", "srcElement");
    n.event.dispatch && e(n.event, "handle", n.event.dispatch, "jQuery.event.handle is undocumented and deprecated");
    n.event.add = function(n, t, i, u, f) {
        n !== document && b.test(t) && r("AJAX events should be attached to document: " + t);
        ot.call(this, n, d(t || ""), i, u, f)
    }
    ;
    n.event.remove = function(n, t, i, r, u) {
        st.call(this, n, d(t) || "", i, r, u)
    }
    ;
    n.fn.error = function() {
        var n = Array.prototype.slice.call(arguments, 0);
        return r("jQuery.fn.error() is deprecated"),
        n.splice(0, 0, "error"),
        arguments.length ? this.bind.apply(this, n) : (this.triggerHandler.apply(this, n),
        this)
    }
    ;
    n.fn.toggle = function(t, i) {
        if (!n.isFunction(t) || !n.isFunction(i))
            return ct.apply(this, arguments);
        r("jQuery.fn.toggle(handler, handler...) is deprecated");
        var u = arguments
          , e = t.guid || n.guid++
          , f = 0
          , o = function(i) {
            var r = (n._data(this, "lastToggle" + t.guid) || 0) % f;
            return n._data(this, "lastToggle" + t.guid, r + 1),
            i.preventDefault(),
            u[r].apply(this, arguments) || !1
        };
        for (o.guid = e; u.length > f; )
            u[f++].guid = e;
        return this.click(o)
    }
    ;
    n.fn.live = function(t, i, u) {
        return r("jQuery.fn.live() is deprecated"),
        y ? y.apply(this, arguments) : (n(this.context).on(t, this.selector, i, u),
        this)
    }
    ;
    n.fn.die = function(t, i) {
        return r("jQuery.fn.die() is deprecated"),
        p ? p.apply(this, arguments) : (n(this.context).off(t, this.selector || "**", i),
        this)
    }
    ;
    n.event.trigger = function(n, t, i, u) {
        return i || b.test(n) || r("Global events are undocumented and deprecated"),
        ht.call(this, n, t, i || document, u)
    }
    ;
    n.each(w.split("|"), function(t, i) {
        n.event.special[i] = {
            setup: function() {
                var t = this;
                return t !== document && (n.event.add(document, i + "." + n.guid, function() {
                    n.event.trigger(i, null, t, !0)
                }),
                n._data(this, i, n.guid++)),
                !1
            },
            teardown: function() {
                return this !== document && n.event.remove(document, i + "." + n._data(this, i)),
                !1
            }
        }
    })
}(jQuery, window);
/*! jQuery UI - v1.11.2 - 2014-10-16
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(n) {
    typeof define == "function" && define.amd ? define(["jquery"], n) : n(jQuery)
}
)(function(n) {
    /*!
 * jQuery UI Core 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
    function h(t, i) {
        var r, u, f, e = t.nodeName.toLowerCase();
        return "area" === e ? (r = t.parentNode,
        u = r.name,
        !t.href || !u || r.nodeName.toLowerCase() !== "map") ? !1 : (f = n("img[usemap='#" + u + "']")[0],
        !!f && c(f)) : (/input|select|textarea|button|object/.test(e) ? !t.disabled : "a" === e ? t.href || i : i) && c(t)
    }
    function c(t) {
        return n.expr.filters.visible(t) && !n(t).parents().addBack().filter(function() {
            return n.css(this, "visibility") === "hidden"
        }).length
    }
    function k(n) {
        for (var t, i; n.length && n[0] !== document; ) {
            if (t = n.css("position"),
            (t === "absolute" || t === "relative" || t === "fixed") && (i = parseInt(n.css("zIndex"), 10),
            !isNaN(i) && i !== 0))
                return i;
            n = n.parent()
        }
        return 0
    }
    function l() {
        this._curInst = null;
        this._keyEvent = !1;
        this._disabledInputs = [];
        this._datepickerShowing = !1;
        this._inDialog = !1;
        this._mainDivId = "ui-datepicker-div";
        this._inlineClass = "ui-datepicker-inline";
        this._appendClass = "ui-datepicker-append";
        this._triggerClass = "ui-datepicker-trigger";
        this._dialogClass = "ui-datepicker-dialog";
        this._disableClass = "ui-datepicker-disabled";
        this._unselectableClass = "ui-datepicker-unselectable";
        this._currentClass = "ui-datepicker-current-day";
        this._dayOverClass = "ui-datepicker-days-cell-over";
        this.regional = [];
        this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        };
        this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null,
            maxDate: null,
            duration: "fast",
            beforeShowDay: null,
            beforeShow: null,
            onSelect: null,
            onChangeMonthYear: null,
            onClose: null,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        };
        n.extend(this._defaults, this.regional[""]);
        this.regional.en = n.extend(!0, {}, this.regional[""]);
        this.regional["en-US"] = n.extend(!0, {}, this.regional.en);
        this.dpDiv = a(n("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))
    }
    function a(t) {
        var i = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return t.delegate(i, "mouseout", function() {
            n(this).removeClass("ui-state-hover");
            this.className.indexOf("ui-datepicker-prev") !== -1 && n(this).removeClass("ui-datepicker-prev-hover");
            this.className.indexOf("ui-datepicker-next") !== -1 && n(this).removeClass("ui-datepicker-next-hover")
        }).delegate(i, "mouseover", v)
    }
    function v() {
        n.datepicker._isDisabledDatepicker(u.inline ? u.dpDiv.parent()[0] : u.input[0]) || (n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
        n(this).addClass("ui-state-hover"),
        this.className.indexOf("ui-datepicker-prev") !== -1 && n(this).addClass("ui-datepicker-prev-hover"),
        this.className.indexOf("ui-datepicker-next") !== -1 && n(this).addClass("ui-datepicker-next-hover"))
    }
    function r(t, i) {
        n.extend(t, i);
        for (var r in i)
            i[r] == null && (t[r] = i[r]);
        return t
    }
    function t(n) {
        return function() {
            var t = this.element.val();
            n.apply(this, arguments);
            this._refresh();
            t !== this.element.val() && this._trigger("change")
        }
    }
    var y, f, d, i, g, nt, tt, it, rt, ut, u, ft, et, ot, st, ht, e, o, ct, lt, at, vt, yt, pt, wt, bt, kt, dt, gt, ni, ti, ii, ri, ui, fi, ei, oi, si, hi, ci, li, ai;
    n.ui = n.ui || {};
    n.extend(n.ui, {
        version: "1.11.2",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    });
    n.fn.extend({
        scrollParent: function(t) {
            var i = this.css("position")
              , u = i === "absolute"
              , f = t ? /(auto|scroll|hidden)/ : /(auto|scroll)/
              , r = this.parents().filter(function() {
                var t = n(this);
                return u && t.css("position") === "static" ? !1 : f.test(t.css("overflow") + t.css("overflow-y") + t.css("overflow-x"))
            }).eq(0);
            return i === "fixed" || !r.length ? n(this[0].ownerDocument || document) : r
        },
        uniqueId: function() {
            var n = 0;
            return function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++n)
                })
            }
        }(),
        removeUniqueId: function() {
            return this.each(function() {
                /^ui-id-\d+$/.test(this.id) && n(this).removeAttr("id")
            })
        }
    });
    n.extend(n.expr[":"], {
        data: n.expr.createPseudo ? n.expr.createPseudo(function(t) {
            return function(i) {
                return !!n.data(i, t)
            }
        }) : function(t, i, r) {
            return !!n.data(t, r[3])
        }
        ,
        focusable: function(t) {
            return h(t, !isNaN(n.attr(t, "tabindex")))
        },
        tabbable: function(t) {
            var i = n.attr(t, "tabindex")
              , r = isNaN(i);
            return (r || i >= 0) && h(t, !r)
        }
    });
    n("<a>").outerWidth(1).jquery || n.each(["Width", "Height"], function(t, i) {
        function r(t, i, r, u) {
            return n.each(e, function() {
                i -= parseFloat(n.css(t, "padding" + this)) || 0;
                r && (i -= parseFloat(n.css(t, "border" + this + "Width")) || 0);
                u && (i -= parseFloat(n.css(t, "margin" + this)) || 0)
            }),
            i
        }
        var e = i === "Width" ? ["Left", "Right"] : ["Top", "Bottom"]
          , u = i.toLowerCase()
          , f = {
            innerWidth: n.fn.innerWidth,
            innerHeight: n.fn.innerHeight,
            outerWidth: n.fn.outerWidth,
            outerHeight: n.fn.outerHeight
        };
        n.fn["inner" + i] = function(t) {
            return t === undefined ? f["inner" + i].call(this) : this.each(function() {
                n(this).css(u, r(this, t) + "px")
            })
        }
        ;
        n.fn["outer" + i] = function(t, e) {
            return typeof t != "number" ? f["outer" + i].call(this, t) : this.each(function() {
                n(this).css(u, r(this, t, !0, e) + "px")
            })
        }
    });
    n.fn.addBack || (n.fn.addBack = function(n) {
        return this.add(n == null ? this.prevObject : this.prevObject.filter(n))
    }
    );
    n("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (n.fn.removeData = function(t) {
        return function(i) {
            return arguments.length ? t.call(this, n.camelCase(i)) : t.call(this)
        }
    }(n.fn.removeData));
    n.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());
    n.fn.extend({
        focus: function(t) {
            return function(i, r) {
                return typeof i == "number" ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        n(t).focus();
                        r && r.call(t)
                    }, i)
                }) : t.apply(this, arguments)
            }
        }(n.fn.focus),
        disableSelection: function() {
            var n = "onselectstart"in document.createElement("div") ? "selectstart" : "mousedown";
            return function() {
                return this.bind(n + ".ui-disableSelection", function(n) {
                    n.preventDefault()
                })
            }
        }(),
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        },
        zIndex: function(t) {
            if (t !== undefined)
                return this.css("zIndex", t);
            if (this.length)
                for (var i = n(this[0]), r, u; i.length && i[0] !== document; ) {
                    if (r = i.css("position"),
                    (r === "absolute" || r === "relative" || r === "fixed") && (u = parseInt(i.css("zIndex"), 10),
                    !isNaN(u) && u !== 0))
                        return u;
                    i = i.parent()
                }
            return 0
        }
    });
    n.ui.plugin = {
        add: function(t, i, r) {
            var u, f = n.ui[t].prototype;
            for (u in r)
                f.plugins[u] = f.plugins[u] || [],
                f.plugins[u].push([i, r[u]])
        },
        call: function(n, t, i, r) {
            var u, f = n.plugins[t];
            if (f && (r || n.element[0].parentNode && n.element[0].parentNode.nodeType !== 11))
                for (u = 0; u < f.length; u++)
                    n.options[f[u][0]] && f[u][1].apply(n.element, i)
        }
    };
    /*!
 * jQuery UI Widget 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
    y = 0;
    f = Array.prototype.slice;
    n.cleanData = function(t) {
        return function(i) {
            for (var r, u, f = 0; (u = i[f]) != null; f++)
                try {
                    r = n._data(u, "events");
                    r && r.remove && n(u).triggerHandler("remove")
                } catch (e) {}
            t(i)
        }
    }(n.cleanData);
    n.widget = function(t, i, r) {
        var s, f, u, o, h = {}, e = t.split(".")[0];
        return t = t.split(".")[1],
        s = e + "-" + t,
        r || (r = i,
        i = n.Widget),
        n.expr[":"][s.toLowerCase()] = function(t) {
            return !!n.data(t, s)
        }
        ,
        n[e] = n[e] || {},
        f = n[e][t],
        u = n[e][t] = function(n, t) {
            if (!this._createWidget)
                return new u(n,t);
            arguments.length && this._createWidget(n, t)
        }
        ,
        n.extend(u, f, {
            version: r.version,
            _proto: n.extend({}, r),
            _childConstructors: []
        }),
        o = new i,
        o.options = n.widget.extend({}, o.options),
        n.each(r, function(t, r) {
            if (!n.isFunction(r)) {
                h[t] = r;
                return
            }
            h[t] = function() {
                var n = function() {
                    return i.prototype[t].apply(this, arguments)
                }
                  , u = function(n) {
                    return i.prototype[t].apply(this, n)
                };
                return function() {
                    var i = this._super, f = this._superApply, t;
                    return this._super = n,
                    this._superApply = u,
                    t = r.apply(this, arguments),
                    this._super = i,
                    this._superApply = f,
                    t
                }
            }()
        }),
        u.prototype = n.widget.extend(o, {
            widgetEventPrefix: f ? o.widgetEventPrefix || t : t
        }, h, {
            constructor: u,
            namespace: e,
            widgetName: t,
            widgetFullName: s
        }),
        f ? (n.each(f._childConstructors, function(t, i) {
            var r = i.prototype;
            n.widget(r.namespace + "." + r.widgetName, u, i._proto)
        }),
        delete f._childConstructors) : i._childConstructors.push(u),
        n.widget.bridge(t, u),
        u
    }
    ;
    n.widget.extend = function(t) {
        for (var e = f.call(arguments, 1), u = 0, o = e.length, i, r; u < o; u++)
            for (i in e[u])
                r = e[u][i],
                e[u].hasOwnProperty(i) && r !== undefined && (t[i] = n.isPlainObject(r) ? n.isPlainObject(t[i]) ? n.widget.extend({}, t[i], r) : n.widget.extend({}, r) : r);
        return t
    }
    ;
    n.widget.bridge = function(t, i) {
        var r = i.prototype.widgetFullName || t;
        n.fn[t] = function(u) {
            var s = typeof u == "string"
              , o = f.call(arguments, 1)
              , e = this;
            return u = !s && o.length ? n.widget.extend.apply(null, [u].concat(o)) : u,
            s ? this.each(function() {
                var i, f = n.data(this, r);
                return u === "instance" ? (e = f,
                !1) : f ? !n.isFunction(f[u]) || u.charAt(0) === "_" ? n.error("no such method '" + u + "' for " + t + " widget instance") : (i = f[u].apply(f, o),
                i !== f && i !== undefined ? (e = i && i.jquery ? e.pushStack(i.get()) : i,
                !1) : void 0) : n.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + u + "'")
            }) : this.each(function() {
                var t = n.data(this, r);
                t ? (t.option(u || {}),
                t._init && t._init()) : n.data(this, r, new i(u,this))
            }),
            e
        }
    }
    ;
    n.Widget = function() {}
    ;
    n.Widget._childConstructors = [];
    n.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(t, i) {
            i = n(i || this.defaultElement || this)[0];
            this.element = n(i);
            this.uuid = y++;
            this.eventNamespace = "." + this.widgetName + this.uuid;
            this.bindings = n();
            this.hoverable = n();
            this.focusable = n();
            i !== this && (n.data(i, this.widgetFullName, this),
            this._on(!0, this.element, {
                remove: function(n) {
                    n.target === i && this.destroy()
                }
            }),
            this.document = n(i.style ? i.ownerDocument : i.document || i),
            this.window = n(this.document[0].defaultView || this.document[0].parentWindow));
            this.options = n.widget.extend({}, this.options, this._getCreateOptions(), t);
            this._create();
            this._trigger("create", null, this._getCreateEventData());
            this._init()
        },
        _getCreateOptions: n.noop,
        _getCreateEventData: n.noop,
        _create: n.noop,
        _init: n.noop,
        destroy: function() {
            this._destroy();
            this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));
            this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled");
            this.bindings.unbind(this.eventNamespace);
            this.hoverable.removeClass("ui-state-hover");
            this.focusable.removeClass("ui-state-focus")
        },
        _destroy: n.noop,
        widget: function() {
            return this.element
        },
        option: function(t, i) {
            var e = t, r, u, f;
            if (arguments.length === 0)
                return n.widget.extend({}, this.options);
            if (typeof t == "string")
                if (e = {},
                r = t.split("."),
                t = r.shift(),
                r.length) {
                    for (u = e[t] = n.widget.extend({}, this.options[t]),
                    f = 0; f < r.length - 1; f++)
                        u[r[f]] = u[r[f]] || {},
                        u = u[r[f]];
                    if (t = r.pop(),
                    arguments.length === 1)
                        return u[t] === undefined ? null : u[t];
                    u[t] = i
                } else {
                    if (arguments.length === 1)
                        return this.options[t] === undefined ? null : this.options[t];
                    e[t] = i
                }
            return this._setOptions(e),
            this
        },
        _setOptions: function(n) {
            for (var t in n)
                this._setOption(t, n[t]);
            return this
        },
        _setOption: function(n, t) {
            return this.options[n] = t,
            n === "disabled" && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!t),
            t && (this.hoverable.removeClass("ui-state-hover"),
            this.focusable.removeClass("ui-state-focus"))),
            this
        },
        enable: function() {
            return this._setOptions({
                disabled: !1
            })
        },
        disable: function() {
            return this._setOptions({
                disabled: !0
            })
        },
        _on: function(t, i, r) {
            var f, u = this;
            typeof t != "boolean" && (r = i,
            i = t,
            t = !1);
            r ? (i = f = n(i),
            this.bindings = this.bindings.add(i)) : (r = i,
            i = this.element,
            f = this.widget());
            n.each(r, function(r, e) {
                function o() {
                    if (t || u.options.disabled !== !0 && !n(this).hasClass("ui-state-disabled"))
                        return (typeof e == "string" ? u[e] : e).apply(u, arguments)
                }
                typeof e != "string" && (o.guid = e.guid = e.guid || o.guid || n.guid++);
                var s = r.match(/^([\w:-]*)\s*(.*)$/)
                  , h = s[1] + u.eventNamespace
                  , c = s[2];
                c ? f.delegate(c, h, o) : i.bind(h, o)
            })
        },
        _off: function(t, i) {
            i = (i || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace;
            t.unbind(i).undelegate(i);
            this.bindings = n(this.bindings.not(t).get());
            this.focusable = n(this.focusable.not(t).get());
            this.hoverable = n(this.hoverable.not(t).get())
        },
        _delay: function(n, t) {
            function r() {
                return (typeof n == "string" ? i[n] : n).apply(i, arguments)
            }
            var i = this;
            return setTimeout(r, t || 0)
        },
        _hoverable: function(t) {
            this.hoverable = this.hoverable.add(t);
            this._on(t, {
                mouseenter: function(t) {
                    n(t.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(t) {
                    n(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(t) {
            this.focusable = this.focusable.add(t);
            this._on(t, {
                focusin: function(t) {
                    n(t.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(t) {
                    n(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(t, i, r) {
            var u, f, e = this.options[t];
            if (r = r || {},
            i = n.Event(i),
            i.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(),
            i.target = this.element[0],
            f = i.originalEvent,
            f)
                for (u in f)
                    u in i || (i[u] = f[u]);
            return this.element.trigger(i, r),
            !(n.isFunction(e) && e.apply(this.element[0], [i].concat(r)) === !1 || i.isDefaultPrevented())
        }
    };
    n.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(t, i) {
        n.Widget.prototype["_" + t] = function(r, u, f) {
            typeof u == "string" && (u = {
                effect: u
            });
            var o, e = u ? u === !0 || typeof u == "number" ? i : u.effect || i : t;
            u = u || {};
            typeof u == "number" && (u = {
                duration: u
            });
            o = !n.isEmptyObject(u);
            u.complete = f;
            u.delay && r.delay(u.delay);
            o && n.effects && n.effects.effect[e] ? r[t](u) : e !== t && r[e] ? r[e](u.duration, u.easing, f) : r.queue(function(i) {
                n(this)[t]();
                f && f.call(r[0]);
                i()
            })
        }
    });
    d = n.widget;
    /*!
 * jQuery UI Mouse 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
    i = !1;
    n(document).mouseup(function() {
        i = !1
    });
    g = n.widget("ui.mouse", {
        version: "1.11.2",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(n) {
                return t._mouseDown(n)
            }).bind("click." + this.widgetName, function(i) {
                if (!0 === n.data(i.target, t.widgetName + ".preventClickEvent"))
                    return n.removeData(i.target, t.widgetName + ".preventClickEvent"),
                    i.stopImmediatePropagation(),
                    !1
            });
            this.started = !1
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName);
            this._mouseMoveDelegate && this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(t) {
            if (!i) {
                this._mouseMoved = !1;
                this._mouseStarted && this._mouseUp(t);
                this._mouseDownEvent = t;
                var r = this
                  , u = t.which === 1
                  , f = typeof this.options.cancel == "string" && t.target.nodeName ? n(t.target).closest(this.options.cancel).length : !1;
                return !u || f || !this._mouseCapture(t) ? !0 : (this.mouseDelayMet = !this.options.delay,
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    r.mouseDelayMet = !0
                }, this.options.delay)),
                this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(t) !== !1,
                !this._mouseStarted)) ? (t.preventDefault(),
                !0) : (!0 === n.data(t.target, this.widgetName + ".preventClickEvent") && n.removeData(t.target, this.widgetName + ".preventClickEvent"),
                this._mouseMoveDelegate = function(n) {
                    return r._mouseMove(n)
                }
                ,
                this._mouseUpDelegate = function(n) {
                    return r._mouseUp(n)
                }
                ,
                this.document.bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate),
                t.preventDefault(),
                i = !0,
                !0)
            }
        },
        _mouseMove: function(t) {
            return this._mouseMoved && (n.ui.ie && (!document.documentMode || document.documentMode < 9) && !t.button || !t.which) ? this._mouseUp(t) : ((t.which || t.button) && (this._mouseMoved = !0),
            this._mouseStarted) ? (this._mouseDrag(t),
            t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1,
            this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)),
            !this._mouseStarted)
        },
        _mouseUp: function(t) {
            return this.document.unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate),
            this._mouseStarted && (this._mouseStarted = !1,
            t.target === this._mouseDownEvent.target && n.data(t.target, this.widgetName + ".preventClickEvent", !0),
            this._mouseStop(t)),
            i = !1,
            !1
        },
        _mouseDistanceMet: function(n) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - n.pageX), Math.abs(this._mouseDownEvent.pageY - n.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    });
    /*!
 * jQuery UI Position 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
    (function() {
        function f(n, t, i) {
            return [parseFloat(n[0]) * (a.test(n[0]) ? t / 100 : 1), parseFloat(n[1]) * (a.test(n[1]) ? i / 100 : 1)]
        }
        function i(t, i) {
            return parseInt(n.css(t, i), 10) || 0
        }
        function v(t) {
            var i = t[0];
            return i.nodeType === 9 ? {
                width: t.width(),
                height: t.height(),
                offset: {
                    top: 0,
                    left: 0
                }
            } : n.isWindow(i) ? {
                width: t.width(),
                height: t.height(),
                offset: {
                    top: t.scrollTop(),
                    left: t.scrollLeft()
                }
            } : i.preventDefault ? {
                width: 0,
                height: 0,
                offset: {
                    top: i.pageY,
                    left: i.pageX
                }
            } : {
                width: t.outerWidth(),
                height: t.outerHeight(),
                offset: t.offset()
            }
        }
        n.ui = n.ui || {};
        var u, e, r = Math.max, t = Math.abs, o = Math.round, s = /left|center|right/, h = /top|center|bottom/, c = /[\+\-]\d+(\.[\d]+)?%?/, l = /^\w+/, a = /%$/, y = n.fn.position;
        n.position = {
            scrollbarWidth: function() {
                if (u !== undefined)
                    return u;
                var r, i, t = n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"), f = t.children()[0];
                return n("body").append(t),
                r = f.offsetWidth,
                t.css("overflow", "scroll"),
                i = f.offsetWidth,
                r === i && (i = t[0].clientWidth),
                t.remove(),
                u = r - i
            },
            getScrollInfo: function(t) {
                var i = t.isWindow || t.isDocument ? "" : t.element.css("overflow-x")
                  , r = t.isWindow || t.isDocument ? "" : t.element.css("overflow-y")
                  , u = i === "scroll" || i === "auto" && t.width < t.element[0].scrollWidth
                  , f = r === "scroll" || r === "auto" && t.height < t.element[0].scrollHeight;
                return {
                    width: f ? n.position.scrollbarWidth() : 0,
                    height: u ? n.position.scrollbarWidth() : 0
                }
            },
            getWithinInfo: function(t) {
                var i = n(t || window)
                  , r = n.isWindow(i[0])
                  , u = !!i[0] && i[0].nodeType === 9;
                return {
                    element: i,
                    isWindow: r,
                    isDocument: u,
                    offset: i.offset() || {
                        left: 0,
                        top: 0
                    },
                    scrollLeft: i.scrollLeft(),
                    scrollTop: i.scrollTop(),
                    width: r || u ? i.width() : i.outerWidth(),
                    height: r || u ? i.height() : i.outerHeight()
                }
            }
        };
        n.fn.position = function(u) {
            if (!u || !u.of)
                return y.apply(this, arguments);
            u = n.extend({}, u);
            var k, a, p, b, w, g, nt = n(u.of), it = n.position.getWithinInfo(u.within), rt = n.position.getScrollInfo(it), d = (u.collision || "flip").split(" "), tt = {};
            return g = v(nt),
            nt[0].preventDefault && (u.at = "left top"),
            a = g.width,
            p = g.height,
            b = g.offset,
            w = n.extend({}, b),
            n.each(["my", "at"], function() {
                var n = (u[this] || "").split(" "), t, i;
                n.length === 1 && (n = s.test(n[0]) ? n.concat(["center"]) : h.test(n[0]) ? ["center"].concat(n) : ["center", "center"]);
                n[0] = s.test(n[0]) ? n[0] : "center";
                n[1] = h.test(n[1]) ? n[1] : "center";
                t = c.exec(n[0]);
                i = c.exec(n[1]);
                tt[this] = [t ? t[0] : 0, i ? i[0] : 0];
                u[this] = [l.exec(n[0])[0], l.exec(n[1])[0]]
            }),
            d.length === 1 && (d[1] = d[0]),
            u.at[0] === "right" ? w.left += a : u.at[0] === "center" && (w.left += a / 2),
            u.at[1] === "bottom" ? w.top += p : u.at[1] === "center" && (w.top += p / 2),
            k = f(tt.at, a, p),
            w.left += k[0],
            w.top += k[1],
            this.each(function() {
                var y, g, h = n(this), c = h.outerWidth(), l = h.outerHeight(), ut = i(this, "marginLeft"), ft = i(this, "marginTop"), et = c + ut + i(this, "marginRight") + rt.width, ot = l + ft + i(this, "marginBottom") + rt.height, s = n.extend({}, w), v = f(tt.my, h.outerWidth(), h.outerHeight());
                u.my[0] === "right" ? s.left -= c : u.my[0] === "center" && (s.left -= c / 2);
                u.my[1] === "bottom" ? s.top -= l : u.my[1] === "center" && (s.top -= l / 2);
                s.left += v[0];
                s.top += v[1];
                e || (s.left = o(s.left),
                s.top = o(s.top));
                y = {
                    marginLeft: ut,
                    marginTop: ft
                };
                n.each(["left", "top"], function(t, i) {
                    n.ui.position[d[t]] && n.ui.position[d[t]][i](s, {
                        targetWidth: a,
                        targetHeight: p,
                        elemWidth: c,
                        elemHeight: l,
                        collisionPosition: y,
                        collisionWidth: et,
                        collisionHeight: ot,
                        offset: [k[0] + v[0], k[1] + v[1]],
                        my: u.my,
                        at: u.at,
                        within: it,
                        elem: h
                    })
                });
                u.using && (g = function(n) {
                    var i = b.left - s.left
                      , o = i + a - c
                      , f = b.top - s.top
                      , v = f + p - l
                      , e = {
                        target: {
                            element: nt,
                            left: b.left,
                            top: b.top,
                            width: a,
                            height: p
                        },
                        element: {
                            element: h,
                            left: s.left,
                            top: s.top,
                            width: c,
                            height: l
                        },
                        horizontal: o < 0 ? "left" : i > 0 ? "right" : "center",
                        vertical: v < 0 ? "top" : f > 0 ? "bottom" : "middle"
                    };
                    a < c && t(i + o) < a && (e.horizontal = "center");
                    p < l && t(f + v) < p && (e.vertical = "middle");
                    e.important = r(t(i), t(o)) > r(t(f), t(v)) ? "horizontal" : "vertical";
                    u.using.call(this, n, e)
                }
                );
                h.offset(n.extend(s, {
                    using: g
                }))
            })
        }
        ;
        n.ui.position = {
            fit: {
                left: function(n, t) {
                    var e = t.within, u = e.isWindow ? e.scrollLeft : e.offset.left, o = e.width, s = n.left - t.collisionPosition.marginLeft, i = u - s, f = s + t.collisionWidth - o - u, h;
                    t.collisionWidth > o ? i > 0 && f <= 0 ? (h = n.left + i + t.collisionWidth - o - u,
                    n.left += i - h) : n.left = f > 0 && i <= 0 ? u : i > f ? u + o - t.collisionWidth : u : i > 0 ? n.left += i : f > 0 ? n.left -= f : n.left = r(n.left - s, n.left)
                },
                top: function(n, t) {
                    var o = t.within, u = o.isWindow ? o.scrollTop : o.offset.top, e = t.within.height, s = n.top - t.collisionPosition.marginTop, i = u - s, f = s + t.collisionHeight - e - u, h;
                    t.collisionHeight > e ? i > 0 && f <= 0 ? (h = n.top + i + t.collisionHeight - e - u,
                    n.top += i - h) : n.top = f > 0 && i <= 0 ? u : i > f ? u + e - t.collisionHeight : u : i > 0 ? n.top += i : f > 0 ? n.top -= f : n.top = r(n.top - s, n.top)
                }
            },
            flip: {
                left: function(n, i) {
                    var r = i.within, y = r.offset.left + r.scrollLeft, c = r.width, o = r.isWindow ? r.scrollLeft : r.offset.left, l = n.left - i.collisionPosition.marginLeft, a = l - o, v = l + i.collisionWidth - c - o, u = i.my[0] === "left" ? -i.elemWidth : i.my[0] === "right" ? i.elemWidth : 0, f = i.at[0] === "left" ? i.targetWidth : i.at[0] === "right" ? -i.targetWidth : 0, e = -2 * i.offset[0], s, h;
                    a < 0 ? (s = n.left + u + f + e + i.collisionWidth - c - y,
                    (s < 0 || s < t(a)) && (n.left += u + f + e)) : v > 0 && (h = n.left - i.collisionPosition.marginLeft + u + f + e - o,
                    (h > 0 || t(h) < v) && (n.left += u + f + e))
                },
                top: function(n, i) {
                    var r = i.within, y = r.offset.top + r.scrollTop, a = r.height, o = r.isWindow ? r.scrollTop : r.offset.top, v = n.top - i.collisionPosition.marginTop, s = v - o, h = v + i.collisionHeight - a - o, p = i.my[1] === "top", u = p ? -i.elemHeight : i.my[1] === "bottom" ? i.elemHeight : 0, f = i.at[1] === "top" ? i.targetHeight : i.at[1] === "bottom" ? -i.targetHeight : 0, e = -2 * i.offset[1], c, l;
                    s < 0 ? (l = n.top + u + f + e + i.collisionHeight - a - y,
                    n.top + u + f + e > s && (l < 0 || l < t(s)) && (n.top += u + f + e)) : h > 0 && (c = n.top - i.collisionPosition.marginTop + u + f + e - o,
                    n.top + u + f + e > h && (c > 0 || t(c) < h) && (n.top += u + f + e))
                }
            },
            flipfit: {
                left: function() {
                    n.ui.position.flip.left.apply(this, arguments);
                    n.ui.position.fit.left.apply(this, arguments)
                },
                top: function() {
                    n.ui.position.flip.top.apply(this, arguments);
                    n.ui.position.fit.top.apply(this, arguments)
                }
            }
        },
        function() {
            var t, i, r, u, f, o = document.getElementsByTagName("body")[0], s = document.createElement("div");
            t = document.createElement(o ? "div" : "body");
            r = {
                visibility: "hidden",
                width: 0,
                height: 0,
                border: 0,
                margin: 0,
                background: "none"
            };
            o && n.extend(r, {
                position: "absolute",
                left: "-1000px",
                top: "-1000px"
            });
            for (f in r)
                t.style[f] = r[f];
            t.appendChild(s);
            i = o || document.documentElement;
            i.insertBefore(t, i.firstChild);
            s.style.cssText = "position: absolute; left: 10.7432222px;";
            u = n(s).offset().left;
            e = u > 10 && u < 11;
            t.innerHTML = "";
            i.removeChild(t)
        }()
    }
    )();
    nt = n.ui.position;
    /*!
 * jQuery UI Accordion 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 */
    tt = n.widget("ui.accordion", {
        version: "1.11.2",
        options: {
            active: 0,
            animate: {},
            collapsible: !1,
            event: "click",
            header: "> li > :first-child,> :not(li):even",
            heightStyle: "auto",
            icons: {
                activeHeader: "ui-icon-triangle-1-s",
                header: "ui-icon-triangle-1-e"
            },
            activate: null,
            beforeActivate: null
        },
        hideProps: {
            borderTopWidth: "hide",
            borderBottomWidth: "hide",
            paddingTop: "hide",
            paddingBottom: "hide",
            height: "hide"
        },
        showProps: {
            borderTopWidth: "show",
            borderBottomWidth: "show",
            paddingTop: "show",
            paddingBottom: "show",
            height: "show"
        },
        _create: function() {
            var t = this.options;
            this.prevShow = this.prevHide = n();
            this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist");
            t.collapsible || t.active !== !1 && t.active != null || (t.active = 0);
            this._processPanels();
            t.active < 0 && (t.active += this.headers.length);
            this._refresh()
        },
        _getCreateEventData: function() {
            return {
                header: this.active,
                panel: this.active.length ? this.active.next() : n()
            }
        },
        _createIcons: function() {
            var t = this.options.icons;
            t && (n("<span>").addClass("ui-accordion-header-icon ui-icon " + t.header).prependTo(this.headers),
            this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),
            this.headers.addClass("ui-accordion-icons"))
        },
        _destroyIcons: function() {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()
        },
        _destroy: function() {
            var n;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");
            this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();
            this._destroyIcons();
            n = this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display", "").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();
            this.options.heightStyle !== "content" && n.css("height", "")
        },
        _setOption: function(n, t) {
            if (n === "active") {
                this._activate(t);
                return
            }
            n === "event" && (this.options.event && this._off(this.headers, this.options.event),
            this._setupEvents(t));
            this._super(n, t);
            n !== "collapsible" || t || this.options.active !== !1 || this._activate(0);
            n === "icons" && (this._destroyIcons(),
            t && this._createIcons());
            n === "disabled" && (this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t),
            this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!t))
        },
        _keydown: function(t) {
            if (!t.altKey && !t.ctrlKey) {
                var i = n.ui.keyCode
                  , u = this.headers.length
                  , f = this.headers.index(t.target)
                  , r = !1;
                switch (t.keyCode) {
                case i.RIGHT:
                case i.DOWN:
                    r = this.headers[(f + 1) % u];
                    break;
                case i.LEFT:
                case i.UP:
                    r = this.headers[(f - 1 + u) % u];
                    break;
                case i.SPACE:
                case i.ENTER:
                    this._eventHandler(t);
                    break;
                case i.HOME:
                    r = this.headers[0];
                    break;
                case i.END:
                    r = this.headers[u - 1]
                }
                r && (n(t.target).attr("tabIndex", -1),
                n(r).attr("tabIndex", 0),
                r.focus(),
                t.preventDefault())
            }
        },
        _panelKeyDown: function(t) {
            t.keyCode === n.ui.keyCode.UP && t.ctrlKey && n(t.currentTarget).prev().focus()
        },
        refresh: function() {
            var t = this.options;
            this._processPanels();
            (t.active !== !1 || t.collapsible !== !0) && this.headers.length ? t.active === !1 ? this._activate(0) : this.active.length && !n.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (t.active = !1,
            this.active = n()) : this._activate(Math.max(0, t.active - 1)) : t.active = this.headers.index(this.active) : (t.active = !1,
            this.active = n());
            this._destroyIcons();
            this._refresh()
        },
        _processPanels: function() {
            var t = this.headers
              , n = this.panels;
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");
            this.panels = this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();
            n && (this._off(t.not(this.headers)),
            this._off(n.not(this.panels)))
        },
        _refresh: function() {
            var t, i = this.options, r = i.heightStyle, u = this.element.parent();
            this.active = this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");
            this.active.next().addClass("ui-accordion-content-active").show();
            this.headers.attr("role", "tab").each(function() {
                var t = n(this)
                  , r = t.uniqueId().attr("id")
                  , i = t.next()
                  , u = i.uniqueId().attr("id");
                t.attr("aria-controls", u);
                i.attr("aria-labelledby", r)
            }).next().attr("role", "tabpanel");
            this.headers.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            }).next().attr({
                "aria-hidden": "true"
            }).hide();
            this.active.length ? this.active.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            }).next().attr({
                "aria-hidden": "false"
            }) : this.headers.eq(0).attr("tabIndex", 0);
            this._createIcons();
            this._setupEvents(i.event);
            r === "fill" ? (t = u.height(),
            this.element.siblings(":visible").each(function() {
                var i = n(this)
                  , r = i.css("position");
                r !== "absolute" && r !== "fixed" && (t -= i.outerHeight(!0))
            }),
            this.headers.each(function() {
                t -= n(this).outerHeight(!0)
            }),
            this.headers.next().each(function() {
                n(this).height(Math.max(0, t - n(this).innerHeight() + n(this).height()))
            }).css("overflow", "auto")) : r === "auto" && (t = 0,
            this.headers.next().each(function() {
                t = Math.max(t, n(this).css("height", "").height())
            }).height(t))
        },
        _activate: function(t) {
            var i = this._findActive(t)[0];
            i !== this.active[0] && (i = i || this.active[0],
            this._eventHandler({
                target: i,
                currentTarget: i,
                preventDefault: n.noop
            }))
        },
        _findActive: function(t) {
            return typeof t == "number" ? this.headers.eq(t) : n()
        },
        _setupEvents: function(t) {
            var i = {
                keydown: "_keydown"
            };
            t && n.each(t.split(" "), function(n, t) {
                i[t] = "_eventHandler"
            });
            this._off(this.headers.add(this.headers.next()));
            this._on(this.headers, i);
            this._on(this.headers.next(), {
                keydown: "_panelKeyDown"
            });
            this._hoverable(this.headers);
            this._focusable(this.headers)
        },
        _eventHandler: function(t) {
            var i = this.options
              , u = this.active
              , r = n(t.currentTarget)
              , f = r[0] === u[0]
              , e = f && i.collapsible
              , s = e ? n() : r.next()
              , h = u.next()
              , o = {
                oldHeader: u,
                oldPanel: h,
                newHeader: e ? n() : r,
                newPanel: s
            };
            (t.preventDefault(),
            (!f || i.collapsible) && this._trigger("beforeActivate", t, o) !== !1) && (i.active = e ? !1 : this.headers.index(r),
            this.active = f ? n() : r,
            this._toggle(o),
            u.removeClass("ui-accordion-header-active ui-state-active"),
            i.icons && u.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),
            f || (r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),
            i.icons && r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),
            r.next().addClass("ui-accordion-content-active")))
        },
        _toggle: function(t) {
            var r = t.newPanel
              , i = this.prevShow.length ? this.prevShow : t.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0);
            this.prevShow = r;
            this.prevHide = i;
            this.options.animate ? this._animate(r, i, t) : (i.hide(),
            r.show(),
            this._toggleComplete(t));
            i.attr({
                "aria-hidden": "true"
            });
            i.prev().attr("aria-selected", "false");
            r.length && i.length ? i.prev().attr({
                tabIndex: -1,
                "aria-expanded": "false"
            }) : r.length && this.headers.filter(function() {
                return n(this).attr("tabIndex") === 0
            }).attr("tabIndex", -1);
            r.attr("aria-hidden", "false").prev().attr({
                "aria-selected": "true",
                tabIndex: 0,
                "aria-expanded": "true"
            })
        },
        _animate: function(n, t, i) {
            var h, r, u, c = this, o = 0, l = n.length && (!t.length || n.index() < t.index()), e = this.options.animate || {}, f = l && e.down || e, s = function() {
                c._toggleComplete(i)
            };
            if (typeof f == "number" && (u = f),
            typeof f == "string" && (r = f),
            r = r || f.easing || e.easing,
            u = u || f.duration || e.duration,
            !t.length)
                return n.animate(this.showProps, u, r, s);
            if (!n.length)
                return t.animate(this.hideProps, u, r, s);
            h = n.show().outerHeight();
            t.animate(this.hideProps, {
                duration: u,
                easing: r,
                step: function(n, t) {
                    t.now = Math.round(n)
                }
            });
            n.hide().animate(this.showProps, {
                duration: u,
                easing: r,
                complete: s,
                step: function(n, i) {
                    i.now = Math.round(n);
                    i.prop !== "height" ? o += i.now : c.options.heightStyle !== "content" && (i.now = Math.round(h - t.outerHeight() - o),
                    o = 0)
                }
            })
        },
        _toggleComplete: function(n) {
            var t = n.oldPanel;
            t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");
            t.length && (t.parent()[0].className = t.parent()[0].className);
            this._trigger("activate", null, n)
        }
    });
    /*!
 * jQuery UI Menu 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
    it = n.widget("ui.menu", {
        version: "1.11.2",
        defaultElement: "<ul>",
        delay: 300,
        options: {
            icons: {
                submenu: "ui-icon-carat-1-e"
            },
            items: "> *",
            menus: "ul",
            position: {
                my: "left-1 top",
                at: "right top"
            },
            role: "menu",
            blur: null,
            focus: null,
            select: null
        },
        _create: function() {
            this.activeMenu = this.element;
            this.mouseHandled = !1;
            this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({
                role: this.options.role,
                tabIndex: 0
            });
            this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true");
            this._on({
                "mousedown .ui-menu-item": function(n) {
                    n.preventDefault()
                },
                "click .ui-menu-item": function(t) {
                    var i = n(t.target);
                    !this.mouseHandled && i.not(".ui-state-disabled").length && (this.select(t),
                    t.isPropagationStopped() || (this.mouseHandled = !0),
                    i.has(".ui-menu").length ? this.expand(t) : !this.element.is(":focus") && n(this.document[0].activeElement).closest(".ui-menu").length && (this.element.trigger("focus", [!0]),
                    this.active && this.active.parents(".ui-menu").length === 1 && clearTimeout(this.timer)))
                },
                "mouseenter .ui-menu-item": function(t) {
                    if (!this.previousFilter) {
                        var i = n(t.currentTarget);
                        i.siblings(".ui-state-active").removeClass("ui-state-active");
                        this.focus(t, i)
                    }
                },
                mouseleave: "collapseAll",
                "mouseleave .ui-menu": "collapseAll",
                focus: function(n, t) {
                    var i = this.active || this.element.find(this.options.items).eq(0);
                    t || this.focus(n, i)
                },
                blur: function(t) {
                    this._delay(function() {
                        n.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t)
                    })
                },
                keydown: "_keydown"
            });
            this.refresh();
            this._on(this.document, {
                click: function(n) {
                    this._closeOnDocumentClick(n) && this.collapseAll(n);
                    this.mouseHandled = !1
                }
            })
        },
        _destroy: function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
            this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var t = n(this);
                t.data("ui-menu-submenu-carat") && t.remove()
            });
            this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
        },
        _keydown: function(t) {
            var i, u, r, f, e = !0;
            switch (t.keyCode) {
            case n.ui.keyCode.PAGE_UP:
                this.previousPage(t);
                break;
            case n.ui.keyCode.PAGE_DOWN:
                this.nextPage(t);
                break;
            case n.ui.keyCode.HOME:
                this._move("first", "first", t);
                break;
            case n.ui.keyCode.END:
                this._move("last", "last", t);
                break;
            case n.ui.keyCode.UP:
                this.previous(t);
                break;
            case n.ui.keyCode.DOWN:
                this.next(t);
                break;
            case n.ui.keyCode.LEFT:
                this.collapse(t);
                break;
            case n.ui.keyCode.RIGHT:
                this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
                break;
            case n.ui.keyCode.ENTER:
            case n.ui.keyCode.SPACE:
                this._activate(t);
                break;
            case n.ui.keyCode.ESCAPE:
                this.collapse(t);
                break;
            default:
                e = !1;
                u = this.previousFilter || "";
                r = String.fromCharCode(t.keyCode);
                f = !1;
                clearTimeout(this.filterTimer);
                r === u ? f = !0 : r = u + r;
                i = this._filterMenuItems(r);
                i = f && i.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : i;
                i.length || (r = String.fromCharCode(t.keyCode),
                i = this._filterMenuItems(r));
                i.length ? (this.focus(t, i),
                this.previousFilter = r,
                this.filterTimer = this._delay(function() {
                    delete this.previousFilter
                }, 1e3)) : delete this.previousFilter
            }
            e && t.preventDefault()
        },
        _activate: function(n) {
            this.active.is(".ui-state-disabled") || (this.active.is("[aria-haspopup='true']") ? this.expand(n) : this.select(n))
        },
        refresh: function() {
            var i, t, u = this, f = this.options.icons.submenu, r = this.element.find(this.options.menus);
            this.element.toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length);
            r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({
                role: this.options.role,
                "aria-hidden": "true",
                "aria-expanded": "false"
            }).each(function() {
                var t = n(this)
                  , i = t.parent()
                  , r = n("<span>").addClass("ui-menu-icon ui-icon " + f).data("ui-menu-submenu-carat", !0);
                i.attr("aria-haspopup", "true").prepend(r);
                t.attr("aria-labelledby", i.attr("id"))
            });
            i = r.add(this.element);
            t = i.find(this.options.items);
            t.not(".ui-menu-item").each(function() {
                var t = n(this);
                u._isDivider(t) && t.addClass("ui-widget-content ui-menu-divider")
            });
            t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({
                tabIndex: -1,
                role: this._itemRole()
            });
            t.filter(".ui-state-disabled").attr("aria-disabled", "true");
            this.active && !n.contains(this.element[0], this.active[0]) && this.blur()
        },
        _itemRole: function() {
            return {
                menu: "menuitem",
                listbox: "option"
            }[this.options.role]
        },
        _setOption: function(n, t) {
            n === "icons" && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);
            n === "disabled" && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t);
            this._super(n, t)
        },
        focus: function(n, t) {
            var i, r;
            this.blur(n, n && n.type === "focus");
            this._scrollIntoView(t);
            this.active = t.first();
            r = this.active.addClass("ui-state-focus").removeClass("ui-state-active");
            this.options.role && this.element.attr("aria-activedescendant", r.attr("id"));
            this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");
            n && n.type === "keydown" ? this._close() : this.timer = this._delay(function() {
                this._close()
            }, this.delay);
            i = t.children(".ui-menu");
            i.length && n && /^mouse/.test(n.type) && this._startOpening(i);
            this.activeMenu = t.parent();
            this._trigger("focus", n, {
                item: t
            })
        },
        _scrollIntoView: function(t) {
            var e, o, i, r, u, f;
            this._hasScroll() && (e = parseFloat(n.css(this.activeMenu[0], "borderTopWidth")) || 0,
            o = parseFloat(n.css(this.activeMenu[0], "paddingTop")) || 0,
            i = t.offset().top - this.activeMenu.offset().top - e - o,
            r = this.activeMenu.scrollTop(),
            u = this.activeMenu.height(),
            f = t.outerHeight(),
            i < 0 ? this.activeMenu.scrollTop(r + i) : i + f > u && this.activeMenu.scrollTop(r + i - u + f))
        },
        blur: function(n, t) {
            (t || clearTimeout(this.timer),
            this.active) && (this.active.removeClass("ui-state-focus"),
            this.active = null,
            this._trigger("blur", n, {
                item: this.active
            }))
        },
        _startOpening: function(n) {
            (clearTimeout(this.timer),
            n.attr("aria-hidden") === "true") && (this.timer = this._delay(function() {
                this._close();
                this._open(n)
            }, this.delay))
        },
        _open: function(t) {
            var i = n.extend({
                of: this.active
            }, this.options.position);
            clearTimeout(this.timer);
            this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true");
            t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(i)
        },
        collapseAll: function(t, i) {
            clearTimeout(this.timer);
            this.timer = this._delay(function() {
                var r = i ? this.element : n(t && t.target).closest(this.element.find(".ui-menu"));
                r.length || (r = this.element);
                this._close(r);
                this.blur(t);
                this.activeMenu = r
            }, this.delay)
        },
        _close: function(n) {
            n || (n = this.active ? this.active.parent() : this.element);
            n.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")
        },
        _closeOnDocumentClick: function(t) {
            return !n(t.target).closest(".ui-menu").length
        },
        _isDivider: function(n) {
            return !/[^\-\u2014\u2013\s]/.test(n.text())
        },
        collapse: function(n) {
            var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            t && t.length && (this._close(),
            this.focus(n, t))
        },
        expand: function(n) {
            var t = this.active && this.active.children(".ui-menu ").find(this.options.items).first();
            t && t.length && (this._open(t.parent()),
            this._delay(function() {
                this.focus(n, t)
            }))
        },
        next: function(n) {
            this._move("next", "first", n)
        },
        previous: function(n) {
            this._move("prev", "last", n)
        },
        isFirstItem: function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        },
        isLastItem: function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        },
        _move: function(n, t, i) {
            var r;
            this.active && (r = n === "first" || n === "last" ? this.active[n === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[n + "All"](".ui-menu-item").eq(0));
            r && r.length && this.active || (r = this.activeMenu.find(this.options.items)[t]());
            this.focus(i, r)
        },
        nextPage: function(t) {
            var i, r, u;
            if (!this.active) {
                this.next(t);
                return
            }
            this.isLastItem() || (this._hasScroll() ? (r = this.active.offset().top,
            u = this.element.height(),
            this.active.nextAll(".ui-menu-item").each(function() {
                return i = n(this),
                i.offset().top - r - u < 0
            }),
            this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items)[this.active ? "last" : "first"]()))
        },
        previousPage: function(t) {
            var i, r, u;
            if (!this.active) {
                this.next(t);
                return
            }
            this.isFirstItem() || (this._hasScroll() ? (r = this.active.offset().top,
            u = this.element.height(),
            this.active.prevAll(".ui-menu-item").each(function() {
                return i = n(this),
                i.offset().top - r + u > 0
            }),
            this.focus(t, i)) : this.focus(t, this.activeMenu.find(this.options.items).first()))
        },
        _hasScroll: function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        },
        select: function(t) {
            this.active = this.active || n(t.target).closest(".ui-menu-item");
            var i = {
                item: this.active
            };
            this.active.has(".ui-menu").length || this.collapseAll(t, !0);
            this._trigger("select", t, i)
        },
        _filterMenuItems: function(t) {
            var i = t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
              , r = new RegExp("^" + i,"i");
            return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function() {
                return r.test(n.trim(n(this).text()))
            })
        }
    });
    /*!
 * jQuery UI Autocomplete 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
    n.widget("ui.autocomplete", {
        version: "1.11.2",
        defaultElement: "<input>",
        options: {
            appendTo: null,
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            source: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            response: null,
            search: null,
            select: null
        },
        requestIndex: 0,
        pending: 0,
        _create: function() {
            var t, i, r, u = this.element[0].nodeName.toLowerCase(), f = u === "textarea", e = u === "input";
            this.isMultiLine = f ? !0 : e ? !1 : this.element.prop("isContentEditable");
            this.valueMethod = this.element[f || e ? "val" : "text"];
            this.isNewMenu = !0;
            this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off");
            this._on(this.element, {
                keydown: function(u) {
                    if (this.element.prop("readOnly")) {
                        t = !0;
                        r = !0;
                        i = !0;
                        return
                    }
                    t = !1;
                    r = !1;
                    i = !1;
                    var f = n.ui.keyCode;
                    switch (u.keyCode) {
                    case f.PAGE_UP:
                        t = !0;
                        this._move("previousPage", u);
                        break;
                    case f.PAGE_DOWN:
                        t = !0;
                        this._move("nextPage", u);
                        break;
                    case f.UP:
                        t = !0;
                        this._keyEvent("previous", u);
                        break;
                    case f.DOWN:
                        t = !0;
                        this._keyEvent("next", u);
                        break;
                    case f.ENTER:
                        this.menu.active && (t = !0,
                        u.preventDefault(),
                        this.menu.select(u));
                        break;
                    case f.TAB:
                        this.menu.active && this.menu.select(u);
                        break;
                    case f.ESCAPE:
                        this.menu.element.is(":visible") && (this.isMultiLine || this._value(this.term),
                        this.close(u),
                        u.preventDefault());
                        break;
                    default:
                        i = !0;
                        this._searchTimeout(u)
                    }
                },
                keypress: function(r) {
                    if (t) {
                        t = !1;
                        (!this.isMultiLine || this.menu.element.is(":visible")) && r.preventDefault();
                        return
                    }
                    if (!i) {
                        var u = n.ui.keyCode;
                        switch (r.keyCode) {
                        case u.PAGE_UP:
                            this._move("previousPage", r);
                            break;
                        case u.PAGE_DOWN:
                            this._move("nextPage", r);
                            break;
                        case u.UP:
                            this._keyEvent("previous", r);
                            break;
                        case u.DOWN:
                            this._keyEvent("next", r)
                        }
                    }
                },
                input: function(n) {
                    if (r) {
                        r = !1;
                        n.preventDefault();
                        return
                    }
                    this._searchTimeout(n)
                },
                focus: function() {
                    this.selectedItem = null;
                    this.previous = this._value()
                },
                blur: function(n) {
                    if (this.cancelBlur) {
                        delete this.cancelBlur;
                        return
                    }
                    clearTimeout(this.searching);
                    this.close(n);
                    this._change(n)
                }
            });
            this._initSource();
            this.menu = n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({
                role: null
            }).hide().menu("instance");
            this._on(this.menu.element, {
                mousedown: function(t) {
                    t.preventDefault();
                    this.cancelBlur = !0;
                    this._delay(function() {
                        delete this.cancelBlur
                    });
                    var i = this.menu.element[0];
                    n(t.target).closest(".ui-menu-item").length || this._delay(function() {
                        var t = this;
                        this.document.one("mousedown", function(r) {
                            r.target === t.element[0] || r.target === i || n.contains(i, r.target) || t.close()
                        })
                    })
                },
                menufocus: function(t, i) {
                    var r, u;
                    if (this.isNewMenu && (this.isNewMenu = !1,
                    t.originalEvent && /^mouse/.test(t.originalEvent.type))) {
                        this.menu.blur();
                        this.document.one("mousemove", function() {
                            n(t.target).trigger(t.originalEvent)
                        });
                        return
                    }
                    u = i.item.data("ui-autocomplete-item");
                    !1 !== this._trigger("focus", t, {
                        item: u
                    }) && t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(u.value);
                    r = i.item.attr("aria-label") || u.value;
                    r && n.trim(r).length && (this.liveRegion.children().hide(),
                    n("<div>").text(r).appendTo(this.liveRegion))
                },
                menuselect: function(n, t) {
                    var i = t.item.data("ui-autocomplete-item")
                      , r = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(),
                    this.previous = r,
                    this._delay(function() {
                        this.previous = r;
                        this.selectedItem = i
                    }));
                    !1 !== this._trigger("select", n, {
                        item: i
                    }) && this._value(i.value);
                    this.term = this._value();
                    this.close(n);
                    this.selectedItem = i
                }
            });
            this.liveRegion = n("<span>", {
                role: "status",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);
            this._on(this.window, {
                beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _destroy: function() {
            clearTimeout(this.searching);
            this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");
            this.menu.element.remove();
            this.liveRegion.remove()
        },
        _setOption: function(n, t) {
            this._super(n, t);
            n === "source" && this._initSource();
            n === "appendTo" && this.menu.element.appendTo(this._appendTo());
            n === "disabled" && t && this.xhr && this.xhr.abort()
        },
        _appendTo: function() {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? n(t) : this.document.find(t).eq(0)),
            t && t[0] || (t = this.element.closest(".ui-front")),
            t.length || (t = this.document[0].body),
            t
        },
        _initSource: function() {
            var i, r, t = this;
            n.isArray(this.options.source) ? (i = this.options.source,
            this.source = function(t, r) {
                r(n.ui.autocomplete.filter(i, t.term))
            }
            ) : typeof this.options.source == "string" ? (r = this.options.source,
            this.source = function(i, u) {
                t.xhr && t.xhr.abort();
                t.xhr = n.ajax({
                    url: r,
                    data: i,
                    dataType: "json",
                    success: function(n) {
                        u(n)
                    },
                    error: function() {
                        u([])
                    }
                })
            }
            ) : this.source = this.options.source
        },
        _searchTimeout: function(n) {
            clearTimeout(this.searching);
            this.searching = this._delay(function() {
                var t = this.term === this._value()
                  , i = this.menu.element.is(":visible")
                  , r = n.altKey || n.ctrlKey || n.metaKey || n.shiftKey;
                t && (!t || i || r) || (this.selectedItem = null,
                this.search(null, n))
            }, this.options.delay)
        },
        search: function(n, t) {
            return (n = n != null ? n : this._value(),
            this.term = this._value(),
            n.length < this.options.minLength) ? this.close(t) : this._trigger("search", t) === !1 ? void 0 : this._search(n)
        },
        _search: function(n) {
            this.pending++;
            this.element.addClass("ui-autocomplete-loading");
            this.cancelSearch = !1;
            this.source({
                term: n
            }, this._response())
        },
        _response: function() {
            var t = ++this.requestIndex;
            return n.proxy(function(n) {
                t === this.requestIndex && this.__response(n);
                this.pending--;
                this.pending || this.element.removeClass("ui-autocomplete-loading")
            }, this)
        },
        __response: function(n) {
            n && (n = this._normalize(n));
            this._trigger("response", null, {
                content: n
            });
            !this.options.disabled && n && n.length && !this.cancelSearch ? (this._suggest(n),
            this._trigger("open")) : this._close()
        },
        close: function(n) {
            this.cancelSearch = !0;
            this._close(n)
        },
        _close: function(n) {
            this.menu.element.is(":visible") && (this.menu.element.hide(),
            this.menu.blur(),
            this.isNewMenu = !0,
            this._trigger("close", n))
        },
        _change: function(n) {
            this.previous !== this._value() && this._trigger("change", n, {
                item: this.selectedItem
            })
        },
        _normalize: function(t) {
            return t.length && t[0].label && t[0].value ? t : n.map(t, function(t) {
                return typeof t == "string" ? {
                    label: t,
                    value: t
                } : n.extend({}, t, {
                    label: t.label || t.value,
                    value: t.value || t.label
                })
            })
        },
        _suggest: function(t) {
            var i = this.menu.element.empty();
            this._renderMenu(i, t);
            this.isNewMenu = !0;
            this.menu.refresh();
            i.show();
            this._resizeMenu();
            i.position(n.extend({
                of: this.element
            }, this.options.position));
            this.options.autoFocus && this.menu.next()
        },
        _resizeMenu: function() {
            var n = this.menu.element;
            n.outerWidth(Math.max(n.width("").outerWidth() + 1, this.element.outerWidth()))
        },
        _renderMenu: function(t, i) {
            var r = this;
            n.each(i, function(n, i) {
                r._renderItemData(t, i)
            })
        },
        _renderItemData: function(n, t) {
            return this._renderItem(n, t).data("ui-autocomplete-item", t)
        },
        _renderItem: function(t, i) {
            return n("<li>").text(i.label).appendTo(t)
        },
        _move: function(n, t) {
            if (!this.menu.element.is(":visible")) {
                this.search(null, t);
                return
            }
            if (this.menu.isFirstItem() && /^previous/.test(n) || this.menu.isLastItem() && /^next/.test(n)) {
                this.isMultiLine || this._value(this.term);
                this.menu.blur();
                return
            }
            this.menu[n](t)
        },
        widget: function() {
            return this.menu.element
        },
        _value: function() {
            return this.valueMethod.apply(this.element, arguments)
        },
        _keyEvent: function(n, t) {
            (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(n, t),
            t.preventDefault())
        }
    });
    n.extend(n.ui.autocomplete, {
        escapeRegex: function(n) {
            return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        },
        filter: function(t, i) {
            var r = new RegExp(n.ui.autocomplete.escapeRegex(i),"i");
            return n.grep(t, function(n) {
                return r.test(n.label || n.value || n)
            })
        }
    });
    n.widget("ui.autocomplete", n.ui.autocomplete, {
        options: {
            messages: {
                noResults: "No search results.",
                results: function(n) {
                    return n + (n > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }
            }
        },
        __response: function(t) {
            var i;
            (this._superApply(arguments),
            this.options.disabled || this.cancelSearch) || (i = t && t.length ? this.options.messages.results(t.length) : this.options.messages.noResults,
            this.liveRegion.children().hide(),
            n("<div>").text(i).appendTo(this.liveRegion))
        }
    });
    rt = n.ui.autocomplete;
    /*!
 * jQuery UI Button 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */
    var s, p = "ui-button ui-widget ui-state-default ui-corner-all", w = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", vi = function() {
        var t = n(this);
        setTimeout(function() {
            t.find(":ui-button").button("refresh")
        }, 1)
    }, b = function(t) {
        var i = t.name
          , r = t.form
          , u = n([]);
        return i && (i = i.replace(/'/g, "\\'"),
        u = r ? n(r).find("[name='" + i + "'][type=radio]") : n("[name='" + i + "'][type=radio]", t.ownerDocument).filter(function() {
            return !this.form
        })),
        u
    };
    n.widget("ui.button", {
        version: "1.11.2",
        defaultElement: "<button>",
        options: {
            disabled: null,
            text: !0,
            label: null,
            icons: {
                primary: null,
                secondary: null
            }
        },
        _create: function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, vi);
            typeof this.options.disabled != "boolean" ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled);
            this._determineButtonType();
            this.hasTitle = !!this.buttonElement.attr("title");
            var i = this
              , t = this.options
              , r = this.type === "checkbox" || this.type === "radio"
              , u = r ? "" : "ui-state-active";
            t.label === null && (t.label = this.type === "input" ? this.buttonElement.val() : this.buttonElement.html());
            this._hoverable(this.buttonElement);
            this.buttonElement.addClass(p).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                t.disabled || this === s && n(this).addClass("ui-state-active")
            }).bind("mouseleave" + this.eventNamespace, function() {
                t.disabled || n(this).removeClass(u)
            }).bind("click" + this.eventNamespace, function(n) {
                t.disabled && (n.preventDefault(),
                n.stopImmediatePropagation())
            });
            this._on({
                focus: function() {
                    this.buttonElement.addClass("ui-state-focus")
                },
                blur: function() {
                    this.buttonElement.removeClass("ui-state-focus")
                }
            });
            r && this.element.bind("change" + this.eventNamespace, function() {
                i.refresh()
            });
            this.type === "checkbox" ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (t.disabled)
                    return !1
            }) : this.type === "radio" ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (t.disabled)
                    return !1;
                n(this).addClass("ui-state-active");
                i.buttonElement.attr("aria-pressed", "true");
                var r = i.element[0];
                b(r).not(r).map(function() {
                    return n(this).button("widget")[0]
                }).removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                if (t.disabled)
                    return !1;
                n(this).addClass("ui-state-active");
                s = this;
                i.document.one("mouseup", function() {
                    s = null
                })
            }).bind("mouseup" + this.eventNamespace, function() {
                if (t.disabled)
                    return !1;
                n(this).removeClass("ui-state-active")
            }).bind("keydown" + this.eventNamespace, function(i) {
                if (t.disabled)
                    return !1;
                (i.keyCode === n.ui.keyCode.SPACE || i.keyCode === n.ui.keyCode.ENTER) && n(this).addClass("ui-state-active")
            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                n(this).removeClass("ui-state-active")
            }),
            this.buttonElement.is("a") && this.buttonElement.keyup(function(t) {
                t.keyCode === n.ui.keyCode.SPACE && n(this).click()
            }));
            this._setOption("disabled", t.disabled);
            this._resetButton()
        },
        _determineButtonType: function() {
            var n, t, i;
            this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button";
            this.type === "checkbox" || this.type === "radio" ? (n = this.element.parents().last(),
            t = "label[for='" + this.element.attr("id") + "']",
            this.buttonElement = n.find(t),
            this.buttonElement.length || (n = n.length ? n.siblings() : this.element.siblings(),
            this.buttonElement = n.filter(t),
            this.buttonElement.length || (this.buttonElement = n.find(t))),
            this.element.addClass("ui-helper-hidden-accessible"),
            i = this.element.is(":checked"),
            i && this.buttonElement.addClass("ui-state-active"),
            this.buttonElement.prop("aria-pressed", i)) : this.buttonElement = this.element
        },
        widget: function() {
            return this.buttonElement
        },
        _destroy: function() {
            this.element.removeClass("ui-helper-hidden-accessible");
            this.buttonElement.removeClass(p + " ui-state-active " + w).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
            this.hasTitle || this.buttonElement.removeAttr("title")
        },
        _setOption: function(n, t) {
            if (this._super(n, t),
            n === "disabled") {
                this.widget().toggleClass("ui-state-disabled", !!t);
                this.element.prop("disabled", !!t);
                t && (this.type === "checkbox" || this.type === "radio" ? this.buttonElement.removeClass("ui-state-focus") : this.buttonElement.removeClass("ui-state-focus ui-state-active"));
                return
            }
            this._resetButton()
        },
        refresh: function() {
            var t = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            t !== this.options.disabled && this._setOption("disabled", t);
            this.type === "radio" ? b(this.element[0]).each(function() {
                n(this).is(":checked") ? n(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : this.type === "checkbox" && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
        },
        _resetButton: function() {
            if (this.type === "input") {
                this.options.label && this.element.val(this.options.label);
                return
            }
            var i = this.buttonElement.removeClass(w)
              , f = n("<span><\/span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text()
              , t = this.options.icons
              , u = t.primary && t.secondary
              , r = [];
            t.primary || t.secondary ? (this.options.text && r.push("ui-button-text-icon" + (u ? "s" : t.primary ? "-primary" : "-secondary")),
            t.primary && i.prepend("<span class='ui-button-icon-primary ui-icon " + t.primary + "'><\/span>"),
            t.secondary && i.append("<span class='ui-button-icon-secondary ui-icon " + t.secondary + "'><\/span>"),
            this.options.text || (r.push(u ? "ui-button-icons-only" : "ui-button-icon-only"),
            this.hasTitle || i.attr("title", n.trim(f)))) : r.push("ui-button-text-only");
            i.addClass(r.join(" "))
        }
    });
    n.widget("ui.buttonset", {
        version: "1.11.2",
        options: {
            items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"
        },
        _create: function() {
            this.element.addClass("ui-buttonset")
        },
        _init: function() {
            this.refresh()
        },
        _setOption: function(n, t) {
            n === "disabled" && this.buttons.button("option", n, t);
            this._super(n, t)
        },
        refresh: function() {
            var i = this.element.css("direction") === "rtl"
              , t = this.element.find(this.options.items)
              , r = t.filter(":ui-button");
            t.not(":ui-button").button();
            r.button("refresh");
            this.buttons = t.map(function() {
                return n(this).button("widget")[0]
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(i ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(i ? "ui-corner-left" : "ui-corner-right").end().end()
        },
        _destroy: function() {
            this.element.removeClass("ui-buttonset");
            this.buttons.map(function() {
                return n(this).button("widget")[0]
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }
    });
    ut = n.ui.button;
    /*!
 * jQuery UI Datepicker 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
    n.extend(n.ui, {
        datepicker: {
            version: "1.11.2"
        }
    });
    n.extend(l.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        _widgetDatepicker: function() {
            return this.dpDiv
        },
        setDefaults: function(n) {
            return r(this._defaults, n || {}),
            this
        },
        _attachDatepicker: function(t, i) {
            var r, f, u;
            r = t.nodeName.toLowerCase();
            f = r === "div" || r === "span";
            t.id || (this.uuid += 1,
            t.id = "dp" + this.uuid);
            u = this._newInst(n(t), f);
            u.settings = n.extend({}, i || {});
            r === "input" ? this._connectDatepicker(t, u) : f && this._inlineDatepicker(t, u)
        },
        _newInst: function(t, i) {
            var r = t[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return {
                id: r,
                input: t,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: i,
                dpDiv: i ? a(n("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")) : this.dpDiv
            }
        },
        _connectDatepicker: function(t, i) {
            var r = n(t);
            (i.append = n([]),
            i.trigger = n([]),
            r.hasClass(this.markerClassName)) || (this._attachments(r, i),
            r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),
            this._autoSize(i),
            n.data(t, "datepicker", i),
            i.settings.disabled && this._disableDatepicker(t))
        },
        _attachments: function(t, i) {
            var u, r, f, e = this._get(i, "appendText"), o = this._get(i, "isRTL");
            i.append && i.append.remove();
            e && (i.append = n("<span class='" + this._appendClass + "'>" + e + "<\/span>"),
            t[o ? "before" : "after"](i.append));
            t.unbind("focus", this._showDatepicker);
            i.trigger && i.trigger.remove();
            u = this._get(i, "showOn");
            (u === "focus" || u === "both") && t.focus(this._showDatepicker);
            (u === "button" || u === "both") && (r = this._get(i, "buttonText"),
            f = this._get(i, "buttonImage"),
            i.trigger = n(this._get(i, "buttonImageOnly") ? n("<img/>").addClass(this._triggerClass).attr({
                src: f,
                alt: r,
                title: r
            }) : n("<button type='button'><\/button>").addClass(this._triggerClass).html(f ? n("<img/>").attr({
                src: f,
                alt: r,
                title: r
            }) : r)),
            t[o ? "before" : "after"](i.trigger),
            i.trigger.click(function() {
                return n.datepicker._datepickerShowing && n.datepicker._lastInput === t[0] ? n.datepicker._hideDatepicker() : n.datepicker._datepickerShowing && n.datepicker._lastInput !== t[0] ? (n.datepicker._hideDatepicker(),
                n.datepicker._showDatepicker(t[0])) : n.datepicker._showDatepicker(t[0]),
                !1
            }))
        },
        _autoSize: function(n) {
            if (this._get(n, "autoSize") && !n.inline) {
                var r, u, f, t, i = new Date(2009,11,20), e = this._get(n, "dateFormat");
                e.match(/[DM]/) && (r = function(n) {
                    for (u = 0,
                    f = 0,
                    t = 0; t < n.length; t++)
                        n[t].length > u && (u = n[t].length,
                        f = t);
                    return f
                }
                ,
                i.setMonth(r(this._get(n, e.match(/MM/) ? "monthNames" : "monthNamesShort"))),
                i.setDate(r(this._get(n, e.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - i.getDay()));
                n.input.attr("size", this._formatDate(n, i).length)
            }
        },
        _inlineDatepicker: function(t, i) {
            var r = n(t);
            r.hasClass(this.markerClassName) || (r.addClass(this.markerClassName).append(i.dpDiv),
            n.data(t, "datepicker", i),
            this._setDate(i, this._getDefaultDate(i), !0),
            this._updateDatepicker(i),
            this._updateAlternate(i),
            i.settings.disabled && this._disableDatepicker(t),
            i.dpDiv.css("display", "block"))
        },
        _dialogDatepicker: function(t, i, u, f, e) {
            var s, h, c, l, a, o = this._dialogInst;
            return o || (this.uuid += 1,
            s = "dp" + this.uuid,
            this._dialogInput = n("<input type='text' id='" + s + "' style='position: absolute; top: -100px; width: 0px;'/>"),
            this._dialogInput.keydown(this._doKeyDown),
            n("body").append(this._dialogInput),
            o = this._dialogInst = this._newInst(this._dialogInput, !1),
            o.settings = {},
            n.data(this._dialogInput[0], "datepicker", o)),
            r(o.settings, f || {}),
            i = i && i.constructor === Date ? this._formatDate(o, i) : i,
            this._dialogInput.val(i),
            this._pos = e ? e.length ? e : [e.pageX, e.pageY] : null,
            this._pos || (h = document.documentElement.clientWidth,
            c = document.documentElement.clientHeight,
            l = document.documentElement.scrollLeft || document.body.scrollLeft,
            a = document.documentElement.scrollTop || document.body.scrollTop,
            this._pos = [h / 2 - 100 + l, c / 2 - 150 + a]),
            this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"),
            o.settings.onSelect = u,
            this._inDialog = !0,
            this.dpDiv.addClass(this._dialogClass),
            this._showDatepicker(this._dialogInput[0]),
            n.blockUI && n.blockUI(this.dpDiv),
            n.data(this._dialogInput[0], "datepicker", o),
            this
        },
        _destroyDatepicker: function(t) {
            var i, r = n(t), u = n.data(t, "datepicker");
            r.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(),
            n.removeData(t, "datepicker"),
            i === "input" ? (u.append.remove(),
            u.trigger.remove(),
            r.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : (i === "div" || i === "span") && r.removeClass(this.markerClassName).empty())
        },
        _enableDatepicker: function(t) {
            var i, r, u = n(t), f = n.data(t, "datepicker");
            u.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(),
            i === "input" ? (t.disabled = !1,
            f.trigger.filter("button").each(function() {
                this.disabled = !1
            }).end().filter("img").css({
                opacity: "1.0",
                cursor: ""
            })) : (i === "div" || i === "span") && (r = u.children("." + this._inlineClass),
            r.children().removeClass("ui-state-disabled"),
            r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)),
            this._disabledInputs = n.map(this._disabledInputs, function(n) {
                return n === t ? null : n
            }))
        },
        _disableDatepicker: function(t) {
            var i, r, u = n(t), f = n.data(t, "datepicker");
            u.hasClass(this.markerClassName) && (i = t.nodeName.toLowerCase(),
            i === "input" ? (t.disabled = !0,
            f.trigger.filter("button").each(function() {
                this.disabled = !0
            }).end().filter("img").css({
                opacity: "0.5",
                cursor: "default"
            })) : (i === "div" || i === "span") && (r = u.children("." + this._inlineClass),
            r.children().addClass("ui-state-disabled"),
            r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)),
            this._disabledInputs = n.map(this._disabledInputs, function(n) {
                return n === t ? null : n
            }),
            this._disabledInputs[this._disabledInputs.length] = t)
        },
        _isDisabledDatepicker: function(n) {
            if (!n)
                return !1;
            for (var t = 0; t < this._disabledInputs.length; t++)
                if (this._disabledInputs[t] === n)
                    return !0;
            return !1
        },
        _getInst: function(t) {
            try {
                return n.data(t, "datepicker")
            } catch (i) {
                throw "Missing instance data for this datepicker";
            }
        },
        _optionDatepicker: function(t, i, u) {
            var e, h, o, s, f = this._getInst(t);
            if (arguments.length === 2 && typeof i == "string")
                return i === "defaults" ? n.extend({}, n.datepicker._defaults) : f ? i === "all" ? n.extend({}, f.settings) : this._get(f, i) : null;
            e = i || {};
            typeof i == "string" && (e = {},
            e[i] = u);
            f && (this._curInst === f && this._hideDatepicker(),
            h = this._getDateDatepicker(t, !0),
            o = this._getMinMaxDate(f, "min"),
            s = this._getMinMaxDate(f, "max"),
            r(f.settings, e),
            o !== null && e.dateFormat !== undefined && e.minDate === undefined && (f.settings.minDate = this._formatDate(f, o)),
            s !== null && e.dateFormat !== undefined && e.maxDate === undefined && (f.settings.maxDate = this._formatDate(f, s)),
            "disabled"in e && (e.disabled ? this._disableDatepicker(t) : this._enableDatepicker(t)),
            this._attachments(n(t), f),
            this._autoSize(f),
            this._setDate(f, h),
            this._updateAlternate(f),
            this._updateDatepicker(f))
        },
        _changeDatepicker: function(n, t, i) {
            this._optionDatepicker(n, t, i)
        },
        _refreshDatepicker: function(n) {
            var t = this._getInst(n);
            t && this._updateDatepicker(t)
        },
        _setDateDatepicker: function(n, t) {
            var i = this._getInst(n);
            i && (this._setDate(i, t),
            this._updateDatepicker(i),
            this._updateAlternate(i))
        },
        _getDateDatepicker: function(n, t) {
            var i = this._getInst(n);
            return i && !i.inline && this._setDateFromField(i, t),
            i ? this._getDate(i) : null
        },
        _doKeyDown: function(t) {
            var u, e, f, i = n.datepicker._getInst(t.target), r = !0, o = i.dpDiv.is(".ui-datepicker-rtl");
            if (i._keyEvent = !0,
            n.datepicker._datepickerShowing)
                switch (t.keyCode) {
                case 9:
                    n.datepicker._hideDatepicker();
                    r = !1;
                    break;
                case 13:
                    return f = n("td." + n.datepicker._dayOverClass + ":not(." + n.datepicker._currentClass + ")", i.dpDiv),
                    f[0] && n.datepicker._selectDay(t.target, i.selectedMonth, i.selectedYear, f[0]),
                    u = n.datepicker._get(i, "onSelect"),
                    u ? (e = n.datepicker._formatDate(i),
                    u.apply(i.input ? i.input[0] : null, [e, i])) : n.datepicker._hideDatepicker(),
                    !1;
                case 27:
                    n.datepicker._hideDatepicker();
                    break;
                case 33:
                    n.datepicker._adjustDate(t.target, t.ctrlKey ? -n.datepicker._get(i, "stepBigMonths") : -n.datepicker._get(i, "stepMonths"), "M");
                    break;
                case 34:
                    n.datepicker._adjustDate(t.target, t.ctrlKey ? +n.datepicker._get(i, "stepBigMonths") : +n.datepicker._get(i, "stepMonths"), "M");
                    break;
                case 35:
                    (t.ctrlKey || t.metaKey) && n.datepicker._clearDate(t.target);
                    r = t.ctrlKey || t.metaKey;
                    break;
                case 36:
                    (t.ctrlKey || t.metaKey) && n.datepicker._gotoToday(t.target);
                    r = t.ctrlKey || t.metaKey;
                    break;
                case 37:
                    (t.ctrlKey || t.metaKey) && n.datepicker._adjustDate(t.target, o ? 1 : -1, "D");
                    r = t.ctrlKey || t.metaKey;
                    t.originalEvent.altKey && n.datepicker._adjustDate(t.target, t.ctrlKey ? -n.datepicker._get(i, "stepBigMonths") : -n.datepicker._get(i, "stepMonths"), "M");
                    break;
                case 38:
                    (t.ctrlKey || t.metaKey) && n.datepicker._adjustDate(t.target, -7, "D");
                    r = t.ctrlKey || t.metaKey;
                    break;
                case 39:
                    (t.ctrlKey || t.metaKey) && n.datepicker._adjustDate(t.target, o ? -1 : 1, "D");
                    r = t.ctrlKey || t.metaKey;
                    t.originalEvent.altKey && n.datepicker._adjustDate(t.target, t.ctrlKey ? +n.datepicker._get(i, "stepBigMonths") : +n.datepicker._get(i, "stepMonths"), "M");
                    break;
                case 40:
                    (t.ctrlKey || t.metaKey) && n.datepicker._adjustDate(t.target, 7, "D");
                    r = t.ctrlKey || t.metaKey;
                    break;
                default:
                    r = !1
                }
            else
                t.keyCode === 36 && t.ctrlKey ? n.datepicker._showDatepicker(this) : r = !1;
            r && (t.preventDefault(),
            t.stopPropagation())
        },
        _doKeyPress: function(t) {
            var i, r, u = n.datepicker._getInst(t.target);
            if (n.datepicker._get(u, "constrainInput"))
                return i = n.datepicker._possibleChars(n.datepicker._get(u, "dateFormat")),
                r = String.fromCharCode(t.charCode == null ? t.keyCode : t.charCode),
                t.ctrlKey || t.metaKey || r < " " || !i || i.indexOf(r) > -1
        },
        _doKeyUp: function(t) {
            var r, i = n.datepicker._getInst(t.target);
            if (i.input.val() !== i.lastVal)
                try {
                    r = n.datepicker.parseDate(n.datepicker._get(i, "dateFormat"), i.input ? i.input.val() : null, n.datepicker._getFormatConfig(i));
                    r && (n.datepicker._setDateFromField(i),
                    n.datepicker._updateAlternate(i),
                    n.datepicker._updateDatepicker(i))
                } catch (u) {}
            return !0
        },
        _showDatepicker: function(t) {
            if (t = t.target || t,
            t.nodeName.toLowerCase() !== "input" && (t = n("input", t.parentNode)[0]),
            !n.datepicker._isDisabledDatepicker(t) && n.datepicker._lastInput !== t) {
                var i, o, s, u, f, e, h;
                (i = n.datepicker._getInst(t),
                n.datepicker._curInst && n.datepicker._curInst !== i && (n.datepicker._curInst.dpDiv.stop(!0, !0),
                i && n.datepicker._datepickerShowing && n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),
                o = n.datepicker._get(i, "beforeShow"),
                s = o ? o.apply(t, [t, i]) : {},
                s !== !1) && (r(i.settings, s),
                i.lastVal = null,
                n.datepicker._lastInput = t,
                n.datepicker._setDateFromField(i),
                n.datepicker._inDialog && (t.value = ""),
                n.datepicker._pos || (n.datepicker._pos = n.datepicker._findPos(t),
                n.datepicker._pos[1] += t.offsetHeight),
                u = !1,
                n(t).parents().each(function() {
                    return u |= n(this).css("position") === "fixed",
                    !u
                }),
                f = {
                    left: n.datepicker._pos[0],
                    top: n.datepicker._pos[1]
                },
                n.datepicker._pos = null,
                i.dpDiv.empty(),
                i.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }),
                n.datepicker._updateDatepicker(i),
                f = n.datepicker._checkOffset(i, f, u),
                i.dpDiv.css({
                    position: n.datepicker._inDialog && n.blockUI ? "static" : u ? "fixed" : "absolute",
                    display: "none",
                    left: f.left + "px",
                    top: f.top + "px"
                }),
                i.inline || (e = n.datepicker._get(i, "showAnim"),
                h = n.datepicker._get(i, "duration"),
                i.dpDiv.css("z-index", k(n(t)) + 1),
                n.datepicker._datepickerShowing = !0,
                n.effects && n.effects.effect[e] ? i.dpDiv.show(e, n.datepicker._get(i, "showOptions"), h) : i.dpDiv[e || "show"](e ? h : null),
                n.datepicker._shouldFocusInput(i) && i.input.focus(),
                n.datepicker._curInst = i))
            }
        },
        _updateDatepicker: function(t) {
            this.maxRows = 4;
            u = t;
            t.dpDiv.empty().append(this._generateHTML(t));
            this._attachHandlers(t);
            var i, r = this._getNumberOfMonths(t), f = r[1], e = t.dpDiv.find("." + this._dayOverClass + " a");
            e.length > 0 && v.apply(e.get(0));
            t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");
            f > 1 && t.dpDiv.addClass("ui-datepicker-multi-" + f).css("width", 17 * f + "em");
            t.dpDiv[(r[0] !== 1 || r[1] !== 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi");
            t.dpDiv[(this._get(t, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl");
            t === n.datepicker._curInst && n.datepicker._datepickerShowing && n.datepicker._shouldFocusInput(t) && t.input.focus();
            t.yearshtml && (i = t.yearshtml,
            setTimeout(function() {
                i === t.yearshtml && t.yearshtml && t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);
                i = t.yearshtml = null
            }, 0))
        },
        _shouldFocusInput: function(n) {
            return n.input && n.input.is(":visible") && !n.input.is(":disabled") && !n.input.is(":focus")
        },
        _checkOffset: function(t, i, r) {
            var u = t.dpDiv.outerWidth()
              , f = t.dpDiv.outerHeight()
              , h = t.input ? t.input.outerWidth() : 0
              , o = t.input ? t.input.outerHeight() : 0
              , e = document.documentElement.clientWidth + (r ? 0 : n(document).scrollLeft())
              , s = document.documentElement.clientHeight + (r ? 0 : n(document).scrollTop());
            return i.left -= this._get(t, "isRTL") ? u - h : 0,
            i.left -= r && i.left === t.input.offset().left ? n(document).scrollLeft() : 0,
            i.top -= r && i.top === t.input.offset().top + o ? n(document).scrollTop() : 0,
            i.left -= Math.min(i.left, i.left + u > e && e > u ? Math.abs(i.left + u - e) : 0),
            i.top -= Math.min(i.top, i.top + f > s && s > f ? Math.abs(f + o) : 0),
            i
        },
        _findPos: function(t) {
            for (var i, r = this._getInst(t), u = this._get(r, "isRTL"); t && (t.type === "hidden" || t.nodeType !== 1 || n.expr.filters.hidden(t)); )
                t = t[u ? "previousSibling" : "nextSibling"];
            return i = n(t).offset(),
            [i.left, i.top]
        },
        _hideDatepicker: function(t) {
            var r, f, u, e, i = this._curInst;
            i && (!t || i === n.data(t, "datepicker")) && this._datepickerShowing && (r = this._get(i, "showAnim"),
            f = this._get(i, "duration"),
            u = function() {
                n.datepicker._tidyDialog(i)
            }
            ,
            n.effects && (n.effects.effect[r] || n.effects[r]) ? i.dpDiv.hide(r, n.datepicker._get(i, "showOptions"), f, u) : i.dpDiv[r === "slideDown" ? "slideUp" : r === "fadeIn" ? "fadeOut" : "hide"](r ? f : null, u),
            r || u(),
            this._datepickerShowing = !1,
            e = this._get(i, "onClose"),
            e && e.apply(i.input ? i.input[0] : null, [i.input ? i.input.val() : "", i]),
            this._lastInput = null,
            this._inDialog && (this._dialogInput.css({
                position: "absolute",
                left: "0",
                top: "-100px"
            }),
            n.blockUI && (n.unblockUI(),
            n("body").append(this.dpDiv))),
            this._inDialog = !1)
        },
        _tidyDialog: function(n) {
            n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        },
        _checkExternalClick: function(t) {
            if (n.datepicker._curInst) {
                var i = n(t.target)
                  , r = n.datepicker._getInst(i[0]);
                (i[0].id === n.datepicker._mainDivId || i.parents("#" + n.datepicker._mainDivId).length !== 0 || i.hasClass(n.datepicker.markerClassName) || i.closest("." + n.datepicker._triggerClass).length || !n.datepicker._datepickerShowing || n.datepicker._inDialog && n.blockUI) && (!i.hasClass(n.datepicker.markerClassName) || n.datepicker._curInst === r) || n.datepicker._hideDatepicker()
            }
        },
        _adjustDate: function(t, i, r) {
            var f = n(t)
              , u = this._getInst(f[0]);
            this._isDisabledDatepicker(f[0]) || (this._adjustInstDate(u, i + (r === "M" ? this._get(u, "showCurrentAtPos") : 0), r),
            this._updateDatepicker(u))
        },
        _gotoToday: function(t) {
            var r, u = n(t), i = this._getInst(u[0]);
            this._get(i, "gotoCurrent") && i.currentDay ? (i.selectedDay = i.currentDay,
            i.drawMonth = i.selectedMonth = i.currentMonth,
            i.drawYear = i.selectedYear = i.currentYear) : (r = new Date,
            i.selectedDay = r.getDate(),
            i.drawMonth = i.selectedMonth = r.getMonth(),
            i.drawYear = i.selectedYear = r.getFullYear());
            this._notifyChange(i);
            this._adjustDate(u)
        },
        _selectMonthYear: function(t, i, r) {
            var f = n(t)
              , u = this._getInst(f[0]);
            u["selected" + (r === "M" ? "Month" : "Year")] = u["draw" + (r === "M" ? "Month" : "Year")] = parseInt(i.options[i.selectedIndex].value, 10);
            this._notifyChange(u);
            this._adjustDate(f)
        },
        _selectDay: function(t, i, r, u) {
            var f, e = n(t);
            n(u).hasClass(this._unselectableClass) || this._isDisabledDatepicker(e[0]) || (f = this._getInst(e[0]),
            f.selectedDay = f.currentDay = n("a", u).html(),
            f.selectedMonth = f.currentMonth = i,
            f.selectedYear = f.currentYear = r,
            this._selectDate(t, this._formatDate(f, f.currentDay, f.currentMonth, f.currentYear)))
        },
        _clearDate: function(t) {
            var i = n(t);
            this._selectDate(i, "")
        },
        _selectDate: function(t, i) {
            var u, f = n(t), r = this._getInst(f[0]);
            i = i != null ? i : this._formatDate(r);
            r.input && r.input.val(i);
            this._updateAlternate(r);
            u = this._get(r, "onSelect");
            u ? u.apply(r.input ? r.input[0] : null, [i, r]) : r.input && r.input.trigger("change");
            r.inline ? this._updateDatepicker(r) : (this._hideDatepicker(),
            this._lastInput = r.input[0],
            typeof r.input[0] != "object" && r.input.focus(),
            this._lastInput = null)
        },
        _updateAlternate: function(t) {
            var i, r, u, f = this._get(t, "altField");
            f && (i = this._get(t, "altFormat") || this._get(t, "dateFormat"),
            r = this._getDate(t),
            u = this.formatDate(i, r, this._getFormatConfig(t)),
            n(f).each(function() {
                n(this).val(u)
            }))
        },
        noWeekends: function(n) {
            var t = n.getDay();
            return [t > 0 && t < 6, ""]
        },
        iso8601Week: function(n) {
            var i, t = new Date(n.getTime());
            return t.setDate(t.getDate() + 4 - (t.getDay() || 7)),
            i = t.getTime(),
            t.setMonth(0),
            t.setDate(1),
            Math.floor(Math.round((i - t) / 864e5) / 7) + 1
        },
        parseDate: function(t, i, r) {
            if (t == null || i == null)
                throw "Invalid arguments";
            if (i = typeof i == "object" ? i.toString() : i + "",
            i === "")
                return null;
            for (var a, v, f = 0, y = (r ? r.shortYearCutoff : null) || this._defaults.shortYearCutoff, d = typeof y != "string" ? y : (new Date).getFullYear() % 100 + parseInt(y, 10), g = (r ? r.dayNamesShort : null) || this._defaults.dayNamesShort, nt = (r ? r.dayNames : null) || this._defaults.dayNames, tt = (r ? r.monthNamesShort : null) || this._defaults.monthNamesShort, it = (r ? r.monthNames : null) || this._defaults.monthNames, e = -1, o = -1, s = -1, p = -1, w = !1, u, l = function(n) {
                var i = h + 1 < t.length && t.charAt(h + 1) === n;
                return i && h++,
                i
            }, c = function(n) {
                var u = l(n)
                  , r = n === "@" ? 14 : n === "!" ? 20 : n === "y" && u ? 4 : n === "o" ? 3 : 2
                  , e = n === "y" ? r : 1
                  , o = new RegExp("^\\d{" + e + "," + r + "}")
                  , t = i.substring(f).match(o);
                if (!t)
                    throw "Missing number at position " + f;
                return f += t[0].length,
                parseInt(t[0], 10)
            }, k = function(t, r, u) {
                var e = -1
                  , o = n.map(l(t) ? u : r, function(n, t) {
                    return [[t, n]]
                }).sort(function(n, t) {
                    return -(n[1].length - t[1].length)
                });
                if (n.each(o, function(n, t) {
                    var r = t[1];
                    if (i.substr(f, r.length).toLowerCase() === r.toLowerCase())
                        return e = t[0],
                        f += r.length,
                        !1
                }),
                e !== -1)
                    return e + 1;
                throw "Unknown name at position " + f;
            }, b = function() {
                if (i.charAt(f) !== t.charAt(h))
                    throw "Unexpected literal at position " + f;
                f++
            }, h = 0; h < t.length; h++)
                if (w)
                    t.charAt(h) !== "'" || l("'") ? b() : w = !1;
                else
                    switch (t.charAt(h)) {
                    case "d":
                        s = c("d");
                        break;
                    case "D":
                        k("D", g, nt);
                        break;
                    case "o":
                        p = c("o");
                        break;
                    case "m":
                        o = c("m");
                        break;
                    case "M":
                        o = k("M", tt, it);
                        break;
                    case "y":
                        e = c("y");
                        break;
                    case "@":
                        u = new Date(c("@"));
                        e = u.getFullYear();
                        o = u.getMonth() + 1;
                        s = u.getDate();
                        break;
                    case "!":
                        u = new Date((c("!") - this._ticksTo1970) / 1e4);
                        e = u.getFullYear();
                        o = u.getMonth() + 1;
                        s = u.getDate();
                        break;
                    case "'":
                        l("'") ? b() : w = !0;
                        break;
                    default:
                        b()
                    }
            if (f < i.length && (v = i.substr(f),
            !/^\s+/.test(v)))
                throw "Extra/unparsed characters found in date: " + v;
            if (e === -1 ? e = (new Date).getFullYear() : e < 100 && (e += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (e <= d ? 0 : -100)),
            p > -1) {
                o = 1;
                s = p;
                do {
                    if (a = this._getDaysInMonth(e, o - 1),
                    s <= a)
                        break;
                    o++;
                    s -= a
                } while (1)
            }
            if (u = this._daylightSavingAdjust(new Date(e,o - 1,s)),
            u.getFullYear() !== e || u.getMonth() + 1 !== o || u.getDate() !== s)
                throw "Invalid date";
            return u
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: (718685 + Math.floor(1970 / 4) - Math.floor(1970 / 100) + Math.floor(1970 / 400)) * 864e9,
        formatDate: function(n, t, i) {
            if (!t)
                return "";
            var u, h = (i ? i.dayNamesShort : null) || this._defaults.dayNamesShort, c = (i ? i.dayNames : null) || this._defaults.dayNames, l = (i ? i.monthNamesShort : null) || this._defaults.monthNamesShort, a = (i ? i.monthNames : null) || this._defaults.monthNames, f = function(t) {
                var i = u + 1 < n.length && n.charAt(u + 1) === t;
                return i && u++,
                i
            }, e = function(n, t, i) {
                var r = "" + t;
                if (f(n))
                    while (r.length < i)
                        r = "0" + r;
                return r
            }, s = function(n, t, i, r) {
                return f(n) ? r[t] : i[t]
            }, r = "", o = !1;
            if (t)
                for (u = 0; u < n.length; u++)
                    if (o)
                        n.charAt(u) !== "'" || f("'") ? r += n.charAt(u) : o = !1;
                    else
                        switch (n.charAt(u)) {
                        case "d":
                            r += e("d", t.getDate(), 2);
                            break;
                        case "D":
                            r += s("D", t.getDay(), h, c);
                            break;
                        case "o":
                            r += e("o", Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime() - new Date(t.getFullYear(),0,0).getTime()) / 864e5), 3);
                            break;
                        case "m":
                            r += e("m", t.getMonth() + 1, 2);
                            break;
                        case "M":
                            r += s("M", t.getMonth(), l, a);
                            break;
                        case "y":
                            r += f("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
                            break;
                        case "@":
                            r += t.getTime();
                            break;
                        case "!":
                            r += t.getTime() * 1e4 + this._ticksTo1970;
                            break;
                        case "'":
                            f("'") ? r += "'" : o = !0;
                            break;
                        default:
                            r += n.charAt(u)
                        }
            return r
        },
        _possibleChars: function(n) {
            for (var i = "", r = !1, u = function(i) {
                var r = t + 1 < n.length && n.charAt(t + 1) === i;
                return r && t++,
                r
            }, t = 0; t < n.length; t++)
                if (r)
                    n.charAt(t) !== "'" || u("'") ? i += n.charAt(t) : r = !1;
                else
                    switch (n.charAt(t)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        i += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null;
                    case "'":
                        u("'") ? i += "'" : r = !0;
                        break;
                    default:
                        i += n.charAt(t)
                    }
            return i
        },
        _get: function(n, t) {
            return n.settings[t] !== undefined ? n.settings[t] : this._defaults[t]
        },
        _setDateFromField: function(n, t) {
            if (n.input.val() !== n.lastVal) {
                var f = this._get(n, "dateFormat")
                  , r = n.lastVal = n.input ? n.input.val() : null
                  , u = this._getDefaultDate(n)
                  , i = u
                  , e = this._getFormatConfig(n);
                try {
                    i = this.parseDate(f, r, e) || u
                } catch (o) {
                    r = t ? "" : r
                }
                n.selectedDay = i.getDate();
                n.drawMonth = n.selectedMonth = i.getMonth();
                n.drawYear = n.selectedYear = i.getFullYear();
                n.currentDay = r ? i.getDate() : 0;
                n.currentMonth = r ? i.getMonth() : 0;
                n.currentYear = r ? i.getFullYear() : 0;
                this._adjustInstDate(n)
            }
        },
        _getDefaultDate: function(n) {
            return this._restrictMinMax(n, this._determineDate(n, this._get(n, "defaultDate"), new Date))
        },
        _determineDate: function(t, i, r) {
            var f = function(n) {
                var t = new Date;
                return t.setDate(t.getDate() + n),
                t
            }
              , e = function(i) {
                try {
                    return n.datepicker.parseDate(n.datepicker._get(t, "dateFormat"), i, n.datepicker._getFormatConfig(t))
                } catch (h) {}
                for (var o = (i.toLowerCase().match(/^c/) ? n.datepicker._getDate(t) : null) || new Date, f = o.getFullYear(), e = o.getMonth(), r = o.getDate(), s = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, u = s.exec(i); u; ) {
                    switch (u[2] || "d") {
                    case "d":
                    case "D":
                        r += parseInt(u[1], 10);
                        break;
                    case "w":
                    case "W":
                        r += parseInt(u[1], 10) * 7;
                        break;
                    case "m":
                    case "M":
                        e += parseInt(u[1], 10);
                        r = Math.min(r, n.datepicker._getDaysInMonth(f, e));
                        break;
                    case "y":
                    case "Y":
                        f += parseInt(u[1], 10);
                        r = Math.min(r, n.datepicker._getDaysInMonth(f, e))
                    }
                    u = s.exec(i)
                }
                return new Date(f,e,r)
            }
              , u = i == null || i === "" ? r : typeof i == "string" ? e(i) : typeof i == "number" ? isNaN(i) ? r : f(i) : new Date(i.getTime());
            return u = u && u.toString() === "Invalid Date" ? r : u,
            u && (u.setHours(0),
            u.setMinutes(0),
            u.setSeconds(0),
            u.setMilliseconds(0)),
            this._daylightSavingAdjust(u)
        },
        _daylightSavingAdjust: function(n) {
            return n ? (n.setHours(n.getHours() > 12 ? n.getHours() + 2 : 0),
            n) : null
        },
        _setDate: function(n, t, i) {
            var u = !t
              , f = n.selectedMonth
              , e = n.selectedYear
              , r = this._restrictMinMax(n, this._determineDate(n, t, new Date));
            n.selectedDay = n.currentDay = r.getDate();
            n.drawMonth = n.selectedMonth = n.currentMonth = r.getMonth();
            n.drawYear = n.selectedYear = n.currentYear = r.getFullYear();
            f === n.selectedMonth && e === n.selectedYear || i || this._notifyChange(n);
            this._adjustInstDate(n);
            n.input && n.input.val(u ? "" : this._formatDate(n))
        },
        _getDate: function(n) {
            return !n.currentYear || n.input && n.input.val() === "" ? null : this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))
        },
        _attachHandlers: function(t) {
            var r = this._get(t, "stepMonths")
              , i = "#" + t.id.replace(/\\\\/g, "\\");
            t.dpDiv.find("[data-handler]").map(function() {
                var t = {
                    prev: function() {
                        n.datepicker._adjustDate(i, -r, "M")
                    },
                    next: function() {
                        n.datepicker._adjustDate(i, +r, "M")
                    },
                    hide: function() {
                        n.datepicker._hideDatepicker()
                    },
                    today: function() {
                        n.datepicker._gotoToday(i)
                    },
                    selectDay: function() {
                        return n.datepicker._selectDay(i, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this),
                        !1
                    },
                    selectMonth: function() {
                        return n.datepicker._selectMonthYear(i, this, "M"),
                        !1
                    },
                    selectYear: function() {
                        return n.datepicker._selectMonthYear(i, this, "Y"),
                        !1
                    }
                };
                n(this).bind(this.getAttribute("data-event"), t[this.getAttribute("data-handler")])
            })
        },
        _generateHTML: function(n) {
            var b, s, rt, h, ut, k, ft, et, ri, c, ot, ui, fi, ei, oi, st, g, si, ht, nt, f, y, ct, p, lt, l, u, at, vt, yt, pt, tt, wt, i, bt, kt, d, a, it, dt = new Date, gt = this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())), e = this._get(n, "isRTL"), li = this._get(n, "showButtonPanel"), hi = this._get(n, "hideIfNoPrevNext"), ni = this._get(n, "navigationAsDateFormat"), o = this._getNumberOfMonths(n), ai = this._get(n, "showCurrentAtPos"), ci = this._get(n, "stepMonths"), ti = o[0] !== 1 || o[1] !== 1, ii = this._daylightSavingAdjust(n.currentDay ? new Date(n.currentYear,n.currentMonth,n.currentDay) : new Date(9999,9,9)), w = this._getMinMaxDate(n, "min"), v = this._getMinMaxDate(n, "max"), t = n.drawMonth - ai, r = n.drawYear;
            if (t < 0 && (t += 12,
            r--),
            v)
                for (b = this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth() - o[0] * o[1] + 1,v.getDate())),
                b = w && b < w ? w : b; this._daylightSavingAdjust(new Date(r,t,1)) > b; )
                    t--,
                    t < 0 && (t = 11,
                    r--);
            for (n.drawMonth = t,
            n.drawYear = r,
            s = this._get(n, "prevText"),
            s = ni ? this.formatDate(s, this._daylightSavingAdjust(new Date(r,t - ci,1)), this._getFormatConfig(n)) : s,
            rt = this._canAdjustMonth(n, -1, r, t) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + s + "'><span class='ui-icon ui-icon-circle-triangle-" + (e ? "e" : "w") + "'>" + s + "<\/span><\/a>" : hi ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + s + "'><span class='ui-icon ui-icon-circle-triangle-" + (e ? "e" : "w") + "'>" + s + "<\/span><\/a>",
            h = this._get(n, "nextText"),
            h = ni ? this.formatDate(h, this._daylightSavingAdjust(new Date(r,t + ci,1)), this._getFormatConfig(n)) : h,
            ut = this._canAdjustMonth(n, 1, r, t) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + h + "'><span class='ui-icon ui-icon-circle-triangle-" + (e ? "w" : "e") + "'>" + h + "<\/span><\/a>" : hi ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + h + "'><span class='ui-icon ui-icon-circle-triangle-" + (e ? "w" : "e") + "'>" + h + "<\/span><\/a>",
            k = this._get(n, "currentText"),
            ft = this._get(n, "gotoCurrent") && n.currentDay ? ii : gt,
            k = ni ? this.formatDate(k, ft, this._getFormatConfig(n)) : k,
            et = n.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(n, "closeText") + "<\/button>",
            ri = li ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (e ? et : "") + (this._isInRange(n, ft) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + k + "<\/button>" : "") + (e ? "" : et) + "<\/div>" : "",
            c = parseInt(this._get(n, "firstDay"), 10),
            c = isNaN(c) ? 0 : c,
            ot = this._get(n, "showWeek"),
            ui = this._get(n, "dayNames"),
            fi = this._get(n, "dayNamesMin"),
            ei = this._get(n, "monthNames"),
            oi = this._get(n, "monthNamesShort"),
            st = this._get(n, "beforeShowDay"),
            g = this._get(n, "showOtherMonths"),
            si = this._get(n, "selectOtherMonths"),
            ht = this._getDefaultDate(n),
            nt = "",
            f,
            y = 0; y < o[0]; y++) {
                for (ct = "",
                this.maxRows = 4,
                p = 0; p < o[1]; p++) {
                    if (lt = this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),
                    l = " ui-corner-all",
                    u = "",
                    ti) {
                        if (u += "<div class='ui-datepicker-group",
                        o[1] > 1)
                            switch (p) {
                            case 0:
                                u += " ui-datepicker-group-first";
                                l = " ui-corner-" + (e ? "right" : "left");
                                break;
                            case o[1] - 1:
                                u += " ui-datepicker-group-last";
                                l = " ui-corner-" + (e ? "left" : "right");
                                break;
                            default:
                                u += " ui-datepicker-group-middle";
                                l = ""
                            }
                        u += "'>"
                    }
                    for (u += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + l + "'>" + (/all|left/.test(l) && y === 0 ? e ? ut : rt : "") + (/all|right/.test(l) && y === 0 ? e ? rt : ut : "") + this._generateMonthYearHeader(n, t, r, w, v, y > 0 || p > 0, ei, oi) + "<\/div><table class='ui-datepicker-calendar'><thead><tr>",
                    at = ot ? "<th class='ui-datepicker-week-col'>" + this._get(n, "weekHeader") + "<\/th>" : "",
                    f = 0; f < 7; f++)
                        vt = (f + c) % 7,
                        at += "<th scope='col'" + ((f + c + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + ui[vt] + "'>" + fi[vt] + "<\/span><\/th>";
                    for (u += at + "<\/tr><\/thead><tbody>",
                    yt = this._getDaysInMonth(r, t),
                    r === n.selectedYear && t === n.selectedMonth && (n.selectedDay = Math.min(n.selectedDay, yt)),
                    pt = (this._getFirstDayOfMonth(r, t) - c + 7) % 7,
                    tt = Math.ceil((pt + yt) / 7),
                    wt = ti ? this.maxRows > tt ? this.maxRows : tt : tt,
                    this.maxRows = wt,
                    i = this._daylightSavingAdjust(new Date(r,t,1 - pt)),
                    bt = 0; bt < wt; bt++) {
                        for (u += "<tr>",
                        kt = ot ? "<td class='ui-datepicker-week-col'>" + this._get(n, "calculateWeek")(i) + "<\/td>" : "",
                        f = 0; f < 7; f++)
                            d = st ? st.apply(n.input ? n.input[0] : null, [i]) : [!0, ""],
                            a = i.getMonth() !== t,
                            it = a && !si || !d[0] || w && i < w || v && i > v,
                            kt += "<td class='" + ((f + c + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (a ? " ui-datepicker-other-month" : "") + (i.getTime() === lt.getTime() && t === n.selectedMonth && n._keyEvent || ht.getTime() === i.getTime() && ht.getTime() === lt.getTime() ? " " + this._dayOverClass : "") + (it ? " " + this._unselectableClass + " ui-state-disabled" : "") + (a && !g ? "" : " " + d[1] + (i.getTime() === ii.getTime() ? " " + this._currentClass : "") + (i.getTime() === gt.getTime() ? " ui-datepicker-today" : "")) + "'" + ((!a || g) && d[2] ? " title='" + d[2].replace(/'/g, "&#39;") + "'" : "") + (it ? "" : " data-handler='selectDay' data-event='click' data-month='" + i.getMonth() + "' data-year='" + i.getFullYear() + "'") + ">" + (a && !g ? "&#xa0;" : it ? "<span class='ui-state-default'>" + i.getDate() + "<\/span>" : "<a class='ui-state-default" + (i.getTime() === gt.getTime() ? " ui-state-highlight" : "") + (i.getTime() === ii.getTime() ? " ui-state-active" : "") + (a ? " ui-priority-secondary" : "") + "' href='#'>" + i.getDate() + "<\/a>") + "<\/td>",
                            i.setDate(i.getDate() + 1),
                            i = this._daylightSavingAdjust(i);
                        u += kt + "<\/tr>"
                    }
                    t++;
                    t > 11 && (t = 0,
                    r++);
                    u += "<\/tbody><\/table>" + (ti ? "<\/div>" + (o[0] > 0 && p === o[1] - 1 ? "<div class='ui-datepicker-row-break'><\/div>" : "") : "");
                    ct += u
                }
                nt += ct
            }
            return nt += ri,
            n._keyEvent = !1,
            nt
        },
        _generateMonthYearHeader: function(n, t, i, r, u, f, e, o) {
            var k, d, h, v, y, p, s, a, w = this._get(n, "changeMonth"), b = this._get(n, "changeYear"), g = this._get(n, "showMonthAfterYear"), c = "<div class='ui-datepicker-title'>", l = "";
            if (f || !w)
                l += "<span class='ui-datepicker-month'>" + e[t] + "<\/span>";
            else {
                for (k = r && r.getFullYear() === i,
                d = u && u.getFullYear() === i,
                l += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",
                h = 0; h < 12; h++)
                    (!k || h >= r.getMonth()) && (!d || h <= u.getMonth()) && (l += "<option value='" + h + "'" + (h === t ? " selected='selected'" : "") + ">" + o[h] + "<\/option>");
                l += "<\/select>"
            }
            if (g || (c += l + (f || !(w && b) ? "&#xa0;" : "")),
            !n.yearshtml)
                if (n.yearshtml = "",
                f || !b)
                    c += "<span class='ui-datepicker-year'>" + i + "<\/span>";
                else {
                    for (v = this._get(n, "yearRange").split(":"),
                    y = (new Date).getFullYear(),
                    p = function(n) {
                        var t = n.match(/c[+\-].*/) ? i + parseInt(n.substring(1), 10) : n.match(/[+\-].*/) ? y + parseInt(n, 10) : parseInt(n, 10);
                        return isNaN(t) ? y : t
                    }
                    ,
                    s = p(v[0]),
                    a = Math.max(s, p(v[1] || "")),
                    s = r ? Math.max(s, r.getFullYear()) : s,
                    a = u ? Math.min(a, u.getFullYear()) : a,
                    n.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; s <= a; s++)
                        n.yearshtml += "<option value='" + s + "'" + (s === i ? " selected='selected'" : "") + ">" + s + "<\/option>";
                    n.yearshtml += "<\/select>";
                    c += n.yearshtml;
                    n.yearshtml = null
                }
            return c += this._get(n, "yearSuffix"),
            g && (c += (f || !(w && b) ? "&#xa0;" : "") + l),
            c + "<\/div>"
        },
        _adjustInstDate: function(n, t, i) {
            var u = n.drawYear + (i === "Y" ? t : 0)
              , f = n.drawMonth + (i === "M" ? t : 0)
              , e = Math.min(n.selectedDay, this._getDaysInMonth(u, f)) + (i === "D" ? t : 0)
              , r = this._restrictMinMax(n, this._daylightSavingAdjust(new Date(u,f,e)));
            n.selectedDay = r.getDate();
            n.drawMonth = n.selectedMonth = r.getMonth();
            n.drawYear = n.selectedYear = r.getFullYear();
            (i === "M" || i === "Y") && this._notifyChange(n)
        },
        _restrictMinMax: function(n, t) {
            var i = this._getMinMaxDate(n, "min")
              , r = this._getMinMaxDate(n, "max")
              , u = i && t < i ? i : t;
            return r && u > r ? r : u
        },
        _notifyChange: function(n) {
            var t = this._get(n, "onChangeMonthYear");
            t && t.apply(n.input ? n.input[0] : null, [n.selectedYear, n.selectedMonth + 1, n])
        },
        _getNumberOfMonths: function(n) {
            var t = this._get(n, "numberOfMonths");
            return t == null ? [1, 1] : typeof t == "number" ? [1, t] : t
        },
        _getMinMaxDate: function(n, t) {
            return this._determineDate(n, this._get(n, t + "Date"), null)
        },
        _getDaysInMonth: function(n, t) {
            return 32 - this._daylightSavingAdjust(new Date(n,t,32)).getDate()
        },
        _getFirstDayOfMonth: function(n, t) {
            return new Date(n,t,1).getDay()
        },
        _canAdjustMonth: function(n, t, i, r) {
            var f = this._getNumberOfMonths(n)
              , u = this._daylightSavingAdjust(new Date(i,r + (t < 0 ? t : f[0] * f[1]),1));
            return t < 0 && u.setDate(this._getDaysInMonth(u.getFullYear(), u.getMonth())),
            this._isInRange(n, u)
        },
        _isInRange: function(n, t) {
            var i, f, e = this._getMinMaxDate(n, "min"), o = this._getMinMaxDate(n, "max"), r = null, u = null, s = this._get(n, "yearRange");
            return s && (i = s.split(":"),
            f = (new Date).getFullYear(),
            r = parseInt(i[0], 10),
            u = parseInt(i[1], 10),
            i[0].match(/[+\-].*/) && (r += f),
            i[1].match(/[+\-].*/) && (u += f)),
            (!e || t.getTime() >= e.getTime()) && (!o || t.getTime() <= o.getTime()) && (!r || t.getFullYear() >= r) && (!u || t.getFullYear() <= u)
        },
        _getFormatConfig: function(n) {
            var t = this._get(n, "shortYearCutoff");
            return t = typeof t != "string" ? t : (new Date).getFullYear() % 100 + parseInt(t, 10),
            {
                shortYearCutoff: t,
                dayNamesShort: this._get(n, "dayNamesShort"),
                dayNames: this._get(n, "dayNames"),
                monthNamesShort: this._get(n, "monthNamesShort"),
                monthNames: this._get(n, "monthNames")
            }
        },
        _formatDate: function(n, t, i, r) {
            t || (n.currentDay = n.selectedDay,
            n.currentMonth = n.selectedMonth,
            n.currentYear = n.selectedYear);
            var u = t ? typeof t == "object" ? t : this._daylightSavingAdjust(new Date(r,i,t)) : this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));
            return this.formatDate(this._get(n, "dateFormat"), u, this._getFormatConfig(n))
        }
    });
    n.fn.datepicker = function(t) {
        if (!this.length)
            return this;
        n.datepicker.initialized || (n(document).mousedown(n.datepicker._checkExternalClick),
        n.datepicker.initialized = !0);
        n("#" + n.datepicker._mainDivId).length === 0 && n("body").append(n.datepicker.dpDiv);
        var i = Array.prototype.slice.call(arguments, 1);
        return typeof t == "string" && (t === "isDisabled" || t === "getDate" || t === "widget") ? n.datepicker["_" + t + "Datepicker"].apply(n.datepicker, [this[0]].concat(i)) : t === "option" && arguments.length === 2 && typeof arguments[1] == "string" ? n.datepicker["_" + t + "Datepicker"].apply(n.datepicker, [this[0]].concat(i)) : this.each(function() {
            typeof t == "string" ? n.datepicker["_" + t + "Datepicker"].apply(n.datepicker, [this].concat(i)) : n.datepicker._attachDatepicker(this, t)
        })
    }
    ;
    n.datepicker = new l;
    n.datepicker.initialized = !1;
    n.datepicker.uuid = (new Date).getTime();
    n.datepicker.version = "1.11.2";
    ft = n.datepicker;
    /*!
 * jQuery UI Draggable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
    n.widget("ui.draggable", n.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function() {
            this.options.helper === "original" && this._setPositionRelative();
            this.options.addClasses && this.element.addClass("ui-draggable");
            this.options.disabled && this.element.addClass("ui-draggable-disabled");
            this._setHandleClassName();
            this._mouseInit()
        },
        _setOption: function(n, t) {
            this._super(n, t);
            n === "handle" && (this._removeHandleClassName(),
            this._setHandleClassName())
        },
        _destroy: function() {
            if ((this.helper || this.element).is(".ui-draggable-dragging")) {
                this.destroyOnClear = !0;
                return
            }
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");
            this._removeHandleClassName();
            this._mouseDestroy()
        },
        _mouseCapture: function(t) {
            var i = this.options;
            return (this._blurActiveElement(t),
            this.helper || i.disabled || n(t.target).closest(".ui-resizable-handle").length > 0) ? !1 : (this.handle = this._getHandle(t),
            !this.handle) ? !1 : (this._blockFrames(i.iframeFix === !0 ? "iframe" : i.iframeFix),
            !0)
        },
        _blockFrames: function(t) {
            this.iframeBlocks = this.document.find(t).map(function() {
                var t = n(this);
                return n("<div>").css("position", "absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]
            })
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(),
            delete this.iframeBlocks)
        },
        _blurActiveElement: function(t) {
            var i = this.document[0];
            if (this.handleElement.is(t.target))
                try {
                    i.activeElement && i.activeElement.nodeName.toLowerCase() !== "body" && n(i.activeElement).blur()
                } catch (r) {}
        },
        _mouseStart: function(t) {
            var i = this.options;
            return (this.helper = this._createHelper(t),
            this.helper.addClass("ui-draggable-dragging"),
            this._cacheHelperProportions(),
            n.ui.ddmanager && (n.ui.ddmanager.current = this),
            this._cacheMargins(),
            this.cssPosition = this.helper.css("position"),
            this.scrollParent = this.helper.scrollParent(!0),
            this.offsetParent = this.helper.offsetParent(),
            this.hasFixedAncestor = this.helper.parents().filter(function() {
                return n(this).css("position") === "fixed"
            }).length > 0,
            this.positionAbs = this.element.offset(),
            this._refreshOffsets(t),
            this.originalPosition = this.position = this._generatePosition(t, !1),
            this.originalPageX = t.pageX,
            this.originalPageY = t.pageY,
            i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt),
            this._setContainment(),
            this._trigger("start", t) === !1) ? (this._clear(),
            !1) : (this._cacheHelperProportions(),
            n.ui.ddmanager && !i.dropBehaviour && n.ui.ddmanager.prepareOffsets(this, t),
            this._normalizeRightBottom(),
            this._mouseDrag(t, !0),
            n.ui.ddmanager && n.ui.ddmanager.dragStart(this, t),
            !0)
        },
        _refreshOffsets: function(n) {
            this.offset = {
                top: this.positionAbs.top - this.margins.top,
                left: this.positionAbs.left - this.margins.left,
                scroll: !1,
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            };
            this.offset.click = {
                left: n.pageX - this.offset.left,
                top: n.pageY - this.offset.top
            }
        },
        _mouseDrag: function(t, i) {
            if (this.hasFixedAncestor && (this.offset.parent = this._getParentOffset()),
            this.position = this._generatePosition(t, !0),
            this.positionAbs = this._convertPositionTo("absolute"),
            !i) {
                var r = this._uiHash();
                if (this._trigger("drag", t, r) === !1)
                    return this._mouseUp({}),
                    !1;
                this.position = r.position
            }
            return this.helper[0].style.left = this.position.left + "px",
            this.helper[0].style.top = this.position.top + "px",
            n.ui.ddmanager && n.ui.ddmanager.drag(this, t),
            !1
        },
        _mouseStop: function(t) {
            var r = this
              , i = !1;
            return n.ui.ddmanager && !this.options.dropBehaviour && (i = n.ui.ddmanager.drop(this, t)),
            this.dropped && (i = this.dropped,
            this.dropped = !1),
            this.options.revert === "invalid" && !i || this.options.revert === "valid" && i || this.options.revert === !0 || n.isFunction(this.options.revert) && this.options.revert.call(this.element, i) ? n(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                r._trigger("stop", t) !== !1 && r._clear()
            }) : this._trigger("stop", t) !== !1 && this._clear(),
            !1
        },
        _mouseUp: function(t) {
            return this._unblockFrames(),
            n.ui.ddmanager && n.ui.ddmanager.dragStop(this, t),
            this.handleElement.is(t.target) && this.element.focus(),
            n.ui.mouse.prototype._mouseUp.call(this, t)
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(),
            this
        },
        _getHandle: function(t) {
            return this.options.handle ? !!n(t.target).closest(this.element.find(this.options.handle)).length : !0
        },
        _setHandleClassName: function() {
            this.handleElement = this.options.handle ? this.element.find(this.options.handle) : this.element;
            this.handleElement.addClass("ui-draggable-handle")
        },
        _removeHandleClassName: function() {
            this.handleElement.removeClass("ui-draggable-handle")
        },
        _createHelper: function(t) {
            var r = this.options
              , u = n.isFunction(r.helper)
              , i = u ? n(r.helper.apply(this.element[0], [t])) : r.helper === "clone" ? this.element.clone().removeAttr("id") : this.element;
            return i.parents("body").length || i.appendTo(r.appendTo === "parent" ? this.element[0].parentNode : r.appendTo),
            u && i[0] === this.element[0] && this._setPositionRelative(),
            i[0] === this.element[0] || /(fixed|absolute)/.test(i.css("position")) || i.css("position", "absolute"),
            i
        },
        _setPositionRelative: function() {
            /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative")
        },
        _adjustOffsetFromHelper: function(t) {
            typeof t == "string" && (t = t.split(" "));
            n.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            });
            "left"in t && (this.offset.click.left = t.left + this.margins.left);
            "right"in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left);
            "top"in t && (this.offset.click.top = t.top + this.margins.top);
            "bottom"in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _isRootNode: function(n) {
            return /(html|body)/i.test(n.tagName) || n === this.document[0]
        },
        _getParentOffset: function() {
            var t = this.offsetParent.offset()
              , i = this.document[0];
            return this.cssPosition === "absolute" && this.scrollParent[0] !== i && n.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(),
            t.top += this.scrollParent.scrollTop()),
            this._isRootNode(this.offsetParent[0]) && (t = {
                top: 0,
                left: 0
            }),
            {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if (this.cssPosition !== "relative")
                return {
                    top: 0,
                    left: 0
                };
            var n = this.element.position()
              , t = this._isRootNode(this.scrollParent[0]);
            return {
                top: n.top - (parseInt(this.helper.css("top"), 10) || 0) + (t ? 0 : this.scrollParent.scrollTop()),
                left: n.left - (parseInt(this.helper.css("left"), 10) || 0) + (t ? 0 : this.scrollParent.scrollLeft())
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var f, t, i, r = this.options, u = this.document[0];
            if (this.relativeContainer = null,
            !r.containment) {
                this.containment = null;
                return
            }
            if (r.containment === "window") {
                this.containment = [n(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, n(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, n(window).scrollLeft() + n(window).width() - this.helperProportions.width - this.margins.left, n(window).scrollTop() + (n(window).height() || u.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                return
            }
            if (r.containment === "document") {
                this.containment = [0, 0, n(u).width() - this.helperProportions.width - this.margins.left, (n(u).height() || u.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
                return
            }
            if (r.containment.constructor === Array) {
                this.containment = r.containment;
                return
            }
            (r.containment === "parent" && (r.containment = this.helper[0].parentNode),
            t = n(r.containment),
            i = t[0],
            i) && (f = /(scroll|auto)/.test(t.css("overflow")),
            this.containment = [(parseInt(t.css("borderLeftWidth"), 10) || 0) + (parseInt(t.css("paddingLeft"), 10) || 0), (parseInt(t.css("borderTopWidth"), 10) || 0) + (parseInt(t.css("paddingTop"), 10) || 0), (f ? Math.max(i.scrollWidth, i.offsetWidth) : i.offsetWidth) - (parseInt(t.css("borderRightWidth"), 10) || 0) - (parseInt(t.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (f ? Math.max(i.scrollHeight, i.offsetHeight) : i.offsetHeight) - (parseInt(t.css("borderBottomWidth"), 10) || 0) - (parseInt(t.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom],
            this.relativeContainer = t)
        },
        _convertPositionTo: function(n, t) {
            t || (t = this.position);
            var i = n === "absolute" ? 1 : -1
              , r = this._isRootNode(this.scrollParent[0]);
            return {
                top: t.top + this.offset.relative.top * i + this.offset.parent.top * i - (this.cssPosition === "fixed" ? -this.offset.scroll.top : r ? 0 : this.offset.scroll.top) * i,
                left: t.left + this.offset.relative.left * i + this.offset.parent.left * i - (this.cssPosition === "fixed" ? -this.offset.scroll.left : r ? 0 : this.offset.scroll.left) * i
            }
        },
        _generatePosition: function(n, t) {
            var i, s, u, f, r = this.options, h = this._isRootNode(this.scrollParent[0]), e = n.pageX, o = n.pageY;
            return h && this.offset.scroll || (this.offset.scroll = {
                top: this.scrollParent.scrollTop(),
                left: this.scrollParent.scrollLeft()
            }),
            t && (this.containment && (this.relativeContainer ? (s = this.relativeContainer.offset(),
            i = [this.containment[0] + s.left, this.containment[1] + s.top, this.containment[2] + s.left, this.containment[3] + s.top]) : i = this.containment,
            n.pageX - this.offset.click.left < i[0] && (e = i[0] + this.offset.click.left),
            n.pageY - this.offset.click.top < i[1] && (o = i[1] + this.offset.click.top),
            n.pageX - this.offset.click.left > i[2] && (e = i[2] + this.offset.click.left),
            n.pageY - this.offset.click.top > i[3] && (o = i[3] + this.offset.click.top)),
            r.grid && (u = r.grid[1] ? this.originalPageY + Math.round((o - this.originalPageY) / r.grid[1]) * r.grid[1] : this.originalPageY,
            o = i ? u - this.offset.click.top >= i[1] || u - this.offset.click.top > i[3] ? u : u - this.offset.click.top >= i[1] ? u - r.grid[1] : u + r.grid[1] : u,
            f = r.grid[0] ? this.originalPageX + Math.round((e - this.originalPageX) / r.grid[0]) * r.grid[0] : this.originalPageX,
            e = i ? f - this.offset.click.left >= i[0] || f - this.offset.click.left > i[2] ? f : f - this.offset.click.left >= i[0] ? f - r.grid[0] : f + r.grid[0] : f),
            r.axis === "y" && (e = this.originalPageX),
            r.axis === "x" && (o = this.originalPageY)),
            {
                top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.offset.scroll.top : h ? 0 : this.offset.scroll.top),
                left: e - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.offset.scroll.left : h ? 0 : this.offset.scroll.left)
            }
        },
        _clear: function() {
            this.helper.removeClass("ui-draggable-dragging");
            this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove();
            this.helper = null;
            this.cancelHelperRemoval = !1;
            this.destroyOnClear && this.destroy()
        },
        _normalizeRightBottom: function() {
            this.options.axis !== "y" && this.helper.css("right") !== "auto" && (this.helper.width(this.helper.width()),
            this.helper.css("right", "auto"));
            this.options.axis !== "x" && this.helper.css("bottom") !== "auto" && (this.helper.height(this.helper.height()),
            this.helper.css("bottom", "auto"))
        },
        _trigger: function(t, i, r) {
            return r = r || this._uiHash(),
            n.ui.plugin.call(this, t, [i, r, this], !0),
            /^(drag|start|stop)/.test(t) && (this.positionAbs = this._convertPositionTo("absolute"),
            r.offset = this.positionAbs),
            n.Widget.prototype._trigger.call(this, t, i, r)
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    });
    n.ui.plugin.add("draggable", "connectToSortable", {
        start: function(t, i, r) {
            var u = n.extend({}, i, {
                item: r.element
            });
            r.sortables = [];
            n(r.options.connectToSortable).each(function() {
                var i = n(this).sortable("instance");
                i && !i.options.disabled && (r.sortables.push(i),
                i.refreshPositions(),
                i._trigger("activate", t, u))
            })
        },
        stop: function(t, i, r) {
            var u = n.extend({}, i, {
                item: r.element
            });
            r.cancelHelperRemoval = !1;
            n.each(r.sortables, function() {
                var n = this;
                n.isOver ? (n.isOver = 0,
                r.cancelHelperRemoval = !0,
                n.cancelHelperRemoval = !1,
                n._storedCSS = {
                    position: n.placeholder.css("position"),
                    top: n.placeholder.css("top"),
                    left: n.placeholder.css("left")
                },
                n._mouseStop(t),
                n.options.helper = n.options._helper) : (n.cancelHelperRemoval = !0,
                n._trigger("deactivate", t, u))
            })
        },
        drag: function(t, i, r) {
            n.each(r.sortables, function() {
                var f = !1
                  , u = this;
                u.positionAbs = r.positionAbs;
                u.helperProportions = r.helperProportions;
                u.offset.click = r.offset.click;
                u._intersectsWith(u.containerCache) && (f = !0,
                n.each(r.sortables, function() {
                    return this.positionAbs = r.positionAbs,
                    this.helperProportions = r.helperProportions,
                    this.offset.click = r.offset.click,
                    this !== u && this._intersectsWith(this.containerCache) && n.contains(u.element[0], this.element[0]) && (f = !1),
                    f
                }));
                f ? (u.isOver || (u.isOver = 1,
                u.currentItem = i.helper.appendTo(u.element).data("ui-sortable-item", !0),
                u.options._helper = u.options.helper,
                u.options.helper = function() {
                    return i.helper[0]
                }
                ,
                t.target = u.currentItem[0],
                u._mouseCapture(t, !0),
                u._mouseStart(t, !0, !0),
                u.offset.click.top = r.offset.click.top,
                u.offset.click.left = r.offset.click.left,
                u.offset.parent.left -= r.offset.parent.left - u.offset.parent.left,
                u.offset.parent.top -= r.offset.parent.top - u.offset.parent.top,
                r._trigger("toSortable", t),
                r.dropped = u.element,
                n.each(r.sortables, function() {
                    this.refreshPositions()
                }),
                r.currentItem = r.element,
                u.fromOutside = r),
                u.currentItem && (u._mouseDrag(t),
                i.position = u.position)) : u.isOver && (u.isOver = 0,
                u.cancelHelperRemoval = !0,
                u.options._revert = u.options.revert,
                u.options.revert = !1,
                u._trigger("out", t, u._uiHash(u)),
                u._mouseStop(t, !0),
                u.options.revert = u.options._revert,
                u.options.helper = u.options._helper,
                u.placeholder && u.placeholder.remove(),
                r._refreshOffsets(t),
                i.position = r._generatePosition(t, !0),
                r._trigger("fromSortable", t),
                r.dropped = !1,
                n.each(r.sortables, function() {
                    this.refreshPositions()
                }))
            })
        }
    });
    n.ui.plugin.add("draggable", "cursor", {
        start: function(t, i, r) {
            var u = n("body")
              , f = r.options;
            u.css("cursor") && (f._cursor = u.css("cursor"));
            u.css("cursor", f.cursor)
        },
        stop: function(t, i, r) {
            var u = r.options;
            u._cursor && n("body").css("cursor", u._cursor)
        }
    });
    n.ui.plugin.add("draggable", "opacity", {
        start: function(t, i, r) {
            var u = n(i.helper)
              , f = r.options;
            u.css("opacity") && (f._opacity = u.css("opacity"));
            u.css("opacity", f.opacity)
        },
        stop: function(t, i, r) {
            var u = r.options;
            u._opacity && n(i.helper).css("opacity", u._opacity)
        }
    });
    n.ui.plugin.add("draggable", "scroll", {
        start: function(n, t, i) {
            i.scrollParentNotHidden || (i.scrollParentNotHidden = i.helper.scrollParent(!1));
            i.scrollParentNotHidden[0] !== i.document[0] && i.scrollParentNotHidden[0].tagName !== "HTML" && (i.overflowOffset = i.scrollParentNotHidden.offset())
        },
        drag: function(t, i, r) {
            var u = r.options
              , o = !1
              , e = r.scrollParentNotHidden[0]
              , f = r.document[0];
            e !== f && e.tagName !== "HTML" ? (u.axis && u.axis === "x" || (r.overflowOffset.top + e.offsetHeight - t.pageY < u.scrollSensitivity ? e.scrollTop = o = e.scrollTop + u.scrollSpeed : t.pageY - r.overflowOffset.top < u.scrollSensitivity && (e.scrollTop = o = e.scrollTop - u.scrollSpeed)),
            u.axis && u.axis === "y" || (r.overflowOffset.left + e.offsetWidth - t.pageX < u.scrollSensitivity ? e.scrollLeft = o = e.scrollLeft + u.scrollSpeed : t.pageX - r.overflowOffset.left < u.scrollSensitivity && (e.scrollLeft = o = e.scrollLeft - u.scrollSpeed))) : (u.axis && u.axis === "x" || (t.pageY - n(f).scrollTop() < u.scrollSensitivity ? o = n(f).scrollTop(n(f).scrollTop() - u.scrollSpeed) : n(window).height() - (t.pageY - n(f).scrollTop()) < u.scrollSensitivity && (o = n(f).scrollTop(n(f).scrollTop() + u.scrollSpeed))),
            u.axis && u.axis === "y" || (t.pageX - n(f).scrollLeft() < u.scrollSensitivity ? o = n(f).scrollLeft(n(f).scrollLeft() - u.scrollSpeed) : n(window).width() - (t.pageX - n(f).scrollLeft()) < u.scrollSensitivity && (o = n(f).scrollLeft(n(f).scrollLeft() + u.scrollSpeed))));
            o !== !1 && n.ui.ddmanager && !u.dropBehaviour && n.ui.ddmanager.prepareOffsets(r, t)
        }
    });
    n.ui.plugin.add("draggable", "snap", {
        start: function(t, i, r) {
            var u = r.options;
            r.snapElements = [];
            n(u.snap.constructor !== String ? u.snap.items || ":data(ui-draggable)" : u.snap).each(function() {
                var t = n(this)
                  , i = t.offset();
                this !== r.element[0] && r.snapElements.push({
                    item: this,
                    width: t.outerWidth(),
                    height: t.outerHeight(),
                    top: i.top,
                    left: i.left
                })
            })
        },
        drag: function(t, i, r) {
            for (var e, o, s, h, c, a, l, v, w, b = r.options, f = b.snapTolerance, y = i.offset.left, k = y + r.helperProportions.width, p = i.offset.top, d = p + r.helperProportions.height, u = r.snapElements.length - 1; u >= 0; u--) {
                if (c = r.snapElements[u].left - r.margins.left,
                a = c + r.snapElements[u].width,
                l = r.snapElements[u].top - r.margins.top,
                v = l + r.snapElements[u].height,
                k < c - f || y > a + f || d < l - f || p > v + f || !n.contains(r.snapElements[u].item.ownerDocument, r.snapElements[u].item)) {
                    r.snapElements[u].snapping && r.options.snap.release && r.options.snap.release.call(r.element, t, n.extend(r._uiHash(), {
                        snapItem: r.snapElements[u].item
                    }));
                    r.snapElements[u].snapping = !1;
                    continue
                }
                b.snapMode !== "inner" && (e = Math.abs(l - d) <= f,
                o = Math.abs(v - p) <= f,
                s = Math.abs(c - k) <= f,
                h = Math.abs(a - y) <= f,
                e && (i.position.top = r._convertPositionTo("relative", {
                    top: l - r.helperProportions.height,
                    left: 0
                }).top),
                o && (i.position.top = r._convertPositionTo("relative", {
                    top: v,
                    left: 0
                }).top),
                s && (i.position.left = r._convertPositionTo("relative", {
                    top: 0,
                    left: c - r.helperProportions.width
                }).left),
                h && (i.position.left = r._convertPositionTo("relative", {
                    top: 0,
                    left: a
                }).left));
                w = e || o || s || h;
                b.snapMode !== "outer" && (e = Math.abs(l - p) <= f,
                o = Math.abs(v - d) <= f,
                s = Math.abs(c - y) <= f,
                h = Math.abs(a - k) <= f,
                e && (i.position.top = r._convertPositionTo("relative", {
                    top: l,
                    left: 0
                }).top),
                o && (i.position.top = r._convertPositionTo("relative", {
                    top: v - r.helperProportions.height,
                    left: 0
                }).top),
                s && (i.position.left = r._convertPositionTo("relative", {
                    top: 0,
                    left: c
                }).left),
                h && (i.position.left = r._convertPositionTo("relative", {
                    top: 0,
                    left: a - r.helperProportions.width
                }).left));
                !r.snapElements[u].snapping && (e || o || s || h || w) && r.options.snap.snap && r.options.snap.snap.call(r.element, t, n.extend(r._uiHash(), {
                    snapItem: r.snapElements[u].item
                }));
                r.snapElements[u].snapping = e || o || s || h || w
            }
        }
    });
    n.ui.plugin.add("draggable", "stack", {
        start: function(t, i, r) {
            var f, e = r.options, u = n.makeArray(n(e.stack)).sort(function(t, i) {
                return (parseInt(n(t).css("zIndex"), 10) || 0) - (parseInt(n(i).css("zIndex"), 10) || 0)
            });
            u.length && (f = parseInt(n(u[0]).css("zIndex"), 10) || 0,
            n(u).each(function(t) {
                n(this).css("zIndex", f + t)
            }),
            this.css("zIndex", f + u.length))
        }
    });
    n.ui.plugin.add("draggable", "zIndex", {
        start: function(t, i, r) {
            var u = n(i.helper)
              , f = r.options;
            u.css("zIndex") && (f._zIndex = u.css("zIndex"));
            u.css("zIndex", f.zIndex)
        },
        stop: function(t, i, r) {
            var u = r.options;
            u._zIndex && n(i.helper).css("zIndex", u._zIndex)
        }
    });
    et = n.ui.draggable;
    /*!
 * jQuery UI Resizable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
    n.widget("ui.resizable", n.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _num: function(n) {
            return parseInt(n, 10) || 0
        },
        _isNumber: function(n) {
            return !isNaN(parseInt(n, 10))
        },
        _hasScroll: function(t, i) {
            if (n(t).css("overflow") === "hidden")
                return !1;
            var r = i && i === "left" ? "scrollLeft" : "scrollTop"
              , u = !1;
            return t[r] > 0 ? !0 : (t[r] = 1,
            u = t[r] > 0,
            t[r] = 0,
            u)
        },
        _create: function() {
            var e, f, r, i, o, u = this, t = this.options;
            if (this.element.addClass("ui-resizable"),
            n.extend(this, {
                _aspectRatio: !!t.aspectRatio,
                aspectRatio: t.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: t.helper || t.ghost || t.animate ? t.helper || "ui-resizable-helper" : null
            }),
            this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })),
            this.element = this.element.parent().data("ui-resizable", this.element.resizable("instance")),
            this.elementIsWrapper = !0,
            this.element.css({
                marginLeft: this.originalElement.css("marginLeft"),
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom")
            }),
            this.originalElement.css({
                marginLeft: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0
            }),
            this.originalResizeStyle = this.originalElement.css("resize"),
            this.originalElement.css("resize", "none"),
            this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })),
            this.originalElement.css({
                margin: this.originalElement.css("margin")
            }),
            this._proportionallyResize()),
            this.handles = t.handles || (n(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se"),
            this.handles.constructor === String)
                for (this.handles === "all" && (this.handles = "n,e,s,w,se,sw,ne,nw"),
                e = this.handles.split(","),
                this.handles = {},
                f = 0; f < e.length; f++)
                    r = n.trim(e[f]),
                    o = "ui-resizable-" + r,
                    i = n("<div class='ui-resizable-handle " + o + "'><\/div>"),
                    i.css({
                        zIndex: t.zIndex
                    }),
                    "se" === r && i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),
                    this.handles[r] = ".ui-resizable-" + r,
                    this.element.append(i);
            this._renderAxis = function(t) {
                var i, r, u, f;
                t = t || this.element;
                for (i in this.handles)
                    this.handles[i].constructor === String && (this.handles[i] = this.element.children(this.handles[i]).first().show()),
                    this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (r = n(this.handles[i], this.element),
                    f = /sw|ne|nw|se|n|s/.test(i) ? r.outerHeight() : r.outerWidth(),
                    u = ["padding", /ne|nw|n/.test(i) ? "Top" : /se|sw|s/.test(i) ? "Bottom" : /^e$/.test(i) ? "Right" : "Left"].join(""),
                    t.css(u, f),
                    this._proportionallyResize()),
                    !n(this.handles[i]).length
            }
            ;
            this._renderAxis(this.element);
            this._handles = n(".ui-resizable-handle", this.element).disableSelection();
            this._handles.mouseover(function() {
                u.resizing || (this.className && (i = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),
                u.axis = i && i[1] ? i[1] : "se")
            });
            t.autoHide && (this._handles.hide(),
            n(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                t.disabled || (n(this).removeClass("ui-resizable-autohide"),
                u._handles.show())
            }).mouseleave(function() {
                t.disabled || u.resizing || (n(this).addClass("ui-resizable-autohide"),
                u._handles.hide())
            }));
            this._mouseInit()
        },
        _destroy: function() {
            this._mouseDestroy();
            var t, i = function(t) {
                n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
            };
            return this.elementIsWrapper && (i(this.element),
            t = this.element,
            this.originalElement.css({
                position: t.css("position"),
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: t.css("top"),
                left: t.css("left")
            }).insertAfter(t),
            t.remove()),
            this.originalElement.css("resize", this.originalResizeStyle),
            i(this.originalElement),
            this
        },
        _mouseCapture: function(t) {
            var r, i, u = !1;
            for (r in this.handles)
                i = n(this.handles[r])[0],
                (i === t.target || n.contains(i, t.target)) && (u = !0);
            return !this.options.disabled && u
        },
        _mouseStart: function(t) {
            var u, f, e, r = this.options, i = this.element;
            return this.resizing = !0,
            this._renderProxy(),
            u = this._num(this.helper.css("left")),
            f = this._num(this.helper.css("top")),
            r.containment && (u += n(r.containment).scrollLeft() || 0,
            f += n(r.containment).scrollTop() || 0),
            this.offset = this.helper.offset(),
            this.position = {
                left: u,
                top: f
            },
            this.size = this._helper ? {
                width: this.helper.width(),
                height: this.helper.height()
            } : {
                width: i.width(),
                height: i.height()
            },
            this.originalSize = this._helper ? {
                width: i.outerWidth(),
                height: i.outerHeight()
            } : {
                width: i.width(),
                height: i.height()
            },
            this.sizeDiff = {
                width: i.outerWidth() - i.width(),
                height: i.outerHeight() - i.height()
            },
            this.originalPosition = {
                left: u,
                top: f
            },
            this.originalMousePosition = {
                left: t.pageX,
                top: t.pageY
            },
            this.aspectRatio = typeof r.aspectRatio == "number" ? r.aspectRatio : this.originalSize.width / this.originalSize.height || 1,
            e = n(".ui-resizable-" + this.axis).css("cursor"),
            n("body").css("cursor", e === "auto" ? this.axis + "-resize" : e),
            i.addClass("ui-resizable-resizing"),
            this._propagate("start", t),
            !0
        },
        _mouseDrag: function(t) {
            var i, r, u = this.originalMousePosition, e = this.axis, o = t.pageX - u.left || 0, s = t.pageY - u.top || 0, f = this._change[e];
            return (this._updatePrevProperties(),
            !f) ? !1 : (i = f.apply(this, [t, o, s]),
            this._updateVirtualBoundaries(t.shiftKey),
            (this._aspectRatio || t.shiftKey) && (i = this._updateRatio(i, t)),
            i = this._respectSize(i, t),
            this._updateCache(i),
            this._propagate("resize", t),
            r = this._applyChanges(),
            !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(),
            n.isEmptyObject(r) || (this._updatePrevProperties(),
            this._trigger("resize", t, this.ui()),
            this._applyChanges()),
            !1)
        },
        _mouseStop: function(t) {
            this.resizing = !1;
            var r, u, f, e, o, s, h, c = this.options, i = this;
            return this._helper && (r = this._proportionallyResizeElements,
            u = r.length && /textarea/i.test(r[0].nodeName),
            f = u && this._hasScroll(r[0], "left") ? 0 : i.sizeDiff.height,
            e = u ? 0 : i.sizeDiff.width,
            o = {
                width: i.helper.width() - e,
                height: i.helper.height() - f
            },
            s = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null,
            h = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null,
            c.animate || this.element.css(n.extend(o, {
                top: h,
                left: s
            })),
            i.helper.height(i.size.height),
            i.helper.width(i.size.width),
            this._helper && !c.animate && this._proportionallyResize()),
            n("body").css("cursor", "auto"),
            this.element.removeClass("ui-resizable-resizing"),
            this._propagate("stop", t),
            this._helper && this.helper.remove(),
            !1
        },
        _updatePrevProperties: function() {
            this.prevPosition = {
                top: this.position.top,
                left: this.position.left
            };
            this.prevSize = {
                width: this.size.width,
                height: this.size.height
            }
        },
        _applyChanges: function() {
            var n = {};
            return this.position.top !== this.prevPosition.top && (n.top = this.position.top + "px"),
            this.position.left !== this.prevPosition.left && (n.left = this.position.left + "px"),
            this.size.width !== this.prevSize.width && (n.width = this.size.width + "px"),
            this.size.height !== this.prevSize.height && (n.height = this.size.height + "px"),
            this.helper.css(n),
            n
        },
        _updateVirtualBoundaries: function(n) {
            var r, u, f, e, t, i = this.options;
            t = {
                minWidth: this._isNumber(i.minWidth) ? i.minWidth : 0,
                maxWidth: this._isNumber(i.maxWidth) ? i.maxWidth : Infinity,
                minHeight: this._isNumber(i.minHeight) ? i.minHeight : 0,
                maxHeight: this._isNumber(i.maxHeight) ? i.maxHeight : Infinity
            };
            (this._aspectRatio || n) && (r = t.minHeight * this.aspectRatio,
            f = t.minWidth / this.aspectRatio,
            u = t.maxHeight * this.aspectRatio,
            e = t.maxWidth / this.aspectRatio,
            r > t.minWidth && (t.minWidth = r),
            f > t.minHeight && (t.minHeight = f),
            u < t.maxWidth && (t.maxWidth = u),
            e < t.maxHeight && (t.maxHeight = e));
            this._vBoundaries = t
        },
        _updateCache: function(n) {
            this.offset = this.helper.offset();
            this._isNumber(n.left) && (this.position.left = n.left);
            this._isNumber(n.top) && (this.position.top = n.top);
            this._isNumber(n.height) && (this.size.height = n.height);
            this._isNumber(n.width) && (this.size.width = n.width)
        },
        _updateRatio: function(n) {
            var t = this.position
              , i = this.size
              , r = this.axis;
            return this._isNumber(n.height) ? n.width = n.height * this.aspectRatio : this._isNumber(n.width) && (n.height = n.width / this.aspectRatio),
            r === "sw" && (n.left = t.left + (i.width - n.width),
            n.top = null),
            r === "nw" && (n.top = t.top + (i.height - n.height),
            n.left = t.left + (i.width - n.width)),
            n
        },
        _respectSize: function(n) {
            var t = this._vBoundaries
              , i = this.axis
              , r = this._isNumber(n.width) && t.maxWidth && t.maxWidth < n.width
              , u = this._isNumber(n.height) && t.maxHeight && t.maxHeight < n.height
              , f = this._isNumber(n.width) && t.minWidth && t.minWidth > n.width
              , e = this._isNumber(n.height) && t.minHeight && t.minHeight > n.height
              , o = this.originalPosition.left + this.originalSize.width
              , s = this.position.top + this.size.height
              , h = /sw|nw|w/.test(i)
              , c = /nw|ne|n/.test(i);
            return f && (n.width = t.minWidth),
            e && (n.height = t.minHeight),
            r && (n.width = t.maxWidth),
            u && (n.height = t.maxHeight),
            f && h && (n.left = o - t.minWidth),
            r && h && (n.left = o - t.maxWidth),
            e && c && (n.top = s - t.minHeight),
            u && c && (n.top = s - t.maxHeight),
            n.width || n.height || n.left || !n.top ? n.width || n.height || n.top || !n.left || (n.left = null) : n.top = null,
            n
        },
        _getPaddingPlusBorderDimensions: function(n) {
            for (var t = 0, i = [], r = [n.css("borderTopWidth"), n.css("borderRightWidth"), n.css("borderBottomWidth"), n.css("borderLeftWidth")], u = [n.css("paddingTop"), n.css("paddingRight"), n.css("paddingBottom"), n.css("paddingLeft")]; t < 4; t++)
                i[t] = parseInt(r[t], 10) || 0,
                i[t] += parseInt(u[t], 10) || 0;
            return {
                height: i[0] + i[2],
                width: i[1] + i[3]
            }
        },
        _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length)
                for (var n, t = 0, i = this.helper || this.element; t < this._proportionallyResizeElements.length; t++)
                    n = this._proportionallyResizeElements[t],
                    this.outerDimensions || (this.outerDimensions = this._getPaddingPlusBorderDimensions(n)),
                    n.css({
                        height: i.height() - this.outerDimensions.height || 0,
                        width: i.width() - this.outerDimensions.width || 0
                    })
        },
        _renderProxy: function() {
            var t = this.element
              , i = this.options;
            this.elementOffset = t.offset();
            this._helper ? (this.helper = this.helper || n("<div style='overflow:hidden;'><\/div>"),
            this.helper.addClass(this._helper).css({
                width: this.element.outerWidth() - 1,
                height: this.element.outerHeight() - 1,
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++i.zIndex
            }),
            this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        },
        _change: {
            e: function(n, t) {
                return {
                    width: this.originalSize.width + t
                }
            },
            w: function(n, t) {
                var i = this.originalSize
                  , r = this.originalPosition;
                return {
                    left: r.left + t,
                    width: i.width - t
                }
            },
            n: function(n, t, i) {
                var r = this.originalSize
                  , u = this.originalPosition;
                return {
                    top: u.top + i,
                    height: r.height - i
                }
            },
            s: function(n, t, i) {
                return {
                    height: this.originalSize.height + i
                }
            },
            se: function(t, i, r) {
                return n.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, i, r]))
            },
            sw: function(t, i, r) {
                return n.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, i, r]))
            },
            ne: function(t, i, r) {
                return n.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, i, r]))
            },
            nw: function(t, i, r) {
                return n.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, i, r]))
            }
        },
        _propagate: function(t, i) {
            n.ui.plugin.call(this, t, [i, this.ui()]);
            t !== "resize" && this._trigger(t, i, this.ui())
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    });
    n.ui.plugin.add("resizable", "animate", {
        stop: function(t) {
            var i = n(this).resizable("instance")
              , u = i.options
              , r = i._proportionallyResizeElements
              , f = r.length && /textarea/i.test(r[0].nodeName)
              , s = f && i._hasScroll(r[0], "left") ? 0 : i.sizeDiff.height
              , h = f ? 0 : i.sizeDiff.width
              , c = {
                width: i.size.width - h,
                height: i.size.height - s
            }
              , e = parseInt(i.element.css("left"), 10) + (i.position.left - i.originalPosition.left) || null
              , o = parseInt(i.element.css("top"), 10) + (i.position.top - i.originalPosition.top) || null;
            i.element.animate(n.extend(c, o && e ? {
                top: o,
                left: e
            } : {}), {
                duration: u.animateDuration,
                easing: u.animateEasing,
                step: function() {
                    var u = {
                        width: parseInt(i.element.css("width"), 10),
                        height: parseInt(i.element.css("height"), 10),
                        top: parseInt(i.element.css("top"), 10),
                        left: parseInt(i.element.css("left"), 10)
                    };
                    r && r.length && n(r[0]).css({
                        width: u.width,
                        height: u.height
                    });
                    i._updateCache(u);
                    i._propagate("resize", t)
                }
            })
        }
    });
    n.ui.plugin.add("resizable", "containment", {
        start: function() {
            var r, f, e, o, s, h, c, t = n(this).resizable("instance"), l = t.options, a = t.element, u = l.containment, i = u instanceof n ? u.get(0) : /parent/.test(u) ? a.parent().get(0) : u;
            i && (t.containerElement = n(i),
            /document/.test(u) || u === document ? (t.containerOffset = {
                left: 0,
                top: 0
            },
            t.containerPosition = {
                left: 0,
                top: 0
            },
            t.parentData = {
                element: n(document),
                left: 0,
                top: 0,
                width: n(document).width(),
                height: n(document).height() || document.body.parentNode.scrollHeight
            }) : (r = n(i),
            f = [],
            n(["Top", "Right", "Left", "Bottom"]).each(function(n, i) {
                f[n] = t._num(r.css("padding" + i))
            }),
            t.containerOffset = r.offset(),
            t.containerPosition = r.position(),
            t.containerSize = {
                height: r.innerHeight() - f[3],
                width: r.innerWidth() - f[1]
            },
            e = t.containerOffset,
            o = t.containerSize.height,
            s = t.containerSize.width,
            h = t._hasScroll(i, "left") ? i.scrollWidth : s,
            c = t._hasScroll(i) ? i.scrollHeight : o,
            t.parentData = {
                element: i,
                left: e.left,
                top: e.top,
                width: h,
                height: c
            }))
        },
        resize: function(t) {
            var o, s, h, c, i = n(this).resizable("instance"), v = i.options, r = i.containerOffset, l = i.position, f = i._aspectRatio || t.shiftKey, e = {
                top: 0,
                left: 0
            }, a = i.containerElement, u = !0;
            a[0] !== document && /static/.test(a.css("position")) && (e = r);
            l.left < (i._helper ? r.left : 0) && (i.size.width = i.size.width + (i._helper ? i.position.left - r.left : i.position.left - e.left),
            f && (i.size.height = i.size.width / i.aspectRatio,
            u = !1),
            i.position.left = v.helper ? r.left : 0);
            l.top < (i._helper ? r.top : 0) && (i.size.height = i.size.height + (i._helper ? i.position.top - r.top : i.position.top),
            f && (i.size.width = i.size.height * i.aspectRatio,
            u = !1),
            i.position.top = i._helper ? r.top : 0);
            h = i.containerElement.get(0) === i.element.parent().get(0);
            c = /relative|absolute/.test(i.containerElement.css("position"));
            h && c ? (i.offset.left = i.parentData.left + i.position.left,
            i.offset.top = i.parentData.top + i.position.top) : (i.offset.left = i.element.offset().left,
            i.offset.top = i.element.offset().top);
            o = Math.abs(i.sizeDiff.width + (i._helper ? i.offset.left - e.left : i.offset.left - r.left));
            s = Math.abs(i.sizeDiff.height + (i._helper ? i.offset.top - e.top : i.offset.top - r.top));
            o + i.size.width >= i.parentData.width && (i.size.width = i.parentData.width - o,
            f && (i.size.height = i.size.width / i.aspectRatio,
            u = !1));
            s + i.size.height >= i.parentData.height && (i.size.height = i.parentData.height - s,
            f && (i.size.width = i.size.height * i.aspectRatio,
            u = !1));
            u || (i.position.left = i.prevPosition.left,
            i.position.top = i.prevPosition.top,
            i.size.width = i.prevSize.width,
            i.size.height = i.prevSize.height)
        },
        stop: function() {
            var t = n(this).resizable("instance")
              , r = t.options
              , u = t.containerOffset
              , f = t.containerPosition
              , e = t.containerElement
              , i = n(t.helper)
              , o = i.offset()
              , s = i.outerWidth() - t.sizeDiff.width
              , h = i.outerHeight() - t.sizeDiff.height;
            t._helper && !r.animate && /relative/.test(e.css("position")) && n(this).css({
                left: o.left - f.left - u.left,
                width: s,
                height: h
            });
            t._helper && !r.animate && /static/.test(e.css("position")) && n(this).css({
                left: o.left - f.left - u.left,
                width: s,
                height: h
            })
        }
    });
    n.ui.plugin.add("resizable", "alsoResize", {
        start: function() {
            var r = n(this).resizable("instance")
              , t = r.options
              , i = function(t) {
                n(t).each(function() {
                    var t = n(this);
                    t.data("ui-resizable-alsoresize", {
                        width: parseInt(t.width(), 10),
                        height: parseInt(t.height(), 10),
                        left: parseInt(t.css("left"), 10),
                        top: parseInt(t.css("top"), 10)
                    })
                })
            };
            typeof t.alsoResize != "object" || t.alsoResize.parentNode ? i(t.alsoResize) : t.alsoResize.length ? (t.alsoResize = t.alsoResize[0],
            i(t.alsoResize)) : n.each(t.alsoResize, function(n) {
                i(n)
            })
        },
        resize: function(t, i) {
            var r = n(this).resizable("instance")
              , u = r.options
              , f = r.originalSize
              , e = r.originalPosition
              , s = {
                height: r.size.height - f.height || 0,
                width: r.size.width - f.width || 0,
                top: r.position.top - e.top || 0,
                left: r.position.left - e.left || 0
            }
              , o = function(t, r) {
                n(t).each(function() {
                    var t = n(this)
                      , f = n(this).data("ui-resizable-alsoresize")
                      , u = {}
                      , e = r && r.length ? r : t.parents(i.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    n.each(e, function(n, t) {
                        var i = (f[t] || 0) + (s[t] || 0);
                        i && i >= 0 && (u[t] = i || null)
                    });
                    t.css(u)
                })
            };
            typeof u.alsoResize != "object" || u.alsoResize.nodeType ? o(u.alsoResize) : n.each(u.alsoResize, function(n, t) {
                o(n, t)
            })
        },
        stop: function() {
            n(this).removeData("resizable-alsoresize")
        }
    });
    n.ui.plugin.add("resizable", "ghost", {
        start: function() {
            var t = n(this).resizable("instance")
              , i = t.options
              , r = t.size;
            t.ghost = t.originalElement.clone();
            t.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: r.height,
                width: r.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass(typeof i.ghost == "string" ? i.ghost : "");
            t.ghost.appendTo(t.helper)
        },
        resize: function() {
            var t = n(this).resizable("instance");
            t.ghost && t.ghost.css({
                position: "relative",
                height: t.size.height,
                width: t.size.width
            })
        },
        stop: function() {
            var t = n(this).resizable("instance");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0))
        }
    });
    n.ui.plugin.add("resizable", "grid", {
        resize: function() {
            var h, t = n(this).resizable("instance"), i = t.options, y = t.size, e = t.originalSize, o = t.originalPosition, c = t.axis, l = typeof i.grid == "number" ? [i.grid, i.grid] : i.grid, s = l[0] || 1, f = l[1] || 1, a = Math.round((y.width - e.width) / s) * s, v = Math.round((y.height - e.height) / f) * f, r = e.width + a, u = e.height + v, p = i.maxWidth && i.maxWidth < r, w = i.maxHeight && i.maxHeight < u, b = i.minWidth && i.minWidth > r, k = i.minHeight && i.minHeight > u;
            i.grid = l;
            b && (r += s);
            k && (u += f);
            p && (r -= s);
            w && (u -= f);
            /^(se|s|e)$/.test(c) ? (t.size.width = r,
            t.size.height = u) : /^(ne)$/.test(c) ? (t.size.width = r,
            t.size.height = u,
            t.position.top = o.top - v) : /^(sw)$/.test(c) ? (t.size.width = r,
            t.size.height = u,
            t.position.left = o.left - a) : ((u - f <= 0 || r - s <= 0) && (h = t._getPaddingPlusBorderDimensions(this)),
            u - f > 0 ? (t.size.height = u,
            t.position.top = o.top - v) : (u = f - h.height,
            t.size.height = u,
            t.position.top = o.top + e.height - u),
            r - s > 0 ? (t.size.width = r,
            t.position.left = o.left - a) : (r = f - h.height,
            t.size.width = r,
            t.position.left = o.left + e.width - r))
        }
    });
    ot = n.ui.resizable;
    /*!
 * jQuery UI Dialog 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
    st = n.widget("ui.dialog", {
        version: "1.11.2",
        options: {
            appendTo: "body",
            autoOpen: !0,
            buttons: [],
            closeOnEscape: !0,
            closeText: "Close",
            dialogClass: "",
            draggable: !0,
            hide: null,
            height: "auto",
            maxHeight: null,
            maxWidth: null,
            minHeight: 150,
            minWidth: 150,
            modal: !1,
            position: {
                my: "center",
                at: "center",
                of: window,
                collision: "fit",
                using: function(t) {
                    var i = n(this).css(t).offset().top;
                    i < 0 && n(this).css("top", t.top - i)
                }
            },
            resizable: !0,
            show: null,
            title: null,
            width: 300,
            beforeClose: null,
            close: null,
            drag: null,
            dragStart: null,
            dragStop: null,
            focus: null,
            open: null,
            resize: null,
            resizeStart: null,
            resizeStop: null
        },
        sizeRelatedOptions: {
            buttons: !0,
            height: !0,
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0,
            width: !0
        },
        resizableRelatedOptions: {
            maxHeight: !0,
            maxWidth: !0,
            minHeight: !0,
            minWidth: !0
        },
        _create: function() {
            this.originalCss = {
                display: this.element[0].style.display,
                width: this.element[0].style.width,
                minHeight: this.element[0].style.minHeight,
                maxHeight: this.element[0].style.maxHeight,
                height: this.element[0].style.height
            };
            this.originalPosition = {
                parent: this.element.parent(),
                index: this.element.parent().children().index(this.element)
            };
            this.originalTitle = this.element.attr("title");
            this.options.title = this.options.title || this.originalTitle;
            this._createWrapper();
            this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);
            this._createTitlebar();
            this._createButtonPane();
            this.options.draggable && n.fn.draggable && this._makeDraggable();
            this.options.resizable && n.fn.resizable && this._makeResizable();
            this._isOpen = !1;
            this._trackFocus()
        },
        _init: function() {
            this.options.autoOpen && this.open()
        },
        _appendTo: function() {
            var t = this.options.appendTo;
            return t && (t.jquery || t.nodeType) ? n(t) : this.document.find(t || "body").eq(0)
        },
        _destroy: function() {
            var n, t = this.originalPosition;
            this._destroyOverlay();
            this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();
            this.uiDialog.stop(!0, !0).remove();
            this.originalTitle && this.element.attr("title", this.originalTitle);
            n = t.parent.children().eq(t.index);
            n.length && n[0] !== this.element[0] ? n.before(this.element) : t.parent.append(this.element)
        },
        widget: function() {
            return this.uiDialog
        },
        disable: n.noop,
        enable: n.noop,
        close: function(t) {
            var i, r = this;
            if (this._isOpen && this._trigger("beforeClose", t) !== !1) {
                if (this._isOpen = !1,
                this._focusedElement = null,
                this._destroyOverlay(),
                this._untrackInstance(),
                !this.opener.filter(":focusable").focus().length)
                    try {
                        i = this.document[0].activeElement;
                        i && i.nodeName.toLowerCase() !== "body" && n(i).blur()
                    } catch (u) {}
                this._hide(this.uiDialog, this.options.hide, function() {
                    r._trigger("close", t)
                })
            }
        },
        isOpen: function() {
            return this._isOpen
        },
        moveToTop: function() {
            this._moveToTop()
        },
        _moveToTop: function(t, i) {
            var r = !1
              , f = this.uiDialog.siblings(".ui-front:visible").map(function() {
                return +n(this).css("z-index")
            }).get()
              , u = Math.max.apply(null, f);
            return u >= +this.uiDialog.css("z-index") && (this.uiDialog.css("z-index", u + 1),
            r = !0),
            r && !i && this._trigger("focus", t),
            r
        },
        open: function() {
            var t = this;
            if (this._isOpen) {
                this._moveToTop() && this._focusTabbable();
                return
            }
            this._isOpen = !0;
            this.opener = n(this.document[0].activeElement);
            this._size();
            this._position();
            this._createOverlay();
            this._moveToTop(null, !0);
            this.overlay && this.overlay.css("z-index", this.uiDialog.css("z-index") - 1);
            this._show(this.uiDialog, this.options.show, function() {
                t._focusTabbable();
                t._trigger("focus")
            });
            this._makeFocusTarget();
            this._trigger("open")
        },
        _focusTabbable: function() {
            var n = this._focusedElement;
            n || (n = this.element.find("[autofocus]"));
            n.length || (n = this.element.find(":tabbable"));
            n.length || (n = this.uiDialogButtonPane.find(":tabbable"));
            n.length || (n = this.uiDialogTitlebarClose.filter(":tabbable"));
            n.length || (n = this.uiDialog);
            n.eq(0).focus()
        },
        _keepFocus: function(t) {
            function i() {
                var t = this.document[0].activeElement
                  , i = this.uiDialog[0] === t || n.contains(this.uiDialog[0], t);
                i || this._focusTabbable()
            }
            t.preventDefault();
            i.call(this);
            this._delay(i)
        },
        _createWrapper: function() {
            this.uiDialog = n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({
                tabIndex: -1,
                role: "dialog"
            }).appendTo(this._appendTo());
            this._on(this.uiDialog, {
                keydown: function(t) {
                    if (this.options.closeOnEscape && !t.isDefaultPrevented() && t.keyCode && t.keyCode === n.ui.keyCode.ESCAPE) {
                        t.preventDefault();
                        this.close(t);
                        return
                    }
                    if (t.keyCode === n.ui.keyCode.TAB && !t.isDefaultPrevented()) {
                        var i = this.uiDialog.find(":tabbable")
                          , r = i.filter(":first")
                          , u = i.filter(":last");
                        t.target !== u[0] && t.target !== this.uiDialog[0] || t.shiftKey ? (t.target === r[0] || t.target === this.uiDialog[0]) && t.shiftKey && (this._delay(function() {
                            u.focus()
                        }),
                        t.preventDefault()) : (this._delay(function() {
                            r.focus()
                        }),
                        t.preventDefault())
                    }
                },
                mousedown: function(n) {
                    this._moveToTop(n) && this._focusTabbable()
                }
            });
            this.element.find("[aria-describedby]").length || this.uiDialog.attr({
                "aria-describedby": this.element.uniqueId().attr("id")
            })
        },
        _createTitlebar: function() {
            var t;
            this.uiDialogTitlebar = n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);
            this._on(this.uiDialogTitlebar, {
                mousedown: function(t) {
                    n(t.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus()
                }
            });
            this.uiDialogTitlebarClose = n("<button type='button'><\/button>").button({
                label: this.options.closeText,
                icons: {
                    primary: "ui-icon-closethick"
                },
                text: !1
            }).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);
            this._on(this.uiDialogTitlebarClose, {
                click: function(n) {
                    n.preventDefault();
                    this.close(n)
                }
            });
            t = n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);
            this._title(t);
            this.uiDialog.attr({
                "aria-labelledby": t.attr("id")
            })
        },
        _title: function(n) {
            this.options.title || n.html("&#160;");
            n.text(this.options.title)
        },
        _createButtonPane: function() {
            this.uiDialogButtonPane = n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");
            this.uiButtonSet = n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);
            this._createButtons()
        },
        _createButtons: function() {
            var i = this
              , t = this.options.buttons;
            if (this.uiDialogButtonPane.remove(),
            this.uiButtonSet.empty(),
            n.isEmptyObject(t) || n.isArray(t) && !t.length) {
                this.uiDialog.removeClass("ui-dialog-buttons");
                return
            }
            n.each(t, function(t, r) {
                var u, f;
                r = n.isFunction(r) ? {
                    click: r,
                    text: t
                } : r;
                r = n.extend({
                    type: "button"
                }, r);
                u = r.click;
                r.click = function() {
                    u.apply(i.element[0], arguments)
                }
                ;
                f = {
                    icons: r.icons,
                    text: r.showText
                };
                delete r.icons;
                delete r.showText;
                n("<button><\/button>", r).button(f).appendTo(i.uiButtonSet)
            });
            this.uiDialog.addClass("ui-dialog-buttons");
            this.uiDialogButtonPane.appendTo(this.uiDialog)
        },
        _makeDraggable: function() {
            function i(n) {
                return {
                    position: n.position,
                    offset: n.offset
                }
            }
            var t = this
              , r = this.options;
            this.uiDialog.draggable({
                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                handle: ".ui-dialog-titlebar",
                containment: "document",
                start: function(r, u) {
                    n(this).addClass("ui-dialog-dragging");
                    t._blockFrames();
                    t._trigger("dragStart", r, i(u))
                },
                drag: function(n, r) {
                    t._trigger("drag", n, i(r))
                },
                stop: function(u, f) {
                    var e = f.offset.left - t.document.scrollLeft()
                      , o = f.offset.top - t.document.scrollTop();
                    r.position = {
                        my: "left top",
                        at: "left" + (e >= 0 ? "+" : "") + e + " top" + (o >= 0 ? "+" : "") + o,
                        of: t.window
                    };
                    n(this).removeClass("ui-dialog-dragging");
                    t._unblockFrames();
                    t._trigger("dragStop", u, i(f))
                }
            })
        },
        _makeResizable: function() {
            function r(n) {
                return {
                    originalPosition: n.originalPosition,
                    originalSize: n.originalSize,
                    position: n.position,
                    size: n.size
                }
            }
            var t = this
              , i = this.options
              , u = i.resizable
              , f = this.uiDialog.css("position")
              , e = typeof u == "string" ? u : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({
                cancel: ".ui-dialog-content",
                containment: "document",
                alsoResize: this.element,
                maxWidth: i.maxWidth,
                maxHeight: i.maxHeight,
                minWidth: i.minWidth,
                minHeight: this._minHeight(),
                handles: e,
                start: function(i, u) {
                    n(this).addClass("ui-dialog-resizing");
                    t._blockFrames();
                    t._trigger("resizeStart", i, r(u))
                },
                resize: function(n, i) {
                    t._trigger("resize", n, r(i))
                },
                stop: function(u, f) {
                    var e = t.uiDialog.offset()
                      , o = e.left - t.document.scrollLeft()
                      , s = e.top - t.document.scrollTop();
                    i.height = t.uiDialog.height();
                    i.width = t.uiDialog.width();
                    i.position = {
                        my: "left top",
                        at: "left" + (o >= 0 ? "+" : "") + o + " top" + (s >= 0 ? "+" : "") + s,
                        of: t.window
                    };
                    n(this).removeClass("ui-dialog-resizing");
                    t._unblockFrames();
                    t._trigger("resizeStop", u, r(f))
                }
            }).css("position", f)
        },
        _trackFocus: function() {
            this._on(this.widget(), {
                focusin: function(t) {
                    this._makeFocusTarget();
                    this._focusedElement = n(t.target)
                }
            })
        },
        _makeFocusTarget: function() {
            this._untrackInstance();
            this._trackingInstances().unshift(this)
        },
        _untrackInstance: function() {
            var t = this._trackingInstances()
              , i = n.inArray(this, t);
            i !== -1 && t.splice(i, 1)
        },
        _trackingInstances: function() {
            var n = this.document.data("ui-dialog-instances");
            return n || (n = [],
            this.document.data("ui-dialog-instances", n)),
            n
        },
        _minHeight: function() {
            var n = this.options;
            return n.height === "auto" ? n.minHeight : Math.min(n.minHeight, n.height)
        },
        _position: function() {
            var n = this.uiDialog.is(":visible");
            n || this.uiDialog.show();
            this.uiDialog.position(this.options.position);
            n || this.uiDialog.hide()
        },
        _setOptions: function(t) {
            var i = this
              , r = !1
              , u = {};
            n.each(t, function(n, t) {
                i._setOption(n, t);
                n in i.sizeRelatedOptions && (r = !0);
                n in i.resizableRelatedOptions && (u[n] = t)
            });
            r && (this._size(),
            this._position());
            this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", u)
        },
        _setOption: function(n, t) {
            var u, r, i = this.uiDialog;
            (n === "dialogClass" && i.removeClass(this.options.dialogClass).addClass(t),
            n !== "disabled") && (this._super(n, t),
            n === "appendTo" && this.uiDialog.appendTo(this._appendTo()),
            n === "buttons" && this._createButtons(),
            n === "closeText" && this.uiDialogTitlebarClose.button({
                label: "" + t
            }),
            n === "draggable" && (u = i.is(":data(ui-draggable)"),
            u && !t && i.draggable("destroy"),
            !u && t && this._makeDraggable()),
            n === "position" && this._position(),
            n === "resizable" && (r = i.is(":data(ui-resizable)"),
            r && !t && i.resizable("destroy"),
            r && typeof t == "string" && i.resizable("option", "handles", t),
            r || t === !1 || this._makeResizable()),
            n === "title" && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
        },
        _size: function() {
            var t, i, r, n = this.options;
            this.element.show().css({
                width: "auto",
                minHeight: 0,
                maxHeight: "none",
                height: 0
            });
            n.minWidth > n.width && (n.width = n.minWidth);
            t = this.uiDialog.css({
                height: "auto",
                width: n.width
            }).outerHeight();
            i = Math.max(0, n.minHeight - t);
            r = typeof n.maxHeight == "number" ? Math.max(0, n.maxHeight - t) : "none";
            n.height === "auto" ? this.element.css({
                minHeight: i,
                maxHeight: r,
                height: "auto"
            }) : this.element.height(Math.max(0, n.height - t));
            this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
        },
        _blockFrames: function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var t = n(this);
                return n("<div>").css({
                    position: "absolute",
                    width: t.outerWidth(),
                    height: t.outerHeight()
                }).appendTo(t.parent()).offset(t.offset())[0]
            })
        },
        _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(),
            delete this.iframeBlocks)
        },
        _allowInteraction: function(t) {
            return n(t.target).closest(".ui-dialog").length ? !0 : !!n(t.target).closest(".ui-datepicker").length
        },
        _createOverlay: function() {
            if (this.options.modal) {
                var t = !0;
                this._delay(function() {
                    t = !1
                });
                this.document.data("ui-dialog-overlays") || this._on(this.document, {
                    focusin: function(n) {
                        t || this._allowInteraction(n) || (n.preventDefault(),
                        this._trackingInstances()[0]._focusTabbable())
                    }
                });
                this.overlay = n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());
                this._on(this.overlay, {
                    mousedown: "_keepFocus"
                });
                this.document.data("ui-dialog-overlays", (this.document.data("ui-dialog-overlays") || 0) + 1)
            }
        },
        _destroyOverlay: function() {
            if (this.options.modal && this.overlay) {
                var n = this.document.data("ui-dialog-overlays") - 1;
                n ? this.document.data("ui-dialog-overlays", n) : this.document.unbind("focusin").removeData("ui-dialog-overlays");
                this.overlay.remove();
                this.overlay = null
            }
        }
    });
    /*!
 * jQuery UI Droppable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
    n.widget("ui.droppable", {
        version: "1.11.2",
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: !1,
            addClasses: !0,
            greedy: !1,
            hoverClass: !1,
            scope: "default",
            tolerance: "intersect",
            activate: null,
            deactivate: null,
            drop: null,
            out: null,
            over: null
        },
        _create: function() {
            var t, i = this.options, r = i.accept;
            this.isover = !1;
            this.isout = !0;
            this.accept = n.isFunction(r) ? r : function(n) {
                return n.is(r)
            }
            ;
            this.proportions = function() {
                if (arguments.length)
                    t = arguments[0];
                else
                    return t ? t : t = {
                        width: this.element[0].offsetWidth,
                        height: this.element[0].offsetHeight
                    }
            }
            ;
            this._addToManager(i.scope);
            i.addClasses && this.element.addClass("ui-droppable")
        },
        _addToManager: function(t) {
            n.ui.ddmanager.droppables[t] = n.ui.ddmanager.droppables[t] || [];
            n.ui.ddmanager.droppables[t].push(this)
        },
        _splice: function(n) {
            for (var t = 0; t < n.length; t++)
                n[t] === this && n.splice(t, 1)
        },
        _destroy: function() {
            var t = n.ui.ddmanager.droppables[this.options.scope];
            this._splice(t);
            this.element.removeClass("ui-droppable ui-droppable-disabled")
        },
        _setOption: function(t, i) {
            if (t === "accept")
                this.accept = n.isFunction(i) ? i : function(n) {
                    return n.is(i)
                }
                ;
            else if (t === "scope") {
                var r = n.ui.ddmanager.droppables[this.options.scope];
                this._splice(r);
                this._addToManager(i)
            }
            this._super(t, i)
        },
        _activate: function(t) {
            var i = n.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass);
            i && this._trigger("activate", t, this.ui(i))
        },
        _deactivate: function(t) {
            var i = n.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass);
            i && this._trigger("deactivate", t, this.ui(i))
        },
        _over: function(t) {
            var i = n.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass),
            this._trigger("over", t, this.ui(i)))
        },
        _out: function(t) {
            var i = n.ui.ddmanager.current;
            i && (i.currentItem || i.element)[0] !== this.element[0] && this.accept.call(this.element[0], i.currentItem || i.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass),
            this._trigger("out", t, this.ui(i)))
        },
        _drop: function(t, i) {
            var r = i || n.ui.ddmanager.current
              , u = !1;
            return !r || (r.currentItem || r.element)[0] === this.element[0] ? !1 : (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var i = n(this).droppable("instance");
                if (i.options.greedy && !i.options.disabled && i.options.scope === r.options.scope && i.accept.call(i.element[0], r.currentItem || r.element) && n.ui.intersect(r, n.extend(i, {
                    offset: i.element.offset()
                }), i.options.tolerance, t))
                    return u = !0,
                    !1
            }),
            u) ? !1 : this.accept.call(this.element[0], r.currentItem || r.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass),
            this.options.hoverClass && this.element.removeClass(this.options.hoverClass),
            this._trigger("drop", t, this.ui(r)),
            this.element) : !1
        },
        ui: function(n) {
            return {
                draggable: n.currentItem || n.element,
                helper: n.helper,
                position: n.position,
                offset: n.positionAbs
            }
        }
    });
    n.ui.intersect = function() {
        function n(n, t, i) {
            return n >= t && n < t + i
        }
        return function(t, i, r, u) {
            if (!i.offset)
                return !1;
            var o = (t.positionAbs || t.position.absolute).left + t.margins.left
              , s = (t.positionAbs || t.position.absolute).top + t.margins.top
              , h = o + t.helperProportions.width
              , c = s + t.helperProportions.height
              , f = i.offset.left
              , e = i.offset.top
              , l = f + i.proportions().width
              , a = e + i.proportions().height;
            switch (r) {
            case "fit":
                return f <= o && h <= l && e <= s && c <= a;
            case "intersect":
                return f < o + t.helperProportions.width / 2 && h - t.helperProportions.width / 2 < l && e < s + t.helperProportions.height / 2 && c - t.helperProportions.height / 2 < a;
            case "pointer":
                return n(u.pageY, e, i.proportions().height) && n(u.pageX, f, i.proportions().width);
            case "touch":
                return (s >= e && s <= a || c >= e && c <= a || s < e && c > a) && (o >= f && o <= l || h >= f && h <= l || o < f && h > l);
            default:
                return !1
            }
        }
    }();
    n.ui.ddmanager = {
        current: null,
        droppables: {
            "default": []
        },
        prepareOffsets: function(t, i) {
            var r, f, u = n.ui.ddmanager.droppables[t.options.scope] || [], o = i ? i.type : null, e = (t.currentItem || t.element).find(":data(ui-droppable)").addBack();
            n: for (r = 0; r < u.length; r++)
                if (!u[r].options.disabled && (!t || u[r].accept.call(u[r].element[0], t.currentItem || t.element))) {
                    for (f = 0; f < e.length; f++)
                        if (e[f] === u[r].element[0]) {
                            u[r].proportions().height = 0;
                            continue n
                        }
                    (u[r].visible = u[r].element.css("display") !== "none",
                    u[r].visible) && (o === "mousedown" && u[r]._activate.call(u[r], i),
                    u[r].offset = u[r].element.offset(),
                    u[r].proportions({
                        width: u[r].element[0].offsetWidth,
                        height: u[r].element[0].offsetHeight
                    }))
                }
        },
        drop: function(t, i) {
            var r = !1;
            return n.each((n.ui.ddmanager.droppables[t.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && n.ui.intersect(t, this, this.options.tolerance, i) && (r = this._drop.call(this, i) || r),
                !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = !0,
                this.isover = !1,
                this._deactivate.call(this, i)))
            }),
            r
        },
        dragStart: function(t, i) {
            t.element.parentsUntil("body").bind("scroll.droppable", function() {
                t.options.refreshPositions || n.ui.ddmanager.prepareOffsets(t, i)
            })
        },
        drag: function(t, i) {
            t.options.refreshPositions && n.ui.ddmanager.prepareOffsets(t, i);
            n.each(n.ui.ddmanager.droppables[t.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var r, e, f, o = n.ui.intersect(t, this, this.options.tolerance, i), u = !o && this.isover ? "isout" : o && !this.isover ? "isover" : null;
                    u && (this.options.greedy && (e = this.options.scope,
                    f = this.element.parents(":data(ui-droppable)").filter(function() {
                        return n(this).droppable("instance").options.scope === e
                    }),
                    f.length && (r = n(f[0]).droppable("instance"),
                    r.greedyChild = u === "isover")),
                    r && u === "isover" && (r.isover = !1,
                    r.isout = !0,
                    r._out.call(r, i)),
                    this[u] = !0,
                    this[u === "isout" ? "isover" : "isout"] = !1,
                    this[u === "isover" ? "_over" : "_out"].call(this, i),
                    r && u === "isout" && (r.isout = !1,
                    r.isover = !0,
                    r._over.call(r, i)))
                }
            })
        },
        dragStop: function(t, i) {
            t.element.parentsUntil("body").unbind("scroll.droppable");
            t.options.refreshPositions || n.ui.ddmanager.prepareOffsets(t, i)
        }
    };
    ht = n.ui.droppable;
    /*!
 * jQuery UI Effects 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
    e = "ui-effects-";
    o = n;
    n.effects = {
        effect: {}
    };
    /*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
    (function(n, t) {
        function f(n, t, i) {
            var r = h[t.type] || {};
            return n == null ? i || !t.def ? null : t.def : (n = r.floor ? ~~n : parseFloat(n),
            isNaN(n)) ? t.def : r.mod ? (n + r.mod) % r.mod : 0 > n ? 0 : r.max < n ? r.max : n
        }
        function s(t) {
            var f = i()
              , o = f._rgba = [];
            return (t = t.toLowerCase(),
            r(v, function(n, i) {
                var r, s = i.re.exec(t), h = s && i.parse(s), e = i.space || "rgba";
                if (h)
                    return r = f[e](h),
                    f[u[e].cache] = r[u[e].cache],
                    o = f._rgba = r._rgba,
                    !1
            }),
            o.length) ? (o.join() === "0,0,0,0" && n.extend(o, e.transparent),
            f) : e[t]
        }
        function o(n, t, i) {
            return (i = (i + 1) % 1,
            i * 6 < 1) ? n + (t - n) * i * 6 : i * 2 < 1 ? t : i * 3 < 2 ? n + (t - n) * (2 / 3 - i) * 6 : n
        }
        var a = /^([\-+])=\s*(\d+\.?\d*)/, v = [{
            re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            parse: function(n) {
                return [n[1], n[2], n[3], n[4]]
            }
        }, {
            re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            parse: function(n) {
                return [n[1] * 2.55, n[2] * 2.55, n[3] * 2.55, n[4]]
            }
        }, {
            re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
            parse: function(n) {
                return [parseInt(n[1], 16), parseInt(n[2], 16), parseInt(n[3], 16)]
            }
        }, {
            re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
            parse: function(n) {
                return [parseInt(n[1] + n[1], 16), parseInt(n[2] + n[2], 16), parseInt(n[3] + n[3], 16)]
            }
        }, {
            re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
            space: "hsla",
            parse: function(n) {
                return [n[1], n[2] / 100, n[3] / 100, n[4]]
            }
        }], i = n.Color = function(t, i, r, u) {
            return new n.Color.fn.parse(t,i,r,u)
        }
        , u = {
            rgba: {
                props: {
                    red: {
                        idx: 0,
                        type: "byte"
                    },
                    green: {
                        idx: 1,
                        type: "byte"
                    },
                    blue: {
                        idx: 2,
                        type: "byte"
                    }
                }
            },
            hsla: {
                props: {
                    hue: {
                        idx: 0,
                        type: "degrees"
                    },
                    saturation: {
                        idx: 1,
                        type: "percent"
                    },
                    lightness: {
                        idx: 2,
                        type: "percent"
                    }
                }
            }
        }, h = {
            byte: {
                floor: !0,
                max: 255
            },
            percent: {
                max: 1
            },
            degrees: {
                mod: 360,
                floor: !0
            }
        }, c = i.support = {}, l = n("<p>")[0], e, r = n.each;
        l.style.cssText = "background-color:rgba(1,1,1,.5)";
        c.rgba = l.style.backgroundColor.indexOf("rgba") > -1;
        r(u, function(n, t) {
            t.cache = "_" + n;
            t.props.alpha = {
                idx: 3,
                type: "percent",
                def: 1
            }
        });
        i.fn = n.extend(i.prototype, {
            parse: function(o, h, c, l) {
                if (o === t)
                    return this._rgba = [null, null, null, null],
                    this;
                (o.jquery || o.nodeType) && (o = n(o).css(h),
                h = t);
                var a = this
                  , v = n.type(o)
                  , y = this._rgba = [];
                return (h !== t && (o = [o, h, c, l],
                v = "array"),
                v === "string") ? this.parse(s(o) || e._default) : v === "array" ? (r(u.rgba.props, function(n, t) {
                    y[t.idx] = f(o[t.idx], t)
                }),
                this) : v === "object" ? (o instanceof i ? r(u, function(n, t) {
                    o[t.cache] && (a[t.cache] = o[t.cache].slice())
                }) : r(u, function(t, i) {
                    var u = i.cache;
                    r(i.props, function(n, t) {
                        if (!a[u] && i.to) {
                            if (n === "alpha" || o[n] == null)
                                return;
                            a[u] = i.to(a._rgba)
                        }
                        a[u][t.idx] = f(o[n], t, !0)
                    });
                    a[u] && n.inArray(null, a[u].slice(0, 3)) < 0 && (a[u][3] = 1,
                    i.from && (a._rgba = i.from(a[u])))
                }),
                this) : void 0
            },
            is: function(n) {
                var e = i(n)
                  , t = !0
                  , f = this;
                return r(u, function(n, i) {
                    var o, u = e[i.cache];
                    return u && (o = f[i.cache] || i.to && i.to(f._rgba) || [],
                    r(i.props, function(n, i) {
                        if (u[i.idx] != null)
                            return t = u[i.idx] === o[i.idx]
                    })),
                    t
                }),
                t
            },
            _space: function() {
                var n = []
                  , t = this;
                return r(u, function(i, r) {
                    t[r.cache] && n.push(i)
                }),
                n.pop()
            },
            transition: function(n, t) {
                var e = i(n)
                  , c = e._space()
                  , o = u[c]
                  , l = this.alpha() === 0 ? i("transparent") : this
                  , a = l[o.cache] || o.to(l._rgba)
                  , s = a.slice();
                return e = e[o.cache],
                r(o.props, function(n, i) {
                    var c = i.idx
                      , r = a[c]
                      , u = e[c]
                      , o = h[i.type] || {};
                    u !== null && (r === null ? s[c] = u : (o.mod && (u - r > o.mod / 2 ? r += o.mod : r - u > o.mod / 2 && (r -= o.mod)),
                    s[c] = f((u - r) * t + r, i)))
                }),
                this[c](s)
            },
            blend: function(t) {
                if (this._rgba[3] === 1)
                    return this;
                var r = this._rgba.slice()
                  , u = r.pop()
                  , f = i(t)._rgba;
                return i(n.map(r, function(n, t) {
                    return (1 - u) * f[t] + u * n
                }))
            },
            toRgbaString: function() {
                var i = "rgba("
                  , t = n.map(this._rgba, function(n, t) {
                    return n == null ? t > 2 ? 1 : 0 : n
                });
                return t[3] === 1 && (t.pop(),
                i = "rgb("),
                i + t.join() + ")"
            },
            toHslaString: function() {
                var i = "hsla("
                  , t = n.map(this.hsla(), function(n, t) {
                    return n == null && (n = t > 2 ? 1 : 0),
                    t && t < 3 && (n = Math.round(n * 100) + "%"),
                    n
                });
                return t[3] === 1 && (t.pop(),
                i = "hsl("),
                i + t.join() + ")"
            },
            toHexString: function(t) {
                var i = this._rgba.slice()
                  , r = i.pop();
                return t && i.push(~~(r * 255)),
                "#" + n.map(i, function(n) {
                    return n = (n || 0).toString(16),
                    n.length === 1 ? "0" + n : n
                }).join("")
            },
            toString: function() {
                return this._rgba[3] === 0 ? "transparent" : this.toRgbaString()
            }
        });
        i.fn.parse.prototype = i.fn;
        u.hsla.to = function(n) {
            if (n[0] == null || n[1] == null || n[2] == null)
                return [null, null, null, n[3]];
            var i = n[0] / 255, r = n[1] / 255, f = n[2] / 255, s = n[3], u = Math.max(i, r, f), e = Math.min(i, r, f), t = u - e, o = u + e, h = o * .5, c, l;
            return c = e === u ? 0 : i === u ? 60 * (r - f) / t + 360 : r === u ? 60 * (f - i) / t + 120 : 60 * (i - r) / t + 240,
            l = t === 0 ? 0 : h <= .5 ? t / o : t / (2 - o),
            [Math.round(c) % 360, l, h, s == null ? 1 : s]
        }
        ;
        u.hsla.from = function(n) {
            if (n[0] == null || n[1] == null || n[2] == null)
                return [null, null, null, n[3]];
            var r = n[0] / 360
              , u = n[1]
              , t = n[2]
              , e = n[3]
              , i = t <= .5 ? t * (1 + u) : t + u - t * u
              , f = 2 * t - i;
            return [Math.round(o(f, i, r + 1 / 3) * 255), Math.round(o(f, i, r) * 255), Math.round(o(f, i, r - 1 / 3) * 255), e]
        }
        ;
        r(u, function(u, e) {
            var s = e.props
              , o = e.cache
              , h = e.to
              , c = e.from;
            i.fn[u] = function(u) {
                if (h && !this[o] && (this[o] = h(this._rgba)),
                u === t)
                    return this[o].slice();
                var l, a = n.type(u), v = a === "array" || a === "object" ? u : arguments, e = this[o].slice();
                return r(s, function(n, t) {
                    var i = v[a === "object" ? n : t.idx];
                    i == null && (i = e[t.idx]);
                    e[t.idx] = f(i, t)
                }),
                c ? (l = i(c(e)),
                l[o] = e,
                l) : i(e)
            }
            ;
            r(s, function(t, r) {
                i.fn[t] || (i.fn[t] = function(i) {
                    var f = n.type(i), h = t === "alpha" ? this._hsla ? "hsla" : "rgba" : u, o = this[h](), s = o[r.idx], e;
                    return f === "undefined" ? s : (f === "function" && (i = i.call(this, s),
                    f = n.type(i)),
                    i == null && r.empty) ? this : (f === "string" && (e = a.exec(i),
                    e && (i = s + parseFloat(e[2]) * (e[1] === "+" ? 1 : -1))),
                    o[r.idx] = i,
                    this[h](o))
                }
                )
            })
        });
        i.hook = function(t) {
            var u = t.split(" ");
            r(u, function(t, r) {
                n.cssHooks[r] = {
                    set: function(t, u) {
                        var o, f, e = "";
                        if (u !== "transparent" && (n.type(u) !== "string" || (o = s(u)))) {
                            if (u = i(o || u),
                            !c.rgba && u._rgba[3] !== 1) {
                                for (f = r === "backgroundColor" ? t.parentNode : t; (e === "" || e === "transparent") && f && f.style; )
                                    try {
                                        e = n.css(f, "backgroundColor");
                                        f = f.parentNode
                                    } catch (h) {}
                                u = u.blend(e && e !== "transparent" ? e : "_default")
                            }
                            u = u.toRgbaString()
                        }
                        try {
                            t.style[r] = u
                        } catch (h) {}
                    }
                };
                n.fx.step[r] = function(t) {
                    t.colorInit || (t.start = i(t.elem, r),
                    t.end = i(t.end),
                    t.colorInit = !0);
                    n.cssHooks[r].set(t.elem, t.start.transition(t.end, t.pos))
                }
            })
        }
        ;
        i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
        n.cssHooks.borderColor = {
            expand: function(n) {
                var t = {};
                return r(["Top", "Right", "Bottom", "Left"], function(i, r) {
                    t["border" + r + "Color"] = n
                }),
                t
            }
        };
        e = n.Color.names = {
            aqua: "#00ffff",
            black: "#000000",
            blue: "#0000ff",
            fuchsia: "#ff00ff",
            gray: "#808080",
            green: "#008000",
            lime: "#00ff00",
            maroon: "#800000",
            navy: "#000080",
            olive: "#808000",
            purple: "#800080",
            red: "#ff0000",
            silver: "#c0c0c0",
            teal: "#008080",
            white: "#ffffff",
            yellow: "#ffff00",
            transparent: [null, null, null, 0],
            _default: "#ffffff"
        }
    }
    )(o),
    function() {
        function t(t) {
            var r, u, i = t.ownerDocument.defaultView ? t.ownerDocument.defaultView.getComputedStyle(t, null) : t.currentStyle, f = {};
            if (i && i.length && i[0] && i[i[0]])
                for (u = i.length; u--; )
                    r = i[u],
                    typeof i[r] == "string" && (f[n.camelCase(r)] = i[r]);
            else
                for (r in i)
                    typeof i[r] == "string" && (f[r] = i[r]);
            return f
        }
        function i(t, i) {
            var e = {}, r, f;
            for (r in i)
                f = i[r],
                t[r] !== f && (u[r] || (n.fx.step[r] || !isNaN(parseFloat(f))) && (e[r] = f));
            return e
        }
        var r = ["add", "remove", "toggle"]
          , u = {
            border: 1,
            borderBottom: 1,
            borderColor: 1,
            borderLeft: 1,
            borderRight: 1,
            borderTop: 1,
            borderWidth: 1,
            margin: 1,
            padding: 1
        };
        n.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function(t, i) {
            n.fx.step[i] = function(n) {
                (n.end === "none" || n.setAttr) && (n.pos !== 1 || n.setAttr) || (o.style(n.elem, i, n.end),
                n.setAttr = !0)
            }
        });
        n.fn.addBack || (n.fn.addBack = function(n) {
            return this.add(n == null ? this.prevObject : this.prevObject.filter(n))
        }
        );
        n.effects.animateClass = function(u, f, e, o) {
            var s = n.speed(f, e, o);
            return this.queue(function() {
                var e = n(this), h = e.attr("class") || "", o, f = s.children ? e.find("*").addBack() : e;
                f = f.map(function() {
                    var i = n(this);
                    return {
                        el: i,
                        start: t(this)
                    }
                });
                o = function() {
                    n.each(r, function(n, t) {
                        u[t] && e[t + "Class"](u[t])
                    })
                }
                ;
                o();
                f = f.map(function() {
                    return this.end = t(this.el[0]),
                    this.diff = i(this.start, this.end),
                    this
                });
                e.attr("class", h);
                f = f.map(function() {
                    var i = this
                      , t = n.Deferred()
                      , r = n.extend({}, s, {
                        queue: !1,
                        complete: function() {
                            t.resolve(i)
                        }
                    });
                    return this.el.animate(this.diff, r),
                    t.promise()
                });
                n.when.apply(n, f.get()).done(function() {
                    o();
                    n.each(arguments, function() {
                        var t = this.el;
                        n.each(this.diff, function(n) {
                            t.css(n, "")
                        })
                    });
                    s.complete.call(e[0])
                })
            })
        }
        ;
        n.fn.extend({
            addClass: function(t) {
                return function(i, r, u, f) {
                    return r ? n.effects.animateClass.call(this, {
                        add: i
                    }, r, u, f) : t.apply(this, arguments)
                }
            }(n.fn.addClass),
            removeClass: function(t) {
                return function(i, r, u, f) {
                    return arguments.length > 1 ? n.effects.animateClass.call(this, {
                        remove: i
                    }, r, u, f) : t.apply(this, arguments)
                }
            }(n.fn.removeClass),
            toggleClass: function(t) {
                return function(i, r, u, f, e) {
                    return typeof r == "boolean" || r === undefined ? u ? n.effects.animateClass.call(this, r ? {
                        add: i
                    } : {
                        remove: i
                    }, u, f, e) : t.apply(this, arguments) : n.effects.animateClass.call(this, {
                        toggle: i
                    }, r, u, f)
                }
            }(n.fn.toggleClass),
            switchClass: function(t, i, r, u, f) {
                return n.effects.animateClass.call(this, {
                    add: i,
                    remove: t
                }, r, u, f)
            }
        })
    }(),
    function() {
        function t(t, i, r, u) {
            return n.isPlainObject(t) && (i = t,
            t = t.effect),
            t = {
                effect: t
            },
            i == null && (i = {}),
            n.isFunction(i) && (u = i,
            r = null,
            i = {}),
            (typeof i == "number" || n.fx.speeds[i]) && (u = r,
            r = i,
            i = {}),
            n.isFunction(r) && (u = r,
            r = null),
            i && n.extend(t, i),
            r = r || i.duration,
            t.duration = n.fx.off ? 0 : typeof r == "number" ? r : r in n.fx.speeds ? n.fx.speeds[r] : n.fx.speeds._default,
            t.complete = u || i.complete,
            t
        }
        function i(t) {
            return !t || typeof t == "number" || n.fx.speeds[t] ? !0 : typeof t == "string" && !n.effects.effect[t] ? !0 : n.isFunction(t) ? !0 : typeof t == "object" && !t.effect ? !0 : !1
        }
        n.extend(n.effects, {
            version: "1.11.2",
            save: function(n, t) {
                for (var i = 0; i < t.length; i++)
                    t[i] !== null && n.data(e + t[i], n[0].style[t[i]])
            },
            restore: function(n, t) {
                for (var r, i = 0; i < t.length; i++)
                    t[i] !== null && (r = n.data(e + t[i]),
                    r === undefined && (r = ""),
                    n.css(t[i], r))
            },
            setMode: function(n, t) {
                return t === "toggle" && (t = n.is(":hidden") ? "show" : "hide"),
                t
            },
            getBaseline: function(n, t) {
                var i, r;
                switch (n[0]) {
                case "top":
                    i = 0;
                    break;
                case "middle":
                    i = .5;
                    break;
                case "bottom":
                    i = 1;
                    break;
                default:
                    i = n[0] / t.height
                }
                switch (n[1]) {
                case "left":
                    r = 0;
                    break;
                case "center":
                    r = .5;
                    break;
                case "right":
                    r = 1;
                    break;
                default:
                    r = n[1] / t.width
                }
                return {
                    x: r,
                    y: i
                }
            },
            createWrapper: function(t) {
                if (t.parent().is(".ui-effects-wrapper"))
                    return t.parent();
                var i = {
                    width: t.outerWidth(!0),
                    height: t.outerHeight(!0),
                    float: t.css("float")
                }
                  , u = n("<div><\/div>").addClass("ui-effects-wrapper").css({
                    fontSize: "100%",
                    background: "transparent",
                    border: "none",
                    margin: 0,
                    padding: 0
                })
                  , f = {
                    width: t.width(),
                    height: t.height()
                }
                  , r = document.activeElement;
                try {
                    r.id
                } catch (e) {
                    r = document.body
                }
                return t.wrap(u),
                (t[0] === r || n.contains(t[0], r)) && n(r).focus(),
                u = t.parent(),
                t.css("position") === "static" ? (u.css({
                    position: "relative"
                }),
                t.css({
                    position: "relative"
                })) : (n.extend(i, {
                    position: t.css("position"),
                    zIndex: t.css("z-index")
                }),
                n.each(["top", "left", "bottom", "right"], function(n, r) {
                    i[r] = t.css(r);
                    isNaN(parseInt(i[r], 10)) && (i[r] = "auto")
                }),
                t.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto"
                })),
                t.css(f),
                u.css(i).show()
            },
            removeWrapper: function(t) {
                var i = document.activeElement;
                return t.parent().is(".ui-effects-wrapper") && (t.parent().replaceWith(t),
                (t[0] === i || n.contains(t[0], i)) && n(i).focus()),
                t
            },
            setTransition: function(t, i, r, u) {
                return u = u || {},
                n.each(i, function(n, i) {
                    var f = t.cssUnit(i);
                    f[0] > 0 && (u[i] = f[0] * r + f[1])
                }),
                u
            }
        });
        n.fn.extend({
            effect: function() {
                function r(t) {
                    function f() {
                        n.isFunction(o) && o.call(r[0]);
                        n.isFunction(t) && t()
                    }
                    var r = n(this)
                      , o = i.complete
                      , u = i.mode;
                    (r.is(":hidden") ? u === "hide" : u === "show") ? (r[u](),
                    f()) : e.call(r[0], i, f)
                }
                var i = t.apply(this, arguments)
                  , u = i.mode
                  , f = i.queue
                  , e = n.effects.effect[i.effect];
                return n.fx.off || !e ? u ? this[u](i.duration, i.complete) : this.each(function() {
                    i.complete && i.complete.call(this)
                }) : f === !1 ? this.each(r) : this.queue(f || "fx", r)
            },
            show: function(n) {
                return function(r) {
                    if (i(r))
                        return n.apply(this, arguments);
                    var u = t.apply(this, arguments);
                    return u.mode = "show",
                    this.effect.call(this, u)
                }
            }(n.fn.show),
            hide: function(n) {
                return function(r) {
                    if (i(r))
                        return n.apply(this, arguments);
                    var u = t.apply(this, arguments);
                    return u.mode = "hide",
                    this.effect.call(this, u)
                }
            }(n.fn.hide),
            toggle: function(n) {
                return function(r) {
                    if (i(r) || typeof r == "boolean")
                        return n.apply(this, arguments);
                    var u = t.apply(this, arguments);
                    return u.mode = "toggle",
                    this.effect.call(this, u)
                }
            }(n.fn.toggle),
            cssUnit: function(t) {
                var i = this.css(t)
                  , r = [];
                return n.each(["em", "px", "%", "pt"], function(n, t) {
                    i.indexOf(t) > 0 && (r = [parseFloat(i), t])
                }),
                r
            }
        })
    }(),
    function() {
        var t = {};
        n.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function(n, i) {
            t[i] = function(t) {
                return Math.pow(t, n + 2)
            }
        });
        n.extend(t, {
            Sine: function(n) {
                return 1 - Math.cos(n * Math.PI / 2)
            },
            Circ: function(n) {
                return 1 - Math.sqrt(1 - n * n)
            },
            Elastic: function(n) {
                return n === 0 || n === 1 ? n : -Math.pow(2, 8 * (n - 1)) * Math.sin(((n - 1) * 80 - 7.5) * Math.PI / 15)
            },
            Back: function(n) {
                return n * n * (3 * n - 2)
            },
            Bounce: function(n) {
                for (var t, i = 4; n < ((t = Math.pow(2, --i)) - 1) / 11; )
                    ;
                return 1 / Math.pow(4, 3 - i) - 7.5625 * Math.pow((t * 3 - 2) / 22 - n, 2)
            }
        });
        n.each(t, function(t, i) {
            n.easing["easeIn" + t] = i;
            n.easing["easeOut" + t] = function(n) {
                return 1 - i(1 - n)
            }
            ;
            n.easing["easeInOut" + t] = function(n) {
                return n < .5 ? i(n * 2) / 2 : 1 - i(n * -2 + 2) / 2
            }
        })
    }();
    ct = n.effects;
    /*!
 * jQuery UI Effects Blind 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 */
    lt = n.effects.effect.blind = function(t, i) {
        var r = n(this), s = ["position", "top", "bottom", "left", "right", "height", "width"], v = n.effects.setMode(r, t.mode || "hide"), y = t.direction || "up", f = /up|down|vertical/.test(y), h = f ? "height" : "width", c = f ? "top" : "left", p = /up|left|vertical|horizontal/.test(y), l = {}, a = v === "show", u, e, o;
        r.parent().is(".ui-effects-wrapper") ? n.effects.save(r.parent(), s) : n.effects.save(r, s);
        r.show();
        u = n.effects.createWrapper(r).css({
            overflow: "hidden"
        });
        e = u[h]();
        o = parseFloat(u.css(c)) || 0;
        l[h] = a ? e : 0;
        p || (r.css(f ? "bottom" : "right", 0).css(f ? "top" : "left", "auto").css({
            position: "absolute"
        }),
        l[c] = a ? o : e + o);
        a && (u.css(h, 0),
        p || u.css(c, o + e));
        u.animate(l, {
            duration: t.duration,
            easing: t.easing,
            queue: !1,
            complete: function() {
                v === "hide" && r.hide();
                n.effects.restore(r, s);
                n.effects.removeWrapper(r);
                i()
            }
        })
    }
    ;
    /*!
 * jQuery UI Effects Bounce 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 */
    at = n.effects.effect.bounce = function(t, i) {
        var r = n(this), v = ["position", "top", "bottom", "left", "right", "height", "width"], k = n.effects.setMode(r, t.mode || "effect"), f = k === "hide", y = k === "show", h = t.direction || "up", u = t.distance, p = t.times || 5, d = p * 2 + (y || f ? 1 : 0), c = t.duration / d, l = t.easing, e = h === "up" || h === "down" ? "top" : "left", w = h === "up" || h === "left", b, o, s, a = r.queue(), g = a.length;
        for ((y || f) && v.push("opacity"),
        n.effects.save(r, v),
        r.show(),
        n.effects.createWrapper(r),
        u || (u = r[e === "top" ? "outerHeight" : "outerWidth"]() / 3),
        y && (s = {
            opacity: 1
        },
        s[e] = 0,
        r.css("opacity", 0).css(e, w ? -u * 2 : u * 2).animate(s, c, l)),
        f && (u = u / Math.pow(2, p - 1)),
        s = {},
        s[e] = 0,
        b = 0; b < p; b++)
            o = {},
            o[e] = (w ? "-=" : "+=") + u,
            r.animate(o, c, l).animate(s, c, l),
            u = f ? u * 2 : u / 2;
        f && (o = {
            opacity: 0
        },
        o[e] = (w ? "-=" : "+=") + u,
        r.animate(o, c, l));
        r.queue(function() {
            f && r.hide();
            n.effects.restore(r, v);
            n.effects.removeWrapper(r);
            i()
        });
        g > 1 && a.splice.apply(a, [1, 0].concat(a.splice(g, d + 1)));
        r.dequeue()
    }
    ;
    /*!
 * jQuery UI Effects Clip 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 */
    vt = n.effects.effect.clip = function(t, i) {
        var r = n(this), h = ["position", "top", "bottom", "left", "right", "height", "width"], v = n.effects.setMode(r, t.mode || "hide"), f = v === "show", y = t.direction || "vertical", c = y === "vertical", o = c ? "height" : "width", l = c ? "top" : "left", s = {}, a, u, e;
        n.effects.save(r, h);
        r.show();
        a = n.effects.createWrapper(r).css({
            overflow: "hidden"
        });
        u = r[0].tagName === "IMG" ? a : r;
        e = u[o]();
        f && (u.css(o, 0),
        u.css(l, e / 2));
        s[o] = f ? e : 0;
        s[l] = f ? 0 : e / 2;
        u.animate(s, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                f || r.hide();
                n.effects.restore(r, h);
                n.effects.removeWrapper(r);
                i()
            }
        })
    }
    ;
    /*!
 * jQuery UI Effects Drop 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 */
    yt = n.effects.effect.drop = function(t, i) {
        var r = n(this), h = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"], c = n.effects.setMode(r, t.mode || "hide"), e = c === "show", u = t.direction || "left", o = u === "up" || u === "down" ? "top" : "left", s = u === "up" || u === "left" ? "pos" : "neg", l = {
            opacity: e ? 1 : 0
        }, f;
        n.effects.save(r, h);
        r.show();
        n.effects.createWrapper(r);
        f = t.distance || r[o === "top" ? "outerHeight" : "outerWidth"](!0) / 2;
        e && r.css("opacity", 0).css(o, s === "pos" ? -f : f);
        l[o] = (e ? s === "pos" ? "+=" : "-=" : s === "pos" ? "-=" : "+=") + f;
        r.animate(l, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                c === "hide" && r.hide();
                n.effects.restore(r, h);
                n.effects.removeWrapper(r);
                i()
            }
        })
    }
    ;
    /*!
 * jQuery UI Effects Explode 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 */
    pt = n.effects.effect.explode = function(t, i) {
        function b() {
            l.push(this);
            l.length === e * c && k()
        }
        function k() {
            r.css({
                visibility: "visible"
            });
            n(l).remove();
            u || r.hide();
            i()
        }
        for (var e = t.pieces ? Math.round(Math.sqrt(t.pieces)) : 3, c = e, r = n(this), d = n.effects.setMode(r, t.mode || "hide"), u = d === "show", w = r.show().css("visibility", "hidden").offset(), o = Math.ceil(r.outerWidth() / c), s = Math.ceil(r.outerHeight() / e), l = [], f, a, v, y, p, h = 0; h < e; h++)
            for (v = w.top + h * s,
            p = h - (e - 1) / 2,
            f = 0; f < c; f++)
                a = w.left + f * o,
                y = f - (c - 1) / 2,
                r.clone().appendTo("body").wrap("<div><\/div>").css({
                    position: "absolute",
                    visibility: "visible",
                    left: -f * o,
                    top: -h * s
                }).parent().addClass("ui-effects-explode").css({
                    position: "absolute",
                    overflow: "hidden",
                    width: o,
                    height: s,
                    left: a + (u ? y * o : 0),
                    top: v + (u ? p * s : 0),
                    opacity: u ? 0 : 1
                }).animate({
                    left: a + (u ? 0 : y * o),
                    top: v + (u ? 0 : p * s),
                    opacity: u ? 1 : 0
                }, t.duration || 500, t.easing, b)
    }
    ;
    /*!
 * jQuery UI Effects Fade 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 */
    wt = n.effects.effect.fade = function(t, i) {
        var r = n(this)
          , u = n.effects.setMode(r, t.mode || "toggle");
        r.animate({
            opacity: u
        }, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: i
        })
    }
    ;
    /*!
 * jQuery UI Effects Fold 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 */
    bt = n.effects.effect.fold = function(t, i) {
        var r = n(this), s = ["position", "top", "bottom", "left", "right", "height", "width"], h = n.effects.setMode(r, t.mode || "hide"), e = h === "show", c = h === "hide", f = t.size || 15, l = /([0-9]+)%/.exec(f), a = !!t.horizFirst, v = e !== a, y = v ? ["width", "height"] : ["height", "width"], p = t.duration / 2, u, o, w = {}, b = {};
        n.effects.save(r, s);
        r.show();
        u = n.effects.createWrapper(r).css({
            overflow: "hidden"
        });
        o = v ? [u.width(), u.height()] : [u.height(), u.width()];
        l && (f = parseInt(l[1], 10) / 100 * o[c ? 0 : 1]);
        e && u.css(a ? {
            height: 0,
            width: f
        } : {
            height: f,
            width: 0
        });
        w[y[0]] = e ? o[0] : f;
        b[y[1]] = e ? o[1] : 0;
        u.animate(w, p, t.easing).animate(b, p, t.easing, function() {
            c && r.hide();
            n.effects.restore(r, s);
            n.effects.removeWrapper(r);
            i()
        })
    }
    ;
    /*!
 * jQuery UI Effects Highlight 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 */
    kt = n.effects.effect.highlight = function(t, i) {
        var r = n(this)
          , u = ["backgroundImage", "backgroundColor", "opacity"]
          , f = n.effects.setMode(r, t.mode || "show")
          , e = {
            backgroundColor: r.css("backgroundColor")
        };
        f === "hide" && (e.opacity = 0);
        n.effects.save(r, u);
        r.show().css({
            backgroundImage: "none",
            backgroundColor: t.color || "#ffff99"
        }).animate(e, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                f === "hide" && r.hide();
                n.effects.restore(r, u);
                i()
            }
        })
    }
    ;
    /*!
 * jQuery UI Effects Size 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/size-effect/
 */
    dt = n.effects.effect.size = function(t, i) {
        var f, l, u, r = n(this), w = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"], a = ["width", "height", "overflow"], v = ["fontSize"], e = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], o = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], h = n.effects.setMode(r, t.mode || "effect"), y = t.restore || h !== "effect", c = t.scale || "both", b = t.origin || ["middle", "center"], k = r.css("position"), s = y ? w : ["position", "top", "bottom", "left", "right", "overflow", "opacity"], p = {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0
        };
        h === "show" && r.show();
        f = {
            height: r.height(),
            width: r.width(),
            outerHeight: r.outerHeight(),
            outerWidth: r.outerWidth()
        };
        t.mode === "toggle" && h === "show" ? (r.from = t.to || p,
        r.to = t.from || f) : (r.from = t.from || (h === "show" ? p : f),
        r.to = t.to || (h === "hide" ? p : f));
        u = {
            from: {
                y: r.from.height / f.height,
                x: r.from.width / f.width
            },
            to: {
                y: r.to.height / f.height,
                x: r.to.width / f.width
            }
        };
        (c === "box" || c === "both") && (u.from.y !== u.to.y && (s = s.concat(e),
        r.from = n.effects.setTransition(r, e, u.from.y, r.from),
        r.to = n.effects.setTransition(r, e, u.to.y, r.to)),
        u.from.x !== u.to.x && (s = s.concat(o),
        r.from = n.effects.setTransition(r, o, u.from.x, r.from),
        r.to = n.effects.setTransition(r, o, u.to.x, r.to)));
        (c === "content" || c === "both") && u.from.y !== u.to.y && (s = s.concat(v).concat(a),
        r.from = n.effects.setTransition(r, v, u.from.y, r.from),
        r.to = n.effects.setTransition(r, v, u.to.y, r.to));
        n.effects.save(r, s);
        r.show();
        n.effects.createWrapper(r);
        r.css("overflow", "hidden").css(r.from);
        b && (l = n.effects.getBaseline(b, f),
        r.from.top = (f.outerHeight - r.outerHeight()) * l.y,
        r.from.left = (f.outerWidth - r.outerWidth()) * l.x,
        r.to.top = (f.outerHeight - r.to.outerHeight) * l.y,
        r.to.left = (f.outerWidth - r.to.outerWidth) * l.x);
        r.css(r.from);
        (c === "content" || c === "both") && (e = e.concat(["marginTop", "marginBottom"]).concat(v),
        o = o.concat(["marginLeft", "marginRight"]),
        a = w.concat(e).concat(o),
        r.find("*[width]").each(function() {
            var i = n(this)
              , r = {
                height: i.height(),
                width: i.width(),
                outerHeight: i.outerHeight(),
                outerWidth: i.outerWidth()
            };
            y && n.effects.save(i, a);
            i.from = {
                height: r.height * u.from.y,
                width: r.width * u.from.x,
                outerHeight: r.outerHeight * u.from.y,
                outerWidth: r.outerWidth * u.from.x
            };
            i.to = {
                height: r.height * u.to.y,
                width: r.width * u.to.x,
                outerHeight: r.height * u.to.y,
                outerWidth: r.width * u.to.x
            };
            u.from.y !== u.to.y && (i.from = n.effects.setTransition(i, e, u.from.y, i.from),
            i.to = n.effects.setTransition(i, e, u.to.y, i.to));
            u.from.x !== u.to.x && (i.from = n.effects.setTransition(i, o, u.from.x, i.from),
            i.to = n.effects.setTransition(i, o, u.to.x, i.to));
            i.css(i.from);
            i.animate(i.to, t.duration, t.easing, function() {
                y && n.effects.restore(i, a)
            })
        }));
        r.animate(r.to, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                r.to.opacity === 0 && r.css("opacity", r.from.opacity);
                h === "hide" && r.hide();
                n.effects.restore(r, s);
                y || (k === "static" ? r.css({
                    position: "relative",
                    top: r.to.top,
                    left: r.to.left
                }) : n.each(["top", "left"], function(n, t) {
                    r.css(t, function(t, i) {
                        var f = parseInt(i, 10)
                          , u = n ? r.to.left : r.to.top;
                        return i === "auto" ? u + "px" : f + u + "px"
                    })
                }));
                n.effects.removeWrapper(r);
                i()
            }
        })
    }
    ;
    /*!
 * jQuery UI Effects Scale 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 */
    gt = n.effects.effect.scale = function(t, i) {
        var u = n(this)
          , r = n.extend(!0, {}, t)
          , f = n.effects.setMode(u, t.mode || "effect")
          , s = parseInt(t.percent, 10) || (parseInt(t.percent, 10) === 0 ? 0 : f === "hide" ? 0 : 100)
          , h = t.direction || "both"
          , c = t.origin
          , e = {
            height: u.height(),
            width: u.width(),
            outerHeight: u.outerHeight(),
            outerWidth: u.outerWidth()
        }
          , o = {
            y: h !== "horizontal" ? s / 100 : 1,
            x: h !== "vertical" ? s / 100 : 1
        };
        r.effect = "size";
        r.queue = !1;
        r.complete = i;
        f !== "effect" && (r.origin = c || ["middle", "center"],
        r.restore = !0);
        r.from = t.from || (f === "show" ? {
            height: 0,
            width: 0,
            outerHeight: 0,
            outerWidth: 0
        } : e);
        r.to = {
            height: e.height * o.y,
            width: e.width * o.x,
            outerHeight: e.outerHeight * o.y,
            outerWidth: e.outerWidth * o.x
        };
        r.fade && (f === "show" && (r.from.opacity = 0,
        r.to.opacity = 1),
        f === "hide" && (r.from.opacity = 1,
        r.to.opacity = 0));
        u.effect(r)
    }
    ;
    /*!
 * jQuery UI Effects Puff 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/puff-effect/
 */
    ni = n.effects.effect.puff = function(t, i) {
        var r = n(this)
          , e = n.effects.setMode(r, t.mode || "hide")
          , o = e === "hide"
          , s = parseInt(t.percent, 10) || 150
          , f = s / 100
          , u = {
            height: r.height(),
            width: r.width(),
            outerHeight: r.outerHeight(),
            outerWidth: r.outerWidth()
        };
        n.extend(t, {
            effect: "scale",
            queue: !1,
            fade: !0,
            mode: e,
            complete: i,
            percent: o ? s : 100,
            from: o ? u : {
                height: u.height * f,
                width: u.width * f,
                outerHeight: u.outerHeight * f,
                outerWidth: u.outerWidth * f
            }
        });
        r.effect(t)
    }
    ;
    /*!
 * jQuery UI Effects Pulsate 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 */
    ti = n.effects.effect.pulsate = function(t, i) {
        var r = n(this), e = n.effects.setMode(r, t.mode || "show"), h = e === "show", a = e === "hide", v = h || e === "hide", o = (t.times || 5) * 2 + (v ? 1 : 0), c = t.duration / o, u = 0, f = r.queue(), l = f.length, s;
        for ((h || !r.is(":visible")) && (r.css("opacity", 0).show(),
        u = 1),
        s = 1; s < o; s++)
            r.animate({
                opacity: u
            }, c, t.easing),
            u = 1 - u;
        r.animate({
            opacity: u
        }, c, t.easing);
        r.queue(function() {
            a && r.hide();
            i()
        });
        l > 1 && f.splice.apply(f, [1, 0].concat(f.splice(l, o + 1)));
        r.dequeue()
    }
    ;
    /*!
 * jQuery UI Effects Shake 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 */
    ii = n.effects.effect.shake = function(t, i) {
        var r = n(this), v = ["position", "top", "bottom", "left", "right", "height", "width"], k = n.effects.setMode(r, t.mode || "effect"), f = t.direction || "left", o = t.distance || 20, y = t.times || 3, p = y * 2 + 1, u = Math.round(t.duration / p), s = f === "up" || f === "down" ? "top" : "left", h = f === "up" || f === "left", c = {}, l = {}, w = {}, a, e = r.queue(), b = e.length;
        for (n.effects.save(r, v),
        r.show(),
        n.effects.createWrapper(r),
        c[s] = (h ? "-=" : "+=") + o,
        l[s] = (h ? "+=" : "-=") + o * 2,
        w[s] = (h ? "-=" : "+=") + o * 2,
        r.animate(c, u, t.easing),
        a = 1; a < y; a++)
            r.animate(l, u, t.easing).animate(w, u, t.easing);
        r.animate(l, u, t.easing).animate(c, u / 2, t.easing).queue(function() {
            k === "hide" && r.hide();
            n.effects.restore(r, v);
            n.effects.removeWrapper(r);
            i()
        });
        b > 1 && e.splice.apply(e, [1, 0].concat(e.splice(b, p + 1)));
        r.dequeue()
    }
    ;
    /*!
 * jQuery UI Effects Slide 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 */
    ri = n.effects.effect.slide = function(t, i) {
        var r = n(this), s = ["position", "top", "bottom", "left", "right", "width", "height"], h = n.effects.setMode(r, t.mode || "show"), c = h === "show", f = t.direction || "left", e = f === "up" || f === "down" ? "top" : "left", o = f === "up" || f === "left", u, l = {};
        n.effects.save(r, s);
        r.show();
        u = t.distance || r[e === "top" ? "outerHeight" : "outerWidth"](!0);
        n.effects.createWrapper(r).css({
            overflow: "hidden"
        });
        c && r.css(e, o ? isNaN(u) ? "-" + u : -u : u);
        l[e] = (c ? o ? "+=" : "-=" : o ? "-=" : "+=") + u;
        r.animate(l, {
            queue: !1,
            duration: t.duration,
            easing: t.easing,
            complete: function() {
                h === "hide" && r.hide();
                n.effects.restore(r, s);
                n.effects.removeWrapper(r);
                i()
            }
        })
    }
    ;
    /*!
 * jQuery UI Effects Transfer 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 */
    ui = n.effects.effect.transfer = function(t, i) {
        var u = n(this)
          , r = n(t.to)
          , f = r.css("position") === "fixed"
          , e = n("body")
          , o = f ? e.scrollTop() : 0
          , s = f ? e.scrollLeft() : 0
          , h = r.offset()
          , l = {
            top: h.top - o,
            left: h.left - s,
            height: r.innerHeight(),
            width: r.innerWidth()
        }
          , c = u.offset()
          , a = n("<div class='ui-effects-transfer'><\/div>").appendTo(document.body).addClass(t.className).css({
            top: c.top - o,
            left: c.left - s,
            height: u.innerHeight(),
            width: u.innerWidth(),
            position: f ? "fixed" : "absolute"
        }).animate(l, t.duration, t.easing, function() {
            a.remove();
            i()
        })
    }
    ;
    /*!
 * jQuery UI Progressbar 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */
    fi = n.widget("ui.progressbar", {
        version: "1.11.2",
        options: {
            max: 100,
            value: 0,
            change: null,
            complete: null
        },
        min: 0,
        _create: function() {
            this.oldValue = this.options.value = this._constrainedValue();
            this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                role: "progressbar",
                "aria-valuemin": this.min
            });
            this.valueDiv = n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element);
            this._refreshValue()
        },
        _destroy: function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
            this.valueDiv.remove()
        },
        value: function(n) {
            if (n === undefined)
                return this.options.value;
            this.options.value = this._constrainedValue(n);
            this._refreshValue()
        },
        _constrainedValue: function(n) {
            return n === undefined && (n = this.options.value),
            this.indeterminate = n === !1,
            typeof n != "number" && (n = 0),
            this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, n))
        },
        _setOptions: function(n) {
            var t = n.value;
            delete n.value;
            this._super(n);
            this.options.value = this._constrainedValue(t);
            this._refreshValue()
        },
        _setOption: function(n, t) {
            n === "max" && (t = Math.max(this.min, t));
            n === "disabled" && this.element.toggleClass("ui-state-disabled", !!t).attr("aria-disabled", t);
            this._super(n, t)
        },
        _percentage: function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
        },
        _refreshValue: function() {
            var t = this.options.value
              , i = this._percentage();
            this.valueDiv.toggle(this.indeterminate || t > this.min).toggleClass("ui-corner-right", t === this.options.max).width(i.toFixed(0) + "%");
            this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate);
            this.indeterminate ? (this.element.removeAttr("aria-valuenow"),
            this.overlayDiv || (this.overlayDiv = n("<div class='ui-progressbar-overlay'><\/div>").appendTo(this.valueDiv))) : (this.element.attr({
                "aria-valuemax": this.options.max,
                "aria-valuenow": t
            }),
            this.overlayDiv && (this.overlayDiv.remove(),
            this.overlayDiv = null));
            this.oldValue !== t && (this.oldValue = t,
            this._trigger("change"));
            t === this.options.max && this._trigger("complete")
        }
    });
    /*!
 * jQuery UI Selectable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */
    ei = n.widget("ui.selectable", n.ui.mouse, {
        version: "1.11.2",
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch",
            selected: null,
            selecting: null,
            start: null,
            stop: null,
            unselected: null,
            unselecting: null
        },
        _create: function() {
            var t, i = this;
            this.element.addClass("ui-selectable");
            this.dragged = !1;
            this.refresh = function() {
                t = n(i.options.filter, i.element[0]);
                t.addClass("ui-selectee");
                t.each(function() {
                    var t = n(this)
                      , i = t.offset();
                    n.data(this, "selectable-item", {
                        element: this,
                        $element: t,
                        left: i.left,
                        top: i.top,
                        right: i.left + t.outerWidth(),
                        bottom: i.top + t.outerHeight(),
                        startselected: !1,
                        selected: t.hasClass("ui-selected"),
                        selecting: t.hasClass("ui-selecting"),
                        unselecting: t.hasClass("ui-unselecting")
                    })
                })
            }
            ;
            this.refresh();
            this.selectees = t.addClass("ui-selectee");
            this._mouseInit();
            this.helper = n("<div class='ui-selectable-helper'><\/div>")
        },
        _destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item");
            this.element.removeClass("ui-selectable ui-selectable-disabled");
            this._mouseDestroy()
        },
        _mouseStart: function(t) {
            var i = this
              , r = this.options;
            (this.opos = [t.pageX, t.pageY],
            this.options.disabled) || (this.selectees = n(r.filter, this.element[0]),
            this._trigger("start", t),
            n(r.appendTo).append(this.helper),
            this.helper.css({
                left: t.pageX,
                top: t.pageY,
                width: 0,
                height: 0
            }),
            r.autoRefresh && this.refresh(),
            this.selectees.filter(".ui-selected").each(function() {
                var r = n.data(this, "selectable-item");
                r.startselected = !0;
                t.metaKey || t.ctrlKey || (r.$element.removeClass("ui-selected"),
                r.selected = !1,
                r.$element.addClass("ui-unselecting"),
                r.unselecting = !0,
                i._trigger("unselecting", t, {
                    unselecting: r.element
                }))
            }),
            n(t.target).parents().addBack().each(function() {
                var u, r = n.data(this, "selectable-item");
                if (r)
                    return u = !t.metaKey && !t.ctrlKey || !r.$element.hasClass("ui-selected"),
                    r.$element.removeClass(u ? "ui-unselecting" : "ui-selected").addClass(u ? "ui-selecting" : "ui-unselecting"),
                    r.unselecting = !u,
                    r.selecting = u,
                    r.selected = u,
                    u ? i._trigger("selecting", t, {
                        selecting: r.element
                    }) : i._trigger("unselecting", t, {
                        unselecting: r.element
                    }),
                    !1
            }))
        },
        _mouseDrag: function(t) {
            if (this.dragged = !0,
            !this.options.disabled) {
                var e, o = this, s = this.options, i = this.opos[0], r = this.opos[1], u = t.pageX, f = t.pageY;
                return i > u && (e = u,
                u = i,
                i = e),
                r > f && (e = f,
                f = r,
                r = e),
                this.helper.css({
                    left: i,
                    top: r,
                    width: u - i,
                    height: f - r
                }),
                this.selectees.each(function() {
                    var e = n.data(this, "selectable-item")
                      , h = !1;
                    e && e.element !== o.element[0] && (s.tolerance === "touch" ? h = !(e.left > u || e.right < i || e.top > f || e.bottom < r) : s.tolerance === "fit" && (h = e.left > i && e.right < u && e.top > r && e.bottom < f),
                    h ? (e.selected && (e.$element.removeClass("ui-selected"),
                    e.selected = !1),
                    e.unselecting && (e.$element.removeClass("ui-unselecting"),
                    e.unselecting = !1),
                    e.selecting || (e.$element.addClass("ui-selecting"),
                    e.selecting = !0,
                    o._trigger("selecting", t, {
                        selecting: e.element
                    }))) : (e.selecting && ((t.metaKey || t.ctrlKey) && e.startselected ? (e.$element.removeClass("ui-selecting"),
                    e.selecting = !1,
                    e.$element.addClass("ui-selected"),
                    e.selected = !0) : (e.$element.removeClass("ui-selecting"),
                    e.selecting = !1,
                    e.startselected && (e.$element.addClass("ui-unselecting"),
                    e.unselecting = !0),
                    o._trigger("unselecting", t, {
                        unselecting: e.element
                    }))),
                    e.selected && (t.metaKey || t.ctrlKey || e.startselected || (e.$element.removeClass("ui-selected"),
                    e.selected = !1,
                    e.$element.addClass("ui-unselecting"),
                    e.unselecting = !0,
                    o._trigger("unselecting", t, {
                        unselecting: e.element
                    })))))
                }),
                !1
            }
        },
        _mouseStop: function(t) {
            var i = this;
            return this.dragged = !1,
            n(".ui-unselecting", this.element[0]).each(function() {
                var r = n.data(this, "selectable-item");
                r.$element.removeClass("ui-unselecting");
                r.unselecting = !1;
                r.startselected = !1;
                i._trigger("unselected", t, {
                    unselected: r.element
                })
            }),
            n(".ui-selecting", this.element[0]).each(function() {
                var r = n.data(this, "selectable-item");
                r.$element.removeClass("ui-selecting").addClass("ui-selected");
                r.selecting = !1;
                r.selected = !0;
                r.startselected = !0;
                i._trigger("selected", t, {
                    selected: r.element
                })
            }),
            this._trigger("stop", t),
            this.helper.remove(),
            !1
        }
    });
    /*!
 * jQuery UI Selectmenu 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */
    oi = n.widget("ui.selectmenu", {
        version: "1.11.2",
        defaultElement: "<select>",
        options: {
            appendTo: null,
            disabled: null,
            icons: {
                button: "ui-icon-triangle-1-s"
            },
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            width: null,
            change: null,
            close: null,
            focus: null,
            open: null,
            select: null
        },
        _create: function() {
            var n = this.element.uniqueId().attr("id");
            this.ids = {
                element: n,
                button: n + "-button",
                menu: n + "-menu"
            };
            this._drawButton();
            this._drawMenu();
            this.options.disabled && this.disable()
        },
        _drawButton: function() {
            var t = this
              , i = this.element.attr("tabindex");
            this.label = n("label[for='" + this.ids.element + "']").attr("for", this.ids.button);
            this._on(this.label, {
                click: function(n) {
                    this.button.focus();
                    n.preventDefault()
                }
            });
            this.element.hide();
            this.button = n("<span>", {
                "class": "ui-selectmenu-button ui-widget ui-state-default ui-corner-all",
                tabindex: i || this.options.disabled ? -1 : 0,
                id: this.ids.button,
                role: "combobox",
                "aria-expanded": "false",
                "aria-autocomplete": "list",
                "aria-owns": this.ids.menu,
                "aria-haspopup": "true"
            }).insertAfter(this.element);
            n("<span>", {
                "class": "ui-icon " + this.options.icons.button
            }).prependTo(this.button);
            this.buttonText = n("<span>", {
                "class": "ui-selectmenu-text"
            }).appendTo(this.button);
            this._setText(this.buttonText, this.element.find("option:selected").text());
            this._resizeButton();
            this._on(this.button, this._buttonEvents);
            this.button.one("focusin", function() {
                t.menuItems || t._refreshMenu()
            });
            this._hoverable(this.button);
            this._focusable(this.button)
        },
        _drawMenu: function() {
            var t = this;
            this.menu = n("<ul>", {
                "aria-hidden": "true",
                "aria-labelledby": this.ids.button,
                id: this.ids.menu
            });
            this.menuWrap = n("<div>", {
                "class": "ui-selectmenu-menu ui-front"
            }).append(this.menu).appendTo(this._appendTo());
            this.menuInstance = this.menu.menu({
                role: "listbox",
                select: function(n, i) {
                    n.preventDefault();
                    t._setSelection();
                    t._select(i.item.data("ui-selectmenu-item"), n)
                },
                focus: function(n, i) {
                    var r = i.item.data("ui-selectmenu-item");
                    t.focusIndex != null && r.index !== t.focusIndex && (t._trigger("focus", n, {
                        item: r
                    }),
                    t.isOpen || t._select(r, n));
                    t.focusIndex = r.index;
                    t.button.attr("aria-activedescendant", t.menuItems.eq(r.index).attr("id"))
                }
            }).menu("instance");
            this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");
            this.menuInstance._off(this.menu, "mouseleave");
            this.menuInstance._closeOnDocumentClick = function() {
                return !1
            }
            ;
            this.menuInstance._isDivider = function() {
                return !1
            }
        },
        refresh: function() {
            this._refreshMenu();
            this._setText(this.buttonText, this._getSelectedItem().text());
            this.options.width || this._resizeButton()
        },
        _refreshMenu: function() {
            this.menu.empty();
            var n, t = this.element.find("option");
            t.length && (this._parseOptions(t),
            this._renderMenu(this.menu, this.items),
            this.menuInstance.refresh(),
            this.menuItems = this.menu.find("li").not(".ui-selectmenu-optgroup"),
            n = this._getSelectedItem(),
            this.menuInstance.focus(null, n),
            this._setAria(n.data("ui-selectmenu-item")),
            this._setOption("disabled", this.element.prop("disabled")))
        },
        open: function(n) {
            this.options.disabled || (this.menuItems ? (this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),
            this.menuInstance.focus(null, this._getSelectedItem())) : this._refreshMenu(),
            this.isOpen = !0,
            this._toggleAttr(),
            this._resizeMenu(),
            this._position(),
            this._on(this.document, this._documentClick),
            this._trigger("open", n))
        },
        _position: function() {
            this.menuWrap.position(n.extend({
                of: this.button
            }, this.options.position))
        },
        close: function(n) {
            this.isOpen && (this.isOpen = !1,
            this._toggleAttr(),
            this.range = null,
            this._off(this.document),
            this._trigger("close", n))
        },
        widget: function() {
            return this.button
        },
        menuWidget: function() {
            return this.menu
        },
        _renderMenu: function(t, i) {
            var u = this
              , r = "";
            n.each(i, function(i, f) {
                f.optgroup !== r && (n("<li>", {
                    "class": "ui-selectmenu-optgroup ui-menu-divider" + (f.element.parent("optgroup").prop("disabled") ? " ui-state-disabled" : ""),
                    text: f.optgroup
                }).appendTo(t),
                r = f.optgroup);
                u._renderItemData(t, f)
            })
        },
        _renderItemData: function(n, t) {
            return this._renderItem(n, t).data("ui-selectmenu-item", t)
        },
        _renderItem: function(t, i) {
            var r = n("<li>");
            return i.disabled && r.addClass("ui-state-disabled"),
            this._setText(r, i.label),
            r.appendTo(t)
        },
        _setText: function(n, t) {
            t ? n.text(t) : n.html("&#160;")
        },
        _move: function(n, t) {
            var i, r, u = ".ui-menu-item";
            this.isOpen ? i = this.menuItems.eq(this.focusIndex) : (i = this.menuItems.eq(this.element[0].selectedIndex),
            u += ":not(.ui-state-disabled)");
            r = n === "first" || n === "last" ? i[n === "first" ? "prevAll" : "nextAll"](u).eq(-1) : i[n + "All"](u).eq(0);
            r.length && this.menuInstance.focus(t, r)
        },
        _getSelectedItem: function() {
            return this.menuItems.eq(this.element[0].selectedIndex)
        },
        _toggle: function(n) {
            this[this.isOpen ? "close" : "open"](n)
        },
        _setSelection: function() {
            var n;
            this.range && (window.getSelection ? (n = window.getSelection(),
            n.removeAllRanges(),
            n.addRange(this.range)) : this.range.select(),
            this.button.focus())
        },
        _documentClick: {
            mousedown: function(t) {
                this.isOpen && (n(t.target).closest(".ui-selectmenu-menu, #" + this.ids.button).length || this.close(t))
            }
        },
        _buttonEvents: {
            mousedown: function() {
                var n;
                window.getSelection ? (n = window.getSelection(),
                n.rangeCount && (this.range = n.getRangeAt(0))) : this.range = document.selection.createRange()
            },
            click: function(n) {
                this._setSelection();
                this._toggle(n)
            },
            keydown: function(t) {
                var i = !0;
                switch (t.keyCode) {
                case n.ui.keyCode.TAB:
                case n.ui.keyCode.ESCAPE:
                    this.close(t);
                    i = !1;
                    break;
                case n.ui.keyCode.ENTER:
                    this.isOpen && this._selectFocusedItem(t);
                    break;
                case n.ui.keyCode.UP:
                    t.altKey ? this._toggle(t) : this._move("prev", t);
                    break;
                case n.ui.keyCode.DOWN:
                    t.altKey ? this._toggle(t) : this._move("next", t);
                    break;
                case n.ui.keyCode.SPACE:
                    this.isOpen ? this._selectFocusedItem(t) : this._toggle(t);
                    break;
                case n.ui.keyCode.LEFT:
                    this._move("prev", t);
                    break;
                case n.ui.keyCode.RIGHT:
                    this._move("next", t);
                    break;
                case n.ui.keyCode.HOME:
                case n.ui.keyCode.PAGE_UP:
                    this._move("first", t);
                    break;
                case n.ui.keyCode.END:
                case n.ui.keyCode.PAGE_DOWN:
                    this._move("last", t);
                    break;
                default:
                    this.menu.trigger(t);
                    i = !1
                }
                i && t.preventDefault()
            }
        },
        _selectFocusedItem: function(n) {
            var t = this.menuItems.eq(this.focusIndex);
            t.hasClass("ui-state-disabled") || this._select(t.data("ui-selectmenu-item"), n)
        },
        _select: function(n, t) {
            var i = this.element[0].selectedIndex;
            this.element[0].selectedIndex = n.index;
            this._setText(this.buttonText, n.label);
            this._setAria(n);
            this._trigger("select", t, {
                item: n
            });
            n.index !== i && this._trigger("change", t, {
                item: n
            });
            this.close(t)
        },
        _setAria: function(n) {
            var t = this.menuItems.eq(n.index).attr("id");
            this.button.attr({
                "aria-labelledby": t,
                "aria-activedescendant": t
            });
            this.menu.attr("aria-activedescendant", t)
        },
        _setOption: function(n, t) {
            n === "icons" && this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button);
            this._super(n, t);
            n === "appendTo" && this.menuWrap.appendTo(this._appendTo());
            n === "disabled" && (this.menuInstance.option("disabled", t),
            this.button.toggleClass("ui-state-disabled", t).attr("aria-disabled", t),
            this.element.prop("disabled", t),
            t ? (this.button.attr("tabindex", -1),
            this.close()) : this.button.attr("tabindex", 0));
            n === "width" && this._resizeButton()
        },
        _appendTo: function() {
            var t = this.options.appendTo;
            return t && (t = t.jquery || t.nodeType ? n(t) : this.document.find(t).eq(0)),
            t && t[0] || (t = this.element.closest(".ui-front")),
            t.length || (t = this.document[0].body),
            t
        },
        _toggleAttr: function() {
            this.button.toggleClass("ui-corner-top", this.isOpen).toggleClass("ui-corner-all", !this.isOpen).attr("aria-expanded", this.isOpen);
            this.menuWrap.toggleClass("ui-selectmenu-open", this.isOpen);
            this.menu.attr("aria-hidden", !this.isOpen)
        },
        _resizeButton: function() {
            var n = this.options.width;
            n || (n = this.element.show().outerWidth(),
            this.element.hide());
            this.button.outerWidth(n)
        },
        _resizeMenu: function() {
            this.menu.outerWidth(Math.max(this.button.outerWidth(), this.menu.width("").outerWidth() + 1))
        },
        _getCreateOptions: function() {
            return {
                disabled: this.element.prop("disabled")
            }
        },
        _parseOptions: function(t) {
            var i = [];
            t.each(function(t, r) {
                var u = n(r)
                  , f = u.parent("optgroup");
                i.push({
                    element: u,
                    index: t,
                    value: u.attr("value"),
                    label: u.text(),
                    optgroup: f.attr("label") || "",
                    disabled: f.prop("disabled") || u.prop("disabled")
                })
            });
            this.items = i
        },
        _destroy: function() {
            this.menuWrap.remove();
            this.button.remove();
            this.element.show();
            this.element.removeUniqueId();
            this.label.attr("for", this.ids.element)
        }
    });
    /*!
 * jQuery UI Slider 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */
    si = n.widget("ui.slider", n.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null,
            change: null,
            slide: null,
            start: null,
            stop: null
        },
        numPages: 5,
        _create: function() {
            this._keySliding = !1;
            this._mouseSliding = !1;
            this._animateOff = !0;
            this._handleIndex = null;
            this._detectOrientation();
            this._mouseInit();
            this._calculateNewMax();
            this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all");
            this._refresh();
            this._setOption("disabled", this.options.disabled);
            this._animateOff = !1
        },
        _refresh: function() {
            this._createRange();
            this._createHandles();
            this._setupEvents();
            this._refreshValue()
        },
        _createHandles: function() {
            var r, i, u = this.options, t = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), f = [];
            for (i = u.values && u.values.length || 1,
            t.length > i && (t.slice(i).remove(),
            t = t.slice(0, i)),
            r = t.length; r < i; r++)
                f.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'><\/span>");
            this.handles = t.add(n(f.join("")).appendTo(this.element));
            this.handle = this.handles.eq(0);
            this.handles.each(function(t) {
                n(this).data("ui-slider-handle-index", t)
            })
        },
        _createRange: function() {
            var t = this.options
              , i = "";
            t.range ? (t.range === !0 && (t.values ? t.values.length && t.values.length !== 2 ? t.values = [t.values[0], t.values[0]] : n.isArray(t.values) && (t.values = t.values.slice(0)) : t.values = [this._valueMin(), this._valueMin()]),
            this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({
                left: "",
                bottom: ""
            }) : (this.range = n("<div><\/div>").appendTo(this.element),
            i = "ui-slider-range ui-widget-header ui-corner-all"),
            this.range.addClass(i + (t.range === "min" || t.range === "max" ? " ui-slider-range-" + t.range : ""))) : (this.range && this.range.remove(),
            this.range = null)
        },
        _setupEvents: function() {
            this._off(this.handles);
            this._on(this.handles, this._handleEvents);
            this._hoverable(this.handles);
            this._focusable(this.handles)
        },
        _destroy: function() {
            this.handles.remove();
            this.range && this.range.remove();
            this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");
            this._mouseDestroy()
        },
        _mouseCapture: function(t) {
            var s, f, r, i, u, h, e, c, o = this, l = this.options;
            return l.disabled ? !1 : (this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            },
            this.elementOffset = this.element.offset(),
            s = {
                x: t.pageX,
                y: t.pageY
            },
            f = this._normValueFromMouse(s),
            r = this._valueMax() - this._valueMin() + 1,
            this.handles.each(function(t) {
                var e = Math.abs(f - o.values(t));
                (r > e || r === e && (t === o._lastChangedValue || o.values(t) === l.min)) && (r = e,
                i = n(this),
                u = t)
            }),
            h = this._start(t, u),
            h === !1) ? !1 : (this._mouseSliding = !0,
            this._handleIndex = u,
            i.addClass("ui-state-active").focus(),
            e = i.offset(),
            c = !n(t.target).parents().addBack().is(".ui-slider-handle"),
            this._clickOffset = c ? {
                left: 0,
                top: 0
            } : {
                left: t.pageX - e.left - i.width() / 2,
                top: t.pageY - e.top - i.height() / 2 - (parseInt(i.css("borderTopWidth"), 10) || 0) - (parseInt(i.css("borderBottomWidth"), 10) || 0) + (parseInt(i.css("marginTop"), 10) || 0)
            },
            this.handles.hasClass("ui-state-hover") || this._slide(t, u, f),
            this._animateOff = !0,
            !0)
        },
        _mouseStart: function() {
            return !0
        },
        _mouseDrag: function(n) {
            var t = {
                x: n.pageX,
                y: n.pageY
            }
              , i = this._normValueFromMouse(t);
            return this._slide(n, this._handleIndex, i),
            !1
        },
        _mouseStop: function(n) {
            return this.handles.removeClass("ui-state-active"),
            this._mouseSliding = !1,
            this._stop(n, this._handleIndex),
            this._change(n, this._handleIndex),
            this._handleIndex = null,
            this._clickOffset = null,
            this._animateOff = !1,
            !1
        },
        _detectOrientation: function() {
            this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal"
        },
        _normValueFromMouse: function(n) {
            var i, r, t, u, f;
            return this.orientation === "horizontal" ? (i = this.elementSize.width,
            r = n.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (i = this.elementSize.height,
            r = n.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)),
            t = r / i,
            t > 1 && (t = 1),
            t < 0 && (t = 0),
            this.orientation === "vertical" && (t = 1 - t),
            u = this._valueMax() - this._valueMin(),
            f = this._valueMin() + t * u,
            this._trimAlignValue(f)
        },
        _start: function(n, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            return this.options.values && this.options.values.length && (i.value = this.values(t),
            i.values = this.values()),
            this._trigger("start", n, i)
        },
        _slide: function(n, t, i) {
            var r, f, u;
            this.options.values && this.options.values.length ? (r = this.values(t ? 0 : 1),
            this.options.values.length === 2 && this.options.range === !0 && (t === 0 && i > r || t === 1 && i < r) && (i = r),
            i !== this.values(t) && (f = this.values(),
            f[t] = i,
            u = this._trigger("slide", n, {
                handle: this.handles[t],
                value: i,
                values: f
            }),
            r = this.values(t ? 0 : 1),
            u !== !1 && this.values(t, i))) : i !== this.value() && (u = this._trigger("slide", n, {
                handle: this.handles[t],
                value: i
            }),
            u !== !1 && this.value(i))
        },
        _stop: function(n, t) {
            var i = {
                handle: this.handles[t],
                value: this.value()
            };
            this.options.values && this.options.values.length && (i.value = this.values(t),
            i.values = this.values());
            this._trigger("stop", n, i)
        },
        _change: function(n, t) {
            if (!this._keySliding && !this._mouseSliding) {
                var i = {
                    handle: this.handles[t],
                    value: this.value()
                };
                this.options.values && this.options.values.length && (i.value = this.values(t),
                i.values = this.values());
                this._lastChangedValue = t;
                this._trigger("change", n, i)
            }
        },
        value: function(n) {
            if (arguments.length) {
                this.options.value = this._trimAlignValue(n);
                this._refreshValue();
                this._change(null, 0);
                return
            }
            return this._value()
        },
        values: function(t, i) {
            var u, f, r;
            if (arguments.length > 1) {
                this.options.values[t] = this._trimAlignValue(i);
                this._refreshValue();
                this._change(null, t);
                return
            }
            if (arguments.length)
                if (n.isArray(arguments[0])) {
                    for (u = this.options.values,
                    f = arguments[0],
                    r = 0; r < u.length; r += 1)
                        u[r] = this._trimAlignValue(f[r]),
                        this._change(null, r);
                    this._refreshValue()
                } else
                    return this.options.values && this.options.values.length ? this._values(t) : this.value();
            else
                return this._values()
        },
        _setOption: function(t, i) {
            var r, u = 0;
            t === "range" && this.options.range === !0 && (i === "min" ? (this.options.value = this._values(0),
            this.options.values = null) : i === "max" && (this.options.value = this._values(this.options.values.length - 1),
            this.options.values = null));
            n.isArray(this.options.values) && (u = this.options.values.length);
            t === "disabled" && this.element.toggleClass("ui-state-disabled", !!i);
            this._super(t, i);
            switch (t) {
            case "orientation":
                this._detectOrientation();
                this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation);
                this._refreshValue();
                this.handles.css(i === "horizontal" ? "bottom" : "left", "");
                break;
            case "value":
                this._animateOff = !0;
                this._refreshValue();
                this._change(null, 0);
                this._animateOff = !1;
                break;
            case "values":
                for (this._animateOff = !0,
                this._refreshValue(),
                r = 0; r < u; r += 1)
                    this._change(null, r);
                this._animateOff = !1;
                break;
            case "step":
            case "min":
            case "max":
                this._animateOff = !0;
                this._calculateNewMax();
                this._refreshValue();
                this._animateOff = !1;
                break;
            case "range":
                this._animateOff = !0;
                this._refresh();
                this._animateOff = !1
            }
        },
        _value: function() {
            var n = this.options.value;
            return this._trimAlignValue(n)
        },
        _values: function(n) {
            var r, t, i;
            if (arguments.length)
                return r = this.options.values[n],
                this._trimAlignValue(r);
            if (this.options.values && this.options.values.length) {
                for (t = this.options.values.slice(),
                i = 0; i < t.length; i += 1)
                    t[i] = this._trimAlignValue(t[i]);
                return t
            }
            return []
        },
        _trimAlignValue: function(n) {
            if (n <= this._valueMin())
                return this._valueMin();
            if (n >= this._valueMax())
                return this._valueMax();
            var t = this.options.step > 0 ? this.options.step : 1
              , i = (n - this._valueMin()) % t
              , r = n - i;
            return Math.abs(i) * 2 >= t && (r += i > 0 ? t : -t),
            parseFloat(r.toFixed(5))
        },
        _calculateNewMax: function() {
            var n = (this.options.max - this._valueMin()) % this.options.step;
            this.max = this.options.max - n
        },
        _valueMin: function() {
            return this.options.min
        },
        _valueMax: function() {
            return this.max
        },
        _refreshValue: function() {
            var s, t, c, f, h, e = this.options.range, i = this.options, r = this, u = this._animateOff ? !1 : i.animate, o = {};
            this.options.values && this.options.values.length ? this.handles.each(function(f) {
                t = (r.values(f) - r._valueMin()) / (r._valueMax() - r._valueMin()) * 100;
                o[r.orientation === "horizontal" ? "left" : "bottom"] = t + "%";
                n(this).stop(1, 1)[u ? "animate" : "css"](o, i.animate);
                r.options.range === !0 && (r.orientation === "horizontal" ? (f === 0 && r.range.stop(1, 1)[u ? "animate" : "css"]({
                    left: t + "%"
                }, i.animate),
                f === 1 && r.range[u ? "animate" : "css"]({
                    width: t - s + "%"
                }, {
                    queue: !1,
                    duration: i.animate
                })) : (f === 0 && r.range.stop(1, 1)[u ? "animate" : "css"]({
                    bottom: t + "%"
                }, i.animate),
                f === 1 && r.range[u ? "animate" : "css"]({
                    height: t - s + "%"
                }, {
                    queue: !1,
                    duration: i.animate
                })));
                s = t
            }) : (c = this.value(),
            f = this._valueMin(),
            h = this._valueMax(),
            t = h !== f ? (c - f) / (h - f) * 100 : 0,
            o[this.orientation === "horizontal" ? "left" : "bottom"] = t + "%",
            this.handle.stop(1, 1)[u ? "animate" : "css"](o, i.animate),
            e === "min" && this.orientation === "horizontal" && this.range.stop(1, 1)[u ? "animate" : "css"]({
                width: t + "%"
            }, i.animate),
            e === "max" && this.orientation === "horizontal" && this.range[u ? "animate" : "css"]({
                width: 100 - t + "%"
            }, {
                queue: !1,
                duration: i.animate
            }),
            e === "min" && this.orientation === "vertical" && this.range.stop(1, 1)[u ? "animate" : "css"]({
                height: t + "%"
            }, i.animate),
            e === "max" && this.orientation === "vertical" && this.range[u ? "animate" : "css"]({
                height: 100 - t + "%"
            }, {
                queue: !1,
                duration: i.animate
            }))
        },
        _handleEvents: {
            keydown: function(t) {
                var e, r, i, u, f = n(t.target).data("ui-slider-handle-index");
                switch (t.keyCode) {
                case n.ui.keyCode.HOME:
                case n.ui.keyCode.END:
                case n.ui.keyCode.PAGE_UP:
                case n.ui.keyCode.PAGE_DOWN:
                case n.ui.keyCode.UP:
                case n.ui.keyCode.RIGHT:
                case n.ui.keyCode.DOWN:
                case n.ui.keyCode.LEFT:
                    if (t.preventDefault(),
                    !this._keySliding && (this._keySliding = !0,
                    n(t.target).addClass("ui-state-active"),
                    e = this._start(t, f),
                    e === !1))
                        return
                }
                u = this.options.step;
                r = i = this.options.values && this.options.values.length ? this.values(f) : this.value();
                switch (t.keyCode) {
                case n.ui.keyCode.HOME:
                    i = this._valueMin();
                    break;
                case n.ui.keyCode.END:
                    i = this._valueMax();
                    break;
                case n.ui.keyCode.PAGE_UP:
                    i = this._trimAlignValue(r + (this._valueMax() - this._valueMin()) / this.numPages);
                    break;
                case n.ui.keyCode.PAGE_DOWN:
                    i = this._trimAlignValue(r - (this._valueMax() - this._valueMin()) / this.numPages);
                    break;
                case n.ui.keyCode.UP:
                case n.ui.keyCode.RIGHT:
                    if (r === this._valueMax())
                        return;
                    i = this._trimAlignValue(r + u);
                    break;
                case n.ui.keyCode.DOWN:
                case n.ui.keyCode.LEFT:
                    if (r === this._valueMin())
                        return;
                    i = this._trimAlignValue(r - u)
                }
                this._slide(t, f, i)
            },
            keyup: function(t) {
                var i = n(t.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1,
                this._stop(t, i),
                this._change(t, i),
                n(t.target).removeClass("ui-state-active"))
            }
        }
    });
    /*!
 * jQuery UI Sortable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */
    hi = n.widget("ui.sortable", n.ui.mouse, {
        version: "1.11.2",
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1e3,
            activate: null,
            beforeStop: null,
            change: null,
            deactivate: null,
            out: null,
            over: null,
            receive: null,
            remove: null,
            sort: null,
            start: null,
            stop: null,
            update: null
        },
        _isOverAxis: function(n, t, i) {
            return n >= t && n < t + i
        },
        _isFloating: function(n) {
            return /left|right/.test(n.css("float")) || /inline|table-cell/.test(n.css("display"))
        },
        _create: function() {
            var n = this.options;
            this.containerCache = {};
            this.element.addClass("ui-sortable");
            this.refresh();
            this.floating = this.items.length ? n.axis === "x" || this._isFloating(this.items[0].item) : !1;
            this.offset = this.element.offset();
            this._mouseInit();
            this._setHandleClassName();
            this.ready = !0
        },
        _setOption: function(n, t) {
            this._super(n, t);
            n === "handle" && this._setHandleClassName()
        },
        _setHandleClassName: function() {
            this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");
            n.each(this.items, function() {
                (this.instance.options.handle ? this.item.find(this.instance.options.handle) : this.item).addClass("ui-sortable-handle")
            })
        },
        _destroy: function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");
            this._mouseDestroy();
            for (var n = this.items.length - 1; n >= 0; n--)
                this.items[n].item.removeData(this.widgetName + "-item");
            return this
        },
        _mouseCapture: function(t, i) {
            var r = null
              , f = !1
              , u = this;
            return this.reverting ? !1 : this.options.disabled || this.options.type === "static" ? !1 : (this._refreshItems(t),
            n(t.target).parents().each(function() {
                if (n.data(this, u.widgetName + "-item") === u)
                    return r = n(this),
                    !1
            }),
            n.data(t.target, u.widgetName + "-item") === u && (r = n(t.target)),
            !r) ? !1 : this.options.handle && !i && (n(this.options.handle, r).find("*").addBack().each(function() {
                this === t.target && (f = !0)
            }),
            !f) ? !1 : (this.currentItem = r,
            this._removeCurrentsFromItems(),
            !0)
        },
        _mouseStart: function(t, i, r) {
            var f, e, u = this.options;
            if (this.currentContainer = this,
            this.refreshPositions(),
            this.helper = this._createHelper(t),
            this._cacheHelperProportions(),
            this._cacheMargins(),
            this.scrollParent = this.helper.scrollParent(),
            this.offset = this.currentItem.offset(),
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            },
            n.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }),
            this.helper.css("position", "absolute"),
            this.cssPosition = this.helper.css("position"),
            this.originalPosition = this._generatePosition(t),
            this.originalPageX = t.pageX,
            this.originalPageY = t.pageY,
            u.cursorAt && this._adjustOffsetFromHelper(u.cursorAt),
            this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            },
            this.helper[0] !== this.currentItem[0] && this.currentItem.hide(),
            this._createPlaceholder(),
            u.containment && this._setContainment(),
            u.cursor && u.cursor !== "auto" && (e = this.document.find("body"),
            this.storedCursor = e.css("cursor"),
            e.css("cursor", u.cursor),
            this.storedStylesheet = n("<style>*{ cursor: " + u.cursor + " !important; }<\/style>").appendTo(e)),
            u.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")),
            this.helper.css("opacity", u.opacity)),
            u.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")),
            this.helper.css("zIndex", u.zIndex)),
            this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML" && (this.overflowOffset = this.scrollParent.offset()),
            this._trigger("start", t, this._uiHash()),
            this._preserveHelperProportions || this._cacheHelperProportions(),
            !r)
                for (f = this.containers.length - 1; f >= 0; f--)
                    this.containers[f]._trigger("activate", t, this._uiHash(this));
            return n.ui.ddmanager && (n.ui.ddmanager.current = this),
            n.ui.ddmanager && !u.dropBehaviour && n.ui.ddmanager.prepareOffsets(this, t),
            this.dragging = !0,
            this.helper.addClass("ui-sortable-helper"),
            this._mouseDrag(t),
            !0
        },
        _mouseDrag: function(t) {
            var e, u, f, o, i = this.options, r = !1;
            for (this.position = this._generatePosition(t),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs),
            this.options.scroll && (this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML" ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < i.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + i.scrollSpeed : t.pageY - this.overflowOffset.top < i.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - i.scrollSpeed),
            this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < i.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + i.scrollSpeed : t.pageX - this.overflowOffset.left < i.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - i.scrollSpeed)) : (t.pageY - n(document).scrollTop() < i.scrollSensitivity ? r = n(document).scrollTop(n(document).scrollTop() - i.scrollSpeed) : n(window).height() - (t.pageY - n(document).scrollTop()) < i.scrollSensitivity && (r = n(document).scrollTop(n(document).scrollTop() + i.scrollSpeed)),
            t.pageX - n(document).scrollLeft() < i.scrollSensitivity ? r = n(document).scrollLeft(n(document).scrollLeft() - i.scrollSpeed) : n(window).width() - (t.pageX - n(document).scrollLeft()) < i.scrollSensitivity && (r = n(document).scrollLeft(n(document).scrollLeft() + i.scrollSpeed))),
            r !== !1 && n.ui.ddmanager && !i.dropBehaviour && n.ui.ddmanager.prepareOffsets(this, t)),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.options.axis && this.options.axis === "y" || (this.helper[0].style.left = this.position.left + "px"),
            this.options.axis && this.options.axis === "x" || (this.helper[0].style.top = this.position.top + "px"),
            e = this.items.length - 1; e >= 0; e--)
                if ((u = this.items[e],
                f = u.item[0],
                o = this._intersectsWithPointer(u),
                o) && u.instance === this.currentContainer && f !== this.currentItem[0] && this.placeholder[o === 1 ? "next" : "prev"]()[0] !== f && !n.contains(this.placeholder[0], f) && (this.options.type === "semi-dynamic" ? !n.contains(this.element[0], f) : !0)) {
                    if (this.direction = o === 1 ? "down" : "up",
                    this.options.tolerance === "pointer" || this._intersectsWithSides(u))
                        this._rearrange(t, u);
                    else
                        break;
                    this._trigger("change", t, this._uiHash());
                    break
                }
            return this._contactContainers(t),
            n.ui.ddmanager && n.ui.ddmanager.drag(this, t),
            this._trigger("sort", t, this._uiHash()),
            this.lastPositionAbs = this.positionAbs,
            !1
        },
        _mouseStop: function(t, i) {
            if (t) {
                if (n.ui.ddmanager && !this.options.dropBehaviour && n.ui.ddmanager.drop(this, t),
                this.options.revert) {
                    var e = this
                      , f = this.placeholder.offset()
                      , r = this.options.axis
                      , u = {};
                    r && r !== "x" || (u.left = f.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft));
                    r && r !== "y" || (u.top = f.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop));
                    this.reverting = !0;
                    n(this.helper).animate(u, parseInt(this.options.revert, 10) || 500, function() {
                        e._clear(t)
                    })
                } else
                    this._clear(t, i);
                return !1
            }
        },
        cancel: function() {
            if (this.dragging) {
                this._mouseUp({
                    target: null
                });
                this.options.helper === "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var t = this.containers.length - 1; t >= 0; t--)
                    this.containers[t]._trigger("deactivate", null, this._uiHash(this)),
                    this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)),
                    this.containers[t].containerCache.over = 0)
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            this.options.helper !== "original" && this.helper && this.helper[0].parentNode && this.helper.remove(),
            n.extend(this, {
                helper: null,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null
            }),
            this.domPosition.prev ? n(this.domPosition.prev).after(this.currentItem) : n(this.domPosition.parent).prepend(this.currentItem)),
            this
        },
        serialize: function(t) {
            var r = this._getItemsAsjQuery(t && t.connected)
              , i = [];
            return t = t || {},
            n(r).each(function() {
                var r = (n(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[\-=_](.+)/);
                r && i.push((t.key || r[1] + "[]") + "=" + (t.key && t.expression ? r[1] : r[2]))
            }),
            !i.length && t.key && i.push(t.key + "="),
            i.join("&")
        },
        toArray: function(t) {
            var r = this._getItemsAsjQuery(t && t.connected)
              , i = [];
            return t = t || {},
            r.each(function() {
                i.push(n(t.item || this).attr(t.attribute || "id") || "")
            }),
            i
        },
        _intersectsWith: function(n) {
            var t = this.positionAbs.left
              , h = t + this.helperProportions.width
              , i = this.positionAbs.top
              , c = i + this.helperProportions.height
              , r = n.left
              , f = r + n.width
              , u = n.top
              , e = u + n.height
              , o = this.offset.click.top
              , s = this.offset.click.left
              , l = this.options.axis === "x" || i + o > u && i + o < e
              , a = this.options.axis === "y" || t + s > r && t + s < f
              , v = l && a;
            return this.options.tolerance === "pointer" || this.options.forcePointerForContainers || this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > n[this.floating ? "width" : "height"] ? v : r < t + this.helperProportions.width / 2 && h - this.helperProportions.width / 2 < f && u < i + this.helperProportions.height / 2 && c - this.helperProportions.height / 2 < e
        },
        _intersectsWithPointer: function(n) {
            var r = this.options.axis === "x" || this._isOverAxis(this.positionAbs.top + this.offset.click.top, n.top, n.height)
              , u = this.options.axis === "y" || this._isOverAxis(this.positionAbs.left + this.offset.click.left, n.left, n.width)
              , f = r && u
              , t = this._getDragVerticalDirection()
              , i = this._getDragHorizontalDirection();
            return f ? this.floating ? i && i === "right" || t === "down" ? 2 : 1 : t && (t === "down" ? 2 : 1) : !1
        },
        _intersectsWithSides: function(n) {
            var r = this._isOverAxis(this.positionAbs.top + this.offset.click.top, n.top + n.height / 2, n.height)
              , u = this._isOverAxis(this.positionAbs.left + this.offset.click.left, n.left + n.width / 2, n.width)
              , t = this._getDragVerticalDirection()
              , i = this._getDragHorizontalDirection();
            return this.floating && i ? i === "right" && u || i === "left" && !u : t && (t === "down" && r || t === "up" && !r)
        },
        _getDragVerticalDirection: function() {
            var n = this.positionAbs.top - this.lastPositionAbs.top;
            return n !== 0 && (n > 0 ? "down" : "up")
        },
        _getDragHorizontalDirection: function() {
            var n = this.positionAbs.left - this.lastPositionAbs.left;
            return this.items[0].item.css("float") == "left" ? n != 0 && (n > 0 ? "right" : "left") : n != 0 && (n > 0 ? "left" : "right")
        },
        refresh: function(n) {
            return this._refreshItems(n),
            this._setHandleClassName(),
            this.refreshPositions(),
            this
        },
        _connectWith: function() {
            var n = this.options;
            return n.connectWith.constructor === String ? [n.connectWith] : n.connectWith
        },
        _getItemsAsjQuery: function(t) {
            function h() {
                s.push(this)
            }
            var r, u, e, i, s = [], f = [], o = this._connectWith();
            if (o && t)
                for (r = o.length - 1; r >= 0; r--)
                    for (e = n(o[r]),
                    u = e.length - 1; u >= 0; u--)
                        i = n.data(e[u], this.widgetFullName),
                        i && i !== this && !i.options.disabled && f.push([n.isFunction(i.options.items) ? i.options.items.call(i.element) : n(i.options.items, i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), i]);
            for (f.push([n.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                options: this.options,
                item: this.currentItem
            }) : n(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]),
            r = f.length - 1; r >= 0; r--)
                f[r][0].each(h);
            return n(s)
        },
        _removeCurrentsFromItems: function() {
            var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = n.grep(this.items, function(n) {
                for (var i = 0; i < t.length; i++)
                    if (t[i] === n.item[0])
                        return !1;
                return !0
            })
        },
        _refreshItems: function(t) {
            this.items = [];
            this.containers = [this];
            var r, u, e, i, o, s, h, l, a = this.items, f = [[n.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {
                item: this.currentItem
            }) : n(this.options.items, this.element), this]], c = this._connectWith();
            if (c && this.ready)
                for (r = c.length - 1; r >= 0; r--)
                    for (e = n(c[r]),
                    u = e.length - 1; u >= 0; u--)
                        i = n.data(e[u], this.widgetFullName),
                        i && i !== this && !i.options.disabled && (f.push([n.isFunction(i.options.items) ? i.options.items.call(i.element[0], t, {
                            item: this.currentItem
                        }) : n(i.options.items, i.element), i]),
                        this.containers.push(i));
            for (r = f.length - 1; r >= 0; r--)
                for (o = f[r][1],
                s = f[r][0],
                u = 0,
                l = s.length; u < l; u++)
                    h = n(s[u]),
                    h.data(this.widgetName + "-item", o),
                    a.push({
                        item: h,
                        instance: o,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    })
        },
        refreshPositions: function(t) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            for (var r, f, u, i = this.items.length - 1; i >= 0; i--)
                (r = this.items[i],
                r.instance !== this.currentContainer && this.currentContainer && r.item[0] !== this.currentItem[0]) || (f = this.options.toleranceElement ? n(this.options.toleranceElement, r.item) : r.item,
                t || (r.width = f.outerWidth(),
                r.height = f.outerHeight()),
                u = f.offset(),
                r.left = u.left,
                r.top = u.top);
            if (this.options.custom && this.options.custom.refreshContainers)
                this.options.custom.refreshContainers.call(this);
            else
                for (i = this.containers.length - 1; i >= 0; i--)
                    u = this.containers[i].element.offset(),
                    this.containers[i].containerCache.left = u.left,
                    this.containers[i].containerCache.top = u.top,
                    this.containers[i].containerCache.width = this.containers[i].element.outerWidth(),
                    this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
            return this
        },
        _createPlaceholder: function(t) {
            t = t || this;
            var r, i = t.options;
            i.placeholder && i.placeholder.constructor !== String || (r = i.placeholder,
            i.placeholder = {
                element: function() {
                    var u = t.currentItem[0].nodeName.toLowerCase()
                      , i = n("<" + u + ">", t.document[0]).addClass(r || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return u === "tr" ? t.currentItem.children().each(function() {
                        n("<td>&#160;<\/td>", t.document[0]).attr("colspan", n(this).attr("colspan") || 1).appendTo(i)
                    }) : u === "img" && i.attr("src", t.currentItem.attr("src")),
                    r || i.css("visibility", "hidden"),
                    i
                },
                update: function(n, u) {
                    (!r || i.forcePlaceholderSize) && (u.height() || u.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)),
                    u.width() || u.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10)))
                }
            });
            t.placeholder = n(i.placeholder.element.call(t.element, t.currentItem));
            t.currentItem.after(t.placeholder);
            i.placeholder.update(t, t.placeholder)
        },
        _contactContainers: function(t) {
            for (var u, c, f, a, v, o, l, s, h, e = null, i = null, r = this.containers.length - 1; r >= 0; r--)
                if (!n.contains(this.currentItem[0], this.containers[r].element[0]))
                    if (this._intersectsWith(this.containers[r].containerCache)) {
                        if (e && n.contains(this.containers[r].element[0], e.element[0]))
                            continue;
                        e = this.containers[r];
                        i = r
                    } else
                        this.containers[r].containerCache.over && (this.containers[r]._trigger("out", t, this._uiHash(this)),
                        this.containers[r].containerCache.over = 0);
            if (e)
                if (this.containers.length === 1)
                    this.containers[i].containerCache.over || (this.containers[i]._trigger("over", t, this._uiHash(this)),
                    this.containers[i].containerCache.over = 1);
                else {
                    for (c = 1e4,
                    f = null,
                    s = e.floating || this._isFloating(this.currentItem),
                    a = s ? "left" : "top",
                    v = s ? "width" : "height",
                    h = s ? "clientX" : "clientY",
                    u = this.items.length - 1; u >= 0; u--)
                        n.contains(this.containers[i].element[0], this.items[u].item[0]) && this.items[u].item[0] !== this.currentItem[0] && (o = this.items[u].item.offset()[a],
                        l = !1,
                        t[h] - o > this.items[u][v] / 2 && (l = !0),
                        Math.abs(t[h] - o) < c && (c = Math.abs(t[h] - o),
                        f = this.items[u],
                        this.direction = l ? "up" : "down"));
                    if (!f && !this.options.dropOnEmpty)
                        return;
                    if (this.currentContainer === this.containers[i]) {
                        this.currentContainer.containerCache.over || (this.containers[i]._trigger("over", t, this._uiHash()),
                        this.currentContainer.containerCache.over = 1);
                        return
                    }
                    f ? this._rearrange(t, f, null, !0) : this._rearrange(t, null, this.containers[i].element, !0);
                    this._trigger("change", t, this._uiHash());
                    this.containers[i]._trigger("change", t, this._uiHash(this));
                    this.currentContainer = this.containers[i];
                    this.options.placeholder.update(this.currentContainer, this.placeholder);
                    this.containers[i]._trigger("over", t, this._uiHash(this));
                    this.containers[i].containerCache.over = 1
                }
        },
        _createHelper: function(t) {
            var r = this.options
              , i = n.isFunction(r.helper) ? n(r.helper.apply(this.element[0], [t, this.currentItem])) : r.helper === "clone" ? this.currentItem.clone() : this.currentItem;
            return i.parents("body").length || n(r.appendTo !== "parent" ? r.appendTo : this.currentItem[0].parentNode)[0].appendChild(i[0]),
            i[0] === this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }),
            (!i[0].style.width || r.forceHelperSize) && i.width(this.currentItem.width()),
            (!i[0].style.height || r.forceHelperSize) && i.height(this.currentItem.height()),
            i
        },
        _adjustOffsetFromHelper: function(t) {
            typeof t == "string" && (t = t.split(" "));
            n.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            });
            "left"in t && (this.offset.click.left = t.left + this.margins.left);
            "right"in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left);
            "top"in t && (this.offset.click.top = t.top + this.margins.top);
            "bottom"in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var t = this.offsetParent.offset();
            return this.cssPosition === "absolute" && this.scrollParent[0] !== document && n.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(),
            t.top += this.scrollParent.scrollTop()),
            (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && n.ui.ie) && (t = {
                top: 0,
                left: 0
            }),
            {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if (this.cssPosition === "relative") {
                var n = this.currentItem.position();
                return {
                    top: n.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: n.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var t, r, u, i = this.options;
            i.containment === "parent" && (i.containment = this.helper[0].parentNode);
            (i.containment === "document" || i.containment === "window") && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, n(i.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (n(i.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]);
            /^(document|window|parent)$/.test(i.containment) || (t = n(i.containment)[0],
            r = n(i.containment).offset(),
            u = n(t).css("overflow") !== "hidden",
            this.containment = [r.left + (parseInt(n(t).css("borderLeftWidth"), 10) || 0) + (parseInt(n(t).css("paddingLeft"), 10) || 0) - this.margins.left, r.top + (parseInt(n(t).css("borderTopWidth"), 10) || 0) + (parseInt(n(t).css("paddingTop"), 10) || 0) - this.margins.top, r.left + (u ? Math.max(t.scrollWidth, t.offsetWidth) : t.offsetWidth) - (parseInt(n(t).css("borderLeftWidth"), 10) || 0) - (parseInt(n(t).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, r.top + (u ? Math.max(t.scrollHeight, t.offsetHeight) : t.offsetHeight) - (parseInt(n(t).css("borderTopWidth"), 10) || 0) - (parseInt(n(t).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
        },
        _convertPositionTo: function(t, i) {
            i || (i = this.position);
            var r = t === "absolute" ? 1 : -1
              , u = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && n.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent
              , f = /(html|body)/i.test(u[0].tagName);
            return {
                top: i.top + this.offset.relative.top * r + this.offset.parent.top * r - (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : f ? 0 : u.scrollTop()) * r,
                left: i.left + this.offset.relative.left * r + this.offset.parent.left * r - (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : f ? 0 : u.scrollLeft()) * r
            }
        },
        _generatePosition: function(t) {
            var r, u, i = this.options, f = t.pageX, e = t.pageY, o = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && n.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, s = /(html|body)/i.test(o[0].tagName);
            return this.cssPosition !== "relative" || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()),
            this.originalPosition && (this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (f = this.containment[0] + this.offset.click.left),
            t.pageY - this.offset.click.top < this.containment[1] && (e = this.containment[1] + this.offset.click.top),
            t.pageX - this.offset.click.left > this.containment[2] && (f = this.containment[2] + this.offset.click.left),
            t.pageY - this.offset.click.top > this.containment[3] && (e = this.containment[3] + this.offset.click.top)),
            i.grid && (r = this.originalPageY + Math.round((e - this.originalPageY) / i.grid[1]) * i.grid[1],
            e = this.containment ? r - this.offset.click.top >= this.containment[1] && r - this.offset.click.top <= this.containment[3] ? r : r - this.offset.click.top >= this.containment[1] ? r - i.grid[1] : r + i.grid[1] : r,
            u = this.originalPageX + Math.round((f - this.originalPageX) / i.grid[0]) * i.grid[0],
            f = this.containment ? u - this.offset.click.left >= this.containment[0] && u - this.offset.click.left <= this.containment[2] ? u : u - this.offset.click.left >= this.containment[0] ? u - i.grid[0] : u + i.grid[0] : u)),
            {
                top: e - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : s ? 0 : o.scrollTop()),
                left: f - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : s ? 0 : o.scrollLeft())
            }
        },
        _rearrange: function(n, t, i, r) {
            i ? i[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], this.direction === "down" ? t.item[0] : t.item[0].nextSibling);
            this.counter = this.counter ? ++this.counter : 1;
            var u = this.counter;
            this._delay(function() {
                u === this.counter && this.refreshPositions(!r)
            })
        },
        _clear: function(n, t) {
            function u(n, t, i) {
                return function(r) {
                    i._trigger(n, r, t._uiHash(t))
                }
            }
            this.reverting = !1;
            var i, r = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem),
            this._noFinalSort = null,
            this.helper[0] === this.currentItem[0]) {
                for (i in this._storedCSS)
                    (this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") && (this._storedCSS[i] = "");
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
            } else
                this.currentItem.show();
            for (this.fromOutside && !t && r.push(function(n) {
                this._trigger("receive", n, this._uiHash(this.fromOutside))
            }),
            (this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !t && r.push(function(n) {
                this._trigger("update", n, this._uiHash())
            }),
            this !== this.currentContainer && (t || (r.push(function(n) {
                this._trigger("remove", n, this._uiHash())
            }),
            r.push(function(n) {
                return function(t) {
                    n._trigger("receive", t, this._uiHash(this))
                }
            }
            .call(this, this.currentContainer)),
            r.push(function(n) {
                return function(t) {
                    n._trigger("update", t, this._uiHash(this))
                }
            }
            .call(this, this.currentContainer)))),
            i = this.containers.length - 1; i >= 0; i--)
                t || r.push(u("deactivate", this, this.containers[i])),
                this.containers[i].containerCache.over && (r.push(u("out", this, this.containers[i])),
                this.containers[i].containerCache.over = 0);
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor),
            this.storedStylesheet.remove()),
            this._storedOpacity && this.helper.css("opacity", this._storedOpacity),
            this._storedZIndex && this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex),
            this.dragging = !1,
            t || this._trigger("beforeStop", n, this._uiHash()),
            this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            this.cancelHelperRemoval || (this.helper[0] !== this.currentItem[0] && this.helper.remove(),
            this.helper = null),
            !t) {
                for (i = 0; i < r.length; i++)
                    r[i].call(this, n);
                this._trigger("stop", n, this._uiHash())
            }
            return this.fromOutside = !1,
            !this.cancelHelperRemoval
        },
        _trigger: function() {
            n.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        },
        _uiHash: function(t) {
            var i = t || this;
            return {
                helper: i.helper,
                placeholder: i.placeholder || n([]),
                position: i.position,
                originalPosition: i.originalPosition,
                offset: i.positionAbs,
                item: i.currentItem,
                sender: t ? t.element : null
            }
        }
    });
    /*!
 * jQuery UI Spinner 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */
    ci = n.widget("ui.spinner", {
        version: "1.11.2",
        defaultElement: "<input>",
        widgetEventPrefix: "spin",
        options: {
            culture: null,
            icons: {
                down: "ui-icon-triangle-1-s",
                up: "ui-icon-triangle-1-n"
            },
            incremental: !0,
            max: null,
            min: null,
            numberFormat: null,
            page: 10,
            step: 1,
            change: null,
            spin: null,
            start: null,
            stop: null
        },
        _create: function() {
            this._setOption("max", this.options.max);
            this._setOption("min", this.options.min);
            this._setOption("step", this.options.step);
            this.value() !== "" && this._value(this.element.val(), !0);
            this._draw();
            this._on(this._events);
            this._refresh();
            this._on(this.window, {
                beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }
            })
        },
        _getCreateOptions: function() {
            var t = {}
              , i = this.element;
            return n.each(["min", "max", "step"], function(n, r) {
                var u = i.attr(r);
                u !== undefined && u.length && (t[r] = u)
            }),
            t
        },
        _events: {
            keydown: function(n) {
                this._start(n) && this._keydown(n) && n.preventDefault()
            },
            keyup: "_stop",
            focus: function() {
                this.previous = this.element.val()
            },
            blur: function(n) {
                if (this.cancelBlur) {
                    delete this.cancelBlur;
                    return
                }
                this._stop();
                this._refresh();
                this.previous !== this.element.val() && this._trigger("change", n)
            },
            mousewheel: function(n, t) {
                if (t) {
                    if (!this.spinning && !this._start(n))
                        return !1;
                    this._spin((t > 0 ? 1 : -1) * this.options.step, n);
                    clearTimeout(this.mousewheelTimer);
                    this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(n)
                    }, 100);
                    n.preventDefault()
                }
            },
            "mousedown .ui-spinner-button": function(t) {
                function r() {
                    var n = this.element[0] === this.document[0].activeElement;
                    n || (this.element.focus(),
                    this.previous = i,
                    this._delay(function() {
                        this.previous = i
                    }))
                }
                var i;
                (i = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(),
                t.preventDefault(),
                r.call(this),
                this.cancelBlur = !0,
                this._delay(function() {
                    delete this.cancelBlur;
                    r.call(this)
                }),
                this._start(t) !== !1) && this._repeat(null, n(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
            },
            "mouseup .ui-spinner-button": "_stop",
            "mouseenter .ui-spinner-button": function(t) {
                if (n(t.currentTarget).hasClass("ui-state-active")) {
                    if (this._start(t) === !1)
                        return !1;
                    this._repeat(null, n(t.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, t)
                }
            },
            "mouseleave .ui-spinner-button": "_stop"
        },
        _draw: function() {
            var n = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton");
            this.buttons = n.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all");
            this.buttons.height() > Math.ceil(n.height() * .5) && n.height() > 0 && n.height(n.height());
            this.options.disabled && this.disable()
        },
        _keydown: function(t) {
            var r = this.options
              , i = n.ui.keyCode;
            switch (t.keyCode) {
            case i.UP:
                return this._repeat(null, 1, t),
                !0;
            case i.DOWN:
                return this._repeat(null, -1, t),
                !0;
            case i.PAGE_UP:
                return this._repeat(null, r.page, t),
                !0;
            case i.PAGE_DOWN:
                return this._repeat(null, -r.page, t),
                !0
            }
            return !1
        },
        _uiSpinnerHtml: function() {
            return "<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'><\/span>"
        },
        _buttonHtml: function() {
            return "<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;<\/span><\/a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;<\/span><\/a>"
        },
        _start: function(n) {
            return !this.spinning && this._trigger("start", n) === !1 ? !1 : (this.counter || (this.counter = 1),
            this.spinning = !0,
            !0)
        },
        _repeat: function(n, t, i) {
            n = n || 500;
            clearTimeout(this.timer);
            this.timer = this._delay(function() {
                this._repeat(40, t, i)
            }, n);
            this._spin(t * this.options.step, i)
        },
        _spin: function(n, t) {
            var i = this.value() || 0;
            this.counter || (this.counter = 1);
            i = this._adjustValue(i + n * this._increment(this.counter));
            this.spinning && this._trigger("spin", t, {
                value: i
            }) === !1 || (this._value(i),
            this.counter++)
        },
        _increment: function(t) {
            var i = this.options.incremental;
            return i ? n.isFunction(i) ? i(t) : Math.floor(t * t * t / 5e4 - t * t / 500 + 17 * t / 200 + 1) : 1
        },
        _precision: function() {
            var n = this._precisionOf(this.options.step);
            return this.options.min !== null && (n = Math.max(n, this._precisionOf(this.options.min))),
            n
        },
        _precisionOf: function(n) {
            var t = n.toString()
              , i = t.indexOf(".");
            return i === -1 ? 0 : t.length - i - 1
        },
        _adjustValue: function(n) {
            var r, i, t = this.options;
            return (r = t.min !== null ? t.min : 0,
            i = n - r,
            i = Math.round(i / t.step) * t.step,
            n = r + i,
            n = parseFloat(n.toFixed(this._precision())),
            t.max !== null && n > t.max) ? t.max : t.min !== null && n < t.min ? t.min : n
        },
        _stop: function(n) {
            this.spinning && (clearTimeout(this.timer),
            clearTimeout(this.mousewheelTimer),
            this.counter = 0,
            this.spinning = !1,
            this._trigger("stop", n))
        },
        _setOption: function(n, t) {
            if (n === "culture" || n === "numberFormat") {
                var i = this._parse(this.element.val());
                this.options[n] = t;
                this.element.val(this._format(i));
                return
            }
            (n === "max" || n === "min" || n === "step") && typeof t == "string" && (t = this._parse(t));
            n === "icons" && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),
            this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down));
            this._super(n, t);
            n === "disabled" && (this.widget().toggleClass("ui-state-disabled", !!t),
            this.element.prop("disabled", !!t),
            this.buttons.button(t ? "disable" : "enable"))
        },
        _setOptions: t(function(n) {
            this._super(n)
        }),
        _parse: function(n) {
            return typeof n == "string" && n !== "" && (n = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(n, 10, this.options.culture) : +n),
            n === "" || isNaN(n) ? null : n
        },
        _format: function(n) {
            return n === "" ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(n, this.options.numberFormat, this.options.culture) : n
        },
        _refresh: function() {
            this.element.attr({
                "aria-valuemin": this.options.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._parse(this.element.val())
            })
        },
        isValid: function() {
            var n = this.value();
            return n === null ? !1 : n === this._adjustValue(n)
        },
        _value: function(n, t) {
            var i;
            n !== "" && (i = this._parse(n),
            i !== null && (t || (i = this._adjustValue(i)),
            n = this._format(i)));
            this.element.val(n);
            this._refresh()
        },
        _destroy: function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
            this.uiSpinner.replaceWith(this.element)
        },
        stepUp: t(function(n) {
            this._stepUp(n)
        }),
        _stepUp: function(n) {
            this._start() && (this._spin((n || 1) * this.options.step),
            this._stop())
        },
        stepDown: t(function(n) {
            this._stepDown(n)
        }),
        _stepDown: function(n) {
            this._start() && (this._spin((n || 1) * -this.options.step),
            this._stop())
        },
        pageUp: t(function(n) {
            this._stepUp((n || 1) * this.options.page)
        }),
        pageDown: t(function(n) {
            this._stepDown((n || 1) * this.options.page)
        }),
        value: function(n) {
            if (!arguments.length)
                return this._parse(this.element.val());
            t(this._value).call(this, n)
        },
        widget: function() {
            return this.uiSpinner
        }
    });
    /*!
 * jQuery UI Tabs 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */
    li = n.widget("ui.tabs", {
        version: "1.11.2",
        delay: 300,
        options: {
            active: null,
            collapsible: !1,
            event: "click",
            heightStyle: "content",
            hide: null,
            show: null,
            activate: null,
            beforeActivate: null,
            beforeLoad: null,
            load: null
        },
        _isLocal: function() {
            var n = /#.*$/;
            return function(t) {
                var i, r;
                t = t.cloneNode(!1);
                i = t.href.replace(n, "");
                r = location.href.replace(n, "");
                try {
                    i = decodeURIComponent(i)
                } catch (u) {}
                try {
                    r = decodeURIComponent(r)
                } catch (u) {}
                return t.hash.length > 1 && i === r
            }
        }(),
        _create: function() {
            var i = this
              , t = this.options;
            this.running = !1;
            this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", t.collapsible);
            this._processTabs();
            t.active = this._initialActive();
            n.isArray(t.disabled) && (t.disabled = n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"), function(n) {
                return i.tabs.index(n)
            }))).sort());
            this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(t.active) : n();
            this._refresh();
            this.active.length && this.load(t.active)
        },
        _initialActive: function() {
            var t = this.options.active
              , i = this.options.collapsible
              , r = location.hash.substring(1);
            return t === null && (r && this.tabs.each(function(i, u) {
                if (n(u).attr("aria-controls") === r)
                    return t = i,
                    !1
            }),
            t === null && (t = this.tabs.index(this.tabs.filter(".ui-tabs-active"))),
            (t === null || t === -1) && (t = this.tabs.length ? 0 : !1)),
            t !== !1 && (t = this.tabs.index(this.tabs.eq(t)),
            t === -1 && (t = i ? !1 : 0)),
            !i && t === !1 && this.anchors.length && (t = 0),
            t
        },
        _getCreateEventData: function() {
            return {
                tab: this.active,
                panel: this.active.length ? this._getPanelForTab(this.active) : n()
            }
        },
        _tabKeydown: function(t) {
            var r = n(this.document[0].activeElement).closest("li")
              , i = this.tabs.index(r)
              , u = !0;
            if (!this._handlePageNav(t)) {
                switch (t.keyCode) {
                case n.ui.keyCode.RIGHT:
                case n.ui.keyCode.DOWN:
                    i++;
                    break;
                case n.ui.keyCode.UP:
                case n.ui.keyCode.LEFT:
                    u = !1;
                    i--;
                    break;
                case n.ui.keyCode.END:
                    i = this.anchors.length - 1;
                    break;
                case n.ui.keyCode.HOME:
                    i = 0;
                    break;
                case n.ui.keyCode.SPACE:
                    t.preventDefault();
                    clearTimeout(this.activating);
                    this._activate(i);
                    return;
                case n.ui.keyCode.ENTER:
                    t.preventDefault();
                    clearTimeout(this.activating);
                    this._activate(i === this.options.active ? !1 : i);
                    return;
                default:
                    return
                }
                t.preventDefault();
                clearTimeout(this.activating);
                i = this._focusNextTab(i, u);
                t.ctrlKey || (r.attr("aria-selected", "false"),
                this.tabs.eq(i).attr("aria-selected", "true"),
                this.activating = this._delay(function() {
                    this.option("active", i)
                }, this.delay))
            }
        },
        _panelKeydown: function(t) {
            this._handlePageNav(t) || t.ctrlKey && t.keyCode === n.ui.keyCode.UP && (t.preventDefault(),
            this.active.focus())
        },
        _handlePageNav: function(t) {
            return t.altKey && t.keyCode === n.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)),
            !0) : t.altKey && t.keyCode === n.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)),
            !0) : void 0
        },
        _findNextTab: function(t, i) {
            function u() {
                return t > r && (t = 0),
                t < 0 && (t = r),
                t
            }
            for (var r = this.tabs.length - 1; n.inArray(u(), this.options.disabled) !== -1; )
                t = i ? t + 1 : t - 1;
            return t
        },
        _focusNextTab: function(n, t) {
            return n = this._findNextTab(n, t),
            this.tabs.eq(n).focus(),
            n
        },
        _setOption: function(n, t) {
            if (n === "active") {
                this._activate(t);
                return
            }
            if (n === "disabled") {
                this._setupDisabled(t);
                return
            }
            this._super(n, t);
            n === "collapsible" && (this.element.toggleClass("ui-tabs-collapsible", t),
            t || this.options.active !== !1 || this._activate(0));
            n === "event" && this._setupEvents(t);
            n === "heightStyle" && this._setupHeightStyle(t)
        },
        _sanitizeSelector: function(n) {
            return n ? n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
        },
        refresh: function() {
            var t = this.options
              , i = this.tablist.children(":has(a[href])");
            t.disabled = n.map(i.filter(".ui-state-disabled"), function(n) {
                return i.index(n)
            });
            this._processTabs();
            t.active !== !1 && this.anchors.length ? this.active.length && !n.contains(this.tablist[0], this.active[0]) ? this.tabs.length === t.disabled.length ? (t.active = !1,
            this.active = n()) : this._activate(this._findNextTab(Math.max(0, t.active - 1), !1)) : t.active = this.tabs.index(this.active) : (t.active = !1,
            this.active = n());
            this._refresh()
        },
        _refresh: function() {
            this._setupDisabled(this.options.disabled);
            this._setupEvents(this.options.event);
            this._setupHeightStyle(this.options.heightStyle);
            this.tabs.not(this.active).attr({
                "aria-selected": "false",
                "aria-expanded": "false",
                tabIndex: -1
            });
            this.panels.not(this._getPanelForTab(this.active)).hide().attr({
                "aria-hidden": "true"
            });
            this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            }),
            this._getPanelForTab(this.active).show().attr({
                "aria-hidden": "false"
            })) : this.tabs.eq(0).attr("tabIndex", 0)
        },
        _processTabs: function() {
            var t = this
              , i = this.tabs
              , r = this.anchors
              , u = this.panels;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist").delegate("> li", "mousedown" + this.eventNamespace, function(t) {
                n(this).is(".ui-state-disabled") && t.preventDefault()
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                n(this).closest("li").is(".ui-state-disabled") && this.blur()
            });
            this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({
                role: "tab",
                tabIndex: -1
            });
            this.anchors = this.tabs.map(function() {
                return n("a", this)[0]
            }).addClass("ui-tabs-anchor").attr({
                role: "presentation",
                tabIndex: -1
            });
            this.panels = n();
            this.anchors.each(function(i, r) {
                var f, u, e, s = n(r).uniqueId().attr("id"), o = n(r).closest("li"), h = o.attr("aria-controls");
                t._isLocal(r) ? (f = r.hash,
                e = f.substring(1),
                u = t.element.find(t._sanitizeSelector(f))) : (e = o.attr("aria-controls") || n({}).uniqueId()[0].id,
                f = "#" + e,
                u = t.element.find(f),
                u.length || (u = t._createPanel(e),
                u.insertAfter(t.panels[i - 1] || t.tablist)),
                u.attr("aria-live", "polite"));
                u.length && (t.panels = t.panels.add(u));
                h && o.data("ui-tabs-aria-controls", h);
                o.attr({
                    "aria-controls": e,
                    "aria-labelledby": s
                });
                u.attr("aria-labelledby", s)
            });
            this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel");
            i && (this._off(i.not(this.tabs)),
            this._off(r.not(this.anchors)),
            this._off(u.not(this.panels)))
        },
        _getList: function() {
            return this.tablist || this.element.find("ol,ul").eq(0)
        },
        _createPanel: function(t) {
            return n("<div>").attr("id", t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0)
        },
        _setupDisabled: function(t) {
            n.isArray(t) && (t.length ? t.length === this.anchors.length && (t = !0) : t = !1);
            for (var i = 0, r; r = this.tabs[i]; i++)
                t === !0 || n.inArray(i, t) !== -1 ? n(r).addClass("ui-state-disabled").attr("aria-disabled", "true") : n(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");
            this.options.disabled = t
        },
        _setupEvents: function(t) {
            var i = {};
            t && n.each(t.split(" "), function(n, t) {
                i[t] = "_eventHandler"
            });
            this._off(this.anchors.add(this.tabs).add(this.panels));
            this._on(!0, this.anchors, {
                click: function(n) {
                    n.preventDefault()
                }
            });
            this._on(this.anchors, i);
            this._on(this.tabs, {
                keydown: "_tabKeydown"
            });
            this._on(this.panels, {
                keydown: "_panelKeydown"
            });
            this._focusable(this.tabs);
            this._hoverable(this.tabs)
        },
        _setupHeightStyle: function(t) {
            var i, r = this.element.parent();
            t === "fill" ? (i = r.height(),
            i -= this.element.outerHeight() - this.element.height(),
            this.element.siblings(":visible").each(function() {
                var t = n(this)
                  , r = t.css("position");
                r !== "absolute" && r !== "fixed" && (i -= t.outerHeight(!0))
            }),
            this.element.children().not(this.panels).each(function() {
                i -= n(this).outerHeight(!0)
            }),
            this.panels.each(function() {
                n(this).height(Math.max(0, i - n(this).innerHeight() + n(this).height()))
            }).css("overflow", "auto")) : t === "auto" && (i = 0,
            this.panels.each(function() {
                i = Math.max(i, n(this).height("").height())
            }).height(i))
        },
        _eventHandler: function(t) {
            var u = this.options
              , r = this.active
              , c = n(t.currentTarget)
              , i = c.closest("li")
              , f = i[0] === r[0]
              , e = f && u.collapsible
              , o = e ? n() : this._getPanelForTab(i)
              , s = r.length ? this._getPanelForTab(r) : n()
              , h = {
                oldTab: r,
                oldPanel: s,
                newTab: e ? n() : i,
                newPanel: o
            };
            (t.preventDefault(),
            i.hasClass("ui-state-disabled") || i.hasClass("ui-tabs-loading") || this.running || f && !u.collapsible || this._trigger("beforeActivate", t, h) === !1) || (u.active = e ? !1 : this.tabs.index(i),
            this.active = f ? n() : i,
            this.xhr && this.xhr.abort(),
            s.length || o.length || n.error("jQuery UI Tabs: Mismatching fragment identifier."),
            o.length && this.load(this.tabs.index(i), t),
            this._toggle(t, h))
        },
        _toggle: function(t, i) {
            function e() {
                u.running = !1;
                u._trigger("activate", t, i)
            }
            function o() {
                i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");
                r.length && u.options.show ? u._show(r, u.options.show, e) : (r.show(),
                e())
            }
            var u = this
              , r = i.newPanel
              , f = i.oldPanel;
            this.running = !0;
            f.length && this.options.hide ? this._hide(f, this.options.hide, function() {
                i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");
                o()
            }) : (i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
            f.hide(),
            o());
            f.attr("aria-hidden", "true");
            i.oldTab.attr({
                "aria-selected": "false",
                "aria-expanded": "false"
            });
            r.length && f.length ? i.oldTab.attr("tabIndex", -1) : r.length && this.tabs.filter(function() {
                return n(this).attr("tabIndex") === 0
            }).attr("tabIndex", -1);
            r.attr("aria-hidden", "false");
            i.newTab.attr({
                "aria-selected": "true",
                "aria-expanded": "true",
                tabIndex: 0
            })
        },
        _activate: function(t) {
            var r, i = this._findActive(t);
            i[0] !== this.active[0] && (i.length || (i = this.active),
            r = i.find(".ui-tabs-anchor")[0],
            this._eventHandler({
                target: r,
                currentTarget: r,
                preventDefault: n.noop
            }))
        },
        _findActive: function(t) {
            return t === !1 ? n() : this.tabs.eq(t)
        },
        _getIndex: function(n) {
            return typeof n == "string" && (n = this.anchors.index(this.anchors.filter("[href$='" + n + "']"))),
            n
        },
        _destroy: function() {
            this.xhr && this.xhr.abort();
            this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");
            this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");
            this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();
            this.tablist.unbind(this.eventNamespace);
            this.tabs.add(this.panels).each(function() {
                n.data(this, "ui-tabs-destroy") ? n(this).remove() : n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")
            });
            this.tabs.each(function() {
                var t = n(this)
                  , i = t.data("ui-tabs-aria-controls");
                i ? t.attr("aria-controls", i).removeData("ui-tabs-aria-controls") : t.removeAttr("aria-controls")
            });
            this.panels.show();
            this.options.heightStyle !== "content" && this.panels.css("height", "")
        },
        enable: function(t) {
            var i = this.options.disabled;
            i !== !1 && (t === undefined ? i = !1 : (t = this._getIndex(t),
            i = n.isArray(i) ? n.map(i, function(n) {
                return n !== t ? n : null
            }) : n.map(this.tabs, function(n, i) {
                return i !== t ? i : null
            })),
            this._setupDisabled(i))
        },
        disable: function(t) {
            var i = this.options.disabled;
            if (i !== !0) {
                if (t === undefined)
                    i = !0;
                else {
                    if (t = this._getIndex(t),
                    n.inArray(t, i) !== -1)
                        return;
                    i = n.isArray(i) ? n.merge([t], i).sort() : [t]
                }
                this._setupDisabled(i)
            }
        },
        load: function(t, i) {
            t = this._getIndex(t);
            var u = this
              , r = this.tabs.eq(t)
              , e = r.find(".ui-tabs-anchor")
              , f = this._getPanelForTab(r)
              , o = {
                tab: r,
                panel: f
            };
            this._isLocal(e[0]) || (this.xhr = n.ajax(this._ajaxSettings(e, i, o)),
            this.xhr && this.xhr.statusText !== "canceled" && (r.addClass("ui-tabs-loading"),
            f.attr("aria-busy", "true"),
            this.xhr.success(function(n) {
                setTimeout(function() {
                    f.html(n);
                    u._trigger("load", i, o)
                }, 1)
            }).complete(function(n, t) {
                setTimeout(function() {
                    t === "abort" && u.panels.stop(!1, !0);
                    r.removeClass("ui-tabs-loading");
                    f.removeAttr("aria-busy");
                    n === u.xhr && delete u.xhr
                }, 1)
            })))
        },
        _ajaxSettings: function(t, i, r) {
            var u = this;
            return {
                url: t.attr("href"),
                beforeSend: function(t, f) {
                    return u._trigger("beforeLoad", i, n.extend({
                        jqXHR: t,
                        ajaxSettings: f
                    }, r))
                }
            }
        },
        _getPanelForTab: function(t) {
            var i = n(t).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + i))
        }
    });
    /*!
 * jQuery UI Tooltip 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 */
    ai = n.widget("ui.tooltip", {
        version: "1.11.2",
        options: {
            content: function() {
                var t = n(this).attr("title") || "";
                return n("<a>").text(t).html()
            },
            hide: !0,
            items: "[title]:not([disabled])",
            position: {
                my: "left top+15",
                at: "left bottom",
                collision: "flipfit flip"
            },
            show: !0,
            tooltipClass: null,
            track: !1,
            close: null,
            open: null
        },
        _addDescribedBy: function(t, i) {
            var r = (t.attr("aria-describedby") || "").split(/\s+/);
            r.push(i);
            t.data("ui-tooltip-id", i).attr("aria-describedby", n.trim(r.join(" ")))
        },
        _removeDescribedBy: function(t) {
            var u = t.data("ui-tooltip-id")
              , i = (t.attr("aria-describedby") || "").split(/\s+/)
              , r = n.inArray(u, i);
            r !== -1 && i.splice(r, 1);
            t.removeData("ui-tooltip-id");
            i = n.trim(i.join(" "));
            i ? t.attr("aria-describedby", i) : t.removeAttr("aria-describedby")
        },
        _create: function() {
            this._on({
                mouseover: "open",
                focusin: "open"
            });
            this.tooltips = {};
            this.parents = {};
            this.options.disabled && this._disable();
            this.liveRegion = n("<div>").attr({
                role: "log",
                "aria-live": "assertive",
                "aria-relevant": "additions"
            }).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)
        },
        _setOption: function(t, i) {
            var r = this;
            if (t === "disabled") {
                this[i ? "_disable" : "_enable"]();
                this.options[t] = i;
                return
            }
            this._super(t, i);
            t === "content" && n.each(this.tooltips, function(n, t) {
                r._updateContent(t.element)
            })
        },
        _disable: function() {
            var t = this;
            n.each(this.tooltips, function(i, r) {
                var u = n.Event("blur");
                u.target = u.currentTarget = r.element[0];
                t.close(u, !0)
            });
            this.element.find(this.options.items).addBack().each(function() {
                var t = n(this);
                t.is("[title]") && t.data("ui-tooltip-title", t.attr("title")).removeAttr("title")
            })
        },
        _enable: function() {
            this.element.find(this.options.items).addBack().each(function() {
                var t = n(this);
                t.data("ui-tooltip-title") && t.attr("title", t.data("ui-tooltip-title"))
            })
        },
        open: function(t) {
            var r = this
              , i = n(t ? t.target : this.element).closest(this.options.items);
            i.length && !i.data("ui-tooltip-id") && (i.attr("title") && i.data("ui-tooltip-title", i.attr("title")),
            i.data("ui-tooltip-open", !0),
            t && t.type === "mouseover" && i.parents().each(function() {
                var t = n(this), i;
                t.data("ui-tooltip-open") && (i = n.Event("blur"),
                i.target = i.currentTarget = this,
                r.close(i, !0));
                t.attr("title") && (t.uniqueId(),
                r.parents[this.id] = {
                    element: this,
                    title: t.attr("title")
                },
                t.attr("title", ""))
            }),
            this._updateContent(i, t))
        },
        _updateContent: function(n, t) {
            var i, r = this.options.content, u = this, f = t ? t.type : null;
            if (typeof r == "string")
                return this._open(t, n, r);
            i = r.call(n[0], function(i) {
                n.data("ui-tooltip-open") && u._delay(function() {
                    t && (t.type = f);
                    this._open(t, n, i)
                })
            });
            i && this._open(t, n, i)
        },
        _open: function(t, i, r) {
            function s(n) {
                (h.of = n,
                u.is(":hidden")) || u.position(h)
            }
            var f, u, e, c, o, h = n.extend({}, this.options.position);
            if (r) {
                if (f = this._find(i),
                f) {
                    f.tooltip.find(".ui-tooltip-content").html(r);
                    return
                }
                i.is("[title]") && (t && t.type === "mouseover" ? i.attr("title", "") : i.removeAttr("title"));
                f = this._tooltip(i);
                u = f.tooltip;
                this._addDescribedBy(i, u.attr("id"));
                u.find(".ui-tooltip-content").html(r);
                this.liveRegion.children().hide();
                r.clone ? (o = r.clone(),
                o.removeAttr("id").find("[id]").removeAttr("id")) : o = r;
                n("<div>").html(o).appendTo(this.liveRegion);
                this.options.track && t && /^mouse/.test(t.type) ? (this._on(this.document, {
                    mousemove: s
                }),
                s(t)) : u.position(n.extend({
                    of: i
                }, this.options.position));
                u.hide();
                this._show(u, this.options.show);
                this.options.show && this.options.show.delay && (c = this.delayedShow = setInterval(function() {
                    u.is(":visible") && (s(h.of),
                    clearInterval(c))
                }, n.fx.interval));
                this._trigger("open", t, {
                    tooltip: u
                });
                e = {
                    keyup: function(t) {
                        if (t.keyCode === n.ui.keyCode.ESCAPE) {
                            var r = n.Event(t);
                            r.currentTarget = i[0];
                            this.close(r, !0)
                        }
                    }
                };
                i[0] !== this.element[0] && (e.remove = function() {
                    this._removeTooltip(u)
                }
                );
                t && t.type !== "mouseover" || (e.mouseleave = "close");
                t && t.type !== "focusin" || (e.focusout = "close");
                this._on(!0, i, e)
            }
        },
        close: function(t) {
            var u, f = this, i = n(t ? t.currentTarget : this.element), r = this._find(i);
            r && ((u = r.tooltip,
            r.closing) || (clearInterval(this.delayedShow),
            i.data("ui-tooltip-title") && !i.attr("title") && i.attr("title", i.data("ui-tooltip-title")),
            this._removeDescribedBy(i),
            r.hiding = !0,
            u.stop(!0),
            this._hide(u, this.options.hide, function() {
                f._removeTooltip(n(this))
            }),
            i.removeData("ui-tooltip-open"),
            this._off(i, "mouseleave focusout keyup"),
            i[0] !== this.element[0] && this._off(i, "remove"),
            this._off(this.document, "mousemove"),
            t && t.type === "mouseleave" && n.each(this.parents, function(t, i) {
                n(i.element).attr("title", i.title);
                delete f.parents[t]
            }),
            r.closing = !0,
            this._trigger("close", t, {
                tooltip: u
            }),
            r.hiding || (r.closing = !1)))
        },
        _tooltip: function(t) {
            var i = n("<div>").attr("role", "tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""))
              , r = i.uniqueId().attr("id");
            return n("<div>").addClass("ui-tooltip-content").appendTo(i),
            i.appendTo(this.document[0].body),
            this.tooltips[r] = {
                element: t,
                tooltip: i
            }
        },
        _find: function(n) {
            var t = n.data("ui-tooltip-id");
            return t ? this.tooltips[t] : null
        },
        _removeTooltip: function(n) {
            n.remove();
            delete this.tooltips[n.attr("id")]
        },
        _destroy: function() {
            var t = this;
            n.each(this.tooltips, function(i, r) {
                var f = n.Event("blur")
                  , u = r.element;
                f.target = f.currentTarget = u[0];
                t.close(f, !0);
                n("#" + i).remove();
                u.data("ui-tooltip-title") && (u.attr("title") || u.attr("title", u.data("ui-tooltip-title")),
                u.removeData("ui-tooltip-title"))
            });
            this.liveRegion.remove()
        }
    })
});
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(n) {
    function t(n, t) {
        if (!(n.originalEvent.touches.length > 1)) {
            n.preventDefault();
            var i = n.originalEvent.changedTouches[0]
              , r = document.createEvent("MouseEvents");
            r.initMouseEvent(t, !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null);
            n.target.dispatchEvent(r)
        }
    }
    if (n.support.touch = "ontouchend"in document,
    n.support.touch) {
        var r, i = n.ui.mouse.prototype, u = i._mouseInit, f = i._mouseDestroy;
        i._touchStart = function(n) {
            var i = this;
            !r && i._mouseCapture(n.originalEvent.changedTouches[0]) && (r = !0,
            i._touchMoved = !1,
            t(n, "mouseover"),
            t(n, "mousemove"),
            t(n, "mousedown"))
        }
        ;
        i._touchMove = function(n) {
            r && (this._touchMoved = !0,
            t(n, "mousemove"))
        }
        ;
        i._touchEnd = function(n) {
            r && (t(n, "mouseup"),
            t(n, "mouseout"),
            this._touchMoved || t(n, "click"),
            r = !1)
        }
        ;
        i._mouseInit = function() {
            var t = this;
            t.element.bind({
                touchstart: n.proxy(t, "_touchStart"),
                touchmove: n.proxy(t, "_touchMove"),
                touchend: n.proxy(t, "_touchEnd")
            });
            u.call(t)
        }
        ;
        i._mouseDestroy = function() {
            var t = this;
            t.element.unbind({
                touchstart: n.proxy(t, "_touchStart"),
                touchmove: n.proxy(t, "_touchMove"),
                touchend: n.proxy(t, "_touchEnd")
            });
            f.call(t)
        }
    }
}(jQuery),
function(n, t) {
    typeof define == "function" && define.amd ? define(["jquery"], t) : typeof exports == "object" ? module.exports = t(require("jquery")) : t(n.jQuery)
}(this, function(n) {
    function f(n) {
        var i, f, t, r;
        if (n in u.style)
            return n;
        for (i = ["Moz", "Webkit", "O", "ms"],
        f = n.charAt(0).toUpperCase() + n.substr(1),
        t = 0; t < i.length; ++t)
            if (r = i[t] + f,
            r in u.style)
                return r
    }
    function p() {
        return u.style[t.transform] = "",
        u.style[t.transform] = "rotateY(90deg)",
        u.style[t.transform] !== ""
    }
    function o(n) {
        return typeof n == "string" && this.parse(n),
        this
    }
    function a(n, t, i) {
        t === !0 ? n.queue(i) : t ? n.queue(t, i) : n.each(function() {
            i.call(this)
        })
    }
    function w(i) {
        var r = [];
        return n.each(i, function(i) {
            i = n.camelCase(i);
            i = n.transit.propertyMap[i] || n.cssProps[i] || i;
            i = y(i);
            t[i] && (i = y(t[i]));
            n.inArray(i, r) === -1 && r.push(i)
        }),
        r
    }
    function v(t, i, r, u) {
        var o = w(t), f, e;
        return n.cssEase[r] && (r = n.cssEase[r]),
        f = "" + h(i) + " " + r,
        parseInt(u, 10) > 0 && (f += " " + h(u)),
        e = [],
        n.each(o, function(n, t) {
            e.push(t + " " + f)
        }),
        e.join(", ")
    }
    function i(i, r) {
        r || (n.cssNumber[i] = !0);
        n.transit.propertyMap[i] = t.transform;
        n.cssHooks[i] = {
            get: function(t) {
                var r = n(t).css("transit:transform");
                return r.get(i)
            },
            set: function(t, r) {
                var u = n(t).css("transit:transform");
                u.setFromString(i, r);
                n(t).css({
                    "transit:transform": u
                })
            }
        }
    }
    function y(n) {
        return n.replace(/([A-Z])/g, function(n) {
            return "-" + n.toLowerCase()
        })
    }
    function r(n, t) {
        return typeof n != "string" || n.match(/^[\-0-9\.]+$/) ? "" + n + t : n
    }
    function h(t) {
        var i = t;
        return typeof i != "string" || i.match(/^[\-0-9\.]+/) || (i = n.fx.speeds[i] || n.fx.speeds._default),
        r(i, "ms")
    }
    var u, t, c, l, s, e;
    n.transit = {
        version: "0.9.12",
        propertyMap: {
            marginLeft: "margin",
            marginRight: "margin",
            marginBottom: "margin",
            marginTop: "margin",
            paddingLeft: "padding",
            paddingRight: "padding",
            paddingBottom: "padding",
            paddingTop: "padding"
        },
        enabled: !0,
        useTransitionEnd: !1
    };
    u = document.createElement("div");
    t = {};
    c = navigator.userAgent.toLowerCase().indexOf("chrome") > -1;
    t.transition = f("transition");
    t.transitionDelay = f("transitionDelay");
    t.transform = f("transform");
    t.transformOrigin = f("transformOrigin");
    t.filter = f("Filter");
    t.transform3d = p();
    l = {
        transition: "transitionend",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        WebkitTransition: "webkitTransitionEnd",
        msTransition: "MSTransitionEnd"
    };
    s = t.transitionEnd = l[t.transition] || null;
    for (e in t)
        t.hasOwnProperty(e) && typeof n.support[e] == "undefined" && (n.support[e] = t[e]);
    return u = null,
    n.cssEase = {
        _default: "ease",
        "in": "ease-in",
        out: "ease-out",
        "in-out": "ease-in-out",
        snap: "cubic-bezier(0,1,.5,1)",
        easeInCubic: "cubic-bezier(.550,.055,.675,.190)",
        easeOutCubic: "cubic-bezier(.215,.61,.355,1)",
        easeInOutCubic: "cubic-bezier(.645,.045,.355,1)",
        easeInCirc: "cubic-bezier(.6,.04,.98,.335)",
        easeOutCirc: "cubic-bezier(.075,.82,.165,1)",
        easeInOutCirc: "cubic-bezier(.785,.135,.15,.86)",
        easeInExpo: "cubic-bezier(.95,.05,.795,.035)",
        easeOutExpo: "cubic-bezier(.19,1,.22,1)",
        easeInOutExpo: "cubic-bezier(1,0,0,1)",
        easeInQuad: "cubic-bezier(.55,.085,.68,.53)",
        easeOutQuad: "cubic-bezier(.25,.46,.45,.94)",
        easeInOutQuad: "cubic-bezier(.455,.03,.515,.955)",
        easeInQuart: "cubic-bezier(.895,.03,.685,.22)",
        easeOutQuart: "cubic-bezier(.165,.84,.44,1)",
        easeInOutQuart: "cubic-bezier(.77,0,.175,1)",
        easeInQuint: "cubic-bezier(.755,.05,.855,.06)",
        easeOutQuint: "cubic-bezier(.23,1,.32,1)",
        easeInOutQuint: "cubic-bezier(.86,0,.07,1)",
        easeInSine: "cubic-bezier(.47,0,.745,.715)",
        easeOutSine: "cubic-bezier(.39,.575,.565,1)",
        easeInOutSine: "cubic-bezier(.445,.05,.55,.95)",
        easeInBack: "cubic-bezier(.6,-.28,.735,.045)",
        easeOutBack: "cubic-bezier(.175, .885,.32,1.275)",
        easeInOutBack: "cubic-bezier(.68,-.55,.265,1.55)"
    },
    n.cssHooks["transit:transform"] = {
        get: function(t) {
            return n(t).data("transform") || new o
        },
        set: function(i, r) {
            var u = r;
            u instanceof o || (u = new o(u));
            i.style[t.transform] = t.transform !== "WebkitTransform" || c ? u.toString() : u.toString(!0);
            n(i).data("transform", u)
        }
    },
    n.cssHooks.transform = {
        set: n.cssHooks["transit:transform"].set
    },
    n.cssHooks.filter = {
        get: function(n) {
            return n.style[t.filter]
        },
        set: function(n, i) {
            n.style[t.filter] = i
        }
    },
    n.fn.jquery < "1.8" && (n.cssHooks.transformOrigin = {
        get: function(n) {
            return n.style[t.transformOrigin]
        },
        set: function(n, i) {
            n.style[t.transformOrigin] = i
        }
    },
    n.cssHooks.transition = {
        get: function(n) {
            return n.style[t.transition]
        },
        set: function(n, i) {
            n.style[t.transition] = i
        }
    }),
    i("scale"),
    i("scaleX"),
    i("scaleY"),
    i("translate"),
    i("rotate"),
    i("rotateX"),
    i("rotateY"),
    i("rotate3d"),
    i("perspective"),
    i("skewX"),
    i("skewY"),
    i("x", !0),
    i("y", !0),
    o.prototype = {
        setFromString: function(n, t) {
            var i = typeof t == "string" ? t.split(",") : t.constructor === Array ? t : [t];
            i.unshift(n);
            o.prototype.set.apply(this, i)
        },
        set: function(n) {
            var t = Array.prototype.slice.apply(arguments, [1]);
            this.setter[n] ? this.setter[n].apply(this, t) : this[n] = t.join(",")
        },
        get: function(n) {
            return this.getter[n] ? this.getter[n].apply(this) : this[n] || 0
        },
        setter: {
            rotate: function(n) {
                this.rotate = r(n, "deg")
            },
            rotateX: function(n) {
                this.rotateX = r(n, "deg")
            },
            rotateY: function(n) {
                this.rotateY = r(n, "deg")
            },
            scale: function(n, t) {
                t === undefined && (t = n);
                this.scale = n + "," + t
            },
            skewX: function(n) {
                this.skewX = r(n, "deg")
            },
            skewY: function(n) {
                this.skewY = r(n, "deg")
            },
            perspective: function(n) {
                this.perspective = r(n, "px")
            },
            x: function(n) {
                this.set("translate", n, null)
            },
            y: function(n) {
                this.set("translate", null, n)
            },
            translate: function(n, t) {
                this._translateX === undefined && (this._translateX = 0);
                this._translateY === undefined && (this._translateY = 0);
                n !== null && n !== undefined && (this._translateX = r(n, "px"));
                t !== null && t !== undefined && (this._translateY = r(t, "px"));
                this.translate = this._translateX + "," + this._translateY
            }
        },
        getter: {
            x: function() {
                return this._translateX || 0
            },
            y: function() {
                return this._translateY || 0
            },
            scale: function() {
                var n = (this.scale || "1,1").split(",");
                return n[0] && (n[0] = parseFloat(n[0])),
                n[1] && (n[1] = parseFloat(n[1])),
                n[0] === n[1] ? n[0] : n
            },
            rotate3d: function() {
                for (var n = (this.rotate3d || "0,0,0,0deg").split(","), t = 0; t <= 3; ++t)
                    n[t] && (n[t] = parseFloat(n[t]));
                return n[3] && (n[3] = r(n[3], "deg")),
                n
            }
        },
        parse: function(n) {
            var t = this;
            n.replace(/([a-zA-Z0-9]+)\((.*?)\)/g, function(n, i, r) {
                t.setFromString(i, r)
            })
        },
        toString: function(n) {
            var r = [];
            for (var i in this)
                if (this.hasOwnProperty(i)) {
                    if (!t.transform3d && (i === "rotateX" || i === "rotateY" || i === "perspective" || i === "transformOrigin"))
                        continue;
                    i[0] !== "_" && (n && i === "scale" ? r.push(i + "3d(" + this[i] + ",1)") : n && i === "translate" ? r.push(i + "3d(" + this[i] + ",0)") : r.push(i + "(" + this[i] + ")"))
                }
            return r.join(" ")
        }
    },
    n.fn.transition = n.fn.transit = function(i, r, u, f) {
        var o = this, l = 0, y = !0, e = n.extend(!0, {}, i), p;
        typeof r == "function" && (f = r,
        r = undefined);
        typeof r == "object" && (u = r.easing,
        l = r.delay || 0,
        y = typeof r.queue == "undefined" ? !0 : r.queue,
        f = r.complete,
        r = r.duration);
        typeof u == "function" && (f = u,
        u = undefined);
        typeof e.easing != "undefined" && (u = e.easing,
        delete e.easing);
        typeof e.duration != "undefined" && (r = e.duration,
        delete e.duration);
        typeof e.complete != "undefined" && (f = e.complete,
        delete e.complete);
        typeof e.queue != "undefined" && (y = e.queue,
        delete e.queue);
        typeof e.delay != "undefined" && (l = e.delay,
        delete e.delay);
        typeof r == "undefined" && (r = n.fx.speeds._default);
        typeof u == "undefined" && (u = n.cssEase._default);
        r = h(r);
        var w = v(e, r, u, l)
          , b = n.transit.enabled && t.transition
          , c = b ? parseInt(r, 10) + parseInt(l, 10) : 0;
        if (c === 0)
            return p = function(n) {
                o.css(e);
                f && f.apply(o);
                n && n()
            }
            ,
            a(o, y, p),
            o;
        var k = {}
          , d = function(i) {
            var u = !1
              , r = function() {
                u && o.unbind(s, r);
                c > 0 && o.each(function() {
                    this.style[t.transition] = k[this] || null
                });
                typeof f == "function" && f.apply(o);
                typeof i == "function" && i()
            };
            c > 0 && s && n.transit.useTransitionEnd ? (u = !0,
            o.bind(s, r)) : window.setTimeout(r, c);
            o.each(function() {
                c > 0 && (this.style[t.transition] = w);
                n(this).css(e)
            })
        }
          , g = function(n) {
            this.offsetWidth;
            d(n)
        };
        return a(o, y, g),
        this
    }
    ,
    n.transit.getTransitionValue = v,
    n
});
/*!jQuery Knob*/
(function(n) {
    typeof define == "function" && define.amd ? define(["jquery"], n) : n(jQuery)
}
)(function(n) {
    "use strict";
    var t = {}
      , i = Math.max
      , r = Math.min;
    t.c = {};
    t.c.d = n(document);
    t.c.t = function(n) {
        return n.originalEvent.touches.length - 1
    }
    ;
    t.o = function() {
        var i = this;
        this.o = null;
        this.$ = null;
        this.i = null;
        this.g = null;
        this.v = null;
        this.cv = null;
        this.x = 0;
        this.y = 0;
        this.w = 0;
        this.h = 0;
        this.$c = null;
        this.c = null;
        this.t = 0;
        this.isInit = !1;
        this.fgColor = null;
        this.pColor = null;
        this.dH = null;
        this.cH = null;
        this.eH = null;
        this.rH = null;
        this.scale = 1;
        this.relative = !1;
        this.relativeWidth = !1;
        this.relativeHeight = !1;
        this.$div = null;
        this.run = function() {
            var t = function(n, t) {
                for (var r in t)
                    i.o[r] = t[r];
                i._carve().init();
                i._configure()._draw()
            };
            if (!this.$.data("kontroled")) {
                if (this.$.data("kontroled", !0),
                this.extend(),
                this.o = n.extend({
                    min: this.$.data("min") !== undefined ? this.$.data("min") : 0,
                    max: this.$.data("max") !== undefined ? this.$.data("max") : 100,
                    stopper: !0,
                    readOnly: this.$.data("readonly") || this.$.attr("readonly") === "readonly",
                    cursor: this.$.data("cursor") === !0 && 30 || this.$.data("cursor") || 0,
                    thickness: this.$.data("thickness") && Math.max(Math.min(this.$.data("thickness"), 1), .01) || .35,
                    lineCap: this.$.data("linecap") || "butt",
                    width: this.$.data("width") || 200,
                    height: this.$.data("height") || 200,
                    displayInput: this.$.data("displayinput") == null || this.$.data("displayinput"),
                    displayPrevious: this.$.data("displayprevious"),
                    fgColor: this.$.data("fgcolor") || "#87CEEB",
                    inputColor: this.$.data("inputcolor"),
                    font: this.$.data("font") || "Arial",
                    fontWeight: this.$.data("font-weight") || "bold",
                    inline: !1,
                    step: this.$.data("step") || 1,
                    rotation: this.$.data("rotation"),
                    draw: null,
                    change: null,
                    cancel: null,
                    release: null,
                    format: function(n) {
                        return n
                    },
                    parse: function(n) {
                        return parseFloat(n)
                    }
                }, this.o),
                this.o.flip = this.o.rotation === "anticlockwise" || this.o.rotation === "acw",
                this.o.inputColor || (this.o.inputColor = this.o.fgColor),
                this.$.is("fieldset") ? (this.v = {},
                this.i = this.$.find("input"),
                this.i.each(function(t) {
                    var r = n(this);
                    i.i[t] = r;
                    i.v[t] = i.o.parse(r.val());
                    r.bind("change blur", function() {
                        var n = {};
                        n[t] = r.val();
                        i.val(n)
                    })
                }),
                this.$.find("legend").remove()) : (this.i = this.$,
                this.v = this.o.parse(this.$.val()),
                this.v === "" && (this.v = this.o.min),
                this.$.bind("change blur", function() {
                    i.val(i._validate(i.o.parse(i.$.val())))
                })),
                this.o.displayInput || this.$.hide(),
                this.$c = n(document.createElement("canvas")).attr({
                    width: this.o.width,
                    height: this.o.height
                }),
                this.$div = n('<div style="' + (this.o.inline ? "display:inline;" : "") + "width:" + this.o.width + "px;height:" + this.o.height + 'px;"><\/div>'),
                this.$.wrap(this.$div).before(this.$c),
                this.$div = this.$.parent(),
                typeof G_vmlCanvasManager != "undefined" && G_vmlCanvasManager.initElement(this.$c[0]),
                this.c = this.$c[0].getContext ? this.$c[0].getContext("2d") : null,
                !this.c)
                    throw {
                        name: "CanvasNotSupportedException",
                        message: "Canvas not supported. Please use excanvas on IE8.0.",
                        toString: function() {
                            return this.name + ": " + this.message
                        }
                    };
                return this.scale = (window.devicePixelRatio || 1) / (this.c.webkitBackingStorePixelRatio || this.c.mozBackingStorePixelRatio || this.c.msBackingStorePixelRatio || this.c.oBackingStorePixelRatio || this.c.backingStorePixelRatio || 1),
                this.relativeWidth = this.o.width % 1 != 0 && this.o.width.indexOf("%"),
                this.relativeHeight = this.o.height % 1 != 0 && this.o.height.indexOf("%"),
                this.relative = this.relativeWidth || this.relativeHeight,
                this._carve(),
                this.v instanceof Object ? (this.cv = {},
                this.copy(this.v, this.cv)) : this.cv = this.v,
                this.$.bind("configure", t).parent().bind("configure", t),
                this._listen()._configure()._xy().init(),
                this.isInit = !0,
                this.$.val(this.o.format(this.v)),
                this._draw(),
                this
            }
        }
        ;
        this._carve = function() {
            if (this.relative) {
                var n = this.relativeWidth ? this.$div.parent().width() * parseInt(this.o.width) / 100 : this.$div.parent().width()
                  , t = this.relativeHeight ? this.$div.parent().height() * parseInt(this.o.height) / 100 : this.$div.parent().height();
                this.w = this.h = Math.min(n, t)
            } else
                this.w = this.o.width,
                this.h = this.o.height;
            return this.$div.css({
                width: this.w + "px",
                height: this.h + "px"
            }),
            this.$c.attr({
                width: this.w,
                height: this.h
            }),
            this.scale !== 1 && (this.$c[0].width = this.$c[0].width * this.scale,
            this.$c[0].height = this.$c[0].height * this.scale,
            this.$c.width(this.w),
            this.$c.height(this.h)),
            this
        }
        ;
        this._draw = function() {
            var n = !0;
            i.g = i.c;
            i.clear();
            i.dH && (n = i.dH());
            n !== !1 && i.draw()
        }
        ;
        this._touch = function(n) {
            var r = function(n) {
                var t = i.xy2val(n.originalEvent.touches[i.t].pageX, n.originalEvent.touches[i.t].pageY);
                t != i.cv && (i.cH && i.cH(t) === !1 || (i.change(i._validate(t)),
                i._draw()))
            };
            return this.t = t.c.t(n),
            r(n),
            t.c.d.bind("touchmove.k", r).bind("touchend.k", function() {
                t.c.d.unbind("touchmove.k touchend.k");
                i.val(i.cv)
            }),
            this
        }
        ;
        this._mouse = function(n) {
            var r = function(n) {
                var t = i.xy2val(n.pageX, n.pageY);
                t != i.cv && (i.cH && i.cH(t) === !1 || (i.change(i._validate(t)),
                i._draw()))
            };
            return r(n),
            t.c.d.bind("mousemove.k", r).bind("keyup.k", function(n) {
                if (n.keyCode === 27) {
                    if (t.c.d.unbind("mouseup.k mousemove.k keyup.k"),
                    i.eH && i.eH() === !1)
                        return;
                    i.cancel()
                }
            }).bind("mouseup.k", function() {
                t.c.d.unbind("mousemove.k mouseup.k keyup.k");
                i.val(i.cv)
            }),
            this
        }
        ;
        this._xy = function() {
            var n = this.$c.offset();
            return this.x = n.left,
            this.y = n.top,
            this
        }
        ;
        this._listen = function() {
            return this.o.readOnly ? this.$.attr("readonly", "readonly") : (this.$c.bind("mousedown", function(n) {
                n.preventDefault();
                i._xy()._mouse(n)
            }).bind("touchstart", function(n) {
                n.preventDefault();
                i._xy()._touch(n)
            }),
            this.listen()),
            this.relative && n(window).resize(function() {
                i._carve().init();
                i._draw()
            }),
            this
        }
        ;
        this._configure = function() {
            return this.o.draw && (this.dH = this.o.draw),
            this.o.change && (this.cH = this.o.change),
            this.o.cancel && (this.eH = this.o.cancel),
            this.o.release && (this.rH = this.o.release),
            this.o.displayPrevious ? (this.pColor = this.h2rgba(this.o.fgColor, "0.4"),
            this.fgColor = this.h2rgba(this.o.fgColor, "0.6")) : this.fgColor = this.o.fgColor,
            this
        }
        ;
        this._clear = function() {
            this.$c[0].width = this.$c[0].width
        }
        ;
        this._validate = function(n) {
            return ~~((n < 0 ? -.5 : .5) + n / this.o.step) * this.o.step
        }
        ;
        this.listen = function() {}
        ;
        this.extend = function() {}
        ;
        this.init = function() {}
        ;
        this.change = function() {}
        ;
        this.val = function() {}
        ;
        this.xy2val = function() {}
        ;
        this.draw = function() {}
        ;
        this.clear = function() {
            this._clear()
        }
        ;
        this.h2rgba = function(n, t) {
            var i;
            return n = n.substring(1, 7),
            i = [parseInt(n.substring(0, 2), 16), parseInt(n.substring(2, 4), 16), parseInt(n.substring(4, 6), 16)],
            "rgba(" + i[0] + "," + i[1] + "," + i[2] + "," + t + ")"
        }
        ;
        this.copy = function(n, t) {
            for (var i in n)
                t[i] = n[i]
        }
    }
    ;
    t.Dial = function() {
        t.o.call(this);
        this.startAngle = null;
        this.xy = null;
        this.radius = null;
        this.lineWidth = null;
        this.cursorExt = null;
        this.w2 = null;
        this.PI2 = 2 * Math.PI;
        this.extend = function() {
            this.o = n.extend({
                bgColor: this.$.data("bgcolor") || "#EEEEEE",
                angleOffset: this.$.data("angleoffset") || 0,
                angleArc: this.$.data("anglearc") || 360,
                inline: !0
            }, this.o)
        }
        ;
        this.val = function(n, t) {
            if (null != n) {
                if (n = this.o.parse(n),
                t !== !1 && n != this.v && this.rH && this.rH(n) === !1)
                    return;
                this.cv = this.o.stopper ? i(r(n, this.o.max), this.o.min) : n;
                this.v = this.cv;
                this.$.val(this.o.format(this.v));
                this._draw()
            } else
                return this.v
        }
        ;
        this.xy2val = function(n, t) {
            var u, f;
            return u = Math.atan2(n - (this.x + this.w2), -(t - this.y - this.w2)) - this.angleOffset,
            this.o.flip && (u = this.angleArc - u - this.PI2),
            this.angleArc != this.PI2 && u < 0 && u > -.5 ? u = 0 : u < 0 && (u += this.PI2),
            f = ~~(.5 + u * (this.o.max - this.o.min) / this.angleArc) + this.o.min,
            this.o.stopper && (f = i(r(f, this.o.max), this.o.min)),
            f
        }
        ;
        this.listen = function() {
            var t = this, u, e, h = function(n) {
                n.preventDefault();
                var o = n.originalEvent
                  , s = o.detail || o.wheelDeltaX
                  , h = o.detail || o.wheelDeltaY
                  , f = t._validate(t.o.parse(t.$.val())) + (s > 0 || h > 0 ? t.o.step : s < 0 || h < 0 ? -t.o.step : 0);
                f = i(r(f, t.o.max), t.o.min);
                t.val(f, !1);
                t.rH && (clearTimeout(u),
                u = setTimeout(function() {
                    t.rH(f);
                    u = null
                }, 100),
                e || (e = setTimeout(function() {
                    u && t.rH(f);
                    e = null
                }, 200)))
            }, o, f, s = 1, c = {
                37: -t.o.step,
                38: t.o.step,
                39: t.o.step,
                40: -t.o.step
            };
            this.$.bind("keydown", function(u) {
                var e = u.keyCode, h;
                e >= 96 && e <= 105 && (e = u.keyCode = e - 48);
                o = parseInt(String.fromCharCode(e));
                isNaN(o) && (e !== 13 && e !== 8 && e !== 9 && e !== 189 && (e !== 190 || t.$.val().match(/\./)) && u.preventDefault(),
                n.inArray(e, [37, 38, 39, 40]) > -1 && (u.preventDefault(),
                h = t.o.parse(t.$.val()) + c[e] * s,
                t.o.stopper && (h = i(r(h, t.o.max), t.o.min)),
                t.change(h),
                t._draw(),
                f = window.setTimeout(function() {
                    s *= 2
                }, 30)))
            }).bind("keyup", function() {
                isNaN(o) ? f && (window.clearTimeout(f),
                f = null,
                s = 1,
                t.val(t.$.val())) : t.$.val() > t.o.max && t.$.val(t.o.max) || t.$.val() < t.o.min && t.$.val(t.o.min)
            });
            this.$c.bind("mousewheel DOMMouseScroll", h);
            this.$.bind("mousewheel DOMMouseScroll", h)
        }
        ;
        this.init = function() {
            (this.v < this.o.min || this.v > this.o.max) && (this.v = this.o.min);
            this.$.val(this.v);
            this.w2 = this.w / 2;
            this.cursorExt = this.o.cursor / 100;
            this.xy = this.w2 * this.scale;
            this.lineWidth = this.xy * this.o.thickness;
            this.lineCap = this.o.lineCap;
            this.radius = this.xy - this.lineWidth / 2;
            this.o.angleOffset && (this.o.angleOffset = isNaN(this.o.angleOffset) ? 0 : this.o.angleOffset);
            this.o.angleArc && (this.o.angleArc = isNaN(this.o.angleArc) ? this.PI2 : this.o.angleArc);
            this.angleOffset = this.o.angleOffset * Math.PI / 180;
            this.angleArc = this.o.angleArc * Math.PI / 180;
            this.startAngle = 1.5 * Math.PI + this.angleOffset;
            this.endAngle = 1.5 * Math.PI + this.angleOffset + this.angleArc;
            var n = i(String(Math.abs(this.o.max)).length, String(Math.abs(this.o.min)).length, 2) + 2;
            this.o.displayInput && this.i.css({
                width: (this.w / 2 + 4 >> 0) + "px",
                height: (this.w / 3 >> 0) + "px",
                position: "absolute",
                "vertical-align": "middle",
                "margin-top": (this.w / 3 >> 0) + "px",
                "margin-left": "-" + (this.w * 3 / 4 + 2 >> 0) + "px",
                border: 0,
                background: "none",
                font: this.o.fontWeight + " " + (this.w / n >> 0) + "px " + this.o.font,
                "text-align": "center",
                color: this.o.inputColor || this.o.fgColor,
                padding: "0px",
                "-webkit-appearance": "none"
            }) || this.i.css({
                width: "0px",
                visibility: "hidden"
            })
        }
        ;
        this.change = function(n) {
            this.cv = n;
            this.$.val(this.o.format(n))
        }
        ;
        this.angle = function(n) {
            return (n - this.o.min) * this.angleArc / (this.o.max - this.o.min)
        }
        ;
        this.arc = function(n) {
            var t, i;
            return n = this.angle(n),
            this.o.flip ? (t = this.endAngle + 1e-5,
            i = t - n - 1e-5) : (t = this.startAngle - 1e-5,
            i = t + n + 1e-5),
            this.o.cursor && (t = i - this.cursorExt) && (i = i + this.cursorExt),
            {
                s: t,
                e: i,
                d: this.o.flip && !this.o.cursor
            }
        }
        ;
        this.draw = function() {
            var n = this.g, i = this.arc(this.cv), t, r = 1;
            n.lineWidth = this.lineWidth;
            n.lineCap = this.lineCap;
            this.o.bgColor !== "none" && (n.beginPath(),
            n.strokeStyle = this.o.bgColor,
            n.arc(this.xy, this.xy, this.radius, this.endAngle - 1e-5, this.startAngle + 1e-5, !0),
            n.stroke());
            this.o.displayPrevious && (t = this.arc(this.v),
            n.beginPath(),
            n.strokeStyle = this.pColor,
            n.arc(this.xy, this.xy, this.radius, t.s, t.e, t.d),
            n.stroke(),
            r = this.cv == this.v);
            n.beginPath();
            n.strokeStyle = r ? this.o.fgColor : this.fgColor;
            n.arc(this.xy, this.xy, this.radius, i.s, i.e, i.d);
            n.stroke()
        }
        ;
        this.cancel = function() {
            this.val(this.v)
        }
    }
    ;
    n.fn.dial = n.fn.knob = function(i) {
        return this.each(function() {
            var r = new t.Dial;
            r.o = i;
            r.$ = n(this);
            r.run()
        }).parent()
    }
}),
function() {
    "use strict";
    /**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @version 1.0.3
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */
    function n(t, r) {
        function h(n, t) {
            return function() {
                return n.apply(t, arguments)
            }
        }
        var o, f, e, u, s;
        if (r = r || {},
        this.trackingClick = !1,
        this.trackingClickStart = 0,
        this.targetElement = null,
        this.touchStartX = 0,
        this.touchStartY = 0,
        this.lastTouchIdentifier = 0,
        this.touchBoundary = r.touchBoundary || 10,
        this.layer = t,
        this.tapDelay = r.tapDelay || 200,
        !n.notNeeded(t)) {
            for (f = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"],
            e = this,
            u = 0,
            s = f.length; u < s; u++)
                e[f[u]] = h(e[f[u]], e);
            i && (t.addEventListener("mouseover", this.onMouse, !0),
            t.addEventListener("mousedown", this.onMouse, !0),
            t.addEventListener("mouseup", this.onMouse, !0));
            t.addEventListener("click", this.onClick, !0);
            t.addEventListener("touchstart", this.onTouchStart, !1);
            t.addEventListener("touchmove", this.onTouchMove, !1);
            t.addEventListener("touchend", this.onTouchEnd, !1);
            t.addEventListener("touchcancel", this.onTouchCancel, !1);
            Event.prototype.stopImmediatePropagation || (t.removeEventListener = function(n, i, r) {
                var u = Node.prototype.removeEventListener;
                n === "click" ? u.call(t, n, i.hijacked || i, r) : u.call(t, n, i, r)
            }
            ,
            t.addEventListener = function(n, i, r) {
                var u = Node.prototype.addEventListener;
                n === "click" ? u.call(t, n, i.hijacked || (i.hijacked = function(n) {
                    n.propagationStopped || i(n)
                }
                ), r) : u.call(t, n, i, r)
            }
            );
            typeof t.onclick == "function" && (o = t.onclick,
            t.addEventListener("click", function(n) {
                o(n)
            }, !1),
            t.onclick = null)
        }
    }
    var i = navigator.userAgent.indexOf("Android") > 0
      , t = /iP(ad|hone|od)/.test(navigator.userAgent)
      , r = t && /OS 4_\d(_\d)?/.test(navigator.userAgent)
      , u = t && /OS ([6-9]|\d{2})_\d/.test(navigator.userAgent)
      , f = navigator.userAgent.indexOf("BB10") > 0;
    n.prototype.needsClick = function(n) {
        switch (n.nodeName.toLowerCase()) {
        case "button":
        case "select":
        case "textarea":
            if (n.disabled)
                return !0;
            break;
        case "input":
            if (t && n.type === "file" || n.disabled)
                return !0;
            break;
        case "label":
        case "video":
            return !0
        }
        return /\bneedsclick\b/.test(n.className)
    }
    ;
    n.prototype.needsFocus = function(n) {
        switch (n.nodeName.toLowerCase()) {
        case "textarea":
            return !0;
        case "select":
            return !i;
        case "input":
            switch (n.type) {
            case "button":
            case "checkbox":
            case "file":
            case "image":
            case "radio":
            case "submit":
                return !1
            }
            return !n.disabled && !n.readOnly;
        default:
            return /\bneedsfocus\b/.test(n.className)
        }
    }
    ;
    n.prototype.sendClick = function(n, t) {
        var r, i;
        document.activeElement && document.activeElement !== n && document.activeElement.blur();
        i = t.changedTouches[0];
        r = document.createEvent("MouseEvents");
        r.initMouseEvent(this.determineEventType(n), !0, !0, window, 1, i.screenX, i.screenY, i.clientX, i.clientY, !1, !1, !1, !1, 0, null);
        r.forwardedTouchEvent = !0;
        n.dispatchEvent(r)
    }
    ;
    n.prototype.determineEventType = function(n) {
        return i && n.tagName.toLowerCase() === "select" ? "mousedown" : "click"
    }
    ;
    n.prototype.focus = function(n) {
        var i;
        t && n.setSelectionRange && n.type.indexOf("date") !== 0 && n.type !== "time" && n.type !== "month" ? (i = n.value.length,
        n.setSelectionRange(i, i)) : n.focus()
    }
    ;
    n.prototype.updateScrollParent = function(n) {
        var i, t;
        if (i = n.fastClickScrollParent,
        !i || !i.contains(n)) {
            t = n;
            do {
                if (t.scrollHeight > t.offsetHeight) {
                    i = t;
                    n.fastClickScrollParent = t;
                    break
                }
                t = t.parentElement
            } while (t)
        }
        i && (i.fastClickLastScrollTop = i.scrollTop)
    }
    ;
    n.prototype.getTargetElementFromEventTarget = function(n) {
        return n.nodeType === Node.TEXT_NODE ? n.parentNode : n
    }
    ;
    n.prototype.onTouchStart = function(n) {
        var u, i, f;
        if (n.targetTouches.length > 1)
            return !0;
        if (u = this.getTargetElementFromEventTarget(n.target),
        i = n.targetTouches[0],
        t) {
            if (f = window.getSelection(),
            f.rangeCount && !f.isCollapsed)
                return !0;
            if (!r) {
                if (i.identifier && i.identifier === this.lastTouchIdentifier)
                    return n.preventDefault(),
                    !1;
                this.lastTouchIdentifier = i.identifier;
                this.updateScrollParent(u)
            }
        }
        return this.trackingClick = !0,
        this.trackingClickStart = n.timeStamp,
        this.targetElement = u,
        this.touchStartX = i.pageX,
        this.touchStartY = i.pageY,
        n.timeStamp - this.lastClickTime < this.tapDelay && n.preventDefault(),
        !0
    }
    ;
    n.prototype.touchHasMoved = function(n) {
        var t = n.changedTouches[0]
          , i = this.touchBoundary;
        return Math.abs(t.pageX - this.touchStartX) > i || Math.abs(t.pageY - this.touchStartY) > i ? !0 : !1
    }
    ;
    n.prototype.onTouchMove = function(n) {
        return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(n.target) || this.touchHasMoved(n)) && (this.trackingClick = !1,
        this.targetElement = null),
        !0) : !0
    }
    ;
    n.prototype.findControl = function(n) {
        return n.control !== undefined ? n.control : n.htmlFor ? document.getElementById(n.htmlFor) : n.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
    }
    ;
    n.prototype.onTouchEnd = function(n) {
        var s, c, e, o, h, f = this.targetElement;
        if (!this.trackingClick)
            return !0;
        if (n.timeStamp - this.lastClickTime < this.tapDelay)
            return this.cancelNextClick = !0,
            !0;
        if (this.cancelNextClick = !1,
        this.lastClickTime = n.timeStamp,
        c = this.trackingClickStart,
        this.trackingClick = !1,
        this.trackingClickStart = 0,
        u && (h = n.changedTouches[0],
        f = document.elementFromPoint(h.pageX - window.pageXOffset, h.pageY - window.pageYOffset) || f,
        f.fastClickScrollParent = this.targetElement.fastClickScrollParent),
        e = f.tagName.toLowerCase(),
        e === "label") {
            if (s = this.findControl(f),
            s) {
                if (this.focus(f),
                i)
                    return !1;
                f = s
            }
        } else if (this.needsFocus(f))
            return n.timeStamp - c > 100 || t && window.top !== window && e === "input" ? (this.targetElement = null,
            !1) : (this.focus(f),
            this.sendClick(f, n),
            t && e === "select" || (this.targetElement = null,
            n.preventDefault()),
            !1);
        return t && !r && (o = f.fastClickScrollParent,
        o && o.fastClickLastScrollTop !== o.scrollTop) ? !0 : (this.needsClick(f) || (n.preventDefault(),
        this.sendClick(f, n)),
        !1)
    }
    ;
    n.prototype.onTouchCancel = function() {
        this.trackingClick = !1;
        this.targetElement = null
    }
    ;
    n.prototype.onMouse = function(n) {
        return this.targetElement ? n.forwardedTouchEvent ? !0 : n.cancelable ? !this.needsClick(this.targetElement) || this.cancelNextClick ? (n.stopImmediatePropagation ? n.stopImmediatePropagation() : n.propagationStopped = !0,
        n.stopPropagation(),
        n.preventDefault(),
        !1) : !0 : !0 : !0
    }
    ;
    n.prototype.onClick = function(n) {
        var t;
        return this.trackingClick ? (this.targetElement = null,
        this.trackingClick = !1,
        !0) : n.target.type === "submit" && n.detail === 0 ? !0 : (t = this.onMouse(n),
        t || (this.targetElement = null),
        t)
    }
    ;
    n.prototype.destroy = function() {
        var n = this.layer;
        i && (n.removeEventListener("mouseover", this.onMouse, !0),
        n.removeEventListener("mousedown", this.onMouse, !0),
        n.removeEventListener("mouseup", this.onMouse, !0));
        n.removeEventListener("click", this.onClick, !0);
        n.removeEventListener("touchstart", this.onTouchStart, !1);
        n.removeEventListener("touchmove", this.onTouchMove, !1);
        n.removeEventListener("touchend", this.onTouchEnd, !1);
        n.removeEventListener("touchcancel", this.onTouchCancel, !1)
    }
    ;
    n.notNeeded = function(n) {
        var t, r, u;
        if (typeof ontouchstart == "undefined")
            return !0;
        if (r = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1],
        r)
            if (i) {
                if (t = document.querySelector("meta[name=viewport]"),
                t && (t.content.indexOf("user-scalable=no") !== -1 || r > 31 && document.documentElement.scrollWidth <= window.outerWidth))
                    return !0
            } else
                return !0;
        return f && (u = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),
        u[1] >= 10 && u[2] >= 3 && (t = document.querySelector("meta[name=viewport]"),
        t && (t.content.indexOf("user-scalable=no") !== -1 || document.documentElement.scrollWidth <= window.outerWidth))) ? !0 : n.style.msTouchAction === "none" ? !0 : !1
    }
    ;
    n.attach = function(t, i) {
        return new n(t,i)
    }
    ;
    typeof define == "function" && typeof define.amd == "object" && define.amd ? define(function() {
        return n
    }) : typeof module != "undefined" && module.exports ? (module.exports = n.attach,
    module.exports.FastClick = n) : window.FastClick = n
}(),
function(n) {
    function i(i, f) {
        if (this.element = i,
        this.options = n.extend({}, r, f),
        n(this.element).data("max-height", this.options.maxHeight),
        n(this.element).data("height-margin", this.options.heightMargin),
        delete this.options.maxHeight,
        this.options.embedCSS && !u) {
            var o = ".readmore-js-toggle, .readmore-js-section { " + this.options.sectionCSS + " } .readmore-js-section { overflow: hidden; }"
              , e = document.createElement("style");
            e.type = "text/css";
            e.styleSheet ? e.styleSheet.cssText = o : e.appendChild(document.createTextNode(o));
            document.getElementsByTagName("head")[0].appendChild(e);
            u = !0
        }
        this._defaults = r;
        this._name = t;
        this.init()
    }
    var t = "readmore"
      , r = {
        speed: 100,
        maxHeight: 200,
        heightMargin: 16,
        moreLink: '<a href="#">Read More<\/a>',
        lessLink: '<a href="#">Close<\/a>',
        embedCSS: !0,
        sectionCSS: "display: block; width: 100%;",
        startOpen: !1,
        expandedClass: "readmore-js-expanded",
        collapsedClass: "readmore-js-collapsed",
        beforeToggle: function() {},
        afterToggle: function() {}
    }
      , u = !1;
    i.prototype = {
        init: function() {
            var t = this;
            n(this.element).each(function() {
                var i = n(this)
                  , r = i.css("max-height").replace(/[^-\d\.]/g, "") > i.data("max-height") ? i.css("max-height").replace(/[^-\d\.]/g, "") : i.data("max-height")
                  , u = i.data("height-margin");
                if ("none" != i.css("max-height") && i.css("max-height", "none"),
                t.setBoxHeight(i),
                i.outerHeight(!0) <= r + u)
                    return !0;
                i.addClass("readmore-js-section " + t.options.collapsedClass).data("collapsedHeight", r);
                i.after(n(t.options.startOpen ? t.options.lessLink : t.options.moreLink).on("click", function(n) {
                    t.toggleSlider(this, i, n)
                }).addClass("readmore-js-toggle"));
                t.options.startOpen || i.css({
                    height: r
                })
            });
            n(window).on("resize", function() {
                t.resizeBoxes()
            })
        },
        toggleSlider: function(t, i, r) {
            var u, f;
            r.preventDefault();
            u = this;
            r = newLink = sectionClass = "";
            f = !1;
            r = n(i).data("collapsedHeight");
            n(i).height() <= r ? (r = n(i).data("expandedHeight") + "px",
            newLink = "lessLink",
            f = !0,
            sectionClass = u.options.expandedClass) : (newLink = "moreLink",
            sectionClass = u.options.collapsedClass);
            u.options.beforeToggle(t, i, f);
            n(i).animate({
                height: r
            }, {
                duration: u.options.speed,
                complete: function() {
                    u.options.afterToggle(t, i, f);
                    n(t).replaceWith(n(u.options[newLink]).on("click", function(n) {
                        u.toggleSlider(this, i, n)
                    }).addClass("readmore-js-toggle"));
                    n(this).removeClass(u.options.collapsedClass + " " + u.options.expandedClass).addClass(sectionClass)
                }
            })
        },
        setBoxHeight: function(n) {
            var t = n.clone().css({
                height: "auto",
                width: n.width(),
                overflow: "hidden"
            }).insertAfter(n)
              , i = t.outerHeight(!0);
            t.remove();
            n.data("expandedHeight", i)
        },
        resizeBoxes: function() {
            var t = this;
            n(".readmore-js-section").each(function() {
                var i = n(this);
                t.setBoxHeight(i);
                (i.height() > i.data("expandedHeight") || i.hasClass(t.options.expandedClass) && i.height() < i.data("expandedHeight")) && i.css("height", i.data("expandedHeight"))
            })
        },
        destroy: function() {
            var t = this;
            n(this.element).each(function() {
                var i = n(this);
                i.removeClass("readmore-js-section " + t.options.collapsedClass + " " + t.options.expandedClass).css({
                    "max-height": "",
                    height: "auto"
                }).next(".readmore-js-toggle").remove();
                i.removeData()
            })
        }
    };
    n.fn[t] = function(r) {
        var u = arguments;
        return void 0 === r || "object" == typeof r ? this.each(function() {
            if (n.data(this, "plugin_" + t)) {
                var u = n.data(this, "plugin_" + t);
                u.destroy.apply(u)
            }
            n.data(this, "plugin_" + t, new i(this,r))
        }) : "string" == typeof r && "_" !== r[0] && "init" !== r ? this.each(function() {
            var f = n.data(this, "plugin_" + t);
            f instanceof i && "function" == typeof f[r] && f[r].apply(f, Array.prototype.slice.call(u, 1))
        }) : void 0
    }
}(jQuery);
/*! Fabric.js Copyright 2008-2013, Printio (Juriy Zaytsev, Maxim Chernyak) */
fabric = fabric || {
    version: "1.4.0"
};
typeof exports != "undefined" && (exports.fabric = fabric);
typeof document != "undefined" && typeof window != "undefined" ? (fabric.document = document,
fabric.window = window) : (fabric.document = require("jsdom").jsdom("<!DOCTYPE html><html><head><\/head><body><\/body><\/html>"),
fabric.window = fabric.document.createWindow());
fabric.isTouchSupported = "ontouchstart"in fabric.document.documentElement;
fabric.isLikelyNode = typeof Buffer != "undefined" && typeof window == "undefined";
fabric.SHARED_ATTRIBUTES = ["transform", "fill", "fill-opacity", "fill-rule", "opacity", "stroke", "stroke-dasharray", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width"],
function() {
    function n(n, t) {
        this.__eventListeners[n] && (t ? fabric.util.removeFromArray(this.__eventListeners[n], t) : this.__eventListeners[n].length = 0)
    }
    function t(n, t) {
        if (this.__eventListeners || (this.__eventListeners = {}),
        arguments.length === 1)
            for (var i in n)
                this.on(i, n[i]);
        else
            this.__eventListeners[n] || (this.__eventListeners[n] = []),
            this.__eventListeners[n].push(t);
        return this
    }
    function i(t, i) {
        if (this.__eventListeners) {
            if (arguments.length === 0)
                this.__eventListeners = {};
            else if (arguments.length === 1 && typeof arguments[0] == "object")
                for (var r in t)
                    n.call(this, r, t[r]);
            else
                n.call(this, t, i);
            return this
        }
    }
    function r(n, t) {
        var i, r, u;
        if (this.__eventListeners && (i = this.__eventListeners[n],
        i)) {
            for (r = 0,
            u = i.length; r < u; r++)
                i[r].call(this, t || {});
            return this
        }
    }
    fabric.Observable = {
        observe: t,
        stopObserving: i,
        fire: r,
        on: t,
        off: i,
        trigger: r
    }
}();
fabric.Collection = {
    add: function() {
        this._objects.push.apply(this._objects, arguments);
        for (var n = arguments.length; n--; )
            this._onObjectAdded(arguments[n]);
        return this.renderOnAddRemove && this.renderAll(),
        this
    },
    insertAt: function(n, t, i) {
        var r = this.getObjects();
        return i ? r[t] = n : r.splice(t, 0, n),
        this._onObjectAdded(n),
        this.renderOnAddRemove && this.renderAll(),
        this
    },
    remove: function(n) {
        var t = this.getObjects()
          , i = t.indexOf(n);
        return i !== -1 && (t.splice(i, 1),
        this._onObjectRemoved(n)),
        this.renderOnAddRemove && this.renderAll(),
        n
    },
    forEachObject: function(n, t) {
        for (var i = this.getObjects(), r = i.length; r--; )
            n.call(t, i[r], r, i);
        return this
    },
    getObjects: function(n) {
        return typeof n == "undefined" ? this._objects : this._objects.filter(function(t) {
            return t.type === n
        })
    },
    item: function(n) {
        return this.getObjects()[n]
    },
    isEmpty: function() {
        return this.getObjects().length === 0
    },
    size: function() {
        return this.getObjects().length
    },
    contains: function(n) {
        return this.getObjects().indexOf(n) > -1
    },
    complexity: function() {
        return this.getObjects().reduce(function(n, t) {
            return n += t.complexity ? t.complexity() : 0,
            n
        }, 0)
    }
},
function(n) {
    var i = Math.sqrt
      , r = Math.atan2
      , t = Math.PI / 180;
    fabric.util = {
        removeFromArray: function(n, t) {
            var i = n.indexOf(t);
            return i !== -1 && n.splice(i, 1),
            n
        },
        getRandomInt: function(n, t) {
            return Math.floor(Math.random() * (t - n + 1)) + n
        },
        degreesToRadians: function(n) {
            return n * t
        },
        radiansToDegrees: function(n) {
            return n / t
        },
        rotatePoint: function(n, t, i) {
            var r = Math.sin(i), u = Math.cos(i), f, e;
            return n.subtractEquals(t),
            f = n.x * u - n.y * r,
            e = n.x * r + n.y * u,
            new fabric.Point(f,e).addEquals(t)
        },
        toFixed: function(n, t) {
            return parseFloat(Number(n).toFixed(t))
        },
        falseFunction: function() {
            return !1
        },
        getKlass: function(n, t) {
            return n = fabric.util.string.camelize(n.charAt(0).toUpperCase() + n.slice(1)),
            fabric.util.resolveNamespace(t)[n]
        },
        resolveNamespace: function(t) {
            var i;
            if (!t)
                return fabric;
            var u = t.split(".")
              , f = u.length
              , r = n || fabric.window;
            for (i = 0; i < f; ++i)
                r = r[u[i]];
            return r
        },
        loadImage: function(n, t, i, r) {
            if (!n) {
                t && t.call(i, n);
                return
            }
            var u = fabric.util.createImage();
            u.onload = function() {
                t && t.call(i, u);
                u = u.onload = u.onerror = null
            }
            ;
            u.onerror = function() {
                fabric.log("Error loading " + u.src);
                t && t.call(i, null, !0);
                u = u.onload = u.onerror = null
            }
            ;
            n.indexOf("data") !== 0 && typeof r != "undefined" && (u.crossOrigin = r);
            u.src = n
        },
        enlivenObjects: function(n, t, i, r) {
            function f() {
                ++o === e && t && t(u)
            }
            n = n || [];
            var u = []
              , o = 0
              , e = n.length;
            if (!e) {
                t && t(u);
                return
            }
            n.forEach(function(n, t) {
                if (!n || !n.type) {
                    f();
                    return
                }
                var e = fabric.util.getKlass(n.type, i);
                e.async ? e.fromObject(n, function(i, e) {
                    e || (u[t] = i,
                    r && r(n, u[t]));
                    f()
                }) : (u[t] = e.fromObject(n),
                r && r(n, u[t]),
                f())
            })
        },
        groupSVGElements: function(n, t, i) {
            var r;
            return r = n.length > 1 ? new fabric.PathGroup(n,t) : n[0],
            typeof i != "undefined" && r.setSourcePath(i),
            r
        },
        populateWithProperties: function(n, t, i) {
            if (i && Object.prototype.toString.call(i) === "[object Array]")
                for (var r = 0, u = i.length; r < u; r++)
                    i[r]in n && (t[i[r]] = n[i[r]])
        },
        drawDashedLine: function(n, t, u, f, e, o) {
            var s = f - t
              , h = e - u
              , c = i(s * s + h * h)
              , a = r(h, s)
              , v = o.length
              , y = 0
              , l = !0;
            for (n.save(),
            n.translate(t, u),
            n.moveTo(0, 0),
            n.rotate(a),
            t = 0; c > t; )
                t += o[y++ % v],
                t > c && (t = c),
                n[l ? "lineTo" : "moveTo"](t, 0),
                l = !l;
            n.restore()
        },
        createCanvasElement: function(n) {
            return n || (n = fabric.document.createElement("canvas")),
            !n.getContext && typeof G_vmlCanvasManager != "undefined" && G_vmlCanvasManager.initElement(n),
            n
        },
        createImage: function() {
            return fabric.isLikelyNode ? new (require("canvas").Image) : fabric.document.createElement("img")
        },
        createAccessors: function(n) {
            for (var t = n.prototype, r = t.stateProperties.length; r--; ) {
                var i = t.stateProperties[r]
                  , u = i.charAt(0).toUpperCase() + i.slice(1)
                  , f = "set" + u
                  , e = "get" + u;
                t[e] || (t[e] = function(n) {
                    return new Function('return this.get("' + n + '")')
                }(i));
                t[f] || (t[f] = function(n) {
                    return new Function("value",'return this.set("' + n + '", value)')
                }(i))
            }
        },
        clipContext: function(n, t) {
            t.save();
            t.beginPath();
            n.clipTo(t);
            t.clip()
        },
        multiplyTransformMatrices: function(n, t) {
            for (var u, e, f, o = [[n[0], n[2], n[4]], [n[1], n[3], n[5]], [0, 0, 1]], s = [[t[0], t[2], t[4]], [t[1], t[3], t[5]], [0, 0, 1]], i = [], r = 0; r < 3; r++)
                for (i[r] = [],
                u = 0; u < 3; u++) {
                    for (e = 0,
                    f = 0; f < 3; f++)
                        e += o[r][f] * s[f][u];
                    i[r][u] = e
                }
            return [i[0][0], i[1][0], i[0][1], i[1][1], i[0][2], i[1][2]]
        },
        getFunctionBody: function(n) {
            return (String(n).match(/function[^{]*\{([\s\S]*)\}/) || {})[1]
        },
        normalizePoints: function(n, t) {
            var i = fabric.util.array.min(n, "x"), u = fabric.util.array.min(n, "y"), r, f;
            for (i = i < 0 ? i : 0,
            u = i < 0 ? u : 0,
            r = 0,
            f = n.length; r < f; r++)
                n[r].x -= t.width / 2 + i || 0,
                n[r].y -= t.height / 2 + u || 0
        },
        isTransparent: function(n, t, i, r) {
            var u, f, e, o, s;
            for (r > 0 && (t > r ? t -= r : t = 0,
            i > r ? i -= r : i = 0),
            u = !0,
            f = n.getImageData(t, i, r * 2 || 1, r * 2 || 1),
            e = 3,
            o = f.data.length; e < o; e += 4)
                if (s = f.data[e],
                u = s <= 0,
                u === !1)
                    break;
            return f = null,
            u
        }
    }
}(typeof exports != "undefined" ? exports : this),
function() {
    function u(t, u, e, o, s, h, c, l, a) {
        var w, b, k, p, it, rt;
        if (n = r.call(arguments),
        i[n])
            return i[n];
        var v = f(c, e, o, l, a, t, u)
          , ut = (v.x1 - v.x0) * (v.x1 - v.x0) + (v.y1 - v.y0) * (v.y1 - v.y0)
          , d = 1 / ut - .25;
        d < 0 && (d = 0);
        w = Math.sqrt(d);
        h === s && (w = -w);
        var g = .5 * (v.x0 + v.x1) - w * (v.y1 - v.y0)
          , nt = .5 * (v.y0 + v.y1) + w * (v.x1 - v.x0)
          , tt = Math.atan2(v.y0 - nt, v.x0 - g)
          , ft = Math.atan2(v.y1 - nt, v.x1 - g)
          , y = ft - tt;
        for (y < 0 && h === 1 ? y += 2 * Math.PI : y > 0 && h === 0 && (y -= 2 * Math.PI),
        b = Math.ceil(Math.abs(y / (Math.PI * .5 + .001))),
        k = [],
        p = 0; p < b; p++)
            it = tt + p * y / b,
            rt = tt + (p + 1) * y / b,
            k[p] = [g, nt, it, rt, e, o, v.sin_th, v.cos_th];
        return i[n] = k,
        k
    }
    function f(n, t, i, r, u, f, e) {
        var c = n * (Math.PI / 180)
          , o = Math.sin(c)
          , s = Math.cos(c);
        t = Math.abs(t);
        i = Math.abs(i);
        var l = s * (r - f) * .5 + o * (u - e) * .5
          , a = s * (u - e) * .5 - o * (r - f) * .5
          , h = l * l / (t * t) + a * a / (i * i);
        h > 1 && (h = Math.sqrt(h),
        t *= h,
        i *= h);
        var v = s / t
          , y = o / t
          , p = -o / i
          , w = s / i;
        return {
            x0: v * r + y * u,
            y0: p * r + w * u,
            x1: v * f + y * e,
            y1: p * f + w * e,
            sin_th: o,
            cos_th: s
        }
    }
    function e(i, u, f, e, o, s, h, c) {
        if (n = r.call(arguments),
        t[n])
            return t[n];
        var a = c * o
          , v = -h * s
          , y = h * o
          , p = c * s
          , w = .5 * (e - f)
          , l = 8 / 3 * Math.sin(w * .5) * Math.sin(w * .5) / Math.sin(w)
          , d = i + Math.cos(f) - l * Math.sin(f)
          , g = u + Math.sin(f) + l * Math.cos(f)
          , b = i + Math.cos(e)
          , k = u + Math.sin(e)
          , nt = b + l * Math.sin(e)
          , tt = k - l * Math.cos(e);
        return t[n] = [a * d + v * g, y * d + p * g, a * nt + v * tt, y * nt + p * tt, a * b + v * k, y * b + p * k],
        t[n]
    }
    var i = {}, t = {}, r = Array.prototype.join, n;
    fabric.util.drawArc = function(n, t, i, r) {
        for (var s, h = r[0], c = r[1], l = r[2], a = r[3], v = r[4], y = r[5], p = r[6], o = u(y, p, h, c, a, v, l, t, i), f = 0; f < o.length; f++)
            s = e.apply(this, o[f]),
            n.bezierCurveTo.apply(n, s)
    }
}(),
function() {
    function t(n, t) {
        for (var r = u.call(arguments, 2), f = [], i = 0, e = n.length; i < e; i++)
            f[i] = r.length ? n[i][t].apply(n[i], r) : n[i][t].call(n[i]);
        return f
    }
    function i(t, i) {
        return n(t, i, function(n, t) {
            return n >= t
        })
    }
    function r(t, i) {
        return n(t, i, function(n, t) {
            return n < t
        })
    }
    function n(n, t, i) {
        if (!n || n.length === 0)
            return undefined;
        var r = n.length - 1
          , u = t ? n[r][t] : n[r];
        if (t)
            while (r--)
                i(n[r][t], u) && (u = n[r][t]);
        else
            while (r--)
                i(n[r], u) && (u = n[r]);
        return u
    }
    var u = Array.prototype.slice;
    Array.prototype.indexOf || (Array.prototype.indexOf = function(n) {
        var u, r, t, i;
        if (this === void 0 || this === null)
            throw new TypeError;
        if ((u = Object(this),
        r = u.length >>> 0,
        r === 0) || (t = 0,
        arguments.length > 0 && (t = Number(arguments[1]),
        t !== t ? t = 0 : t !== 0 && t !== Number.POSITIVE_INFINITY && t !== Number.NEGATIVE_INFINITY && (t = (t > 0 || -1) * Math.floor(Math.abs(t)))),
        t >= r))
            return -1;
        for (i = t >= 0 ? t : Math.max(r - Math.abs(t), 0); i < r; i++)
            if (i in u && u[i] === n)
                return i;
        return -1
    }
    );
    Array.prototype.forEach || (Array.prototype.forEach = function(n, t) {
        for (var i = 0, r = this.length >>> 0; i < r; i++)
            i in this && n.call(t, this[i], i, this)
    }
    );
    Array.prototype.map || (Array.prototype.map = function(n, t) {
        for (var r = [], i = 0, u = this.length >>> 0; i < u; i++)
            i in this && (r[i] = n.call(t, this[i], i, this));
        return r
    }
    );
    Array.prototype.every || (Array.prototype.every = function(n, t) {
        for (var i = 0, r = this.length >>> 0; i < r; i++)
            if (i in this && !n.call(t, this[i], i, this))
                return !1;
        return !0
    }
    );
    Array.prototype.some || (Array.prototype.some = function(n, t) {
        for (var i = 0, r = this.length >>> 0; i < r; i++)
            if (i in this && n.call(t, this[i], i, this))
                return !0;
        return !1
    }
    );
    Array.prototype.filter || (Array.prototype.filter = function(n, t) {
        for (var u = [], r, i = 0, f = this.length >>> 0; i < f; i++)
            i in this && (r = this[i],
            n.call(t, r, i, this) && u.push(r));
        return u
    }
    );
    Array.prototype.reduce || (Array.prototype.reduce = function(n) {
        var r = this.length >>> 0, t = 0, i;
        if (arguments.length > 1)
            i = arguments[1];
        else
            do {
                if (t in this) {
                    i = this[t++];
                    break
                }
                if (++t >= r)
                    throw new TypeError;
            } while (1);for (; t < r; t++)
            t in this && (i = n.call(null, i, this[t], t, this));
        return i
    }
    );
    fabric.util.array = {
        invoke: t,
        min: r,
        max: i
    }
}(),
function() {
    function n(n, t) {
        for (var i in t)
            n[i] = t[i];
        return n
    }
    function t(t) {
        return n({}, t)
    }
    fabric.util.object = {
        extend: n,
        clone: t
    }
}(),
function() {
    function n(n) {
        return n.replace(/-+(.)?/g, function(n, t) {
            return t ? t.toUpperCase() : ""
        })
    }
    function t(n, t) {
        return n.charAt(0).toUpperCase() + (t ? n.slice(1) : n.slice(1).toLowerCase())
    }
    function i(n) {
        return n.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&apos;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
    }
    String.prototype.trim || (String.prototype.trim = function() {
        return this.replace(/^[\s\xA0]+/, "").replace(/[\s\xA0]+$/, "")
    }
    );
    fabric.util.string = {
        camelize: n,
        capitalize: t,
        escapeXml: i
    }
}(),
function() {
    var t = Array.prototype.slice
      , i = Function.prototype.apply
      , n = function() {};
    Function.prototype.bind || (Function.prototype.bind = function(r) {
        var f = this, e = t.call(arguments, 1), u;
        return u = e.length ? function() {
            return i.call(f, this instanceof n ? this : r, e.concat(t.call(arguments)))
        }
        : function() {
            return i.call(f, this instanceof n ? this : r, arguments)
        }
        ,
        n.prototype = this.prototype,
        u.prototype = new n,
        u
    }
    )
}(),
function() {
    function n() {}
    function i(n) {
        var i = this.constructor.superclass.prototype[n];
        return arguments.length > 1 ? i.apply(this, t.call(arguments, 1)) : i.call(this)
    }
    function r() {
        function r() {
            this.initialize.apply(this, arguments)
        }
        var f = null, o = t.call(arguments, 0), s, h;
        for (typeof o[0] == "function" && (f = o.shift()),
        r.superclass = f,
        r.subclasses = [],
        f && (n.prototype = f.prototype,
        r.prototype = new n,
        f.subclasses.push(r)),
        s = 0,
        h = o.length; s < h; s++)
            e(r, o[s], f);
        return r.prototype.initialize || (r.prototype.initialize = u),
        r.prototype.constructor = r,
        r.prototype.callSuper = i,
        r
    }
    var t = Array.prototype.slice
      , u = function() {}
      , f = function() {
        for (var n in {
            toString: 1
        })
            if (n === "toString")
                return !1;
        return !0
    }()
      , e = function(n, t, i) {
        for (var r in t)
            n.prototype[r] = r in n.prototype && typeof n.prototype[r] == "function" && (t[r] + "").indexOf("callSuper") > -1 ? function(n) {
                return function() {
                    var u = this.constructor.superclass, r;
                    return this.constructor.superclass = i,
                    r = t[n].apply(this, arguments),
                    this.constructor.superclass = u,
                    n !== "initialize" ? r : void 0
                }
            }(r) : t[r],
            f && (t.toString !== Object.prototype.toString && (n.prototype.toString = t.toString),
            t.valueOf !== Object.prototype.valueOf && (n.prototype.valueOf = t.valueOf))
    };
    fabric.util.createClass = r
}(),
function() {
    function i(n) {
        for (var i = Array.prototype.slice.call(arguments, 1), r, u = i.length, t = 0; t < u; t++)
            if (r = typeof n[i[t]],
            !/^(?:function|object|unknown)$/.test(r))
                return !1;
        return !0
    }
    function a(n, t) {
        return {
            handler: t,
            wrappedHandler: v(n, t)
        }
    }
    function v(n, t) {
        return function(i) {
            t.call(c(n), i || fabric.window.event)
        }
    }
    function y(t, i) {
        return function(r) {
            var f, u, e;
            if (n[t] && n[t][i])
                for (f = n[t][i],
                u = 0,
                e = f.length; u < e; u++)
                    f[u].call(this, r || fabric.window.event)
        }
    }
    function p(n, t) {
        n || (n = fabric.window.event);
        var r = n.target || (typeof n.srcElement !== e ? n.srcElement : null)
          , i = fabric.util.getScrollLeftTop(r, t);
        return {
            x: o(n) + i.left,
            y: s(n) + i.top
        }
    }
    function h(n, t, i) {
        var r = n.type === "touchend" ? "changedTouches" : "touches";
        return n[r] && n[r][0] ? n[r][0][t] - (n[r][0][t] - n[r][0][i]) || n[i] : n[i]
    }
    var e = "unknown", r = function() {
        var n = 0;
        return function(t) {
            return t.__uniqueID || (t.__uniqueID = "uniqueID__" + n++)
        }
    }(), c, l, o, s;
    (function() {
        var n = {};
        c = function(t) {
            return n[t]
        }
        ;
        l = function(t, i) {
            n[t] = i
        }
    }
    )();
    var w = i(fabric.document.documentElement, "addEventListener", "removeEventListener") && i(fabric.window, "addEventListener", "removeEventListener"), b = i(fabric.document.documentElement, "attachEvent", "detachEvent") && i(fabric.window, "attachEvent", "detachEvent"), t = {}, n = {}, u, f;
    w ? (u = function(n, t, i) {
        n.addEventListener(t, i, !1)
    }
    ,
    f = function(n, t, i) {
        n.removeEventListener(t, i, !1)
    }
    ) : b ? (u = function(n, i, u) {
        var f = r(n), e;
        l(f, n);
        t[f] || (t[f] = {});
        t[f][i] || (t[f][i] = []);
        e = a(f, u);
        t[f][i].push(e);
        n.attachEvent("on" + i, e.wrappedHandler)
    }
    ,
    f = function(n, i, u) {
        var f = r(n), o, e, s;
        if (t[f] && t[f][i])
            for (e = 0,
            s = t[f][i].length; e < s; e++)
                o = t[f][i][e],
                o && o.handler === u && (n.detachEvent("on" + i, o.wrappedHandler),
                t[f][i][e] = null)
    }
    ) : (u = function(t, i, u) {
        var f = r(t), e;
        n[f] || (n[f] = {});
        n[f][i] || (n[f][i] = [],
        e = t["on" + i],
        e && n[f][i].push(e),
        t["on" + i] = y(f, i));
        n[f][i].push(u)
    }
    ,
    f = function(t, i, u) {
        var o = r(t), e, f, s;
        if (n[o] && n[o][i])
            for (e = n[o][i],
            f = 0,
            s = e.length; f < s; f++)
                e[f] === u && e.splice(f, 1)
    }
    );
    fabric.util.addListener = u;
    fabric.util.removeListener = f;
    o = function(n) {
        return typeof n.clientX !== e ? n.clientX : 0
    }
    ;
    s = function(n) {
        return typeof n.clientY !== e ? n.clientY : 0
    }
    ;
    fabric.isTouchSupported && (o = function(n) {
        return h(n, "pageX", "clientX")
    }
    ,
    s = function(n) {
        return h(n, "pageY", "clientY")
    }
    );
    fabric.util.getPointer = p;
    fabric.util.object.extend(fabric.util, fabric.Observable)
}(),
function() {
    function r(t, i) {
        var u = t.style, r, f;
        if (!u)
            return t;
        if (typeof i == "string")
            return t.style.cssText += ";" + i,
            i.indexOf("opacity") > -1 ? n(t, i.match(/opacity:\s*(\d?\.?\d*)/)[1]) : t;
        for (r in i)
            r === "opacity" ? n(t, i[r]) : (f = r === "float" || r === "cssFloat" ? typeof u.styleFloat == "undefined" ? "cssFloat" : "styleFloat" : r,
            u[f] = i[r]);
        return t
    }
    var t = fabric.document.createElement("div")
      , u = typeof t.style.opacity == "string"
      , f = typeof t.style.filter == "string"
      , i = /alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/
      , n = function(n) {
        return n
    };
    u ? n = function(n, t) {
        return n.style.opacity = t,
        n
    }
    : f && (n = function(n, t) {
        var r = n.style;
        return n.currentStyle && !n.currentStyle.hasLayout && (r.zoom = 1),
        i.test(r.filter) ? (t = t >= .9999 ? "" : "alpha(opacity=" + t * 100 + ")",
        r.filter = r.filter.replace(i, t)) : r.filter += " alpha(opacity=" + t * 100 + ")",
        n
    }
    );
    fabric.util.setStyle = r
}(),
function() {
    function u(n) {
        return typeof n == "string" ? fabric.document.getElementById(n) : n
    }
    function t(n, t) {
        var r = fabric.document.createElement(n);
        for (var i in t)
            i === "class" ? r.className = t[i] : i === "for" ? r.htmlFor = t[i] : r.setAttribute(i, t[i]);
        return r
    }
    function f(n, t) {
        (" " + n.className + " ").indexOf(" " + t + " ") === -1 && (n.className += (n.className ? " " : "") + t)
    }
    function e(n, i, r) {
        return typeof i == "string" && (i = t(i, r)),
        n.parentNode && n.parentNode.replaceChild(i, n),
        i.appendChild(n),
        i
    }
    function o(n, t) {
        for (var u, i = 0, r = 0, e = fabric.document.documentElement, o = fabric.document.body || {
            scrollLeft: 0,
            scrollTop: 0
        }, f = n; n && n.parentNode && !u; )
            n = n.parentNode,
            n !== fabric.document && fabric.util.getElementStyle(n, "position") === "fixed" && (u = n),
            n !== fabric.document && f !== t && fabric.util.getElementStyle(n, "position") === "absolute" ? (i = 0,
            r = 0) : n === fabric.document ? (i = o.scrollLeft || e.scrollLeft || 0,
            r = o.scrollTop || e.scrollTop || 0) : (i += n.scrollLeft || 0,
            r += n.scrollTop || 0);
        return {
            left: i,
            top: r
        }
    }
    function s(n) {
        var t, r = {
            left: 0,
            top: 0
        }, o = n && n.ownerDocument, u = {
            left: 0,
            top: 0
        }, f, s = {
            borderLeftWidth: "left",
            borderTopWidth: "top",
            paddingLeft: "left",
            paddingTop: "top"
        }, e;
        if (!o)
            return {
                left: 0,
                top: 0
            };
        for (e in s)
            u[s[e]] += parseInt(i(n, e), 10) || 0;
        return t = o.documentElement,
        typeof n.getBoundingClientRect != "undefined" && (r = n.getBoundingClientRect()),
        f = fabric.util.getScrollLeftTop(n, null),
        {
            left: r.left + f.left - (t.clientLeft || 0) + u.left,
            top: r.top + f.top - (t.clientTop || 0) + u.top
        }
    }
    function i(n, t) {
        if (n.style || (n.style = {}),
        fabric.document.defaultView && fabric.document.defaultView.getComputedStyle)
            return fabric.document.defaultView.getComputedStyle(n, null)[t];
        var i = n.style[t];
        return !i && n.currentStyle && (i = n.currentStyle[t]),
        i
    }
    var h = Array.prototype.slice, n = function(n) {
        return h.call(n, 0)
    }, r;
    try {
        r = n(fabric.document.childNodes)instanceof Array
    } catch (c) {}
    r || (n = function(n) {
        for (var i = new Array(n.length), t = n.length; t--; )
            i[t] = n[t];
        return i
    }
    ),
    function() {
        function i(n) {
            return typeof n.onselectstart != "undefined" && (n.onselectstart = fabric.util.falseFunction),
            t ? n.style[t] = "none" : typeof n.unselectable == "string" && (n.unselectable = "on"),
            n
        }
        function r(n) {
            return typeof n.onselectstart != "undefined" && (n.onselectstart = null),
            t ? n.style[t] = "" : typeof n.unselectable == "string" && (n.unselectable = ""),
            n
        }
        var n = fabric.document.documentElement.style
          , t = "userSelect"in n ? "userSelect" : "MozUserSelect"in n ? "MozUserSelect" : "WebkitUserSelect"in n ? "WebkitUserSelect" : "KhtmlUserSelect"in n ? "KhtmlUserSelect" : "";
        fabric.util.makeElementUnselectable = i;
        fabric.util.makeElementSelectable = r
    }(),
    function() {
        function n(n, t) {
            var u = fabric.document.getElementsByTagName("head")[0]
              , i = fabric.document.createElement("script")
              , r = !0;
            i.onload = i.onreadystatechange = function(n) {
                if (r) {
                    if (typeof this.readyState == "string" && this.readyState !== "loaded" && this.readyState !== "complete")
                        return;
                    r = !1;
                    t(n || fabric.window.event);
                    i = i.onload = i.onreadystatechange = null
                }
            }
            ;
            i.src = n;
            u.appendChild(i)
        }
        fabric.util.getScript = n
    }();
    fabric.util.getById = u;
    fabric.util.toArray = n;
    fabric.util.makeElement = t;
    fabric.util.addClass = f;
    fabric.util.wrapElement = e;
    fabric.util.getScrollLeftTop = o;
    fabric.util.getElementOffset = s;
    fabric.util.getElementStyle = i
}(),
function() {
    function n(n, t) {
        return n + (/\?/.test(n) ? "&" : "?") + t
    }
    function t() {}
    function i(i, u) {
        u || (u = {});
        var e = u.method ? u.method.toUpperCase() : "GET", s = u.onComplete || function() {}
        , f = r(), o;
        return f.onreadystatechange = function() {
            f.readyState === 4 && (s(f),
            f.onreadystatechange = t)
        }
        ,
        e === "GET" && (o = null,
        typeof u.parameters == "string" && (i = n(i, u.parameters))),
        f.open(e, i, !0),
        (e === "POST" || e === "PUT") && f.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
        f.send(o),
        f
    }
    var r = function() {
        for (var i, n = [function() {
            return new ActiveXObject("Microsoft.XMLHTTP")
        }
        , function() {
            return new ActiveXObject("Msxml2.XMLHTTP")
        }
        , function() {
            return new ActiveXObject("Msxml2.XMLHTTP.3.0")
        }
        , function() {
            return new XMLHttpRequest
        }
        ], t = n.length; t--; )
            try {
                if (i = n[t](),
                i)
                    return n[t]
            } catch (r) {}
    }();
    fabric.util.request = i
}();
fabric.log = function() {}
;
fabric.warn = function() {}
;
typeof console != "undefined" && ["log", "warn"].forEach(function(n) {
    typeof console[n] != "undefined" && console[n].apply && (fabric[n] = function() {
        return console[n].apply(console, arguments)
    }
    )
}),
function() {
    function t(t) {
        n(function(i) {
            t || (t = {});
            var u = i || +new Date, f = t.duration || 500, e = u + f, r, s = t.onChange || function() {}
            , h = t.abort || function() {
                return !1
            }
            , c = t.easing || function(n, t, i, r) {
                return -i * Math.cos(n / r * (Math.PI / 2)) + i + t
            }
            , o = "startValue"in t ? t.startValue : 0, l = "endValue"in t ? t.endValue : 100, a = t.byValue || l - o;
            t.onStart && t.onStart(),
            function v(i) {
                r = i || +new Date;
                var l = r > e ? f : r - u;
                if (h()) {
                    t.onComplete && t.onComplete();
                    return
                }
                if (s(c(l, o, a, f)),
                r > e) {
                    t.onComplete && t.onComplete();
                    return
                }
                n(v)
            }(u)
        })
    }
    var i = fabric.window.requestAnimationFrame || fabric.window.webkitRequestAnimationFrame || fabric.window.mozRequestAnimationFrame || fabric.window.oRequestAnimationFrame || fabric.window.msRequestAnimationFrame || function(n) {
        fabric.window.setTimeout(n, 1e3 / 60)
    }
      , n = function() {
        return i.apply(fabric.window, arguments)
    };
    fabric.util.animate = t;
    fabric.util.requestAnimFrame = n
}(),
function() {
    function n(n, t, i, r) {
        return n < Math.abs(t) ? (n = t,
        r = i / 4) : r = i / (2 * Math.PI) * Math.asin(t / n),
        {
            a: n,
            c: t,
            p: i,
            s: r
        }
    }
    function i(n, t, i) {
        return n.a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * i - n.s) * 2 * Math.PI / n.p)
    }
    function u(n, t, i, r) {
        return i * ((n = n / r - 1) * n * n + 1) + t
    }
    function f(n, t, i, r) {
        return n /= r / 2,
        n < 1 ? i / 2 * n * n * n + t : i / 2 * ((n -= 2) * n * n + 2) + t
    }
    function e(n, t, i, r) {
        return i * (n /= r) * n * n * n + t
    }
    function o(n, t, i, r) {
        return -i * ((n = n / r - 1) * n * n * n - 1) + t
    }
    function s(n, t, i, r) {
        return n /= r / 2,
        n < 1 ? i / 2 * n * n * n * n + t : -i / 2 * ((n -= 2) * n * n * n - 2) + t
    }
    function h(n, t, i, r) {
        return i * (n /= r) * n * n * n * n + t
    }
    function c(n, t, i, r) {
        return i * ((n = n / r - 1) * n * n * n * n + 1) + t
    }
    function l(n, t, i, r) {
        return n /= r / 2,
        n < 1 ? i / 2 * n * n * n * n * n + t : i / 2 * ((n -= 2) * n * n * n * n + 2) + t
    }
    function a(n, t, i, r) {
        return -i * Math.cos(n / r * (Math.PI / 2)) + i + t
    }
    function v(n, t, i, r) {
        return i * Math.sin(n / r * (Math.PI / 2)) + t
    }
    function y(n, t, i, r) {
        return -i / 2 * (Math.cos(Math.PI * n / r) - 1) + t
    }
    function p(n, t, i, r) {
        return n === 0 ? t : i * Math.pow(2, 10 * (n / r - 1)) + t
    }
    function w(n, t, i, r) {
        return n === r ? t + i : i * (-Math.pow(2, -10 * n / r) + 1) + t
    }
    function b(n, t, i, r) {
        return n === 0 ? t : n === r ? t + i : (n /= r / 2,
        n < 1 ? i / 2 * Math.pow(2, 10 * (n - 1)) + t : i / 2 * (-Math.pow(2, -10 * --n) + 2) + t)
    }
    function k(n, t, i, r) {
        return -i * (Math.sqrt(1 - (n /= r) * n) - 1) + t
    }
    function d(n, t, i, r) {
        return i * Math.sqrt(1 - (n = n / r - 1) * n) + t
    }
    function g(n, t, i, r) {
        return n /= r / 2,
        n < 1 ? -i / 2 * (Math.sqrt(1 - n * n) - 1) + t : i / 2 * (Math.sqrt(1 - (n -= 2) * n) + 1) + t
    }
    function nt(t, r, u, f) {
        var e = 0, s = u, o;
        return t === 0 ? r : (t /= f,
        t === 1) ? r + u : (e || (e = f * .3),
        o = n(s, u, e, 1.70158),
        -i(o, t, f) + r)
    }
    function tt(t, i, r, u) {
        var e = 0, o = r, f;
        return t === 0 ? i : (t /= u,
        t === 1) ? i + r : (e || (e = u * .3),
        f = n(o, r, e, 1.70158),
        f.a * Math.pow(2, -10 * t) * Math.sin((t * u - f.s) * 2 * Math.PI / f.p) + f.c + i)
    }
    function it(t, r, u, f) {
        var o = 0, s = u, e;
        return t === 0 ? r : (t /= f / 2,
        t === 2) ? r + u : (o || (o = f * .3 * 1.5),
        e = n(s, u, o, 1.70158),
        t < 1 ? -.5 * i(e, t, f) + r : e.a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * f - e.s) * 2 * Math.PI / e.p) * .5 + e.c + r)
    }
    function rt(n, t, i, r, u) {
        return u === undefined && (u = 1.70158),
        i * (n /= r) * n * ((u + 1) * n - u) + t
    }
    function ut(n, t, i, r, u) {
        return u === undefined && (u = 1.70158),
        i * ((n = n / r - 1) * n * ((u + 1) * n + u) + 1) + t
    }
    function ft(n, t, i, r, u) {
        return u === undefined && (u = 1.70158),
        n /= r / 2,
        n < 1 ? i / 2 * n * n * (((u *= 1.525) + 1) * n - u) + t : i / 2 * ((n -= 2) * n * (((u *= 1.525) + 1) * n + u) + 2) + t
    }
    function r(n, i, r, u) {
        return r - t(u - n, 0, r, u) + i
    }
    function t(n, t, i, r) {
        return (n /= r) < 1 / 2.75 ? i * 7.5625 * n * n + t : n < 2 / 2.75 ? i * (7.5625 * (n -= 1.5 / 2.75) * n + .75) + t : n < 2.5 / 2.75 ? i * (7.5625 * (n -= 2.25 / 2.75) * n + .9375) + t : i * (7.5625 * (n -= 2.625 / 2.75) * n + .984375) + t
    }
    function et(n, i, u, f) {
        return n < f / 2 ? r(n * 2, 0, u, f) * .5 + i : t(n * 2 - f, 0, u, f) * .5 + u * .5 + i
    }
    fabric.util.ease = {
        easeInQuad: function(n, t, i, r) {
            return i * (n /= r) * n + t
        },
        easeOutQuad: function(n, t, i, r) {
            return -i * (n /= r) * (n - 2) + t
        },
        easeInOutQuad: function(n, t, i, r) {
            return n /= r / 2,
            n < 1 ? i / 2 * n * n + t : -i / 2 * (--n * (n - 2) - 1) + t
        },
        easeInCubic: function(n, t, i, r) {
            return i * (n /= r) * n * n + t
        },
        easeOutCubic: u,
        easeInOutCubic: f,
        easeInQuart: e,
        easeOutQuart: o,
        easeInOutQuart: s,
        easeInQuint: h,
        easeOutQuint: c,
        easeInOutQuint: l,
        easeInSine: a,
        easeOutSine: v,
        easeInOutSine: y,
        easeInExpo: p,
        easeOutExpo: w,
        easeInOutExpo: b,
        easeInCirc: k,
        easeOutCirc: d,
        easeInOutCirc: g,
        easeInElastic: nt,
        easeOutElastic: tt,
        easeInOutElastic: it,
        easeInBack: rt,
        easeOutBack: ut,
        easeInOutBack: ft,
        easeInBounce: r,
        easeOutBounce: t,
        easeInOutBounce: et
    }
}(),
function(n) {
    "use strict";
    function f(n) {
        return n in h ? h[n] : n
    }
    function e(n, i, r) {
        var u, f;
        return n !== "fill" && n !== "stroke" || i !== "none" ? n === "fillRule" ? i = i === "evenodd" ? "destination-over" : i : n === "strokeDashArray" ? i = i.replace(/,/g, " ").split(/\s+/) : n === "transformMatrix" && (i = r && r.transformMatrix ? k(r.transformMatrix, t.parseTransformAttribute(i)) : t.parseTransformAttribute(i)) : i = "",
        u = Object.prototype.toString.call(i) === "[object Array]",
        f = u ? i.map(parseFloat) : parseFloat(i),
        !u && isNaN(f) ? i : f
    }
    function c(n) {
        var i, u;
        for (i in r)
            n[i] && typeof n[r[i]] != "undefined" && n[i].indexOf("url(") !== 0 && (u = new t.Color(n[i]),
            n[i] = u.setAlpha(b(u.getAlpha() * n[r[i]], 2)).toRgba(),
            delete n[r[i]]);
        return n
    }
    function o(n, t) {
        var i = n.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);
        if (i) {
            var f = i[1]
              , r = i[3]
              , e = i[4]
              , u = i[5]
              , o = i[6];
            f && (t.fontStyle = f);
            r && (t.fontSize = isNaN(parseFloat(r)) ? r : parseFloat(r));
            e && (t.fontSize = parseFloat(e));
            o && (t.fontFamily = o);
            u && (t.lineHeight = u === "normal" ? 1 : u)
        }
    }
    function l(n, t) {
        var i, r;
        n.replace(/;$/, "").split(";").forEach(function(n) {
            var u = n.split(":");
            i = f(u[0].trim().toLowerCase());
            r = e(i, u[1].trim());
            i === "font" ? o(r, t) : t[i] = r
        })
    }
    function a(n, t) {
        var i, r;
        for (var u in n)
            typeof n[u] != "undefined" && (i = f(u.toLowerCase()),
            r = e(i, n[u]),
            i === "font" ? o(r, t) : t[i] = r)
    }
    function v(n) {
        var s = n.nodeName, u = n.getAttribute("class"), f = n.getAttribute("id"), e = {}, i, o, r;
        for (i in t.cssRules)
            if (o = u && new RegExp("^\\." + u).test(i) || f && new RegExp("^#" + f).test(i) || new RegExp("^" + s).test(i),
            o)
                for (r in t.cssRules[i])
                    e[r] = t.cssRules[i][r];
        return e
    }
    function y(n) {
        var i = n.objects
          , r = n.options;
        return i = i.map(function(n) {
            return t[p(n.type)].fromObject(n)
        }),
        {
            objects: i,
            options: r
        }
    }
    function s(n, t, i) {
        t[i] && t[i].toSVG && n.push('<pattern x="0" y="0" id="', i, 'Pattern" ', 'width="', t[i].source.width, '" height="', t[i].source.height, '" patternUnits="userSpaceOnUse">', '<image x="0" y="0" ', 'width="', t[i].source.width, '" height="', t[i].source.height, '" xlink:href="', t[i].source.src, '"><\/image><\/pattern>')
    }
    var t = n.fabric || (n.fabric = {}), i = t.util.object.extend, p = t.util.string.capitalize, w = t.util.object.clone, b = t.util.toFixed, k = t.util.multiplyTransformMatrices, h = {
        "fill-opacity": "fillOpacity",
        "fill-rule": "fillRule",
        "font-family": "fontFamily",
        "font-size": "fontSize",
        "font-style": "fontStyle",
        "font-weight": "fontWeight",
        cx: "left",
        x: "left",
        r: "radius",
        "stroke-dasharray": "strokeDashArray",
        "stroke-linecap": "strokeLineCap",
        "stroke-linejoin": "strokeLineJoin",
        "stroke-miterlimit": "strokeMiterLimit",
        "stroke-opacity": "strokeOpacity",
        "stroke-width": "strokeWidth",
        "text-decoration": "textDecoration",
        cy: "top",
        y: "top",
        transform: "transformMatrix"
    }, r = {
        stroke: "strokeOpacity",
        fill: "fillOpacity"
    }, u;
    t.parseTransformAttribute = function() {
        function f(n, t) {
            var i = t[0];
            n[0] = Math.cos(i);
            n[1] = Math.sin(i);
            n[2] = -Math.sin(i);
            n[3] = Math.cos(i)
        }
        function e(n, t) {
            var i = t[0]
              , r = t.length === 2 ? t[1] : t[0];
            n[0] = i;
            n[3] = r
        }
        function o(n, t) {
            n[2] = t[0]
        }
        function s(n, t) {
            n[1] = t[0]
        }
        function h(n, t) {
            n[4] = t[0];
            t.length === 2 && (n[5] = t[1])
        }
        var u = [1, 0, 0, 1, 0, 0]
          , n = "(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)"
          , i = "(?:\\s+,?\\s*|,\\s*)"
          , c = "(?:(skewX)\\s*\\(\\s*(" + n + ")\\s*\\))"
          , l = "(?:(skewY)\\s*\\(\\s*(" + n + ")\\s*\\))"
          , a = "(?:(rotate)\\s*\\(\\s*(" + n + ")(?:" + i + "(" + n + ")" + i + "(" + n + "))?\\s*\\))"
          , v = "(?:(scale)\\s*\\(\\s*(" + n + ")(?:" + i + "(" + n + "))?\\s*\\))"
          , y = "(?:(translate)\\s*\\(\\s*(" + n + ")(?:" + i + "(" + n + "))?\\s*\\))"
          , p = "(?:(matrix)\\s*\\(\\s*(" + n + ")" + i + "(" + n + ")" + i + "(" + n + ")" + i + "(" + n + ")" + i + "(" + n + ")" + i + "(" + n + ")\\s*\\))"
          , r = "(?:" + p + "|" + y + "|" + v + "|" + a + "|" + c + "|" + l + ")"
          , w = "(?:" + r + "(?:" + i + r + ")*)"
          , b = "^\\s*(?:" + w + "?)\\s*$"
          , k = new RegExp(b)
          , d = new RegExp(r,"g");
        return function(n) {
            var i = u.concat(), c = [], l;
            if (!n || n && !k.test(n))
                return i;
            for (n.replace(d, function(n) {
                var l = new RegExp(r).exec(n).filter(function(n) {
                    return n !== "" && n != null
                })
                  , a = l[1]
                  , t = l.slice(2).map(parseFloat);
                switch (a) {
                case "translate":
                    h(i, t);
                    break;
                case "rotate":
                    f(i, t);
                    break;
                case "scale":
                    e(i, t);
                    break;
                case "skewX":
                    o(i, t);
                    break;
                case "skewY":
                    s(i, t);
                    break;
                case "matrix":
                    i = t
                }
                c.push(i.concat());
                i = u.concat()
            }),
            l = c[0]; c.length > 1; )
                c.shift(),
                l = t.util.multiplyTransformMatrices(l, c[0]);
            return l
        }
    }();
    t.parseSVGDocument = function() {
        function i(n, t) {
            while (n && (n = n.parentNode))
                if (t.test(n.nodeName))
                    return !0;
            return !1
        }
        var r = /^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/
          , n = "(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)"
          , u = new RegExp("^\\s*(" + n + "+)\\s*,?\\s*(" + n + "+)\\s*,?\\s*(" + n + "+)\\s*,?\\s*(" + n + "+)\\s*$");
        return function(n, f, e) {
            var p, o, v, h, b, c, y;
            if (n) {
                if (p = new Date,
                o = t.util.toArray(n.getElementsByTagName("*")),
                o.length === 0) {
                    for (o = n.selectNodes("//*[name(.)!='svg']"),
                    v = [],
                    h = 0,
                    b = o.length; h < b; h++)
                        v[h] = o[h];
                    o = v
                }
                if (c = o.filter(function(n) {
                    return r.test(n.tagName) && !i(n, /^(?:pattern|defs)$/)
                }),
                c && (!c || c.length)) {
                    var s = n.getAttribute("viewBox"), k = n.getAttribute("width"), d = n.getAttribute("height"), l = null, a = null, g, nt;
                    s && (s = s.match(u)) && (g = parseInt(s[1], 10),
                    nt = parseInt(s[2], 10),
                    l = parseInt(s[3], 10),
                    a = parseInt(s[4], 10));
                    l = k ? parseFloat(k) : l;
                    a = d ? parseFloat(d) : a;
                    y = {
                        width: l,
                        height: a
                    };
                    t.gradientDefs = t.getGradientDefs(n);
                    t.cssRules = t.getCSSRules(n);
                    t.parseElements(c, function(n) {
                        t.documentParsingTime = new Date - p;
                        f && f(n, y)
                    }, w(y), e)
                }
            }
        }
    }();
    u = {
        has: function(n, t) {
            t(!1)
        },
        get: function() {},
        set: function() {}
    };
    i(t, {
        resolveGradients: function(n) {
            for (var r, u, i = n.length; i--; )
                (r = n[i].get("fill"),
                /^url\(/.test(r)) && (u = r.slice(5, r.length - 1),
                t.gradientDefs[u] && n[i].set("fill", t.Gradient.fromElement(t.gradientDefs[u], n[i])))
        },
        getGradientDefs: function(n) {
            for (var u = n.getElementsByTagName("linearGradient"), f = n.getElementsByTagName("radialGradient"), t, r = {}, i = u.length; i--; )
                t = u[i],
                r[t.getAttribute("id")] = t;
            for (i = f.length; i--; )
                t = f[i],
                r[t.getAttribute("id")] = t;
            return r
        },
        parseAttributes: function(n, r) {
            var u, o, s;
            if (n)
                return o = {},
                n.parentNode && /^g$/i.test(n.parentNode.nodeName) && (o = t.parseAttributes(n.parentNode, r)),
                s = r.reduce(function(t, i) {
                    return u = n.getAttribute(i),
                    u && (i = f(i),
                    u = e(i, u, o),
                    t[i] = u),
                    t
                }, {}),
                s = i(s, i(v(n), t.parseStyleAttribute(n))),
                c(i(o, s))
        },
        parseElements: function(n, i, r, u) {
            t.ElementsParser.parse(n, i, r, u)
        },
        parseStyleAttribute: function(n) {
            var t = {}
              , i = n.getAttribute("style");
            return i ? (typeof i == "string" ? l(i, t) : a(i, t),
            t) : t
        },
        parsePointsAttribute: function(n) {
            var f, i, t, r, u;
            if (!n)
                return null;
            if (n = n.trim(),
            f = n.indexOf(",") > -1,
            n = n.split(/\s+/),
            i = [],
            f)
                for (t = 0,
                r = n.length; t < r; t++)
                    u = n[t].split(","),
                    i.push({
                        x: parseFloat(u[0]),
                        y: parseFloat(u[1])
                    });
            else
                for (t = 0,
                r = n.length; t < r; t += 2)
                    i.push({
                        x: parseFloat(n[t]),
                        y: parseFloat(n[t + 1])
                    });
            return i.length % 2 != 0,
            i
        },
        getCSSRules: function(n) {
            for (var r, u = n.getElementsByTagName("style"), t = {}, i, f = 0, e = u.length; f < e; f++)
                r = u[0].textContent,
                r = r.replace(/\/\*[\s\S]*?\*\//g, ""),
                i = r.match(/[^{]*\{[\s\S]*?\}/g),
                i = i.map(function(n) {
                    return n.trim()
                }),
                i.forEach(function(n) {
                    var u = n.match(/([\s\S]*?)\s*\{([^}]*)\}/), f, r, i, e;
                    for (n = u[1],
                    f = u[2].trim(),
                    r = f.replace(/;$/, "").split(/\s*;\s*/),
                    t[n] || (t[n] = {}),
                    i = 0,
                    e = r.length; i < e; i++) {
                        var o = r[i].split(/\s*:\s*/)
                          , s = o[0]
                          , h = o[1];
                        t[n][s] = h
                    }
                });
            return t
        },
        loadSVGFromURL: function(n, i, r) {
            function f(f) {
                var e = f.responseXML;
                (!e.documentElement && t.window.ActiveXObject && f.responseText && (e = new ActiveXObject("Microsoft.XMLDOM"),
                e.async = "false",
                e.loadXML(f.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, ""))),
                e.documentElement) && t.parseSVGDocument(e.documentElement, function(r, f) {
                    u.set(n, {
                        objects: t.util.array.invoke(r, "toObject"),
                        options: f
                    });
                    i(r, f)
                }, r)
            }
            n = n.replace(/^\n\s*/, "").trim();
            u.has(n, function(r) {
                r ? u.get(n, function(n) {
                    var t = y(n);
                    i(t.objects, t.options)
                }) : new t.util.request(n,{
                    method: "get",
                    onComplete: f
                })
            })
        },
        loadSVGFromString: function(n, i, r) {
            var u, f;
            n = n.trim();
            typeof DOMParser != "undefined" ? (f = new DOMParser,
            f && f.parseFromString && (u = f.parseFromString(n, "text/xml"))) : t.window.ActiveXObject && (u = new ActiveXObject("Microsoft.XMLDOM"),
            u.async = "false",
            u.loadXML(n.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i, "")));
            t.parseSVGDocument(u.documentElement, function(n, t) {
                i(n, t)
            }, r)
        },
        createSVGFontFacesMarkup: function(n) {
            for (var i = "", t = 0, r = n.length; t < r; t++)
                n[t].type === "text" && n[t].path && (i += ["@font-face {", "font-family: ", n[t].fontFamily, "; ", "src: url('", n[t].path, "')", "}"].join(""));
            return i && (i = ['<style type="text/css">', "<![CDATA[", i, "]\]>", "<\/style>"].join("")),
            i
        },
        createSVGRefElementsMarkup: function(n) {
            var t = [];
            return s(t, n, "backgroundColor"),
            s(t, n, "overlayColor"),
            t.join("")
        }
    })
}(typeof exports != "undefined" ? exports : this);
fabric.ElementsParser = {
    parse: function(n, t, i, r) {
        this.elements = n;
        this.callback = t;
        this.options = i;
        this.reviver = r;
        this.instances = new Array(n.length);
        this.numElements = n.length;
        this.createObjects()
    },
    createObjects: function() {
        for (var n = 0, t = this.elements.length; n < t; n++)
            this.createObject(this.elements[n], n)
    },
    createObject: function(n, t) {
        var i = fabric[fabric.util.string.capitalize(n.tagName)];
        if (i && i.fromElement)
            try {
                this._createObject(i, n, t)
            } catch (r) {
                fabric.log(r)
            }
        else
            this.checkIfDone()
    },
    _createObject: function(n, t, i) {
        if (n.async)
            n.fromElement(t, this.createCallback(i, t), this.options);
        else {
            var r = n.fromElement(t, this.options);
            this.reviver && this.reviver(t, r);
            this.instances.splice(i, 0, r);
            this.checkIfDone()
        }
    },
    createCallback: function(n, t) {
        var i = this;
        return function(r) {
            i.reviver && i.reviver(t, r);
            i.instances.splice(n, 0, r);
            i.checkIfDone()
        }
    },
    checkIfDone: function() {
        --this.numElements == 0 && (this.instances = this.instances.filter(function(n) {
            return n != null
        }),
        fabric.resolveGradients(this.instances),
        this.callback(this.instances))
    }
},
function(n) {
    "use strict";
    function t(n, t) {
        this.x = n;
        this.y = t
    }
    var i = n.fabric || (n.fabric = {});
    if (i.Point) {
        i.warn("fabric.Point is already defined");
        return
    }
    i.Point = t;
    t.prototype = {
        constructor: t,
        add: function(n) {
            return new t(this.x + n.x,this.y + n.y)
        },
        addEquals: function(n) {
            return this.x += n.x,
            this.y += n.y,
            this
        },
        scalarAdd: function(n) {
            return new t(this.x + n,this.y + n)
        },
        scalarAddEquals: function(n) {
            return this.x += n,
            this.y += n,
            this
        },
        subtract: function(n) {
            return new t(this.x - n.x,this.y - n.y)
        },
        subtractEquals: function(n) {
            return this.x -= n.x,
            this.y -= n.y,
            this
        },
        scalarSubtract: function(n) {
            return new t(this.x - n,this.y - n)
        },
        scalarSubtractEquals: function(n) {
            return this.x -= n,
            this.y -= n,
            this
        },
        multiply: function(n) {
            return new t(this.x * n,this.y * n)
        },
        multiplyEquals: function(n) {
            return this.x *= n,
            this.y *= n,
            this
        },
        divide: function(n) {
            return new t(this.x / n,this.y / n)
        },
        divideEquals: function(n) {
            return this.x /= n,
            this.y /= n,
            this
        },
        eq: function(n) {
            return this.x === n.x && this.y === n.y
        },
        lt: function(n) {
            return this.x < n.x && this.y < n.y
        },
        lte: function(n) {
            return this.x <= n.x && this.y <= n.y
        },
        gt: function(n) {
            return this.x > n.x && this.y > n.y
        },
        gte: function(n) {
            return this.x >= n.x && this.y >= n.y
        },
        lerp: function(n, i) {
            return new t(this.x + (n.x - this.x) * i,this.y + (n.y - this.y) * i)
        },
        distanceFrom: function(n) {
            var t = this.x - n.x
              , i = this.y - n.y;
            return Math.sqrt(t * t + i * i)
        },
        midPointFrom: function(n) {
            return new t(this.x + (n.x - this.x) / 2,this.y + (n.y - this.y) / 2)
        },
        min: function(n) {
            return new t(Math.min(this.x, n.x),Math.min(this.y, n.y))
        },
        max: function(n) {
            return new t(Math.max(this.x, n.x),Math.max(this.y, n.y))
        },
        toString: function() {
            return this.x + "," + this.y
        },
        setXY: function(n, t) {
            this.x = n;
            this.y = t
        },
        setFromPoint: function(n) {
            this.x = n.x;
            this.y = n.y
        },
        swap: function(n) {
            var t = this.x
              , i = this.y;
            this.x = n.x;
            this.y = n.y;
            n.x = t;
            n.y = i
        }
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    function t(n) {
        this.status = n;
        this.points = []
    }
    var i = n.fabric || (n.fabric = {});
    if (i.Intersection) {
        i.warn("fabric.Intersection is already defined");
        return
    }
    i.Intersection = t;
    i.Intersection.prototype = {
        appendPoint: function(n) {
            this.points.push(n)
        },
        appendPoints: function(n) {
            this.points = this.points.concat(n)
        }
    };
    i.Intersection.intersectLineLine = function(n, r, u, f) {
        var e, c = (f.x - u.x) * (n.y - u.y) - (f.y - u.y) * (n.x - u.x), l = (r.x - n.x) * (n.y - u.y) - (r.y - n.y) * (n.x - u.x), s = (f.y - u.y) * (r.x - n.x) - (f.x - u.x) * (r.y - n.y), o, h;
        return s !== 0 ? (o = c / s,
        h = l / s,
        0 <= o && o <= 1 && 0 <= h && h <= 1 ? (e = new t("Intersection"),
        e.points.push(new i.Point(n.x + o * (r.x - n.x),n.y + o * (r.y - n.y)))) : e = new t) : e = c === 0 || l === 0 ? new t("Coincident") : new t("Parallel"),
        e
    }
    ;
    i.Intersection.intersectLinePolygon = function(n, i, r) {
        for (var u = new t, e = r.length, f = 0; f < e; f++) {
            var o = r[f]
              , s = r[(f + 1) % e]
              , h = t.intersectLineLine(n, i, o, s);
            u.appendPoints(h.points)
        }
        return u.points.length > 0 && (u.status = "Intersection"),
        u
    }
    ;
    i.Intersection.intersectPolygonPolygon = function(n, i) {
        for (var r = new t, f = n.length, u = 0; u < f; u++) {
            var e = n[u]
              , o = n[(u + 1) % f]
              , s = t.intersectLinePolygon(e, o, i);
            r.appendPoints(s.points)
        }
        return r.points.length > 0 && (r.status = "Intersection"),
        r
    }
    ;
    i.Intersection.intersectPolygonRectangle = function(n, r, u) {
        var e = r.min(u)
          , o = r.max(u)
          , s = new i.Point(o.x,e.y)
          , h = new i.Point(e.x,o.y)
          , c = t.intersectLinePolygon(e, s, n)
          , l = t.intersectLinePolygon(s, o, n)
          , a = t.intersectLinePolygon(o, h, n)
          , v = t.intersectLinePolygon(h, e, n)
          , f = new t;
        return f.appendPoints(c.points),
        f.appendPoints(l.points),
        f.appendPoints(a.points),
        f.appendPoints(v.points),
        f.points.length > 0 && (f.status = "Intersection"),
        f
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    function t(n) {
        n ? this._tryParsingColor(n) : this.setSource([0, 0, 0, 1])
    }
    function r(n, t, i) {
        return i < 0 && (i += 1),
        i > 1 && (i -= 1),
        i < 1 / 6 ? n + (t - n) * 6 * i : i < .5 ? t : i < 2 / 3 ? n + (t - n) * (2 / 3 - i) * 6 : n
    }
    var i = n.fabric || (n.fabric = {});
    if (i.Color) {
        i.warn("fabric.Color is already defined.");
        return
    }
    i.Color = t;
    i.Color.prototype = {
        _tryParsingColor: function(n) {
            var i;
            n in t.colorNameMap && (n = t.colorNameMap[n]);
            i = t.sourceFromHex(n);
            i || (i = t.sourceFromRgb(n));
            i || (i = t.sourceFromHsl(n));
            i && this.setSource(i)
        },
        _rgbToHsl: function(n, t, r) {
            var f, s, h, u, e, o;
            if (n /= 255,
            t /= 255,
            r /= 255,
            u = i.util.array.max([n, t, r]),
            e = i.util.array.min([n, t, r]),
            h = (u + e) / 2,
            u === e)
                f = s = 0;
            else {
                o = u - e;
                s = h > .5 ? o / (2 - u - e) : o / (u + e);
                switch (u) {
                case n:
                    f = (t - r) / o + (t < r ? 6 : 0);
                    break;
                case t:
                    f = (r - n) / o + 2;
                    break;
                case r:
                    f = (n - t) / o + 4
                }
                f /= 6
            }
            return [Math.round(f * 360), Math.round(s * 100), Math.round(h * 100)]
        },
        getSource: function() {
            return this._source
        },
        setSource: function(n) {
            this._source = n
        },
        toRgb: function() {
            var n = this.getSource();
            return "rgb(" + n[0] + "," + n[1] + "," + n[2] + ")"
        },
        toRgba: function() {
            var n = this.getSource();
            return "rgba(" + n[0] + "," + n[1] + "," + n[2] + "," + n[3] + ")"
        },
        toHsl: function() {
            var n = this.getSource()
              , t = this._rgbToHsl(n[0], n[1], n[2]);
            return "hsl(" + t[0] + "," + t[1] + "%," + t[2] + "%)"
        },
        toHsla: function() {
            var n = this.getSource()
              , t = this._rgbToHsl(n[0], n[1], n[2]);
            return "hsla(" + t[0] + "," + t[1] + "%," + t[2] + "%," + n[3] + ")"
        },
        toHex: function() {
            var r = this.getSource(), i = r[0].toString(16), n, t;
            return i = i.length === 1 ? "0" + i : i,
            n = r[1].toString(16),
            n = n.length === 1 ? "0" + n : n,
            t = r[2].toString(16),
            t = t.length === 1 ? "0" + t : t,
            i.toUpperCase() + n.toUpperCase() + t.toUpperCase()
        },
        getAlpha: function() {
            return this.getSource()[3]
        },
        setAlpha: function(n) {
            var t = this.getSource();
            return t[3] = n,
            this.setSource(t),
            this
        },
        toGrayscale: function() {
            var n = this.getSource()
              , t = parseInt((n[0] * .3 + n[1] * .59 + n[2] * .11).toFixed(0), 10)
              , i = n[3];
            return this.setSource([t, t, t, i]),
            this
        },
        toBlackWhite: function(n) {
            var i = this.getSource()
              , t = (i[0] * .3 + i[1] * .59 + i[2] * .11).toFixed(0)
              , r = i[3];
            return n = n || 127,
            t = Number(t) < Number(n) ? 0 : 255,
            this.setSource([t, t, t, r]),
            this
        },
        overlayWith: function(n) {
            var i;
            n instanceof t || (n = new t(n));
            var r = []
              , f = this.getAlpha()
              , u = .5
              , e = this.getSource()
              , o = n.getSource();
            for (i = 0; i < 3; i++)
                r.push(Math.round(e[i] * (1 - u) + o[i] * u));
            return r[3] = f,
            this.setSource(r),
            this
        }
    };
    i.Color.reRGBa = /^rgba?\(\s*(\d{1,3}\%?)\s*,\s*(\d{1,3}\%?)\s*,\s*(\d{1,3}\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/;
    i.Color.reHSLa = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/;
    i.Color.reHex = /^#?([0-9a-f]{6}|[0-9a-f]{3})$/i;
    i.Color.colorNameMap = {
        aqua: "#00FFFF",
        black: "#000000",
        blue: "#0000FF",
        fuchsia: "#FF00FF",
        gray: "#808080",
        green: "#008000",
        lime: "#00FF00",
        maroon: "#800000",
        navy: "#000080",
        olive: "#808000",
        orange: "#FFA500",
        purple: "#800080",
        red: "#FF0000",
        silver: "#C0C0C0",
        teal: "#008080",
        white: "#FFFFFF",
        yellow: "#FFFF00"
    };
    i.Color.fromRgb = function(n) {
        return t.fromSource(t.sourceFromRgb(n))
    }
    ;
    i.Color.sourceFromRgb = function(n) {
        var i = n.match(t.reRGBa);
        if (i) {
            var r = parseInt(i[1], 10) / (/%$/.test(i[1]) ? 100 : 1) * (/%$/.test(i[1]) ? 255 : 1)
              , u = parseInt(i[2], 10) / (/%$/.test(i[2]) ? 100 : 1) * (/%$/.test(i[2]) ? 255 : 1)
              , f = parseInt(i[3], 10) / (/%$/.test(i[3]) ? 100 : 1) * (/%$/.test(i[3]) ? 255 : 1);
            return [parseInt(r, 10), parseInt(u, 10), parseInt(f, 10), i[4] ? parseFloat(i[4]) : 1]
        }
    }
    ;
    i.Color.fromRgba = t.fromRgb;
    i.Color.fromHsl = function(n) {
        return t.fromSource(t.sourceFromHsl(n))
    }
    ;
    i.Color.sourceFromHsl = function(n) {
        var i = n.match(t.reHSLa), f, o;
        if (i) {
            var s = (parseFloat(i[1]) % 360 + 360) % 360 / 360, e = parseFloat(i[2]) / (/%$/.test(i[2]) ? 100 : 1), u = parseFloat(i[3]) / (/%$/.test(i[3]) ? 100 : 1), h, c, l;
            return e === 0 ? h = c = l = u : (f = u <= .5 ? u * (e + 1) : u + e - u * e,
            o = u * 2 - f,
            h = r(o, f, s + 1 / 3),
            c = r(o, f, s),
            l = r(o, f, s - 1 / 3)),
            [Math.round(h * 255), Math.round(c * 255), Math.round(l * 255), i[4] ? parseFloat(i[4]) : 1]
        }
    }
    ;
    i.Color.fromHsla = t.fromHsl;
    i.Color.fromHex = function(n) {
        return t.fromSource(t.sourceFromHex(n))
    }
    ;
    i.Color.sourceFromHex = function(n) {
        if (n.match(t.reHex)) {
            var i = n.slice(n.indexOf("#") + 1)
              , r = i.length === 3
              , u = r ? i.charAt(0) + i.charAt(0) : i.substring(0, 2)
              , f = r ? i.charAt(1) + i.charAt(1) : i.substring(2, 4)
              , e = r ? i.charAt(2) + i.charAt(2) : i.substring(4, 6);
            return [parseInt(u, 16), parseInt(f, 16), parseInt(e, 16), 1]
        }
    }
    ;
    i.Color.fromSource = function(n) {
        var i = new t;
        return i.setSource(n),
        i
    }
}(typeof exports != "undefined" ? exports : this),
function() {
    function i(n) {
        var e = n.getAttribute("style"), u = n.getAttribute("offset"), t, r, i, f;
        if (u = parseFloat(u) / (/%$/.test(u) ? 100 : 1),
        e)
            for (i = e.split(/\s*;\s*/),
            i[i.length - 1] === "" && i.pop(),
            f = i.length; f--; ) {
                var o = i[f].split(/\s*:\s*/)
                  , s = o[0].trim()
                  , h = o[1].trim();
                s === "stop-color" ? t = h : s === "stop-opacity" && (r = h)
            }
        return t || (t = n.getAttribute("stop-color") || "rgb(0,0,0)"),
        r || (r = n.getAttribute("stop-opacity")),
        t = new fabric.Color(t).toRgb(),
        {
            offset: u,
            color: t,
            opacity: isNaN(parseFloat(r)) ? 1 : parseFloat(r)
        }
    }
    function r(n) {
        return {
            x1: n.getAttribute("x1") || 0,
            y1: n.getAttribute("y1") || 0,
            x2: n.getAttribute("x2") || "100%",
            y2: n.getAttribute("y2") || 0
        }
    }
    function u(n) {
        return {
            x1: n.getAttribute("fx") || n.getAttribute("cx") || "50%",
            y1: n.getAttribute("fy") || n.getAttribute("cy") || "50%",
            r1: 0,
            x2: n.getAttribute("cx") || "50%",
            y2: n.getAttribute("cy") || "50%",
            r2: n.getAttribute("r") || "50%"
        }
    }
    function n(n, i) {
        var r, u;
        for (r in i)
            typeof i[r] == "string" && /^\d+%$/.test(i[r]) && (u = parseFloat(i[r], 10),
            r === "x1" || r === "x2" || r === "r2" ? i[r] = fabric.util.toFixed(n.width * u / 100, 2) : (r === "y1" || r === "y2") && (i[r] = fabric.util.toFixed(n.height * u / 100, 2))),
            t(i, r, n)
    }
    function t(n, t, i) {
        t === "x1" || t === "x2" ? n[t] -= fabric.util.toFixed(i.width / 2, 2) : (t === "y1" || t === "y2") && (n[t] -= fabric.util.toFixed(i.height / 2, 2))
    }
    function f(n, i) {
        for (var r in i)
            t(i, r, n),
            r === "x1" || r === "x2" || r === "r2" ? i[r] = fabric.util.toFixed(i[r] / n.width * 100, 2) + "%" : (r === "y1" || r === "y2") && (i[r] = fabric.util.toFixed(i[r] / n.height * 100, 2) + "%")
    }
    fabric.Gradient = fabric.util.createClass({
        initialize: function(n) {
            n || (n = {});
            var t = {};
            this.id = fabric.Object.__uid++;
            this.type = n.type || "linear";
            t = {
                x1: n.coords.x1 || 0,
                y1: n.coords.y1 || 0,
                x2: n.coords.x2 || 0,
                y2: n.coords.y2 || 0
            };
            this.type === "radial" && (t.r1 = n.coords.r1 || 0,
            t.r2 = n.coords.r2 || 0);
            this.coords = t;
            this.gradientUnits = n.gradientUnits || "objectBoundingBox";
            this.colorStops = n.colorStops.slice()
        },
        addColorStop: function(n) {
            var t, i;
            for (t in n)
                i = new fabric.Color(n[t]),
                this.colorStops.push({
                    offset: t,
                    color: i.toRgb(),
                    opacity: i.getAlpha()
                });
            return this
        },
        toObject: function() {
            return {
                type: this.type,
                coords: this.coords,
                gradientUnits: this.gradientUnits,
                colorStops: this.colorStops
            }
        },
        toSVG: function(n, t) {
            var i = fabric.util.object.clone(this.coords), u, r;
            for (this.colorStops.sort(function(n, t) {
                return n.offset - t.offset
            }),
            t && this.gradientUnits === "userSpaceOnUse" ? (i.x1 += n.width / 2,
            i.y1 += n.height / 2,
            i.x2 += n.width / 2,
            i.y2 += n.height / 2) : this.gradientUnits === "objectBoundingBox" && f(n, i),
            this.type === "linear" ? u = ["<linearGradient ", 'id="SVGID_', this.id, '" gradientUnits="', this.gradientUnits, '" x1="', i.x1, '" y1="', i.y1, '" x2="', i.x2, '" y2="', i.y2, '">'] : this.type === "radial" && (u = ["<radialGradient ", 'id="SVGID_', this.id, '" gradientUnits="', this.gradientUnits, '" cx="', i.x2, '" cy="', i.y2, '" r="', i.r2, '" fx="', i.x1, '" fy="', i.y1, '">']),
            r = 0; r < this.colorStops.length; r++)
                u.push("<stop ", 'offset="', this.colorStops[r].offset * 100 + "%", '" style="stop-color:', this.colorStops[r].color, this.colorStops[r].opacity ? ";stop-opacity: " + this.colorStops[r].opacity : ";", '"/>');
            return u.push(this.type === "linear" ? "<\/linearGradient>" : "<\/radialGradient>"),
            u.join("")
        },
        toLive: function(n) {
            var i, t, u;
            if (this.type) {
                for (this.type === "linear" ? i = n.createLinearGradient(this.coords.x1, this.coords.y1, this.coords.x2, this.coords.y2) : this.type === "radial" && (i = n.createRadialGradient(this.coords.x1, this.coords.y1, this.coords.r1, this.coords.x2, this.coords.y2, this.coords.r2)),
                t = 0,
                u = this.colorStops.length; t < u; t++) {
                    var r = this.colorStops[t].color
                      , f = this.colorStops[t].opacity
                      , e = this.colorStops[t].offset;
                    typeof f != "undefined" && (r = new fabric.Color(r).setAlpha(f).toRgba());
                    i.addColorStop(parseFloat(e), r)
                }
                return i
            }
        }
    });
    fabric.util.object.extend(fabric.Gradient, {
        fromElement: function(t, f) {
            var h = t.getElementsByTagName("stop"), o = t.nodeName === "linearGradient" ? "linear" : "radial", l = t.getAttribute("gradientUnits") || "objectBoundingBox", c = [], e = {}, s;
            for (o === "linear" ? e = r(t) : o === "radial" && (e = u(t)),
            s = h.length; s--; )
                c.push(i(h[s]));
            return n(f, e),
            new fabric.Gradient({
                type: o,
                coords: e,
                gradientUnits: l,
                colorStops: c
            })
        },
        forObject: function(t, i) {
            return i || (i = {}),
            n(t, i),
            new fabric.Gradient(i)
        }
    })
}();
fabric.Pattern = fabric.util.createClass({
    repeat: "repeat",
    offsetX: 0,
    offsetY: 0,
    initialize: function(n) {
        if (n || (n = {}),
        this.id = fabric.Object.__uid++,
        n.source)
            if (typeof n.source == "string")
                if (typeof fabric.util.getFunctionBody(n.source) != "undefined")
                    this.source = new Function(fabric.util.getFunctionBody(n.source));
                else {
                    var t = this;
                    this.source = fabric.util.createImage();
                    fabric.util.loadImage(n.source, function(n) {
                        t.source = n
                    })
                }
            else
                this.source = n.source;
        n.repeat && (this.repeat = n.repeat);
        n.offsetX && (this.offsetX = n.offsetX);
        n.offsetY && (this.offsetY = n.offsetY)
    },
    toObject: function() {
        var n;
        return typeof this.source == "function" ? n = String(this.source) : typeof this.source.src == "string" && (n = this.source.src),
        {
            source: n,
            repeat: this.repeat,
            offsetX: this.offsetX,
            offsetY: this.offsetY
        }
    },
    toSVG: function(n) {
        var t = typeof this.source == "function" ? this.source() : this.source
          , r = t.width / n.getWidth()
          , u = t.height / n.getHeight()
          , i = "";
        return t.src ? i = t.src : t.toDataURL && (i = t.toDataURL()),
        '<pattern id="SVGID_' + this.id + '" x="' + this.offsetX + '" y="' + this.offsetY + '" width="' + r + '" height="' + u + '"><image x="0" y="0" width="' + t.width + '" height="' + t.height + '" xlink:href="' + i + '"><\/image><\/pattern>'
    },
    toLive: function(n) {
        var t = typeof this.source == "function" ? this.source() : this.source;
        return typeof t.src != "undefined" && (!t.complete || t.naturalWidth === 0 || t.naturalHeight === 0) ? "" : n.createPattern(t, this.repeat)
    }
}),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {});
    if (t.Shadow) {
        t.warn("fabric.Shadow is already defined.");
        return
    }
    t.Shadow = t.util.createClass({
        color: "rgb(0,0,0)",
        blur: 0,
        offsetX: 0,
        offsetY: 0,
        affectStroke: !1,
        includeDefaultValues: !0,
        initialize: function(n) {
            typeof n == "string" && (n = this._parseShadow(n));
            for (var i in n)
                this[i] = n[i];
            this.id = t.Object.__uid++
        },
        _parseShadow: function(n) {
            var r = n.trim()
              , i = t.Shadow.reOffsetsAndBlur.exec(r) || []
              , u = r.replace(t.Shadow.reOffsetsAndBlur, "") || "rgb(0,0,0)";
            return {
                color: u.trim(),
                offsetX: parseInt(i[1], 10) || 0,
                offsetY: parseInt(i[2], 10) || 0,
                blur: parseInt(i[3], 10) || 0
            }
        },
        toString: function() {
            return [this.offsetX, this.offsetY, this.blur, this.color].join("px ")
        },
        toSVG: function(n) {
            var t = "SourceAlpha";
            return n && (n.fill === this.color || n.stroke === this.color) && (t = "SourceGraphic"),
            '<filter id="SVGID_' + this.id + '" y="-40%" height="180%"><feGaussianBlur in="' + t + '" stdDeviation="' + (this.blur ? this.blur / 3 : 0) + '"><\/feGaussianBlur><feOffset dx="' + this.offsetX + '" dy="' + this.offsetY + '"><\/feOffset><feMerge><feMergeNode><\/feMergeNode><feMergeNode in="SourceGraphic"><\/feMergeNode><\/feMerge><\/filter>'
        },
        toObject: function() {
            if (this.includeDefaultValues)
                return {
                    color: this.color,
                    blur: this.blur,
                    offsetX: this.offsetX,
                    offsetY: this.offsetY
                };
            var n = {}
              , i = t.Shadow.prototype;
            return this.color !== i.color && (n.color = this.color),
            this.blur !== i.blur && (n.blur = this.blur),
            this.offsetX !== i.offsetX && (n.offsetX = this.offsetX),
            this.offsetY !== i.offsetY && (n.offsetY = this.offsetY),
            n
        }
    });
    t.Shadow.reOffsetsAndBlur = /(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/
}(typeof exports != "undefined" ? exports : this),
function() {
    "use strict";
    if (fabric.StaticCanvas) {
        fabric.warn("fabric.StaticCanvas is already defined.");
        return
    }
    var n = fabric.util.object.extend
      , r = fabric.util.getElementOffset
      , t = fabric.util.removeFromArray
      , i = new Error("Could not initialize `canvas` element");
    fabric.StaticCanvas = fabric.util.createClass({
        initialize: function(n, t) {
            t || (t = {});
            this._initStatic(n, t);
            fabric.StaticCanvas.activeInstance = this
        },
        backgroundColor: "",
        backgroundImage: null,
        overlayColor: "",
        overlayImage: null,
        includeDefaultValues: !0,
        stateful: !0,
        renderOnAddRemove: !0,
        clipTo: null,
        controlsAboveOverlay: !1,
        allowTouchScrolling: !1,
        onBeforeScaleRotate: function() {},
        _initStatic: function(n, t) {
            this._objects = [];
            this._createLowerCanvas(n);
            this._initOptions(t);
            t.overlayImage && this.setOverlayImage(t.overlayImage, this.renderAll.bind(this));
            t.backgroundImage && this.setBackgroundImage(t.backgroundImage, this.renderAll.bind(this));
            t.backgroundColor && this.setBackgroundColor(t.backgroundColor, this.renderAll.bind(this));
            t.overlayColor && this.setOverlayColor(t.overlayColor, this.renderAll.bind(this));
            this.calcOffset()
        },
        calcOffset: function() {
            return this._offset = r(this.lowerCanvasEl),
            this
        },
        setOverlayImage: function(n, t, i) {
            return this.__setBgOverlayImage("overlayImage", n, t, i)
        },
        setBackgroundImage: function(n, t, i) {
            return this.__setBgOverlayImage("backgroundImage", n, t, i)
        },
        setOverlayColor: function(n, t) {
            return this.__setBgOverlayColor("overlayColor", n, t)
        },
        setBackgroundColor: function(n, t) {
            return this.__setBgOverlayColor("backgroundColor", n, t)
        },
        __setBgOverlayImage: function(n, t, i, r) {
            return typeof t == "string" ? fabric.util.loadImage(t, function(t) {
                this[n] = new fabric.Image(t,r);
                i && i()
            }, this) : (this[n] = t,
            i && i()),
            this
        },
        __setBgOverlayColor: function(n, t, i) {
            if (t.source) {
                var r = this;
                fabric.util.loadImage(t.source, function(u) {
                    r[n] = new fabric.Pattern({
                        source: u,
                        repeat: t.repeat,
                        offsetX: t.offsetX,
                        offsetY: t.offsetY
                    });
                    i && i()
                })
            } else
                this[n] = t,
                i && i();
            return this
        },
        _createCanvasElement: function() {
            var n = fabric.document.createElement("canvas");
            if (n.style || (n.style = {}),
            !n)
                throw i;
            return this._initCanvasElement(n),
            n
        },
        _initCanvasElement: function(n) {
            if (fabric.util.createCanvasElement(n),
            typeof n.getContext == "undefined")
                throw i;
        },
        _initOptions: function(n) {
            for (var t in n)
                this[t] = n[t];
            (this.width = parseInt(this.lowerCanvasEl.width, 10) || 0,
            this.height = parseInt(this.lowerCanvasEl.height, 10) || 0,
            this.lowerCanvasEl.style) && (this.lowerCanvasEl.style.width = this.width + "px",
            this.lowerCanvasEl.style.height = this.height + "px")
        },
        _createLowerCanvas: function(n) {
            this.lowerCanvasEl = fabric.util.getById(n) || this._createCanvasElement();
            this._initCanvasElement(this.lowerCanvasEl);
            fabric.util.addClass(this.lowerCanvasEl, "lower-canvas");
            this.interactive && this._applyCanvasStyle(this.lowerCanvasEl);
            this.contextContainer = this.lowerCanvasEl.getContext("2d")
        },
        getWidth: function() {
            return this.width
        },
        getHeight: function() {
            return this.height
        },
        setWidth: function(n) {
            return this._setDimension("width", n)
        },
        setHeight: function(n) {
            return this._setDimension("height", n)
        },
        setDimensions: function(n) {
            for (var t in n)
                this._setDimension(t, n[t]);
            return this
        },
        _setDimension: function(n, t) {
            return this.lowerCanvasEl[n] = t,
            this.lowerCanvasEl.style[n] = t + "px",
            this.upperCanvasEl && (this.upperCanvasEl[n] = t,
            this.upperCanvasEl.style[n] = t + "px"),
            this.cacheCanvasEl && (this.cacheCanvasEl[n] = t),
            this.wrapperEl && (this.wrapperEl.style[n] = t + "px"),
            this[n] = t,
            this.calcOffset(),
            this.renderAll(),
            this
        },
        getElement: function() {
            return this.lowerCanvasEl
        },
        getActiveObject: function() {
            return null
        },
        getActiveGroup: function() {
            return null
        },
        _draw: function(n, t) {
            if (t)
                if (this.controlsAboveOverlay) {
                    var i = t.hasBorders
                      , r = t.hasControls;
                    t.hasBorders = t.hasControls = !1;
                    t.render(n);
                    t.hasBorders = i;
                    t.hasControls = r
                } else
                    t.render(n)
        },
        _onObjectAdded: function(n) {
            this.stateful && n.setupState();
            n.setCoords();
            n.canvas = this;
            this.fire("object:added", {
                target: n
            });
            n.fire("added")
        },
        _onObjectRemoved: function(n) {
            this.getActiveObject() === n && (this.fire("before:selection:cleared", {
                target: n
            }),
            this._discardActiveObject(),
            this.fire("selection:cleared"));
            this.fire("object:removed", {
                target: n
            });
            n.fire("removed")
        },
        clearContext: function(n) {
            return n.clearRect(0, 0, this.width, this.height),
            this
        },
        getContext: function() {
            return this.contextContainer
        },
        clear: function() {
            return this._objects.length = 0,
            this.discardActiveGroup && this.discardActiveGroup(),
            this.discardActiveObject && this.discardActiveObject(),
            this.clearContext(this.contextContainer),
            this.contextTop && this.clearContext(this.contextTop),
            this.fire("canvas:cleared"),
            this.renderAll(),
            this
        },
        renderAll: function(n) {
            var t = this[n === !0 && this.interactive ? "contextTop" : "contextContainer"]
              , i = this.getActiveGroup();
            return this.contextTop && this.selection && !this._groupSelector && this.clearContext(this.contextTop),
            n || this.clearContext(t),
            this.fire("before:render"),
            this.clipTo && fabric.util.clipContext(this, t),
            this._renderBackground(t),
            this._renderObjects(t, i),
            this._renderActiveGroup(t, i),
            this.clipTo && t.restore(),
            this._renderOverlay(t),
            this.controlsAboveOverlay && this.interactive && this.drawControls(t),
            this.fire("after:render"),
            this
        },
        _renderObjects: function(n, t) {
            for (var i = 0, r = this._objects.length; i < r; ++i)
                (!t || t && this._objects[i] && !t.contains(this._objects[i])) && this._draw(n, this._objects[i])
        },
        _renderActiveGroup: function(n, t) {
            if (t) {
                var i = [];
                this.forEachObject(function(n) {
                    t.contains(n) && i.push(n)
                });
                t._set("objects", i);
                this._draw(n, t)
            }
        },
        _renderBackground: function(n) {
            this.backgroundColor && (n.fillStyle = this.backgroundColor.toLive ? this.backgroundColor.toLive(n) : this.backgroundColor,
            n.fillRect(this.backgroundColor.offsetX || 0, this.backgroundColor.offsetY || 0, this.width, this.height));
            this.backgroundImage && this.backgroundImage.render(n)
        },
        _renderOverlay: function(n) {
            this.overlayColor && (n.fillStyle = this.overlayColor.toLive ? this.overlayColor.toLive(n) : this.overlayColor,
            n.fillRect(this.overlayColor.offsetX || 0, this.overlayColor.offsetY || 0, this.width, this.height));
            this.overlayImage && this.overlayImage.render(n)
        },
        renderTop: function() {
            var n = this.contextTop || this.contextContainer, t;
            return this.clearContext(n),
            this.selection && this._groupSelector && this._drawSelection(),
            t = this.getActiveGroup(),
            t && t.render(n),
            this.overlayImage && n.drawImage(this.overlayImage, this.overlayImageLeft, this.overlayImageTop),
            this.fire("after:render"),
            this
        },
        getCenter: function() {
            return {
                top: this.getHeight() / 2,
                left: this.getWidth() / 2
            }
        },
        centerObjectH: function(n) {
            return this._centerObject(n, new fabric.Point(this.getCenter().left,n.getCenterPoint().y)),
            this.renderAll(),
            this
        },
        centerObjectV: function(n) {
            return this._centerObject(n, new fabric.Point(n.getCenterPoint().x,this.getCenter().top)),
            this.renderAll(),
            this
        },
        centerObject: function(n) {
            var t = this.getCenter();
            return this._centerObject(n, new fabric.Point(t.left,t.top)),
            this.renderAll(),
            this
        },
        _centerObject: function(n, t) {
            return n.setPositionByOrigin(t, "center", "center"),
            this
        },
        toDatalessJSON: function(n) {
            return this.toDatalessObject(n)
        },
        toObject: function(n) {
            return this._toObjectMethod("toObject", n)
        },
        toDatalessObject: function(n) {
            return this._toObjectMethod("toDatalessObject", n)
        },
        _toObjectMethod: function(t, i) {
            var r = this.getActiveGroup(), u;
            return r && this.discardActiveGroup(),
            u = {
                objects: this._toObjects(t, i)
            },
            n(u, this.__serializeBgOverlay()),
            fabric.util.populateWithProperties(this, u, i),
            r && (this.setActiveGroup(new fabric.Group(r.getObjects())),
            r.forEachObject(function(n) {
                n.set("active", !0)
            })),
            u
        },
        _toObjects: function(n, t) {
            return this.getObjects().map(function(i) {
                return this._toObject(i, n, t)
            }, this)
        },
        _toObject: function(n, t, i) {
            var r, u;
            return this.includeDefaultValues || (r = n.includeDefaultValues,
            n.includeDefaultValues = !1),
            u = n[t](i),
            this.includeDefaultValues || (n.includeDefaultValues = r),
            u
        },
        __serializeBgOverlay: function() {
            var n = {
                background: this.backgroundColor && this.backgroundColor.toObject ? this.backgroundColor.toObject() : this.backgroundColor
            };
            return this.overlayColor && (n.overlay = this.overlayColor.toObject ? this.overlayColor.toObject() : this.overlayColor),
            this.backgroundImage && (n.backgroundImage = this.backgroundImage.toObject()),
            this.overlayImage && (n.overlayImage = this.overlayImage.toObject()),
            n
        },
        toSVG: function(n, t) {
            n || (n = {});
            var i = [];
            return this._setSVGPreamble(i, n),
            this._setSVGHeader(i, n),
            this._setSVGBgOverlayColor(i, "backgroundColor"),
            this._setSVGBgOverlayImage(i, "backgroundImage"),
            this._setSVGObjects(i, t),
            this._setSVGBgOverlayColor(i, "overlayColor"),
            this._setSVGBgOverlayImage(i, "overlayImage"),
            i.push("<\/svg>"),
            i.join("")
        },
        _setSVGPreamble: function(n, t) {
            t.suppressPreamble || n.push('<?xml version="1.0" encoding="', t.encoding || "UTF-8", '" standalone="no" ?>', '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ', '"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')
        },
        _setSVGHeader: function(n, t) {
            n.push("<svg ", 'xmlns="http://www.w3.org/2000/svg" ', 'xmlns:xlink="http://www.w3.org/1999/xlink" ', 'version="1.1" ', 'width="', t.viewBox ? t.viewBox.width : this.width, '" ', 'height="', t.viewBox ? t.viewBox.height : this.height, '" ', this.backgroundColor && !this.backgroundColor.toLive ? 'style="background-color: ' + this.backgroundColor + '" ' : null, t.viewBox ? 'viewBox="' + t.viewBox.x + " " + t.viewBox.y + " " + t.viewBox.width + " " + t.viewBox.height + '" ' : null, 'xml:space="preserve">', "<desc>Created with Fabric.js ", fabric.version, "<\/desc>", "<defs>", fabric.createSVGFontFacesMarkup(this.getObjects()), fabric.createSVGRefElementsMarkup(this), "<\/defs>")
        },
        _setSVGObjects: function(n, t) {
            var i = this.getActiveGroup();
            i && this.discardActiveGroup();
            for (var r = 0, u = this.getObjects(), f = u.length; r < f; r++)
                n.push(u[r].toSVG(t));
            i && (this.setActiveGroup(new fabric.Group(i.getObjects())),
            i.forEachObject(function(n) {
                n.set("active", !0)
            }))
        },
        _setSVGBgOverlayImage: function(n, t) {
            this[t] && this[t].toSVG && n.push(this[t].toSVG())
        },
        _setSVGBgOverlayColor: function(n, t) {
            this[t] && this[t].source ? n.push('<rect x="', this[t].offsetX, '" y="', this[t].offsetY, '" ', 'width="', this[t].repeat === "repeat-y" || this[t].repeat === "no-repeat" ? this[t].source.width : this.width, '" height="', this[t].repeat === "repeat-x" || this[t].repeat === "no-repeat" ? this[t].source.height : this.height, '" fill="url(#' + t + 'Pattern)"', "><\/rect>") : this[t] && t === "overlayColor" && n.push('<rect x="0" y="0" ', 'width="', this.width, '" height="', this.height, '" fill="', this[t], '"', "><\/rect>")
        },
        sendToBack: function(n) {
            return t(this._objects, n),
            this._objects.unshift(n),
            this.renderAll && this.renderAll()
        },
        bringToFront: function(n) {
            return t(this._objects, n),
            this._objects.push(n),
            this.renderAll && this.renderAll()
        },
        sendBackwards: function(n, i) {
            var r = this._objects.indexOf(n), u;
            return r !== 0 && (u = this._findNewLowerIndex(n, r, i),
            t(this._objects, n),
            this._objects.splice(u, 0, n),
            this.renderAll && this.renderAll()),
            this
        },
        _findNewLowerIndex: function(n, t, i) {
            var u, r, f;
            if (i) {
                for (u = t,
                r = t - 1; r >= 0; --r)
                    if (f = n.intersectsWithObject(this._objects[r]) || n.isContainedWithinObject(this._objects[r]) || this._objects[r].isContainedWithinObject(n),
                    f) {
                        u = r;
                        break
                    }
            } else
                u = t - 1;
            return u
        },
        bringForward: function(n, i) {
            var r = this._objects.indexOf(n), u;
            return r !== this._objects.length - 1 && (u = this._findNewUpperIndex(n, r, i),
            t(this._objects, n),
            this._objects.splice(u, 0, n),
            this.renderAll && this.renderAll()),
            this
        },
        _findNewUpperIndex: function(n, t, i) {
            var u, r, f;
            if (i) {
                for (u = t,
                r = t + 1; r < this._objects.length; ++r)
                    if (f = n.intersectsWithObject(this._objects[r]) || n.isContainedWithinObject(this._objects[r]) || this._objects[r].isContainedWithinObject(n),
                    f) {
                        u = r;
                        break
                    }
            } else
                u = t + 1;
            return u
        },
        moveTo: function(n, i) {
            return t(this._objects, n),
            this._objects.splice(i, 0, n),
            this.renderAll && this.renderAll()
        },
        dispose: function() {
            return this.clear(),
            this.interactive && this.removeListeners(),
            this
        },
        toString: function() {
            return "#<fabric.Canvas (" + this.complexity() + "): { objects: " + this.getObjects().length + " }>"
        }
    });
    n(fabric.StaticCanvas.prototype, fabric.Observable);
    n(fabric.StaticCanvas.prototype, fabric.Collection);
    n(fabric.StaticCanvas.prototype, fabric.DataURLExporter);
    n(fabric.StaticCanvas, {
        EMPTY_JSON: '{"objects": [], "background": "white"}',
        supports: function(n) {
            var t = fabric.util.createCanvasElement(), i;
            if (!t || !t.getContext || (i = t.getContext("2d"),
            !i))
                return null;
            switch (n) {
            case "getImageData":
                return typeof i.getImageData != "undefined";
            case "setLineDash":
                return typeof i.setLineDash != "undefined";
            case "toDataURL":
                return typeof t.toDataURL != "undefined";
            case "toDataURLWithQuality":
                try {
                    return t.toDataURL("image/jpeg", 0),
                    !0
                } catch (r) {}
                return !1;
            default:
                return null
            }
        }
    });
    fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject
}();
fabric.BaseBrush = fabric.util.createClass({
    color: "rgb(0, 0, 0)",
    width: 1,
    shadow: null,
    strokeLineCap: "round",
    strokeLineJoin: "round",
    setShadow: function(n) {
        return this.shadow = new fabric.Shadow(n),
        this
    },
    _setBrushStyles: function() {
        var n = this.canvas.contextTop;
        n.strokeStyle = this.color;
        n.lineWidth = this.width;
        n.lineCap = this.strokeLineCap;
        n.lineJoin = this.strokeLineJoin
    },
    _setShadow: function() {
        if (this.shadow) {
            var n = this.canvas.contextTop;
            n.shadowColor = this.shadow.color;
            n.shadowBlur = this.shadow.blur;
            n.shadowOffsetX = this.shadow.offsetX;
            n.shadowOffsetY = this.shadow.offsetY
        }
    },
    _resetShadow: function() {
        var n = this.canvas.contextTop;
        n.shadowColor = "";
        n.shadowBlur = n.shadowOffsetX = n.shadowOffsetY = 0
    }
}),
function() {
    var n = fabric.util.array.min
      , t = fabric.util.array.max;
    fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, {
        initialize: function(n) {
            this.canvas = n;
            this._points = []
        },
        onMouseDown: function(n) {
            this._prepareForDrawing(n);
            this._captureDrawingPath(n);
            this._render()
        },
        onMouseMove: function(n) {
            this._captureDrawingPath(n);
            this.canvas.clearContext(this.canvas.contextTop);
            this._render()
        },
        onMouseUp: function() {
            this._finalizeAndAddPath()
        },
        _prepareForDrawing: function(n) {
            var t = new fabric.Point(n.x,n.y);
            this._reset();
            this._addPoint(t);
            this.canvas.contextTop.moveTo(t.x, t.y)
        },
        _addPoint: function(n) {
            this._points.push(n)
        },
        _reset: function() {
            this._points.length = 0;
            this._setBrushStyles();
            this._setShadow()
        },
        _captureDrawingPath: function(n) {
            var t = new fabric.Point(n.x,n.y);
            this._addPoint(t)
        },
        _render: function() {
            var i = this.canvas.contextTop, n, t, r, f, u;
            for (i.beginPath(),
            n = this._points[0],
            t = this._points[1],
            this._points.length === 2 && n.x === t.x && n.y === t.y && (n.x -= .5,
            t.x += .5),
            i.moveTo(n.x, n.y),
            r = 1,
            f = this._points.length; r < f; r++)
                u = n.midPointFrom(t),
                i.quadraticCurveTo(n.x, n.y, u.x, u.y),
                n = this._points[r],
                t = this._points[r + 1];
            i.lineTo(n.x, n.y);
            i.stroke()
        },
        _getSVGPathData: function() {
            return this.box = this.getPathBoundingBox(this._points),
            this.convertPointsToSVGPath(this._points, this.box.minx, this.box.maxx, this.box.miny, this.box.maxy)
        },
        getPathBoundingBox: function(i) {
            for (var o, r = [], u = [], f = i[0], h = i[1], s = f, e = 1, c = i.length; e < c; e++)
                o = f.midPointFrom(h),
                r.push(s.x),
                r.push(o.x),
                u.push(s.y),
                u.push(o.y),
                f = i[e],
                h = i[e + 1],
                s = o;
            return r.push(f.x),
            u.push(f.y),
            {
                minx: n(r),
                miny: n(u),
                maxx: t(r),
                maxy: t(u)
            }
        },
        convertPointsToSVGPath: function(n, t, i, r) {
            var e = [], f = new fabric.Point(n[0].x - t,n[0].y - r), s = new fabric.Point(n[1].x - t,n[1].y - r), u, h, o;
            for (e.push("M ", n[0].x - t, " ", n[0].y - r, " "),
            u = 1,
            h = n.length; u < h; u++)
                o = f.midPointFrom(s),
                e.push("Q ", f.x, " ", f.y, " ", o.x, " ", o.y, " "),
                f = new fabric.Point(n[u].x - t,n[u].y - r),
                u + 1 < n.length && (s = new fabric.Point(n[u + 1].x - t,n[u + 1].y - r));
            return e.push("L ", f.x, " ", f.y, " "),
            e
        },
        createPath: function(n) {
            var t = new fabric.Path(n);
            return t.fill = null,
            t.stroke = this.color,
            t.strokeWidth = this.width,
            t.strokeLineCap = this.strokeLineCap,
            t.strokeLineJoin = this.strokeLineJoin,
            this.shadow && (this.shadow.affectStroke = !0,
            t.setShadow(this.shadow)),
            t
        },
        _finalizeAndAddPath: function() {
            var u = this.canvas.contextTop, t, i, r, n;
            if (u.closePath(),
            t = this._getSVGPathData().join(""),
            t === "M 0 0 Q 0 0 0 0 L 0 0") {
                this.canvas.renderAll();
                return
            }
            i = this.box.minx + (this.box.maxx - this.box.minx) / 2;
            r = this.box.miny + (this.box.maxy - this.box.miny) / 2;
            this.canvas.contextTop.arc(i, r, 3, 0, Math.PI * 2, !1);
            n = this.createPath(t);
            n.set({
                left: i,
                top: r,
                originX: "center",
                originY: "center"
            });
            this.canvas.add(n);
            n.setCoords();
            this.canvas.clearContext(this.canvas.contextTop);
            this._resetShadow();
            this.canvas.renderAll();
            this.canvas.fire("path:created", {
                path: n
            })
        }
    })
}();
fabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, {
    width: 10,
    initialize: function(n) {
        this.canvas = n;
        this.points = []
    },
    drawDot: function(n) {
        var i = this.addPoint(n)
          , t = this.canvas.contextTop;
        t.fillStyle = i.fill;
        t.beginPath();
        t.arc(i.x, i.y, i.radius, 0, Math.PI * 2, !1);
        t.closePath();
        t.fill()
    },
    onMouseDown: function(n) {
        this.points.length = 0;
        this.canvas.clearContext(this.canvas.contextTop);
        this._setShadow();
        this.drawDot(n)
    },
    onMouseMove: function(n) {
        this.drawDot(n)
    },
    onMouseUp: function() {
        var e = this.canvas.renderOnAddRemove, i, t, f, n, r, u;
        for (this.canvas.renderOnAddRemove = !1,
        i = [],
        t = 0,
        f = this.points.length; t < f; t++)
            n = this.points[t],
            r = new fabric.Circle({
                radius: n.radius,
                left: n.x,
                top: n.y,
                originX: "center",
                originY: "center",
                fill: n.fill
            }),
            this.shadow && r.setShadow(this.shadow),
            i.push(r);
        u = new fabric.Group(i,{
            originX: "center",
            originY: "center"
        });
        this.canvas.add(u);
        this.canvas.fire("path:created", {
            path: u
        });
        this.canvas.clearContext(this.canvas.contextTop);
        this._resetShadow();
        this.canvas.renderOnAddRemove = e;
        this.canvas.renderAll()
    },
    addPoint: function(n) {
        var t = new fabric.Point(n.x,n.y)
          , i = fabric.util.getRandomInt(Math.max(0, this.width - 20), this.width + 20) / 2
          , r = new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0, 100) / 100).toRgba();
        return t.radius = i,
        t.fill = r,
        this.points.push(t),
        t
    }
});
fabric.SprayBrush = fabric.util.createClass(fabric.BaseBrush, {
    width: 10,
    density: 20,
    dotWidth: 1,
    dotWidthVariance: 1,
    randomOpacity: !1,
    optimizeOverlapping: !0,
    initialize: function(n) {
        this.canvas = n;
        this.sprayChunks = []
    },
    onMouseDown: function(n) {
        this.sprayChunks.length = 0;
        this.canvas.clearContext(this.canvas.contextTop);
        this._setShadow();
        this.addSprayChunk(n);
        this.render()
    },
    onMouseMove: function(n) {
        this.addSprayChunk(n);
        this.render()
    },
    onMouseUp: function() {
        var s = this.canvas.renderOnAddRemove, i, r, e, t, n, o, u, f;
        for (this.canvas.renderOnAddRemove = !1,
        i = [],
        r = 0,
        e = this.sprayChunks.length; r < e; r++)
            for (t = this.sprayChunks[r],
            n = 0,
            o = t.length; n < o; n++)
                u = new fabric.Rect({
                    width: t[n].width,
                    height: t[n].width,
                    left: t[n].x + 1,
                    top: t[n].y + 1,
                    originX: "center",
                    originY: "center",
                    fill: this.color
                }),
                this.shadow && u.setShadow(this.shadow),
                i.push(u);
        this.optimizeOverlapping && (i = this._getOptimizedRects(i));
        f = new fabric.Group(i,{
            originX: "center",
            originY: "center"
        });
        this.canvas.add(f);
        this.canvas.fire("path:created", {
            path: f
        });
        this.canvas.clearContext(this.canvas.contextTop);
        this._resetShadow();
        this.canvas.renderOnAddRemove = s;
        this.canvas.renderAll()
    },
    _getOptimizedRects: function(n) {
        for (var u, r = {}, t, i = 0, f = n.length; i < f; i++)
            t = n[i].left + "" + n[i].top,
            r[t] || (r[t] = n[i]);
        u = [];
        for (t in r)
            u.push(r[t]);
        return u
    },
    render: function() {
        var t = this.canvas.contextTop, i, r, n;
        for (t.fillStyle = this.color,
        t.save(),
        i = 0,
        r = this.sprayChunkPoints.length; i < r; i++)
            n = this.sprayChunkPoints[i],
            typeof n.opacity != "undefined" && (t.globalAlpha = n.opacity),
            t.fillRect(n.x, n.y, n.width, n.width);
        t.restore()
    },
    addSprayChunk: function(n) {
        var u, f, e, t, i, r;
        for (this.sprayChunkPoints = [],
        t = this.width / 2,
        i = 0; i < this.density; i++)
            u = fabric.util.getRandomInt(n.x - t, n.x + t),
            f = fabric.util.getRandomInt(n.y - t, n.y + t),
            e = this.dotWidthVariance ? fabric.util.getRandomInt(Math.max(1, this.dotWidth - this.dotWidthVariance), this.dotWidth + this.dotWidthVariance) : this.dotWidth,
            r = {
                x: u,
                y: f,
                width: e
            },
            this.randomOpacity && (r.opacity = fabric.util.getRandomInt(0, 100) / 100),
            this.sprayChunkPoints.push(r);
        this.sprayChunks.push(this.sprayChunkPoints)
    }
});
fabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, {
    getPatternSrc: function() {
        var t = 20
          , i = fabric.document.createElement("canvas")
          , n = i.getContext("2d");
        return i.width = i.height = t + 5,
        n.fillStyle = this.color,
        n.beginPath(),
        n.arc(t / 2, t / 2, t / 2, 0, Math.PI * 2, !1),
        n.closePath(),
        n.fill(),
        i
    },
    getPatternSrcFunction: function() {
        return String(this.getPatternSrc).replace("this.color", '"' + this.color + '"')
    },
    getPattern: function() {
        return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), "repeat")
    },
    _setBrushStyles: function() {
        this.callSuper("_setBrushStyles");
        this.canvas.contextTop.strokeStyle = this.getPattern()
    },
    createPath: function(n) {
        var t = this.callSuper("createPath", n);
        return t.stroke = new fabric.Pattern({
            source: this.source || this.getPatternSrcFunction()
        }),
        t
    }
}),
function() {
    var r = fabric.util.getPointer, f = fabric.util.degreesToRadians, e = fabric.util.radiansToDegrees, u = Math.atan2, n = Math.abs, t = .5, i;
    fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, {
        initialize: function(n, t) {
            t || (t = {});
            this._initStatic(n, t);
            this._initInteractive();
            this._createCacheCanvas();
            fabric.Canvas.activeInstance = this
        },
        uniScaleTransform: !1,
        centeredScaling: !1,
        centeredRotation: !1,
        interactive: !0,
        selection: !0,
        selectionColor: "rgba(100, 100, 255, 0.3)",
        selectionDashArray: [],
        selectionBorderColor: "rgba(255, 255, 255, 0.3)",
        selectionLineWidth: 1,
        hoverCursor: "move",
        moveCursor: "move",
        defaultCursor: "default",
        freeDrawingCursor: "crosshair",
        rotationCursor: "crosshair",
        containerClass: "canvas-container",
        perPixelTargetFind: !1,
        targetFindTolerance: 0,
        skipTargetFind: !1,
        _initInteractive: function() {
            this._currentTransform = null;
            this._groupSelector = null;
            this._initWrapperElement();
            this._createUpperCanvas();
            this._initEventListeners();
            this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);
            this.calcOffset()
        },
        _resetCurrentTransform: function(n) {
            var t = this._currentTransform;
            t.target.set({
                scaleX: t.original.scaleX,
                scaleY: t.original.scaleY,
                left: t.original.left,
                top: t.original.top
            });
            this._shouldCenterTransform(n, t.target) ? t.action === "rotate" ? this._setOriginToCenter(t.target) : (t.originX !== "center" && (t.mouseXSign = t.originX === "right" ? -1 : 1),
            t.originY !== "center" && (t.mouseYSign = t.originY === "bottom" ? -1 : 1),
            t.originX = "center",
            t.originY = "center") : (t.originX = t.original.originX,
            t.originY = t.original.originY)
        },
        containsPoint: function(n, t) {
            var i = this.getPointer(n)
              , r = this._normalizePointer(t, i);
            return t.containsPoint(r) || t._findTargetCorner(n, this._offset)
        },
        _normalizePointer: function(n, t) {
            var i = this.getActiveGroup()
              , r = t.x
              , u = t.y
              , f = i && n.type !== "group" && i.contains(n);
            return f && (r -= i.left,
            u -= i.top),
            {
                x: r,
                y: u
            }
        },
        isTargetTransparent: function(n, t, i) {
            var u = n.hasBorders, f = n.transparentCorners, r;
            return n.hasBorders = n.transparentCorners = !1,
            this._draw(this.contextCache, n),
            n.hasBorders = u,
            n.transparentCorners = f,
            r = fabric.util.isTransparent(this.contextCache, t, i, this.targetFindTolerance),
            this.clearContext(this.contextCache),
            r
        },
        _shouldClearSelection: function(n, t) {
            var i = this.getActiveGroup()
              , r = this.getActiveObject();
            return !t || t && i && !i.contains(t) && i !== t && !n.shiftKey || t && !t.evented || t && !t.selectable && r && r !== t
        },
        _shouldCenterTransform: function(n, t) {
            if (t) {
                var i = this._currentTransform, r;
                return i.action === "scale" || i.action === "scaleX" || i.action === "scaleY" ? r = this.centeredScaling || t.centeredScaling : i.action === "rotate" && (r = this.centeredRotation || t.centeredRotation),
                r ? !n.altKey : n.altKey
            }
        },
        _getOriginFromCorner: function(n, t) {
            var i = {
                x: n.originX,
                y: n.originY
            };
            return t === "ml" || t === "tl" || t === "bl" ? i.x = "right" : (t === "mr" || t === "tr" || t === "br") && (i.x = "left"),
            t === "tl" || t === "mt" || t === "tr" ? i.y = "bottom" : (t === "bl" || t === "mb" || t === "br") && (i.y = "top"),
            i
        },
        _getActionFromCorner: function(n, t) {
            var i = "drag";
            return t && (i = t === "ml" || t === "mr" ? "scaleX" : t === "mt" || t === "mb" ? "scaleY" : t === "mtr" ? "rotate" : "scale"),
            i
        },
        _setupCurrentTransform: function(n, t) {
            if (t) {
                var e = t._findTargetCorner(n, this._offset)
                  , i = r(n, t.canvas.upperCanvasEl)
                  , o = this._getActionFromCorner(t, e)
                  , u = this._getOriginFromCorner(t, e);
                this._currentTransform = {
                    target: t,
                    action: o,
                    scaleX: t.scaleX,
                    scaleY: t.scaleY,
                    offsetX: i.x - t.left,
                    offsetY: i.y - t.top,
                    originX: u.x,
                    originY: u.y,
                    ex: i.x,
                    ey: i.y,
                    left: t.left,
                    top: t.top,
                    theta: f(t.angle),
                    width: t.width * t.scaleX,
                    mouseXSign: 1,
                    mouseYSign: 1
                };
                this._currentTransform.original = {
                    left: t.left,
                    top: t.top,
                    scaleX: t.scaleX,
                    scaleY: t.scaleY,
                    originX: u.x,
                    originY: u.y
                };
                this._resetCurrentTransform(n)
            }
        },
        _translateObject: function(n, t) {
            var i = this._currentTransform.target;
            i.get("lockMovementX") || i.set("left", n - this._currentTransform.offsetX);
            i.get("lockMovementY") || i.set("top", t - this._currentTransform.offsetY)
        },
        _scaleObject: function(n, t, i) {
            var r = this._currentTransform, e = this._offset, u = r.target, o = u.get("lockScalingX"), s = u.get("lockScalingY"), h, f;
            o && s || (h = u.translateToOriginPoint(u.getCenterPoint(), r.originX, r.originY),
            f = u.toLocalPoint(new fabric.Point(n - e.left,t - e.top), r.originX, r.originY),
            this._setLocalMouse(f, r),
            this._setObjectScale(f, r, o, s, i),
            u.setPositionByOrigin(h, r.originX, r.originY))
        },
        _setObjectScale: function(n, t, i, r, u) {
            var f = t.target;
            t.newScaleX = f.scaleX;
            t.newScaleY = f.scaleY;
            u === "equally" && !i && !r ? this._scaleObjectEqually(n, f, t) : u ? u === "x" && !f.get("lockUniScaling") ? (t.newScaleX = n.x / (f.width + f.strokeWidth),
            i || f.set("scaleX", t.newScaleX)) : u === "y" && !f.get("lockUniScaling") && (t.newScaleY = n.y / (f.height + f.strokeWidth),
            r || f.set("scaleY", t.newScaleY)) : (t.newScaleX = n.x / (f.width + f.strokeWidth),
            t.newScaleY = n.y / (f.height + f.strokeWidth),
            i || f.set("scaleX", t.newScaleX),
            r || f.set("scaleY", t.newScaleY));
            this._flipObject(t)
        },
        _scaleObjectEqually: function(n, t, i) {
            var r = n.y + n.x
              , u = (t.height + t.strokeWidth) * i.original.scaleY + (t.width + t.strokeWidth) * i.original.scaleX;
            i.newScaleX = i.original.scaleX * r / u;
            i.newScaleY = i.original.scaleY * r / u;
            t.set("scaleX", i.newScaleX);
            t.set("scaleY", i.newScaleY)
        },
        _flipObject: function(n) {
            n.newScaleX < 0 && (n.originX === "left" ? n.originX = "right" : n.originX === "right" && (n.originX = "left"));
            n.newScaleY < 0 && (n.originY === "top" ? n.originY = "bottom" : n.originY === "bottom" && (n.originY = "top"))
        },
        _setLocalMouse: function(t, i) {
            var r = i.target;
            i.originX === "right" ? t.x *= -1 : i.originX === "center" && (t.x *= i.mouseXSign * 2,
            t.x < 0 && (i.mouseXSign = -i.mouseXSign));
            i.originY === "bottom" ? t.y *= -1 : i.originY === "center" && (t.y *= i.mouseYSign * 2,
            t.y < 0 && (i.mouseYSign = -i.mouseYSign));
            n(t.x) > r.padding ? t.x < 0 ? t.x += r.padding : t.x -= r.padding : t.x = 0;
            n(t.y) > r.padding ? t.y < 0 ? t.y += r.padding : t.y -= r.padding : t.y = 0
        },
        _rotateObject: function(n, t) {
            var i = this._currentTransform
              , r = this._offset;
            if (!i.target.get("lockRotation")) {
                var o = u(i.ey - i.top - r.top, i.ex - i.left - r.left)
                  , s = u(t - i.top - r.top, n - i.left - r.left)
                  , f = e(s - o + i.theta);
                f < 0 && (f = 360 + f);
                i.target.angle = f
            }
        },
        _setCursor: function(n) {
            this.upperCanvasEl.style.cursor = n
        },
        _resetObjectTransform: function(n) {
            n.scaleX = 1;
            n.scaleY = 1;
            n.setAngle(0)
        },
        _drawSelection: function() {
            var i = this.contextTop, f = this._groupSelector, s = f.left, h = f.top, e = n(s), o = n(h), r, u;
            i.fillStyle = this.selectionColor;
            i.fillRect(f.ex - (s > 0 ? 0 : -s), f.ey - (h > 0 ? 0 : -h), e, o);
            i.lineWidth = this.selectionLineWidth;
            i.strokeStyle = this.selectionBorderColor;
            this.selectionDashArray.length > 1 ? (r = f.ex + t - (s > 0 ? 0 : e),
            u = f.ey + t - (h > 0 ? 0 : o),
            i.beginPath(),
            fabric.util.drawDashedLine(i, r, u, r + e, u, this.selectionDashArray),
            fabric.util.drawDashedLine(i, r, u + o - 1, r + e, u + o - 1, this.selectionDashArray),
            fabric.util.drawDashedLine(i, r, u, r, u + o, this.selectionDashArray),
            fabric.util.drawDashedLine(i, r + e - 1, u, r + e - 1, u + o, this.selectionDashArray),
            i.closePath(),
            i.stroke()) : i.strokeRect(f.ex + t - (s > 0 ? 0 : e), f.ey + t - (h > 0 ? 0 : o), e, o)
        },
        _isLastRenderedObject: function(n) {
            return this.controlsAboveOverlay && this.lastRenderedObjectWithControlsAboveOverlay && this.lastRenderedObjectWithControlsAboveOverlay.visible && this.containsPoint(n, this.lastRenderedObjectWithControlsAboveOverlay) && this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(n, this._offset)
        },
        findTarget: function(n, t) {
            if (!this.skipTargetFind) {
                if (this._isLastRenderedObject(n))
                    return this.lastRenderedObjectWithControlsAboveOverlay;
                var i = this.getActiveGroup();
                return i && !t && this.containsPoint(n, i) ? i : this._searchPossibleTargets(n)
            }
        },
        _searchPossibleTargets: function(n) {
            for (var u, e, o, i = [], r, f = this.getPointer(n), t = this._objects.length; t--; )
                if (this._objects[t] && this._objects[t].visible && this._objects[t].evented && this.containsPoint(n, this._objects[t])) {
                    if (!this.perPixelTargetFind && !this._objects[t].perPixelTargetFind) {
                        r = this._objects[t];
                        this.relatedTarget = r;
                        break
                    }
                    i[i.length] = this._objects[t]
                }
            for (u = 0,
            e = i.length; u < e; u++)
                if (f = this.getPointer(n),
                o = this.isTargetTransparent(i[u], f.x, f.y),
                !o) {
                    r = i[u];
                    this.relatedTarget = r;
                    break
                }
            return r
        },
        getPointer: function(n) {
            var t = r(n, this.upperCanvasEl);
            return {
                x: t.x - this._offset.left,
                y: t.y - this._offset.top
            }
        },
        _createUpperCanvas: function() {
            var n = this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/, "");
            this.upperCanvasEl = this._createCanvasElement();
            fabric.util.addClass(this.upperCanvasEl, "upper-canvas " + n);
            this.wrapperEl.appendChild(this.upperCanvasEl);
            this._copyCanvasStyle(this.lowerCanvasEl, this.upperCanvasEl);
            this._applyCanvasStyle(this.upperCanvasEl);
            this.contextTop = this.upperCanvasEl.getContext("2d")
        },
        _createCacheCanvas: function() {
            this.cacheCanvasEl = this._createCanvasElement();
            this.cacheCanvasEl.setAttribute("width", this.width);
            this.cacheCanvasEl.setAttribute("height", this.height);
            this.contextCache = this.cacheCanvasEl.getContext("2d")
        },
        _initWrapperElement: function() {
            this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, "div", {
                "class": this.containerClass
            });
            fabric.util.setStyle(this.wrapperEl, {
                width: this.getWidth() + "px",
                height: this.getHeight() + "px",
                position: "relative"
            });
            fabric.util.makeElementUnselectable(this.wrapperEl)
        },
        _applyCanvasStyle: function(n) {
            var t = this.getWidth() || n.width
              , i = this.getHeight() || n.height;
            fabric.util.setStyle(n, {
                position: "absolute",
                width: t + "px",
                height: i + "px",
                left: 0,
                top: 0
            });
            n.width = t;
            n.height = i;
            fabric.util.makeElementUnselectable(n)
        },
        _copyCanvasStyle: function(n, t) {
            t.style.cssText = n.style.cssText
        },
        getSelectionContext: function() {
            return this.contextTop
        },
        getSelectionElement: function() {
            return this.upperCanvasEl
        },
        _setActiveObject: function(n) {
            this._activeObject && this._activeObject.set("active", !1);
            this._activeObject = n;
            n.set("active", !0)
        },
        setActiveObject: function(n, t) {
            return this._setActiveObject(n),
            this.renderAll(),
            this.fire("object:selected", {
                target: n,
                e: t
            }),
            n.fire("selected", {
                e: t
            }),
            this
        },
        getActiveObject: function() {
            return this._activeObject
        },
        _discardActiveObject: function() {
            this._activeObject && this._activeObject.set("active", !1);
            this._activeObject = null
        },
        discardActiveObject: function(n) {
            return this._discardActiveObject(),
            this.renderAll(),
            this.fire("selection:cleared", {
                e: n
            }),
            this
        },
        _setActiveGroup: function(n) {
            this._activeGroup = n;
            n && (n.canvas = this,
            n.set("active", !0))
        },
        setActiveGroup: function(n, t) {
            return this._setActiveGroup(n),
            n && (this.fire("object:selected", {
                target: n,
                e: t
            }),
            n.fire("selected", {
                e: t
            })),
            this
        },
        getActiveGroup: function() {
            return this._activeGroup
        },
        _discardActiveGroup: function() {
            var n = this.getActiveGroup();
            n && n.destroy();
            this.setActiveGroup(null)
        },
        discardActiveGroup: function(n) {
            return this._discardActiveGroup(),
            this.fire("selection:cleared", {
                e: n
            }),
            this
        },
        deactivateAll: function() {
            for (var t = this.getObjects(), n = 0, i = t.length; n < i; n++)
                t[n].set("active", !1);
            return this._discardActiveGroup(),
            this._discardActiveObject(),
            this
        },
        deactivateAllWithDispatch: function(n) {
            var t = this.getActiveGroup() || this.getActiveObject();
            return t && this.fire("before:selection:cleared", {
                target: t,
                e: n
            }),
            this.deactivateAll(),
            t && this.fire("selection:cleared", {
                e: n
            }),
            this
        },
        drawControls: function(n) {
            var t = this.getActiveGroup();
            t ? this._drawGroupControls(n, t) : this._drawObjectsControls(n)
        },
        _drawGroupControls: function(n, t) {
            this._drawControls(n, t, "Group")
        },
        _drawObjectsControls: function(n) {
            for (var t = 0, i = this._objects.length; t < i; ++t)
                this._objects[t] && this._objects[t].active && (this._drawControls(n, this._objects[t], "Object"),
                this.lastRenderedObjectWithControlsAboveOverlay = this._objects[t])
        },
        _drawControls: function(n, t, i) {
            n.save();
            fabric[i].prototype.transform.call(t, n);
            t.drawBorders(n).drawControls(n);
            n.restore()
        }
    });
    for (i in fabric.StaticCanvas)
        i !== "prototype" && (fabric.Canvas[i] = fabric.StaticCanvas[i]);
    fabric.isTouchSupported && (fabric.Canvas.prototype._setCursorFromEvent = function() {}
    );
    fabric.Element = fabric.Canvas
}(),
function() {
    var u = ["n-resize", "ne-resize", "e-resize", "se-resize", "s-resize", "sw-resize", "w-resize", "nw-resize"]
      , i = {
        mt: 0,
        tr: 1,
        mr: 2,
        br: 3,
        mb: 4,
        bl: 5,
        ml: 6,
        tl: 7
    }
      , n = fabric.util.addListener
      , t = fabric.util.removeListener
      , r = fabric.util.getPointer;
    fabric.util.object.extend(fabric.Canvas.prototype, {
        _initEventListeners: function() {
            this._bindEvents();
            n(fabric.window, "resize", this._onResize);
            n(this.upperCanvasEl, "mousedown", this._onMouseDown);
            n(this.upperCanvasEl, "mousemove", this._onMouseMove);
            n(this.upperCanvasEl, "mousewheel", this._onMouseWheel);
            n(this.upperCanvasEl, "touchstart", this._onMouseDown);
            n(this.upperCanvasEl, "touchmove", this._onMouseMove);
            typeof Event != "undefined" && "add"in Event && (Event.add(this.upperCanvasEl, "gesture", this._onGesture),
            Event.add(this.upperCanvasEl, "drag", this._onDrag),
            Event.add(this.upperCanvasEl, "orientation", this._onOrientationChange),
            Event.add(this.upperCanvasEl, "shake", this._onShake))
        },
        _bindEvents: function() {
            this._onMouseDown = this._onMouseDown.bind(this);
            this._onMouseMove = this._onMouseMove.bind(this);
            this._onMouseUp = this._onMouseUp.bind(this);
            this._onResize = this._onResize.bind(this);
            this._onGesture = this._onGesture.bind(this);
            this._onDrag = this._onDrag.bind(this);
            this._onShake = this._onShake.bind(this);
            this._onOrientationChange = this._onOrientationChange.bind(this);
            this._onMouseWheel = this._onMouseWheel.bind(this)
        },
        removeListeners: function() {
            t(fabric.window, "resize", this._onResize);
            t(this.upperCanvasEl, "mousedown", this._onMouseDown);
            t(this.upperCanvasEl, "mousemove", this._onMouseMove);
            t(this.upperCanvasEl, "mousewheel", this._onMouseWheel);
            t(this.upperCanvasEl, "touchstart", this._onMouseDown);
            t(this.upperCanvasEl, "touchmove", this._onMouseMove);
            typeof Event != "undefined" && "remove"in Event && (Event.remove(this.upperCanvasEl, "gesture", this._onGesture),
            Event.remove(this.upperCanvasEl, "drag", this._onDrag),
            Event.remove(this.upperCanvasEl, "orientation", this._onOrientationChange),
            Event.remove(this.upperCanvasEl, "shake", this._onShake))
        },
        _onGesture: function(n, t) {
            this.__onTransformGesture && this.__onTransformGesture(n, t)
        },
        _onDrag: function(n, t) {
            this.__onDrag && this.__onDrag(n, t)
        },
        _onMouseWheel: function(n, t) {
            this.__onMouseWheel && this.__onMouseWheel(n, t)
        },
        _onOrientationChange: function(n, t) {
            this.__onOrientationChange && this.__onOrientationChange(n, t)
        },
        _onShake: function(n, t) {
            this.__onShake && this.__onShake(n, t)
        },
        _onMouseDown: function(i) {
            this.__onMouseDown(i);
            n(fabric.document, "mouseup", this._onMouseUp);
            n(fabric.document, "touchend", this._onMouseUp);
            n(fabric.document, "mousemove", this._onMouseMove);
            n(fabric.document, "touchmove", this._onMouseMove);
            t(this.upperCanvasEl, "mousemove", this._onMouseMove);
            t(this.upperCanvasEl, "touchmove", this._onMouseMove)
        },
        _onMouseUp: function(i) {
            this.__onMouseUp(i);
            t(fabric.document, "mouseup", this._onMouseUp);
            t(fabric.document, "touchend", this._onMouseUp);
            t(fabric.document, "mousemove", this._onMouseMove);
            t(fabric.document, "touchmove", this._onMouseMove);
            n(this.upperCanvasEl, "mousemove", this._onMouseMove);
            n(this.upperCanvasEl, "touchmove", this._onMouseMove)
        },
        _onMouseMove: function(n) {
            !this.allowTouchScrolling && n.preventDefault && n.preventDefault();
            this.__onMouseMove(n)
        },
        _onResize: function() {
            this.calcOffset()
        },
        _shouldRender: function(n, t) {
            var i = this.getActiveGroup() || this.getActiveObject();
            return !!(n && (n.isMoving || n !== i) || !n && !!i || !n && !i && !this._groupSelector || t && this._previousPointer && this.selection && (t.x !== this._previousPointer.x || t.y !== this._previousPointer.y))
        },
        __onMouseUp: function(n) {
            var t, i;
            if (this.isDrawingMode && this._isCurrentlyDrawing) {
                this._onMouseUpInDrawingMode(n);
                return
            }
            this._currentTransform ? (this._finalizeCurrentTransform(),
            t = this._currentTransform.target) : t = this.findTarget(n, !0);
            i = this._shouldRender(t, this.getPointer(n));
            this._maybeGroupObjects(n);
            t && (t.isMoving = !1);
            i && this.renderAll();
            this._handleCursorAndEvent(n, t)
        },
        _handleCursorAndEvent: function(n, t) {
            this._setCursorFromEvent(n, t);
            var i = this;
            setTimeout(function() {
                i._setCursorFromEvent(n, t)
            }, 50);
            this.fire("mouse:up", {
                target: t,
                e: n
            });
            t && t.fire("mouseup", {
                e: n
            })
        },
        _finalizeCurrentTransform: function() {
            var t = this._currentTransform
              , n = t.target;
            n._scaling && (n._scaling = !1);
            n.setCoords();
            this.stateful && n.hasStateChanged() && (this.fire("object:modified", {
                target: n
            }),
            n.fire("modified"));
            this._restoreOriginXY(n)
        },
        _restoreOriginXY: function(n) {
            if (this._previousOriginX && this._previousOriginY) {
                var t = n.translateToOriginPoint(n.getCenterPoint(), this._previousOriginX, this._previousOriginY);
                n.originX = this._previousOriginX;
                n.originY = this._previousOriginY;
                n.left = t.x;
                n.top = t.y;
                this._previousOriginX = null;
                this._previousOriginY = null
            }
        },
        _onMouseDownInDrawingMode: function(n) {
            this._isCurrentlyDrawing = !0;
            this.discardActiveObject(n).renderAll();
            this.clipTo && fabric.util.clipContext(this, this.contextTop);
            this.freeDrawingBrush.onMouseDown(this.getPointer(n));
            this.fire("mouse:down", {
                e: n
            })
        },
        _onMouseMoveInDrawingMode: function(n) {
            if (this._isCurrentlyDrawing) {
                var t = this.getPointer(n);
                this.freeDrawingBrush.onMouseMove(t)
            }
            this.upperCanvasEl.style.cursor = this.freeDrawingCursor;
            this.fire("mouse:move", {
                e: n
            })
        },
        _onMouseUpInDrawingMode: function(n) {
            this._isCurrentlyDrawing = !1;
            this.clipTo && this.contextTop.restore();
            this.freeDrawingBrush.onMouseUp();
            this.fire("mouse:up", {
                e: n
            })
        },
        __onMouseDown: function(n) {
            var f = "which"in n ? n.which === 1 : n.button === 1, t, i, u, r;
            if (f || fabric.isTouchSupported) {
                if (this.isDrawingMode) {
                    this._onMouseDownInDrawingMode(n);
                    return
                }
                this._currentTransform || (t = this.findTarget(n),
                i = this.getPointer(n),
                this._previousPointer = i,
                u = this._shouldRender(t, i),
                r = this._shouldGroup(n, t),
                this._shouldClearSelection(n, t) ? this._clearSelection(n, t, i) : r && (this._handleGrouping(n, t),
                t = this.getActiveGroup()),
                t && t.selectable && !r && (this._beforeTransform(n, t),
                this._setupCurrentTransform(n, t)),
                u && this.renderAll(),
                this.fire("mouse:down", {
                    target: t,
                    e: n
                }),
                t && t.fire("mousedown", {
                    e: n
                }))
            }
        },
        _beforeTransform: function(n, t) {
            var i;
            this.stateful && t.saveState();
            (i = t._findTargetCorner(n, this._offset)) && this.onBeforeScaleRotate(t);
            t !== this.getActiveGroup() && t !== this.getActiveObject() && (this.deactivateAll(),
            this.setActiveObject(t, n))
        },
        _clearSelection: function(n, t, i) {
            this.deactivateAllWithDispatch(n);
            t && t.selectable ? this.setActiveObject(t, n) : this.selection && (this._groupSelector = {
                ex: i.x,
                ey: i.y,
                top: 0,
                left: 0
            })
        },
        _setOriginToCenter: function(n) {
            this._previousOriginX = this._currentTransform.target.originX;
            this._previousOriginY = this._currentTransform.target.originY;
            var t = n.getCenterPoint();
            n.originX = "center";
            n.originY = "center";
            n.left = t.x;
            n.top = t.y;
            this._currentTransform.left = n.left;
            this._currentTransform.top = n.top
        },
        _setCenterToOrigin: function(n) {
            var t = n.translateToOriginPoint(n.getCenterPoint(), this._previousOriginX, this._previousOriginY);
            n.originX = this._previousOriginX;
            n.originY = this._previousOriginY;
            n.left = t.x;
            n.top = t.y;
            this._previousOriginX = null;
            this._previousOriginY = null
        },
        __onMouseMove: function(n) {
            var t, u, i;
            if (this.isDrawingMode) {
                this._onMouseMoveInDrawingMode(n);
                return
            }
            i = this._groupSelector;
            i ? (u = r(n, this.upperCanvasEl),
            i.left = u.x - this._offset.left - i.ex,
            i.top = u.y - this._offset.top - i.ey,
            this.renderTop()) : this._currentTransform ? this._transformObject(n) : (t = this.findTarget(n),
            !t || t && !t.selectable ? this.upperCanvasEl.style.cursor = this.defaultCursor : this._setCursorFromEvent(n, t));
            this.fire("mouse:move", {
                target: t,
                e: n
            });
            t && t.fire("mousemove", {
                e: n
            })
        },
        _transformObject: function(n) {
            var i = r(n, this.upperCanvasEl)
              , t = this._currentTransform;
            t.reset = !1;
            t.target.isMoving = !0;
            this._beforeScaleTransform(n, t);
            this._performTransformAction(n, t, i);
            this.renderAll()
        },
        _performTransformAction: function(n, t, i) {
            var r = i.x
              , u = i.y
              , f = t.target
              , e = t.action;
            e === "rotate" ? (this._rotateObject(r, u),
            this._fire("rotating", f, n)) : e === "scale" ? (this._onScale(n, t, r, u),
            this._fire("scaling", f, n)) : e === "scaleX" ? (this._scaleObject(r, u, "x"),
            this._fire("scaling", f, n)) : e === "scaleY" ? (this._scaleObject(r, u, "y"),
            this._fire("scaling", f, n)) : (this._translateObject(r, u),
            this._fire("moving", f, n),
            this._setCursor(this.moveCursor))
        },
        _fire: function(n, t, i) {
            this.fire("object:" + n, {
                target: t,
                e: i
            });
            t.fire(n, {
                e: i
            })
        },
        _beforeScaleTransform: function(n, t) {
            if (t.action === "scale" || t.action === "scaleX" || t.action === "scaleY") {
                var i = this._shouldCenterTransform(n, t.target);
                (i && (t.originX !== "center" || t.originY !== "center") || !i && t.originX === "center" && t.originY === "center") && (this._resetCurrentTransform(n),
                t.reset = !0)
            }
        },
        _onScale: function(n, t, i, r) {
            (n.shiftKey || this.uniScaleTransform) && !t.target.get("lockUniScaling") ? (t.currentAction = "scale",
            this._scaleObject(i, r)) : (!t.reset && t.currentAction === "scale" && this._resetCurrentTransform(n, t.target),
            t.currentAction = "scaleEqually",
            this._scaleObject(i, r, "equally"))
        },
        _setCursorFromEvent: function(n, t) {
            var u = this.upperCanvasEl.style, i, r;
            return !t || !t.selectable ? (u.cursor = this.defaultCursor,
            !1) : (i = this.getActiveGroup(),
            r = t._findTargetCorner && (!i || !i.contains(t)) && t._findTargetCorner(n, this._offset),
            r ? this._setCornerCursor(r, t) : u.cursor = t.hoverCursor || this.hoverCursor,
            !0)
        },
        _setCornerCursor: function(n, t) {
            var r = this.upperCanvasEl.style;
            if (n in i)
                r.cursor = this._getRotatedCornerCursor(n, t);
            else {
                if (n !== "mtr" || !t.hasRotatingPoint)
                    return r.cursor = this.defaultCursor,
                    !1;
                r.cursor = this.rotationCursor
            }
        },
        _getRotatedCornerCursor: function(n, t) {
            var r = Math.round(t.getAngle() % 360 / 45);
            return r < 0 && (r += 8),
            r += i[n],
            r %= 8,
            u[r]
        }
    })
}(),
function() {
    var n = Math.min
      , t = Math.max;
    fabric.util.object.extend(fabric.Canvas.prototype, {
        _shouldGroup: function(n, t) {
            var i = this.getActiveObject();
            return n.shiftKey && (this.getActiveGroup() || i && i !== t) && this.selection
        },
        _handleGrouping: function(n, t) {
            (t !== this.getActiveGroup() || (t = this.findTarget(n, !0),
            t && !t.isType("group"))) && (this.getActiveGroup() ? this._updateActiveGroup(t, n) : this._createActiveGroup(t, n),
            this._activeGroup && this._activeGroup.saveCoords())
        },
        _updateActiveGroup: function(n, t) {
            var i = this.getActiveGroup();
            if (i.contains(n)) {
                if (i.removeWithUpdate(n),
                this._resetObjectTransform(i),
                n.set("active", !1),
                i.size() === 1) {
                    this.discardActiveGroup(t);
                    this.setActiveObject(i.item(0));
                    return
                }
            } else
                i.addWithUpdate(n),
                this._resetObjectTransform(i);
            this.fire("selection:created", {
                target: i,
                e: t
            });
            i.set("active", !0)
        },
        _createActiveGroup: function(n, t) {
            if (this._activeObject && n !== this._activeObject) {
                var i = this._createGroup(n);
                this.setActiveGroup(i);
                this._activeObject = null;
                this.fire("selection:created", {
                    target: i,
                    e: t
                })
            }
            n.set("active", !0)
        },
        _createGroup: function(n) {
            var t = this.getObjects()
              , i = t.indexOf(this._activeObject) < t.indexOf(n)
              , r = i ? [this._activeObject, n] : [n, this._activeObject];
            return new fabric.Group(r,{
                originX: "center",
                originY: "center"
            })
        },
        _groupSelectedObjects: function(n) {
            var t = this._collectObjects();
            t.length === 1 ? this.setActiveObject(t[0], n) : t.length > 1 && (t = new fabric.Group(t.reverse(),{
                originX: "center",
                originY: "center"
            }),
            this.setActiveGroup(t, n),
            t.saveCoords(),
            this.fire("selection:created", {
                target: t
            }),
            this.renderAll())
        },
        _collectObjects: function() {
            for (var h = [], i, r = this._groupSelector.ex, u = this._groupSelector.ey, f = r + this._groupSelector.left, e = u + this._groupSelector.top, o = new fabric.Point(n(r, f),n(u, e)), s = new fabric.Point(t(r, f),t(u, e)), l = r === f && u === e, c = this._objects.length; c--; )
                if ((i = this._objects[c],
                i && i.selectable && i.visible) && (i.intersectsWithRect(o, s) || i.isContainedWithinRect(o, s) || i.containsPoint(o) || i.containsPoint(s)) && (i.set("active", !0),
                h.push(i),
                l))
                    break;
            return h
        },
        _maybeGroupObjects: function(n) {
            this.selection && this._groupSelector && this._groupSelectedObjects(n);
            var t = this.getActiveGroup();
            t && (t.setObjectsCoords().setCoords(),
            t.isMoving = !1,
            this._setCursor(this.defaultCursor));
            this._groupSelector = null;
            this._currentTransform = null
        }
    })
}();
fabric.util.object.extend(fabric.StaticCanvas.prototype, {
    toDataURL: function(n) {
        n || (n = {});
        var t = n.format || "png"
          , i = n.quality || 1
          , r = n.multiplier || 1
          , u = {
            left: n.left,
            top: n.top,
            width: n.width,
            height: n.height
        };
        return r !== 1 ? this.__toDataURLWithMultiplier(t, i, u, r) : this.__toDataURL(t, i, u)
    },
    __toDataURL: function(n, t, i) {
        var u, r, f;
        return this.renderAll(!0),
        u = this.upperCanvasEl || this.lowerCanvasEl,
        r = this.__getCroppedCanvas(u, i),
        n === "jpg" && (n = "jpeg"),
        f = fabric.StaticCanvas.supports("toDataURLWithQuality") ? (r || u).toDataURL("image/" + n, t) : (r || u).toDataURL("image/" + n),
        this.contextTop && this.clearContext(this.contextTop),
        this.renderAll(),
        r && (r = null),
        f
    },
    __getCroppedCanvas: function(n, t) {
        var i, r, u = "left"in t || "top"in t || "width"in t || "height"in t;
        return u && (i = fabric.util.createCanvasElement(),
        r = i.getContext("2d"),
        i.width = t.width || this.width,
        i.height = t.height || this.height,
        r.drawImage(n, -t.left || 0, -t.top || 0)),
        i
    },
    __toDataURLWithMultiplier: function(n, t, i, r) {
        var f = this.getWidth(), e = this.getHeight(), c = f * r, l = e * r, o = this.getActiveObject(), u = this.getActiveGroup(), s = this.contextTop || this.contextContainer, h;
        return this.setWidth(c).setHeight(l),
        s.scale(r, r),
        i.left && (i.left *= r),
        i.top && (i.top *= r),
        i.width && (i.width *= r),
        i.height && (i.height *= r),
        u ? this._tempRemoveBordersControlsFromGroup(u) : o && this.deactivateAll && this.deactivateAll(),
        this.renderAll(!0),
        h = this.__toDataURL(n, t, i),
        this.width = f,
        this.height = e,
        s.scale(1 / r, 1 / r),
        this.setWidth(f).setHeight(e),
        u ? this._restoreBordersControlsOnGroup(u) : o && this.setActiveObject && this.setActiveObject(o),
        this.contextTop && this.clearContext(this.contextTop),
        this.renderAll(),
        h
    },
    toDataURLWithMultiplier: function(n, t, i) {
        return this.toDataURL({
            format: n,
            multiplier: t,
            quality: i
        })
    },
    _tempRemoveBordersControlsFromGroup: function(n) {
        n.origHasControls = n.hasControls;
        n.origBorderColor = n.borderColor;
        n.hasControls = !0;
        n.borderColor = "rgba(0,0,0,0)";
        n.forEachObject(function(n) {
            n.origBorderColor = n.borderColor;
            n.borderColor = "rgba(0,0,0,0)"
        })
    },
    _restoreBordersControlsOnGroup: function(n) {
        n.hideControls = n.origHideControls;
        n.borderColor = n.origBorderColor;
        n.forEachObject(function(n) {
            n.borderColor = n.origBorderColor;
            delete n.origBorderColor
        })
    }
});
fabric.util.object.extend(fabric.StaticCanvas.prototype, {
    loadFromDatalessJSON: function(n, t, i) {
        return this.loadFromJSON(n, t, i)
    },
    loadFromJSON: function(n, t, i) {
        var r, u;
        if (n)
            return r = typeof n == "string" ? JSON.parse(n) : n,
            this.clear(),
            u = this,
            this._enlivenObjects(r.objects, function() {
                u._setBgOverlay(r, t)
            }, i),
            this
    },
    _setBgOverlay: function(n, t) {
        var u = this, i = {
            backgroundColor: !1,
            overlayColor: !1,
            backgroundImage: !1,
            overlayImage: !1
        }, r;
        if (!n.backgroundImage && !n.overlayImage && !n.background && !n.overlay) {
            t && t();
            return
        }
        r = function() {
            i.backgroundImage && i.overlayImage && i.backgroundColor && i.overlayColor && (u.renderAll(),
            t && t())
        }
        ;
        this.__setBgOverlay("backgroundImage", n.backgroundImage, i, r);
        this.__setBgOverlay("overlayImage", n.overlayImage, i, r);
        this.__setBgOverlay("backgroundColor", n.background, i, r);
        this.__setBgOverlay("overlayColor", n.overlay, i, r);
        r()
    },
    __setBgOverlay: function(n, t, i, r) {
        var u = this;
        if (!t) {
            i[n] = !0;
            return
        }
        n === "backgroundImage" || n === "overlayImage" ? fabric.Image.fromObject(t, function(t) {
            u[n] = t;
            i[n] = !0;
            r && r()
        }) : this["set" + fabric.util.string.capitalize(n, !0)](t, function() {
            i[n] = !0;
            r && r()
        })
    },
    _enlivenObjects: function(n, t, i) {
        var r = this, u;
        n.length === 0 && t && t();
        u = this.renderOnAddRemove;
        this.renderOnAddRemove = !1;
        fabric.util.enlivenObjects(n, function(n) {
            n.forEach(function(n, t) {
                r.insertAt(n, t, !0)
            });
            r.renderOnAddRemove = u;
            t && t()
        }, null, i)
    },
    _toDataURL: function(n, t) {
        this.clone(function(i) {
            t(i.toDataURL(n))
        })
    },
    _toDataURLWithMultiplier: function(n, t, i) {
        this.clone(function(r) {
            i(r.toDataURLWithMultiplier(n, t))
        })
    },
    clone: function(n, t) {
        var i = JSON.stringify(this.toJSON(t));
        this.cloneWithoutData(function(t) {
            t.loadFromJSON(i, function() {
                n && n(t)
            })
        })
    },
    cloneWithoutData: function(n) {
        var i = fabric.document.createElement("canvas"), t;
        i.width = this.getWidth();
        i.height = this.getHeight();
        t = new fabric.Canvas(i);
        t.clipTo = this.clipTo;
        this.backgroundImage ? (t.setBackgroundImage(this.backgroundImage.src, function() {
            t.renderAll();
            n && n(t)
        }),
        t.backgroundImageOpacity = this.backgroundImageOpacity,
        t.backgroundImageStretch = this.backgroundImageStretch) : n && n(t)
    }
}),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , r = t.util.object.extend
      , i = t.util.toFixed
      , u = t.util.string.capitalize
      , f = t.util.degreesToRadians
      , e = t.StaticCanvas.supports("setLineDash");
    t.Object || (t.Object = t.util.createClass({
        type: "object",
        originX: "left",
        originY: "top",
        top: 0,
        left: 0,
        width: 0,
        height: 0,
        scaleX: 1,
        scaleY: 1,
        flipX: !1,
        flipY: !1,
        opacity: 1,
        angle: 0,
        cornerSize: 12,
        transparentCorners: !0,
        hoverCursor: null,
        padding: 0,
        borderColor: "rgba(102,153,255,0.75)",
        cornerColor: "rgba(102,153,255,0.5)",
        centeredScaling: !1,
        centeredRotation: !0,
        fill: "rgb(0,0,0)",
        fillRule: "source-over",
        backgroundColor: "",
        stroke: null,
        strokeWidth: 1,
        strokeDashArray: null,
        strokeLineCap: "butt",
        strokeLineJoin: "miter",
        strokeMiterLimit: 10,
        shadow: null,
        borderOpacityWhenMoving: .4,
        borderScaleFactor: 1,
        transformMatrix: null,
        minScaleLimit: .01,
        selectable: !0,
        evented: !0,
        visible: !0,
        hasControls: !0,
        hasBorders: !0,
        hasRotatingPoint: !0,
        rotatingPointOffset: 40,
        perPixelTargetFind: !1,
        includeDefaultValues: !0,
        clipTo: null,
        lockMovementX: !1,
        lockMovementY: !1,
        lockRotation: !1,
        lockScalingX: !1,
        lockScalingY: !1,
        lockUniScaling: !1,
        stateProperties: "top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule shadow clipTo visible backgroundColor".split(" "),
        initialize: function(n) {
            n && this.setOptions(n)
        },
        _initGradient: function(n) {
            !n.fill || !n.fill.colorStops || n.fill instanceof t.Gradient || this.set("fill", new t.Gradient(n.fill))
        },
        _initPattern: function(n) {
            !n.fill || !n.fill.source || n.fill instanceof t.Pattern || this.set("fill", new t.Pattern(n.fill));
            !n.stroke || !n.stroke.source || n.stroke instanceof t.Pattern || this.set("stroke", new t.Pattern(n.stroke))
        },
        _initClipping: function(n) {
            if (n.clipTo && typeof n.clipTo == "string") {
                var i = t.util.getFunctionBody(n.clipTo);
                typeof i != "undefined" && (this.clipTo = new Function("ctx",i))
            }
        },
        setOptions: function(n) {
            for (var t in n)
                this.set(t, n[t]);
            this._initGradient(n);
            this._initPattern(n);
            this._initClipping(n)
        },
        transform: function(n, t) {
            n.globalAlpha = this.opacity;
            var i = t ? this._getLeftTopCoords() : this.getCenterPoint();
            n.translate(i.x, i.y);
            n.rotate(f(this.angle));
            n.scale(this.scaleX * (this.flipX ? -1 : 1), this.scaleY * (this.flipY ? -1 : 1))
        },
        toObject: function(n) {
            var r = t.Object.NUM_FRACTION_DIGITS
              , u = {
                type: this.type,
                originX: this.originX,
                originY: this.originY,
                left: i(this.left, r),
                top: i(this.top, r),
                width: i(this.width, r),
                height: i(this.height, r),
                fill: this.fill && this.fill.toObject ? this.fill.toObject() : this.fill,
                stroke: this.stroke && this.stroke.toObject ? this.stroke.toObject() : this.stroke,
                strokeWidth: i(this.strokeWidth, r),
                strokeDashArray: this.strokeDashArray,
                strokeLineCap: this.strokeLineCap,
                strokeLineJoin: this.strokeLineJoin,
                strokeMiterLimit: i(this.strokeMiterLimit, r),
                scaleX: i(this.scaleX, r),
                scaleY: i(this.scaleY, r),
                angle: i(this.getAngle(), r),
                flipX: this.flipX,
                flipY: this.flipY,
                opacity: i(this.opacity, r),
                shadow: this.shadow && this.shadow.toObject ? this.shadow.toObject() : this.shadow,
                visible: this.visible,
                clipTo: this.clipTo && String(this.clipTo),
                backgroundColor: this.backgroundColor
            };
            return this.includeDefaultValues || (u = this._removeDefaultValues(u)),
            t.util.populateWithProperties(this, u, n),
            u
        },
        toDatalessObject: function(n) {
            return this.toObject(n)
        },
        _removeDefaultValues: function(n) {
            var i = t.util.getKlass(n.type).prototype
              , r = i.stateProperties;
            return r.forEach(function(t) {
                n[t] === i[t] && delete n[t]
            }),
            n
        },
        toString: function() {
            return "#<fabric." + u(this.type) + ">"
        },
        get: function(n) {
            return this[n]
        },
        set: function(n, t) {
            if (typeof n == "object")
                for (var i in n)
                    this._set(i, n[i]);
            else
                typeof t == "function" && n !== "clipTo" ? this._set(n, t(this.get(n))) : this._set(n, t);
            return this
        },
        _set: function(n, r) {
            var u = n === "scaleX" || n === "scaleY";
            return u && (r = this._constrainScale(r)),
            n === "scaleX" && r < 0 ? (this.flipX = !this.flipX,
            r *= -1) : n === "scaleY" && r < 0 ? (this.flipY = !this.flipY,
            r *= -1) : n === "width" || n === "height" ? this.minScaleLimit = i(Math.min(.1, 1 / Math.max(this.width, this.height)), 2) : n === "shadow" && r && !(r instanceof t.Shadow) && (r = new t.Shadow(r)),
            this[n] = r,
            this
        },
        toggle: function(n) {
            var t = this.get(n);
            return typeof t == "boolean" && this.set(n, !t),
            this
        },
        setSourcePath: function(n) {
            return this.sourcePath = n,
            this
        },
        render: function(n, i) {
            if (this.width !== 0 && this.height !== 0 && this.visible) {
                n.save();
                this._transform(n, i);
                this._setStrokeStyles(n);
                this._setFillStyles(n);
                var r = this.transformMatrix;
                r && this.group && (n.translate(-this.group.width / 2, -this.group.height / 2),
                n.transform(r[0], r[1], r[2], r[3], r[4], r[5]));
                this._setShadow(n);
                this.clipTo && t.util.clipContext(this, n);
                this._render(n, i);
                this.clipTo && n.restore();
                this._removeShadow(n);
                this.active && !i && (this.drawBorders(n),
                this.drawControls(n));
                n.restore()
            }
        },
        _transform: function(n, t) {
            var i = this.transformMatrix;
            i && !this.group && n.setTransform(i[0], i[1], i[2], i[3], i[4], i[5]);
            t || this.transform(n)
        },
        _setStrokeStyles: function(n) {
            this.stroke && (n.lineWidth = this.strokeWidth,
            n.lineCap = this.strokeLineCap,
            n.lineJoin = this.strokeLineJoin,
            n.miterLimit = this.strokeMiterLimit,
            n.strokeStyle = this.stroke.toLive ? this.stroke.toLive(n) : this.stroke)
        },
        _setFillStyles: function(n) {
            this.fill && (n.fillStyle = this.fill.toLive ? this.fill.toLive(n) : this.fill)
        },
        _setShadow: function(n) {
            this.shadow && (n.shadowColor = this.shadow.color,
            n.shadowBlur = this.shadow.blur,
            n.shadowOffsetX = this.shadow.offsetX,
            n.shadowOffsetY = this.shadow.offsetY)
        },
        _removeShadow: function(n) {
            n.shadowColor = "";
            n.shadowBlur = n.shadowOffsetX = n.shadowOffsetY = 0
        },
        _renderFill: function(n) {
            this.fill && (this.fill.toLive && (n.save(),
            n.translate(-this.width / 2 + this.fill.offsetX || 0, -this.height / 2 + this.fill.offsetY || 0)),
            n.fill(),
            this.fill.toLive && n.restore(),
            this.shadow && !this.shadow.affectStroke && this._removeShadow(n))
        },
        _renderStroke: function(n) {
            this.stroke && (n.save(),
            this.strokeDashArray ? (1 & this.strokeDashArray.length && this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray),
            e ? (n.setLineDash(this.strokeDashArray),
            this._stroke && this._stroke(n)) : this._renderDashedStroke && this._renderDashedStroke(n),
            n.stroke()) : this._stroke ? this._stroke(n) : n.stroke(),
            this._removeShadow(n),
            n.restore())
        },
        clone: function(n, i) {
            return this.constructor.fromObject ? this.constructor.fromObject(this.toObject(i), n) : new t.Object(this.toObject(i))
        },
        cloneAsImage: function(n) {
            var i = this.toDataURL();
            return t.util.loadImage(i, function(i) {
                n && n(new t.Image(i))
            }),
            this
        },
        toDataURL: function(n) {
            var i, u, r, f, e, o;
            return n || (n = {}),
            i = t.util.createCanvasElement(),
            u = this.getBoundingRect(),
            i.width = u.width,
            i.height = u.height,
            t.util.wrapElement(i, "div"),
            r = new t.Canvas(i),
            n.format === "jpg" && (n.format = "jpeg"),
            n.format === "jpeg" && (r.backgroundColor = "#fff"),
            f = {
                active: this.get("active"),
                left: this.getLeft(),
                top: this.getTop()
            },
            this.set("active", !1),
            this.setPositionByOrigin(new t.Point(i.width / 2,i.height / 2), "center", "center"),
            e = this.canvas,
            r.add(this),
            o = r.toDataURL(n),
            this.set(f).setCoords(),
            this.canvas = e,
            r.dispose(),
            r = null,
            o
        },
        isType: function(n) {
            return this.type === n
        },
        complexity: function() {
            return 0
        },
        toJSON: function(n) {
            return this.toObject(n)
        },
        setGradient: function(n, i) {
            var r, u, f;
            i || (i = {});
            r = {
                colorStops: []
            };
            r.type = i.type || (i.r1 || i.r2 ? "radial" : "linear");
            r.coords = {
                x1: i.x1,
                y1: i.y1,
                x2: i.x2,
                y2: i.y2
            };
            (i.r1 || i.r2) && (r.coords.r1 = i.r1,
            r.coords.r2 = i.r2);
            for (u in i.colorStops)
                f = new t.Color(i.colorStops[u]),
                r.colorStops.push({
                    offset: u,
                    color: f.toRgb(),
                    opacity: f.getAlpha()
                });
            return this.set(n, t.Gradient.forObject(this, r))
        },
        setPatternFill: function(n) {
            return this.set("fill", new t.Pattern(n))
        },
        setShadow: function(n) {
            return this.set("shadow", new t.Shadow(n))
        },
        setColor: function(n) {
            return this.set("fill", n),
            this
        },
        centerH: function() {
            return this.canvas.centerObjectH(this),
            this
        },
        centerV: function() {
            return this.canvas.centerObjectV(this),
            this
        },
        center: function() {
            return this.canvas.centerObject(this),
            this
        },
        remove: function() {
            return this.canvas.remove(this)
        },
        getLocalPointer: function(n, t) {
            t = t || this.canvas.getPointer(n);
            var i = this.translateToOriginPoint(this.getCenterPoint(), "left", "top");
            return {
                x: t.x - i.x,
                y: t.y - i.y
            }
        }
    }),
    t.util.createAccessors(t.Object),
    t.Object.prototype.rotate = t.Object.prototype.setAngle,
    r(t.Object.prototype, t.Observable),
    t.Object.NUM_FRACTION_DIGITS = 2,
    t.Object.__uid = 0)
}(typeof exports != "undefined" ? exports : this),
function() {
    var n = fabric.util.degreesToRadians;
    fabric.util.object.extend(fabric.Object.prototype, {
        translateToCenterPoint: function(t, i, r) {
            var f = t.x
              , e = t.y
              , u = this.stroke ? this.strokeWidth : 0;
            return i === "left" ? f = t.x + (this.getWidth() + u * this.scaleX) / 2 : i === "right" && (f = t.x - (this.getWidth() + u * this.scaleX) / 2),
            r === "top" ? e = t.y + (this.getHeight() + u * this.scaleY) / 2 : r === "bottom" && (e = t.y - (this.getHeight() + u * this.scaleY) / 2),
            fabric.util.rotatePoint(new fabric.Point(f,e), t, n(this.angle))
        },
        translateToOriginPoint: function(t, i, r) {
            var f = t.x
              , e = t.y
              , u = this.stroke ? this.strokeWidth : 0;
            return i === "left" ? f = t.x - (this.getWidth() + u * this.scaleX) / 2 : i === "right" && (f = t.x + (this.getWidth() + u * this.scaleX) / 2),
            r === "top" ? e = t.y - (this.getHeight() + u * this.scaleY) / 2 : r === "bottom" && (e = t.y + (this.getHeight() + u * this.scaleY) / 2),
            fabric.util.rotatePoint(new fabric.Point(f,e), t, n(this.angle))
        },
        getCenterPoint: function() {
            var n = new fabric.Point(this.left,this.top);
            return this.translateToCenterPoint(n, this.originX, this.originY)
        },
        getPointByOrigin: function(n, t) {
            var i = this.getCenterPoint();
            return this.translateToOriginPoint(i, n, t)
        },
        toLocalPoint: function(t, i, r) {
            var u = this.getCenterPoint(), f = this.stroke ? this.strokeWidth : 0, e, o;
            return i && r ? (e = i === "left" ? u.x - (this.getWidth() + f * this.scaleX) / 2 : i === "right" ? u.x + (this.getWidth() + f * this.scaleX) / 2 : u.x,
            o = r === "top" ? u.y - (this.getHeight() + f * this.scaleY) / 2 : r === "bottom" ? u.y + (this.getHeight() + f * this.scaleY) / 2 : u.y) : (e = this.left,
            o = this.top),
            fabric.util.rotatePoint(new fabric.Point(t.x,t.y), u, -n(this.angle)).subtractEquals(new fabric.Point(e,o))
        },
        setPositionByOrigin: function(n, t, i) {
            var u = this.translateToCenterPoint(n, t, i)
              , r = this.translateToOriginPoint(u, this.originX, this.originY);
            this.set("left", r.x);
            this.set("top", r.y)
        },
        adjustPosition: function(t) {
            var i = n(this.angle)
              , r = this.getWidth() / 2
              , u = Math.cos(i) * r
              , f = Math.sin(i) * r
              , e = this.getWidth()
              , o = Math.cos(i) * e
              , s = Math.sin(i) * e;
            this.originX === "center" && t === "left" || this.originX === "right" && t === "center" ? (this.left -= u,
            this.top -= f) : this.originX === "left" && t === "center" || this.originX === "center" && t === "right" ? (this.left += u,
            this.top += f) : this.originX === "left" && t === "right" ? (this.left += o,
            this.top += s) : this.originX === "right" && t === "left" && (this.left -= o,
            this.top -= s);
            this.setCoords();
            this.originX = t
        },
        _getLeftTopCoords: function() {
            return this.translateToOriginPoint(this.getCenterPoint(), "left", "center")
        }
    })
}(),
function() {
    var n = fabric.util.degreesToRadians;
    fabric.util.object.extend(fabric.Object.prototype, {
        oCoords: null,
        intersectsWithRect: function(n, t) {
            var i = this.oCoords
              , r = new fabric.Point(i.tl.x,i.tl.y)
              , u = new fabric.Point(i.tr.x,i.tr.y)
              , f = new fabric.Point(i.bl.x,i.bl.y)
              , e = new fabric.Point(i.br.x,i.br.y)
              , o = fabric.Intersection.intersectPolygonRectangle([r, u, e, f], n, t);
            return o.status === "Intersection"
        },
        intersectsWithObject: function(n) {
            function r(n) {
                return {
                    tl: new fabric.Point(n.tl.x,n.tl.y),
                    tr: new fabric.Point(n.tr.x,n.tr.y),
                    bl: new fabric.Point(n.bl.x,n.bl.y),
                    br: new fabric.Point(n.br.x,n.br.y)
                }
            }
            var t = r(this.oCoords)
              , i = r(n.oCoords)
              , u = fabric.Intersection.intersectPolygonPolygon([t.tl, t.tr, t.br, t.bl], [i.tl, i.tr, i.br, i.bl]);
            return u.status === "Intersection"
        },
        isContainedWithinObject: function(n) {
            var t = n.getBoundingRect()
              , i = new fabric.Point(t.left,t.top)
              , r = new fabric.Point(t.left + t.width,t.top + t.height);
            return this.isContainedWithinRect(i, r)
        },
        isContainedWithinRect: function(n, t) {
            var i = this.getBoundingRect();
            return i.left > n.x && i.left + i.width < t.x && i.top > n.y && i.top + i.height < t.y
        },
        containsPoint: function(n) {
            var i = this._getImageLines(this.oCoords)
              , t = this._findCrossPoints(n, i);
            return t !== 0 && t % 2 == 1
        },
        _getImageLines: function(n) {
            return {
                topline: {
                    o: n.tl,
                    d: n.tr
                },
                rightline: {
                    o: n.tr,
                    d: n.br
                },
                bottomline: {
                    o: n.br,
                    d: n.bl
                },
                leftline: {
                    o: n.bl,
                    d: n.tl
                }
            }
        },
        _findCrossPoints: function(n, t) {
            var r, f, e, s, u, h, o = 0, i;
            for (var c in t)
                if ((i = t[c],
                !(i.o.y < n.y) || !(i.d.y < n.y)) && (!(i.o.y >= n.y) || !(i.d.y >= n.y)) && (i.o.x === i.d.x && i.o.x >= n.x ? (u = i.o.x,
                h = n.y) : (r = 0,
                f = (i.d.y - i.o.y) / (i.d.x - i.o.x),
                e = n.y - r * n.x,
                s = i.o.y - f * i.o.x,
                u = -(e - s) / (r - f),
                h = e + r * u),
                u >= n.x && (o += 1),
                o === 2))
                    break;
            return o
        },
        getBoundingRectWidth: function() {
            return this.getBoundingRect().width
        },
        getBoundingRectHeight: function() {
            return this.getBoundingRect().height
        },
        getBoundingRect: function() {
            this.oCoords || this.setCoords();
            var n = [this.oCoords.tl.x, this.oCoords.tr.x, this.oCoords.br.x, this.oCoords.bl.x]
              , t = fabric.util.array.min(n)
              , u = fabric.util.array.max(n)
              , f = Math.abs(t - u)
              , i = [this.oCoords.tl.y, this.oCoords.tr.y, this.oCoords.br.y, this.oCoords.bl.y]
              , r = fabric.util.array.min(i)
              , e = fabric.util.array.max(i)
              , o = Math.abs(r - e);
            return {
                left: t,
                top: r,
                width: f,
                height: o
            }
        },
        getWidth: function() {
            return this.width * this.scaleX
        },
        getHeight: function() {
            return this.height * this.scaleY
        },
        _constrainScale: function(n) {
            return Math.abs(n) < this.minScaleLimit ? n < 0 ? -this.minScaleLimit : this.minScaleLimit : n
        },
        scale: function(n) {
            return n = this._constrainScale(n),
            n < 0 && (this.flipX = !this.flipX,
            this.flipY = !this.flipY,
            n *= -1),
            this.scaleX = n,
            this.scaleY = n,
            this.setCoords(),
            this
        },
        scaleToWidth: function(n) {
            var t = this.getBoundingRectWidth() / this.getWidth();
            return this.scale(n / this.width / t)
        },
        scaleToHeight: function(n) {
            var t = this.getBoundingRectHeight() / this.getHeight();
            return this.scale(n / this.height / t)
        },
        setCoords: function() {
            var s = this.strokeWidth > 1 ? this.strokeWidth : 0
              , h = this.padding
              , f = n(this.angle);
            this.currentWidth = (this.width + s) * this.scaleX + h * 2;
            this.currentHeight = (this.height + s) * this.scaleY + h * 2;
            this.currentWidth < 0 && (this.currentWidth = Math.abs(this.currentWidth));
            var c = Math.sqrt(Math.pow(this.currentWidth / 2, 2) + Math.pow(this.currentHeight / 2, 2))
              , l = Math.atan(isFinite(this.currentHeight / this.currentWidth) ? this.currentHeight / this.currentWidth : 0)
              , v = Math.cos(l + f) * c
              , y = Math.sin(l + f) * c
              , i = Math.sin(f)
              , r = Math.cos(f)
              , a = this.getCenterPoint()
              , t = {
                x: a.x - v,
                y: a.y - y
            }
              , u = {
                x: t.x + this.currentWidth * r,
                y: t.y + this.currentWidth * i
            }
              , p = {
                x: u.x - this.currentHeight * i,
                y: u.y + this.currentHeight * r
            }
              , e = {
                x: t.x - this.currentHeight * i,
                y: t.y + this.currentHeight * r
            }
              , w = {
                x: t.x - this.currentHeight / 2 * i,
                y: t.y + this.currentHeight / 2 * r
            }
              , o = {
                x: t.x + this.currentWidth / 2 * r,
                y: t.y + this.currentWidth / 2 * i
            }
              , b = {
                x: u.x - this.currentHeight / 2 * i,
                y: u.y + this.currentHeight / 2 * r
            }
              , k = {
                x: e.x + this.currentWidth / 2 * r,
                y: e.y + this.currentWidth / 2 * i
            }
              , d = {
                x: o.x,
                y: o.y
            };
            return this.oCoords = {
                tl: t,
                tr: u,
                br: p,
                bl: e,
                ml: w,
                mt: o,
                mr: b,
                mb: k,
                mtr: d
            },
            this._setCornerCoords && this._setCornerCoords(),
            this
        }
    })
}();
fabric.util.object.extend(fabric.Object.prototype, {
    sendToBack: function() {
        return this.group ? fabric.StaticCanvas.prototype.sendToBack.call(this.group, this) : this.canvas.sendToBack(this),
        this
    },
    bringToFront: function() {
        return this.group ? fabric.StaticCanvas.prototype.bringToFront.call(this.group, this) : this.canvas.bringToFront(this),
        this
    },
    sendBackwards: function(n) {
        return this.group ? fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, n) : this.canvas.sendBackwards(this, n),
        this
    },
    bringForward: function(n) {
        return this.group ? fabric.StaticCanvas.prototype.bringForward.call(this.group, this, n) : this.canvas.bringForward(this, n),
        this
    },
    moveTo: function(n) {
        return this.group ? fabric.StaticCanvas.prototype.moveTo.call(this.group, this, n) : this.canvas.moveTo(this, n),
        this
    }
});
fabric.util.object.extend(fabric.Object.prototype, {
    getSvgStyles: function() {
        var n = this.fill ? this.fill.toLive ? "url(#SVGID_" + this.fill.id + ")" : this.fill : "none"
          , t = this.stroke ? this.stroke.toLive ? "url(#SVGID_" + this.stroke.id + ")" : this.stroke : "none"
          , i = this.strokeWidth ? this.strokeWidth : "0"
          , r = this.strokeDashArray ? this.strokeDashArray.join(" ") : ""
          , u = this.strokeLineCap ? this.strokeLineCap : "butt"
          , f = this.strokeLineJoin ? this.strokeLineJoin : "miter"
          , e = this.strokeMiterLimit ? this.strokeMiterLimit : "4"
          , o = typeof this.opacity != "undefined" ? this.opacity : "1"
          , s = this.visible ? "" : " visibility: hidden;"
          , h = this.shadow && this.type !== "text" ? "filter: url(#SVGID_" + this.shadow.id + ");" : "";
        return ["stroke: ", t, "; ", "stroke-width: ", i, "; ", "stroke-dasharray: ", r, "; ", "stroke-linecap: ", u, "; ", "stroke-linejoin: ", f, "; ", "stroke-miterlimit: ", e, "; ", "fill: ", n, "; ", "opacity: ", o, ";", h, s].join("")
    },
    getSvgTransform: function() {
        var n = fabric.util.toFixed
          , i = this.getAngle()
          , r = this.getCenterPoint()
          , t = fabric.Object.NUM_FRACTION_DIGITS
          , u = "translate(" + n(r.x, t) + " " + n(r.y, t) + ")"
          , f = i !== 0 ? " rotate(" + n(i, t) + ")" : ""
          , e = this.scaleX === 1 && this.scaleY === 1 ? "" : " scale(" + n(this.scaleX, t) + " " + n(this.scaleY, t) + ")"
          , o = this.flipX ? "matrix(-1 0 0 1 0 0) " : ""
          , s = this.flipY ? "matrix(1 0 0 -1 0 0)" : "";
        return [u, f, e, o, s].join("")
    },
    _createBaseSVGMarkup: function() {
        var n = [];
        return this.fill && this.fill.toLive && n.push(this.fill.toSVG(this, !1)),
        this.stroke && this.stroke.toLive && n.push(this.stroke.toSVG(this, !1)),
        this.shadow && n.push(this.shadow.toSVG(this)),
        n
    }
});
fabric.util.object.extend(fabric.Object.prototype, {
    hasStateChanged: function() {
        return this.stateProperties.some(function(n) {
            return this.get(n) !== this.originalState[n]
        }, this)
    },
    saveState: function(n) {
        return this.stateProperties.forEach(function(n) {
            this.originalState[n] = this.get(n)
        }, this),
        n && n.stateProperties && n.stateProperties.forEach(function(n) {
            this.originalState[n] = this.get(n)
        }, this),
        this
    },
    setupState: function() {
        return this.originalState = {},
        this.saveState(),
        this
    }
}),
function() {
    var t = fabric.util.getPointer
      , n = fabric.util.degreesToRadians
      , i = typeof G_vmlCanvasManager != "undefined";
    fabric.util.object.extend(fabric.Object.prototype, {
        _controlsVisibility: null,
        _findTargetCorner: function(n, i) {
            var r;
            if (!this.hasControls || !this.active)
                return !1;
            var f = t(n, this.canvas.upperCanvasEl), o = f.x - i.left, s = f.y - i.top, u, e;
            for (r in this.oCoords)
                if (this.isControlVisible(r) && (r !== "mtr" || this.hasRotatingPoint) && (!this.get("lockUniScaling") || r !== "mt" && r !== "mr" && r !== "mb" && r !== "ml") && (e = this._getImageLines(this.oCoords[r].corner),
                u = this._findCrossPoints({
                    x: o,
                    y: s
                }, e),
                u !== 0 && u % 2 == 1))
                    return this.__corner = r,
                    r;
            return !1
        },
        _setCornerCoords: function() {
            var t = this.oCoords
              , e = n(this.angle)
              , o = n(45 - this.angle)
              , s = Math.sqrt(2 * Math.pow(this.cornerSize, 2)) / 2
              , i = s * Math.cos(o)
              , r = s * Math.sin(o)
              , u = Math.sin(e)
              , f = Math.cos(e);
            t.tl.corner = {
                tl: {
                    x: t.tl.x - r,
                    y: t.tl.y - i
                },
                tr: {
                    x: t.tl.x + i,
                    y: t.tl.y - r
                },
                bl: {
                    x: t.tl.x - i,
                    y: t.tl.y + r
                },
                br: {
                    x: t.tl.x + r,
                    y: t.tl.y + i
                }
            };
            t.tr.corner = {
                tl: {
                    x: t.tr.x - r,
                    y: t.tr.y - i
                },
                tr: {
                    x: t.tr.x + i,
                    y: t.tr.y - r
                },
                br: {
                    x: t.tr.x + r,
                    y: t.tr.y + i
                },
                bl: {
                    x: t.tr.x - i,
                    y: t.tr.y + r
                }
            };
            t.bl.corner = {
                tl: {
                    x: t.bl.x - r,
                    y: t.bl.y - i
                },
                bl: {
                    x: t.bl.x - i,
                    y: t.bl.y + r
                },
                br: {
                    x: t.bl.x + r,
                    y: t.bl.y + i
                },
                tr: {
                    x: t.bl.x + i,
                    y: t.bl.y - r
                }
            };
            t.br.corner = {
                tr: {
                    x: t.br.x + i,
                    y: t.br.y - r
                },
                bl: {
                    x: t.br.x - i,
                    y: t.br.y + r
                },
                br: {
                    x: t.br.x + r,
                    y: t.br.y + i
                },
                tl: {
                    x: t.br.x - r,
                    y: t.br.y - i
                }
            };
            t.ml.corner = {
                tl: {
                    x: t.ml.x - r,
                    y: t.ml.y - i
                },
                tr: {
                    x: t.ml.x + i,
                    y: t.ml.y - r
                },
                bl: {
                    x: t.ml.x - i,
                    y: t.ml.y + r
                },
                br: {
                    x: t.ml.x + r,
                    y: t.ml.y + i
                }
            };
            t.mt.corner = {
                tl: {
                    x: t.mt.x - r,
                    y: t.mt.y - i
                },
                tr: {
                    x: t.mt.x + i,
                    y: t.mt.y - r
                },
                bl: {
                    x: t.mt.x - i,
                    y: t.mt.y + r
                },
                br: {
                    x: t.mt.x + r,
                    y: t.mt.y + i
                }
            };
            t.mr.corner = {
                tl: {
                    x: t.mr.x - r,
                    y: t.mr.y - i
                },
                tr: {
                    x: t.mr.x + i,
                    y: t.mr.y - r
                },
                bl: {
                    x: t.mr.x - i,
                    y: t.mr.y + r
                },
                br: {
                    x: t.mr.x + r,
                    y: t.mr.y + i
                }
            };
            t.mb.corner = {
                tl: {
                    x: t.mb.x - r,
                    y: t.mb.y - i
                },
                tr: {
                    x: t.mb.x + i,
                    y: t.mb.y - r
                },
                bl: {
                    x: t.mb.x - i,
                    y: t.mb.y + r
                },
                br: {
                    x: t.mb.x + r,
                    y: t.mb.y + i
                }
            };
            t.mtr.corner = {
                tl: {
                    x: t.mtr.x - r + u * this.rotatingPointOffset,
                    y: t.mtr.y - i - f * this.rotatingPointOffset
                },
                tr: {
                    x: t.mtr.x + i + u * this.rotatingPointOffset,
                    y: t.mtr.y - r - f * this.rotatingPointOffset
                },
                bl: {
                    x: t.mtr.x - i + u * this.rotatingPointOffset,
                    y: t.mtr.y + r - f * this.rotatingPointOffset
                },
                br: {
                    x: t.mtr.x + r + u * this.rotatingPointOffset,
                    y: t.mtr.y + i - f * this.rotatingPointOffset
                }
            }
        },
        drawBorders: function(n) {
            var o, s, u, r, f;
            if (!this.hasBorders)
                return this;
            var i = this.padding
              , e = i * 2
              , t = ~~(this.strokeWidth / 2) * 2;
            return n.save(),
            n.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1,
            n.strokeStyle = this.borderColor,
            o = 1 / this._constrainScale(this.scaleX),
            s = 1 / this._constrainScale(this.scaleY),
            n.lineWidth = 1 / this.borderScaleFactor,
            n.scale(o, s),
            u = this.getWidth(),
            r = this.getHeight(),
            n.strokeRect(~~(-(u / 2) - i - t / 2 * this.scaleX) - .5, ~~(-(r / 2) - i - t / 2 * this.scaleY) - .5, ~~(u + e + t * this.scaleX) + 1, ~~(r + e + t * this.scaleY) + 1),
            this.hasRotatingPoint && this.isControlVisible("mtr") && !this.get("lockRotation") && this.hasControls && (f = (this.flipY ? r + t * this.scaleY + i * 2 : -r - t * this.scaleY - i * 2) / 2,
            n.beginPath(),
            n.moveTo(0, f),
            n.lineTo(0, f + (this.flipY ? this.rotatingPointOffset : -this.rotatingPointOffset)),
            n.closePath(),
            n.stroke()),
            n.restore(),
            this
        },
        drawControls: function(n) {
            if (!this.hasControls)
                return this;
            var a = this.cornerSize
              , l = a / 2
              , t = ~~(this.strokeWidth / 2)
              , r = -(this.width / 2)
              , i = -(this.height / 2)
              , o = this.padding / this.scaleX
              , f = this.padding / this.scaleY
              , c = l / this.scaleY
              , e = l / this.scaleX
              , y = (l - a) / this.scaleX
              , v = (l - a) / this.scaleY
              , s = this.height
              , h = this.width
              , u = this.transparentCorners ? "strokeRect" : "fillRect";
            return n.save(),
            n.lineWidth = 1 / Math.max(this.scaleX, this.scaleY),
            n.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1,
            n.strokeStyle = n.fillStyle = this.cornerColor,
            this._drawControl("tl", n, u, r - e - t - o, i - c - t - f),
            this._drawControl("tr", n, u, r + h - e + t + o, i - c - t - f),
            this._drawControl("tr", n, u, r - e - t - o, i + s + v + t + f),
            this._drawControl("br", n, u, r + h + y + t + o, i + s + v + t + f),
            this.get("lockUniScaling") || (this._drawControl("mt", n, u, r + h / 2 - e, i - c - t - f),
            this._drawControl("mb", n, u, r + h / 2 - e, i + s + v + t + f),
            this._drawControl("mb", n, u, r + h + y + t + o, i + s / 2 - c),
            this._drawControl("ml", n, u, r - e - t - o, i + s / 2 - c)),
            this.hasRotatingPoint && this._drawControl("mtr", n, u, r + h / 2 - e, this.flipY ? i + s + this.rotatingPointOffset / this.scaleY - this.cornerSize / this.scaleX / 2 + t + f : i - this.rotatingPointOffset / this.scaleY - this.cornerSize / this.scaleY / 2 - t - f),
            n.restore(),
            this
        },
        _drawControl: function(n, t, r, u, f) {
            var e = this.cornerSize / this.scaleX
              , o = this.cornerSize / this.scaleY;
            this.isControlVisible(n) && (i || this.transparentCorners || t.clearRect(u, f, e, o),
            t[r](u, f, e, o))
        },
        isControlVisible: function(n) {
            return this._getControlsVisibility()[n]
        },
        setControlVisible: function(n, t) {
            return this._getControlsVisibility()[n] = t,
            this
        },
        setControlsVisibility: function(n) {
            n || (n = {});
            for (var t in n)
                this.setControlVisible(t, n[t]);
            return this
        },
        _getControlsVisibility: function() {
            return this._controlsVisibility || (this._controlsVisibility = {
                tl: !0,
                tr: !0,
                br: !0,
                bl: !0,
                ml: !0,
                mt: !0,
                mr: !0,
                mb: !0,
                mtr: !0
            }),
            this._controlsVisibility
        }
    })
}();
fabric.util.object.extend(fabric.StaticCanvas.prototype, {
    FX_DURATION: 500,
    fxCenterObjectH: function(n, t) {
        t = t || {};
        var i = function() {}
          , r = t.onComplete || i
          , u = t.onChange || i
          , f = this;
        return fabric.util.animate({
            startValue: n.get("left"),
            endValue: this.getCenter().left,
            duration: this.FX_DURATION,
            onChange: function(t) {
                n.set("left", t);
                f.renderAll();
                u()
            },
            onComplete: function() {
                n.setCoords();
                r()
            }
        }),
        this
    },
    fxCenterObjectV: function(n, t) {
        t = t || {};
        var i = function() {}
          , r = t.onComplete || i
          , u = t.onChange || i
          , f = this;
        return fabric.util.animate({
            startValue: n.get("top"),
            endValue: this.getCenter().top,
            duration: this.FX_DURATION,
            onChange: function(t) {
                n.set("top", t);
                f.renderAll();
                u()
            },
            onComplete: function() {
                n.setCoords();
                r()
            }
        }),
        this
    },
    fxRemove: function(n, t) {
        t = t || {};
        var i = function() {}
          , u = t.onComplete || i
          , f = t.onChange || i
          , r = this;
        return fabric.util.animate({
            startValue: n.get("opacity"),
            endValue: 0,
            duration: this.FX_DURATION,
            onStart: function() {
                n.set("active", !1)
            },
            onChange: function(t) {
                n.set("opacity", t);
                r.renderAll();
                f()
            },
            onComplete: function() {
                r.remove(n);
                u()
            }
        }),
        this
    }
});
fabric.util.object.extend(fabric.Object.prototype, {
    animate: function() {
        var i, n, u, t, r;
        if (arguments[0] && typeof arguments[0] == "object") {
            i = [];
            for (n in arguments[0])
                i.push(n);
            for (t = 0,
            r = i.length; t < r; t++)
                n = i[t],
                u = t !== r - 1,
                this._animate(n, arguments[0][n], arguments[1], u)
        } else
            this._animate.apply(this, arguments);
        return this
    },
    _animate: function(n, t, i, r) {
        var f = this, u, e;
        t = t.toString();
        i = i ? fabric.util.object.clone(i) : {};
        ~n.indexOf(".") && (u = n.split("."));
        e = u ? this.get(u[0])[u[1]] : this.get(n);
        "from"in i || (i.from = e);
        t = ~t.indexOf("=") ? e + parseFloat(t.replace("=", "")) : parseFloat(t);
        fabric.util.animate({
            startValue: i.from,
            endValue: t,
            byValue: i.by,
            easing: i.easing,
            duration: i.duration,
            abort: i.abort && function() {
                return i.abort.call(f)
            }
            ,
            onChange: function(t) {
                (u ? f[u[0]][u[1]] = t : f.set(n, t),
                r) || i.onChange && i.onChange()
            },
            onComplete: function() {
                r || (f.setCoords(),
                i.onComplete && i.onComplete())
            }
        })
    }
}),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend
      , r = {
        x1: 1,
        x2: 1,
        y1: 1,
        y2: 1
    }
      , u = t.StaticCanvas.supports("setLineDash");
    if (t.Line) {
        t.warn("fabric.Line is already defined");
        return
    }
    t.Line = t.util.createClass(t.Object, {
        type: "line",
        initialize: function(n, t) {
            t = t || {};
            n || (n = [0, 0, 0, 0]);
            this.callSuper("initialize", t);
            this.set("x1", n[0]);
            this.set("y1", n[1]);
            this.set("x2", n[2]);
            this.set("y2", n[3]);
            this._setWidthHeight(t)
        },
        _setWidthHeight: function(n) {
            n || (n = {});
            this.set("width", Math.abs(this.x2 - this.x1) || 1);
            this.set("height", Math.abs(this.y2 - this.y1) || 1);
            this.set("left", "left"in n ? n.left : Math.min(this.x1, this.x2) + this.width / 2);
            this.set("top", "top"in n ? n.top : Math.min(this.y1, this.y2) + this.height / 2)
        },
        _set: function(n, t) {
            return this[n] = t,
            n in r && this._setWidthHeight(),
            this
        },
        _render: function(n) {
            var r, t, i, f;
            n.beginPath();
            r = this.group && this.group.type === "path-group";
            r && !this.transformMatrix && n.translate(-this.group.width / 2 + this.left, -this.group.height / 2 + this.top);
            (!this.strokeDashArray || this.strokeDashArray && u) && (t = this.x1 <= this.x2 ? -1 : 1,
            i = this.y1 <= this.y2 ? -1 : 1,
            n.moveTo(this.width === 1 ? 0 : t * this.width / 2, this.height === 1 ? 0 : i * this.height / 2),
            n.lineTo(this.width === 1 ? 0 : t * -1 * this.width / 2, this.height === 1 ? 0 : i * -1 * this.height / 2));
            n.lineWidth = this.strokeWidth;
            f = n.strokeStyle;
            n.strokeStyle = this.stroke || n.fillStyle;
            this._renderStroke(n);
            n.strokeStyle = f
        },
        _renderDashedStroke: function(n) {
            var u = this.x1 <= this.x2 ? -1 : 1
              , f = this.y1 <= this.y2 ? -1 : 1
              , i = this.width === 1 ? 0 : u * this.width / 2
              , r = this.height === 1 ? 0 : f * this.height / 2;
            n.beginPath();
            t.util.drawDashedLine(n, i, r, -i, -r, this.strokeDashArray);
            n.closePath()
        },
        toObject: function(n) {
            return i(this.callSuper("toObject", n), {
                x1: this.get("x1"),
                y1: this.get("y1"),
                x2: this.get("x2"),
                y2: this.get("y2")
            })
        },
        toSVG: function(n) {
            var t = this._createBaseSVGMarkup();
            return t.push("<line ", 'x1="', this.get("x1"), '" y1="', this.get("y1"), '" x2="', this.get("x2"), '" y2="', this.get("y2"), '" style="', this.getSvgStyles(), '"/>'),
            n ? n(t.join("")) : t.join("")
        },
        complexity: function() {
            return 1
        }
    });
    t.Line.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" "));
    t.Line.fromElement = function(n, r) {
        var u = t.parseAttributes(n, t.Line.ATTRIBUTE_NAMES)
          , f = [u.x1 || 0, u.y1 || 0, u.x2 || 0, u.y2 || 0];
        return new t.Line(f,i(u, r))
    }
    ;
    t.Line.fromObject = function(n) {
        var i = [n.x1, n.y1, n.x2, n.y2];
        return new t.Line(i,n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    function r(n) {
        return "radius"in n && n.radius > 0
    }
    var t = n.fabric || (n.fabric = {})
      , u = Math.PI * 2
      , i = t.util.object.extend;
    if (t.Circle) {
        t.warn("fabric.Circle is already defined.");
        return
    }
    t.Circle = t.util.createClass(t.Object, {
        type: "circle",
        initialize: function(n) {
            n = n || {};
            this.set("radius", n.radius || 0);
            this.callSuper("initialize", n)
        },
        _set: function(n, t) {
            return this.callSuper("_set", n, t),
            n === "radius" && this.setRadius(t),
            this
        },
        toObject: function(n) {
            return i(this.callSuper("toObject", n), {
                radius: this.get("radius")
            })
        },
        toSVG: function(n) {
            var t = this._createBaseSVGMarkup();
            return t.push("<circle ", 'cx="0" cy="0" ', 'r="', this.radius, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'),
            n ? n(t.join("")) : t.join("")
        },
        _render: function(n, t) {
            n.beginPath();
            n.globalAlpha = this.group ? n.globalAlpha * this.opacity : this.opacity;
            n.arc(t ? this.left : 0, t ? this.top : 0, this.radius, 0, u, !1);
            n.closePath();
            this._renderFill(n);
            this._renderStroke(n)
        },
        getRadiusX: function() {
            return this.get("radius") * this.get("scaleX")
        },
        getRadiusY: function() {
            return this.get("radius") * this.get("scaleY")
        },
        setRadius: function(n) {
            this.radius = n;
            this.set("width", n * 2).set("height", n * 2)
        },
        complexity: function() {
            return 1
        }
    });
    t.Circle.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("cx cy r".split(" "));
    t.Circle.fromElement = function(n, u) {
        var f, e;
        if (u || (u = {}),
        f = t.parseAttributes(n, t.Circle.ATTRIBUTE_NAMES),
        !r(f))
            throw new Error("value of `r` attribute is required and can not be negative");
        return "left"in f && (f.left -= u.width / 2 || 0),
        "top"in f && (f.top -= u.height / 2 || 0),
        e = new t.Circle(i(f, u)),
        e.cx = parseFloat(n.getAttribute("cx")) || 0,
        e.cy = parseFloat(n.getAttribute("cy")) || 0,
        e
    }
    ;
    t.Circle.fromObject = function(n) {
        return new t.Circle(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {});
    if (t.Triangle) {
        t.warn("fabric.Triangle is already defined");
        return
    }
    t.Triangle = t.util.createClass(t.Object, {
        type: "triangle",
        initialize: function(n) {
            n = n || {};
            this.callSuper("initialize", n);
            this.set("width", n.width || 100).set("height", n.height || 100)
        },
        _render: function(n) {
            var i = this.width / 2
              , t = this.height / 2;
            n.beginPath();
            n.moveTo(-i, t);
            n.lineTo(0, -t);
            n.lineTo(i, t);
            n.closePath();
            this._renderFill(n);
            this._renderStroke(n)
        },
        _renderDashedStroke: function(n) {
            var r = this.width / 2
              , i = this.height / 2;
            n.beginPath();
            t.util.drawDashedLine(n, -r, i, 0, -i, this.strokeDashArray);
            t.util.drawDashedLine(n, 0, -i, r, i, this.strokeDashArray);
            t.util.drawDashedLine(n, r, i, -r, i, this.strokeDashArray);
            n.closePath()
        },
        toSVG: function(n) {
            var t = this._createBaseSVGMarkup()
              , r = this.width / 2
              , i = this.height / 2
              , u = [-r + " " + i, "0 " + -i, r + " " + i].join(",");
            return t.push("<polygon ", 'points="', u, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'),
            n ? n(t.join("")) : t.join("")
        },
        complexity: function() {
            return 1
        }
    });
    t.Triangle.fromObject = function(n) {
        return new t.Triangle(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , r = Math.PI * 2
      , i = t.util.object.extend;
    if (t.Ellipse) {
        t.warn("fabric.Ellipse is already defined.");
        return
    }
    t.Ellipse = t.util.createClass(t.Object, {
        type: "ellipse",
        rx: 0,
        ry: 0,
        initialize: function(n) {
            n = n || {};
            this.callSuper("initialize", n);
            this.set("rx", n.rx || 0);
            this.set("ry", n.ry || 0);
            this.set("width", this.get("rx") * 2);
            this.set("height", this.get("ry") * 2)
        },
        toObject: function(n) {
            return i(this.callSuper("toObject", n), {
                rx: this.get("rx"),
                ry: this.get("ry")
            })
        },
        toSVG: function(n) {
            var t = this._createBaseSVGMarkup();
            return t.push("<ellipse ", 'rx="', this.get("rx"), '" ry="', this.get("ry"), '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'),
            n ? n(t.join("")) : t.join("")
        },
        render: function(n, t) {
            if (this.rx !== 0 && this.ry !== 0)
                return this.callSuper("render", n, t)
        },
        _render: function(n, t) {
            n.beginPath();
            n.save();
            n.globalAlpha = this.group ? n.globalAlpha * this.opacity : this.opacity;
            this.transformMatrix && this.group && n.translate(this.cx, this.cy);
            n.transform(1, 0, 0, this.ry / this.rx, 0, 0);
            n.arc(t ? this.left : 0, t ? this.top : 0, this.rx, 0, r, !1);
            this._renderFill(n);
            this._renderStroke(n);
            n.restore()
        },
        complexity: function() {
            return 1
        }
    });
    t.Ellipse.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" "));
    t.Ellipse.fromElement = function(n, r) {
        var f;
        r || (r = {});
        var u = t.parseAttributes(n, t.Ellipse.ATTRIBUTE_NAMES)
          , e = u.left
          , o = u.top;
        return "left"in u && (u.left -= r.width / 2 || 0),
        "top"in u && (u.top -= r.height / 2 || 0),
        f = new t.Ellipse(i(u, r)),
        f.cx = e || 0,
        f.cy = o || 0,
        f
    }
    ;
    t.Ellipse.fromObject = function(n) {
        return new t.Ellipse(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    function u(n) {
        return n.left = n.left || 0,
        n.top = n.top || 0,
        n
    }
    var t = n.fabric || (n.fabric = {}), r = t.util.object.extend, i;
    if (t.Rect) {
        console.warn("fabric.Rect is already defined");
        return
    }
    i = t.Object.prototype.stateProperties.concat();
    i.push("rx", "ry", "x", "y");
    t.Rect = t.util.createClass(t.Object, {
        stateProperties: i,
        type: "rect",
        rx: 0,
        ry: 0,
        x: 0,
        y: 0,
        strokeDashArray: null,
        initialize: function(n) {
            n = n || {};
            this.callSuper("initialize", n);
            this._initRxRy();
            this.x = n.x || 0;
            this.y = n.y || 0
        },
        _initRxRy: function() {
            this.rx && !this.ry ? this.ry = this.rx : this.ry && !this.rx && (this.rx = this.ry)
        },
        _render: function(n) {
            var r = this.rx || 0, e = this.ry || 0, t = -this.width / 2, i = -this.height / 2, u = this.width, f = this.height, s = this.group && this.group.type === "path-group", o;
            n.beginPath();
            n.globalAlpha = s ? n.globalAlpha * this.opacity : this.opacity;
            this.transformMatrix && s && n.translate(this.width / 2 + this.x, this.height / 2 + this.y);
            !this.transformMatrix && s && n.translate(-this.group.width / 2 + this.width / 2 + this.x, -this.group.height / 2 + this.height / 2 + this.y);
            o = r !== 0 || e !== 0;
            n.moveTo(t + r, i);
            n.lineTo(t + u - r, i);
            o && n.quadraticCurveTo(t + u, i, t + u, i + e, t + u, i + e);
            n.lineTo(t + u, i + f - e);
            o && n.quadraticCurveTo(t + u, i + f, t + u - r, i + f, t + u - r, i + f);
            n.lineTo(t + r, i + f);
            o && n.quadraticCurveTo(t, i + f, t, i + f - e, t, i + f - e);
            n.lineTo(t, i + e);
            o && n.quadraticCurveTo(t, i, t + r, i, t + r, i);
            n.closePath();
            this._renderFill(n);
            this._renderStroke(n)
        },
        _renderDashedStroke: function(n) {
            var i = -this.width / 2
              , r = -this.height / 2
              , u = this.width
              , f = this.height;
            n.beginPath();
            t.util.drawDashedLine(n, i, r, i + u, r, this.strokeDashArray);
            t.util.drawDashedLine(n, i + u, r, i + u, r + f, this.strokeDashArray);
            t.util.drawDashedLine(n, i + u, r + f, i, r + f, this.strokeDashArray);
            t.util.drawDashedLine(n, i, r + f, i, r, this.strokeDashArray);
            n.closePath()
        },
        _normalizeLeftTopProperties: function(n) {
            return "left"in n && this.set("left", n.left + this.getWidth() / 2),
            this.set("x", n.left || 0),
            "top"in n && this.set("top", n.top + this.getHeight() / 2),
            this.set("y", n.top || 0),
            this
        },
        toObject: function(n) {
            var t = r(this.callSuper("toObject", n), {
                rx: this.get("rx") || 0,
                ry: this.get("ry") || 0,
                x: this.get("x"),
                y: this.get("y")
            });
            return this.includeDefaultValues || this._removeDefaultValues(t),
            t
        },
        toSVG: function(n) {
            var t = this._createBaseSVGMarkup();
            return t.push("<rect ", 'x="', this.width / -2, '" y="', this.height / -2, '" rx="', this.get("rx"), '" ry="', this.get("ry"), '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'),
            n ? n(t.join("")) : t.join("")
        },
        complexity: function() {
            return 1
        }
    });
    t.Rect.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" "));
    t.Rect.fromElement = function(n, i) {
        var f, e;
        return n ? (f = t.parseAttributes(n, t.Rect.ATTRIBUTE_NAMES),
        f = u(f),
        e = new t.Rect(r(i ? t.util.object.clone(i) : {}, f)),
        e._normalizeLeftTopProperties(f),
        e) : null
    }
    ;
    t.Rect.fromObject = function(n) {
        return new t.Rect(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.toFixed;
    if (t.Polyline) {
        t.warn("fabric.Polyline is already defined");
        return
    }
    t.Polyline = t.util.createClass(t.Object, {
        type: "polyline",
        initialize: function(n, t, i) {
            t = t || {};
            this.set("points", n);
            this.callSuper("initialize", t);
            this._calcDimensions(i)
        },
        _calcDimensions: function(n) {
            return t.Polygon.prototype._calcDimensions.call(this, n)
        },
        toObject: function(n) {
            return t.Polygon.prototype.toObject.call(this, n)
        },
        toSVG: function(n) {
            for (var u = [], r = this._createBaseSVGMarkup(), t = 0, f = this.points.length; t < f; t++)
                u.push(i(this.points[t].x, 2), ",", i(this.points[t].y, 2), " ");
            return r.push("<polyline ", 'points="', u.join(""), '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'),
            n ? n(r.join("")) : r.join("")
        },
        _render: function(n) {
            var i, t, r;
            for (n.beginPath(),
            n.moveTo(this.points[0].x, this.points[0].y),
            t = 0,
            r = this.points.length; t < r; t++)
                i = this.points[t],
                n.lineTo(i.x, i.y);
            this._renderFill(n);
            this._renderStroke(n)
        },
        _renderDashedStroke: function(n) {
            var r, u, i, f;
            for (n.beginPath(),
            i = 0,
            f = this.points.length; i < f; i++)
                r = this.points[i],
                u = this.points[i + 1] || r,
                t.util.drawDashedLine(n, r.x, r.y, u.x, u.y, this.strokeDashArray)
        },
        complexity: function() {
            return this.get("points").length
        }
    });
    t.Polyline.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat();
    t.Polyline.fromElement = function(n, i) {
        if (!n)
            return null;
        i || (i = {});
        var r = t.parsePointsAttribute(n.getAttribute("points"))
          , u = t.parseAttributes(n, t.Polyline.ATTRIBUTE_NAMES);
        return t.util.normalizePoints(r, i),
        new t.Polyline(r,t.util.object.extend(u, i),!0)
    }
    ;
    t.Polyline.fromObject = function(n) {
        var i = n.points;
        return new t.Polyline(i,n,!0)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend
      , r = t.util.array.min
      , u = t.util.array.max
      , f = t.util.toFixed;
    if (t.Polygon) {
        t.warn("fabric.Polygon is already defined");
        return
    }
    t.Polygon = t.util.createClass(t.Object, {
        type: "polygon",
        initialize: function(n, t, i) {
            t = t || {};
            this.points = n;
            this.callSuper("initialize", t);
            this._calcDimensions(i)
        },
        _calcDimensions: function(n) {
            var t = this.points, i = r(t, "x"), f = r(t, "y"), s = u(t, "x"), h = u(t, "y"), e, o;
            (this.width = s - i || 1,
            this.height = h - f || 1,
            this.minX = i,
            this.minY = f,
            n) || (e = this.width / 2 + this.minX,
            o = this.height / 2 + this.minY,
            this.points.forEach(function(n) {
                n.x -= e;
                n.y -= o
            }, this))
        },
        toObject: function(n) {
            return i(this.callSuper("toObject", n), {
                points: this.points.concat()
            })
        },
        toSVG: function(n) {
            for (var r = [], i = this._createBaseSVGMarkup(), t = 0, u = this.points.length; t < u; t++)
                r.push(f(this.points[t].x, 2), ",", f(this.points[t].y, 2), " ");
            return i.push("<polygon ", 'points="', r.join(""), '" style="', this.getSvgStyles(), '" transform="', this.getSvgTransform(), '"/>'),
            n ? n(i.join("")) : i.join("")
        },
        _render: function(n) {
            var i, t, r;
            for (n.beginPath(),
            n.moveTo(this.points[0].x, this.points[0].y),
            t = 0,
            r = this.points.length; t < r; t++)
                i = this.points[t],
                n.lineTo(i.x, i.y);
            this._renderFill(n);
            (this.stroke || this.strokeDashArray) && (n.closePath(),
            this._renderStroke(n))
        },
        _renderDashedStroke: function(n) {
            var r, u, i, f;
            for (n.beginPath(),
            i = 0,
            f = this.points.length; i < f; i++)
                r = this.points[i],
                u = this.points[i + 1] || this.points[0],
                t.util.drawDashedLine(n, r.x, r.y, u.x, u.y, this.strokeDashArray);
            n.closePath()
        },
        complexity: function() {
            return this.points.length
        }
    });
    t.Polygon.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat();
    t.Polygon.fromElement = function(n, r) {
        if (!n)
            return null;
        r || (r = {});
        var u = t.parsePointsAttribute(n.getAttribute("points"))
          , f = t.parseAttributes(n, t.Polygon.ATTRIBUTE_NAMES);
        return t.util.normalizePoints(u, r),
        new t.Polygon(u,i(f, r),!0)
    }
    ;
    t.Polygon.fromObject = function(n) {
        return new t.Polygon(n.points,n,!0)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    function i(n) {
        return n[0] === "H" ? n[1] : n[n.length - 2]
    }
    function r(n) {
        return n[0] === "V" ? n[1] : n[n.length - 1]
    }
    var s = {
        m: 2,
        l: 2,
        h: 1,
        v: 1,
        c: 6,
        s: 4,
        q: 4,
        t: 2,
        a: 7
    };
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , f = t.util.array.min
      , e = t.util.array.max
      , u = t.util.object.extend
      , h = Object.prototype.toString
      , o = t.util.drawArc;
    if (t.Path) {
        t.warn("fabric.Path is already defined");
        return
    }
    t.Path = t.util.createClass(t.Object, {
        type: "path",
        initialize: function(n, t) {
            if (t = t || {},
            this.setOptions(t),
            !n)
                throw new Error("`path` argument is required");
            var i = h.call(n) === "[object Array]";
            (this.path = i ? n : n.match && n.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),
            this.path) && (i || (this.path = this._parsePath()),
            this._initializePath(t),
            t.sourcePath && this.setSourcePath(t.sourcePath))
        },
        _initializePath: function(n) {
            var t = "width"in n && n.width != null
              , i = "height"in n && n.width != null
              , r = "left"in n
              , f = "top"in n
              , e = r ? this.left : 0
              , o = f ? this.top : 0;
            !t || !i ? (u(this, this._parseDimensions()),
            t && (this.width = n.width),
            i && (this.height = n.height)) : (f || (this.top = this.height / 2),
            r || (this.left = this.width / 2));
            this.pathOffset = this.pathOffset || this._calculatePathOffset(e, o)
        },
        _calculatePathOffset: function(n, t) {
            return {
                x: this.left - n - this.width / 2,
                y: this.top - t - this.height / 2
            }
        },
        _render: function(n) {
            for (var t, l = null, i = 0, r = 0, e = 0, s = 0, h, c, y, p, u = -(this.width / 2 + this.pathOffset.x), f = -(this.height / 2 + this.pathOffset.y), a, v = 0, w = this.path.length; v < w; ++v) {
                t = this.path[v];
                switch (t[0]) {
                case "l":
                    i += t[1];
                    r += t[2];
                    n.lineTo(i + u, r + f);
                    break;
                case "L":
                    i = t[1];
                    r = t[2];
                    n.lineTo(i + u, r + f);
                    break;
                case "h":
                    i += t[1];
                    n.lineTo(i + u, r + f);
                    break;
                case "H":
                    i = t[1];
                    n.lineTo(i + u, r + f);
                    break;
                case "v":
                    r += t[1];
                    n.lineTo(i + u, r + f);
                    break;
                case "V":
                    r = t[1];
                    n.lineTo(i + u, r + f);
                    break;
                case "m":
                    i += t[1];
                    r += t[2];
                    a = !l || l[0] !== "m" && l[0] !== "M" ? "moveTo" : "lineTo";
                    n[a](i + u, r + f);
                    break;
                case "M":
                    i = t[1];
                    r = t[2];
                    a = !l || l[0] !== "m" && l[0] !== "M" ? "moveTo" : "lineTo";
                    n[a](i + u, r + f);
                    break;
                case "c":
                    h = i + t[5];
                    c = r + t[6];
                    e = i + t[3];
                    s = r + t[4];
                    n.bezierCurveTo(i + t[1] + u, r + t[2] + f, e + u, s + f, h + u, c + f);
                    i = h;
                    r = c;
                    break;
                case "C":
                    i = t[5];
                    r = t[6];
                    e = t[3];
                    s = t[4];
                    n.bezierCurveTo(t[1] + u, t[2] + f, e + u, s + f, i + u, r + f);
                    break;
                case "s":
                    h = i + t[3];
                    c = r + t[4];
                    e = e ? 2 * i - e : i;
                    s = s ? 2 * r - s : r;
                    n.bezierCurveTo(e + u, s + f, i + t[1] + u, r + t[2] + f, h + u, c + f);
                    e = i + t[1];
                    s = r + t[2];
                    i = h;
                    r = c;
                    break;
                case "S":
                    h = t[3];
                    c = t[4];
                    e = 2 * i - e;
                    s = 2 * r - s;
                    n.bezierCurveTo(e + u, s + f, t[1] + u, t[2] + f, h + u, c + f);
                    i = h;
                    r = c;
                    e = t[1];
                    s = t[2];
                    break;
                case "q":
                    h = i + t[3];
                    c = r + t[4];
                    e = i + t[1];
                    s = r + t[2];
                    n.quadraticCurveTo(e + u, s + f, h + u, c + f);
                    i = h;
                    r = c;
                    break;
                case "Q":
                    h = t[3];
                    c = t[4];
                    n.quadraticCurveTo(t[1] + u, t[2] + f, h + u, c + f);
                    i = h;
                    r = c;
                    e = t[1];
                    s = t[2];
                    break;
                case "t":
                    h = i + t[1];
                    c = r + t[2];
                    l[0].match(/[QqTt]/) === null ? (e = i,
                    s = r) : l[0] === "t" ? (e = 2 * i - y,
                    s = 2 * r - p) : l[0] === "q" && (e = 2 * i - e,
                    s = 2 * r - s);
                    y = e;
                    p = s;
                    n.quadraticCurveTo(e + u, s + f, h + u, c + f);
                    i = h;
                    r = c;
                    e = i + t[1];
                    s = r + t[2];
                    break;
                case "T":
                    h = t[1];
                    c = t[2];
                    e = 2 * i - e;
                    s = 2 * r - s;
                    n.quadraticCurveTo(e + u, s + f, h + u, c + f);
                    i = h;
                    r = c;
                    break;
                case "a":
                    o(n, i + u, r + f, [t[1], t[2], t[3], t[4], t[5], t[6] + i + u, t[7] + r + f]);
                    i += t[6];
                    r += t[7];
                    break;
                case "A":
                    o(n, i + u, r + f, [t[1], t[2], t[3], t[4], t[5], t[6] + u, t[7] + f]);
                    i = t[6];
                    r = t[7];
                    break;
                case "z":
                case "Z":
                    n.closePath()
                }
                l = t
            }
        },
        render: function(n, i) {
            if (this.visible) {
                n.save();
                var r = this.transformMatrix;
                r && n.transform(r[0], r[1], r[2], r[3], r[4], r[5]);
                i || this.transform(n);
                this._setStrokeStyles(n);
                this._setFillStyles(n);
                this._setShadow(n);
                this.clipTo && t.util.clipContext(this, n);
                n.beginPath();
                this._render(n);
                this._renderFill(n);
                this._renderStroke(n);
                this.clipTo && n.restore();
                this._removeShadow(n);
                !i && this.active && (this.drawBorders(n),
                this.drawControls(n));
                n.restore()
            }
        },
        toString: function() {
            return "#<fabric.Path (" + this.complexity() + '): { "top": ' + this.top + ', "left": ' + this.left + " }>"
        },
        toObject: function(n) {
            var t = u(this.callSuper("toObject", n), {
                path: this.path,
                pathOffset: this.pathOffset
            });
            return this.sourcePath && (t.sourcePath = this.sourcePath),
            this.transformMatrix && (t.transformMatrix = this.transformMatrix),
            t
        },
        toDatalessObject: function(n) {
            var t = this.toObject(n);
            return this.sourcePath && (t.path = this.sourcePath),
            delete t.sourcePath,
            t
        },
        toSVG: function(n) {
            for (var u, r = [], t = this._createBaseSVGMarkup(), i = 0, f = this.path.length; i < f; i++)
                r.push(this.path[i].join(" "));
            return u = r.join(" "),
            t.push('<g transform="', this.group ? "" : this.getSvgTransform(), '">', "<path ", 'd="', u, '" style="', this.getSvgStyles(), '" transform="translate(', -this.width / 2, " ", -this.height / 2, ")", '" stroke-linecap="round" ', "/>", "<\/g>"),
            n ? n(t.join("")) : t.join("")
        },
        complexity: function() {
            return this.path.length
        },
        _parsePath: function() {
            for (var r, a, v, u, t, y, f = [], i = [], e, o, p = /(-?\.\d+)|(-?\d+(\.\d+)?)/g, c, l, h = 0, n, w = this.path.length; h < w; h++) {
                for (e = this.path[h],
                l = e.slice(1).trim(),
                i.length = 0; c = p.exec(l); )
                    i.push(c[0]);
                for (n = [e.charAt(0)],
                r = 0,
                a = i.length; r < a; r++)
                    o = parseFloat(i[r]),
                    isNaN(o) || n.push(o);
                if (v = n[0].toLowerCase(),
                u = s[v],
                n.length - 1 > u)
                    for (t = 1,
                    y = n.length; t < y; t += u)
                        f.push([n[0]].concat(n.slice(t, t + u)));
                else
                    f.push(n)
            }
            return f
        },
        _parseDimensions: function() {
            var n = []
              , t = []
              , s = {};
            this.path.forEach(function(i, r) {
                this._getCoordsFromCommand(i, r, n, t, s)
            }, this);
            var i = f(n)
              , r = f(t)
              , h = e(n)
              , c = e(t)
              , u = h - i
              , o = c - r;
            return {
                left: this.left + (i + u / 2),
                top: this.top + (r + o / 2),
                width: u,
                height: o
            }
        },
        _getCoordsFromCommand: function(n, t, u, f, e) {
            var h = !1, s, o;
            n[0] !== "H" && (e.x = t === 0 ? i(n) : i(this.path[t - 1]));
            n[0] !== "V" && (e.y = t === 0 ? r(n) : r(this.path[t - 1]));
            n[0] === n[0].toLowerCase() && (h = !0);
            s = this._getXY(n, h, e);
            o = parseInt(s.x, 10);
            isNaN(o) || u.push(o);
            o = parseInt(s.y, 10);
            isNaN(o) || f.push(o)
        },
        _getXY: function(n, t, u) {
            var f = t ? u.x + i(n) : n[0] === "V" ? u.x : i(n)
              , e = t ? u.y + r(n) : n[0] === "H" ? u.y : r(n);
            return {
                x: f,
                y: e
            }
        }
    });
    t.Path.fromObject = function(n, i) {
        typeof n.path == "string" ? t.loadSVGFromURL(n.path, function(r) {
            var u = r[0]
              , f = n.path;
            delete n.path;
            t.util.object.extend(u, n);
            u.setSourcePath(f);
            i(u)
        }) : i(new t.Path(n.path,n))
    }
    ;
    t.Path.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat(["d"]);
    t.Path.fromElement = function(n, i, r) {
        var f = t.parseAttributes(n, t.Path.ATTRIBUTE_NAMES);
        i && i(new t.Path(f.d,u(f, r)))
    }
    ;
    t.Path.async = !0
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend
      , r = t.util.array.invoke
      , u = t.Object.prototype.toObject;
    if (t.PathGroup) {
        t.warn("fabric.PathGroup is already defined");
        return
    }
    t.PathGroup = t.util.createClass(t.Path, {
        type: "path-group",
        fill: "",
        initialize: function(n, t) {
            t = t || {};
            this.paths = n || [];
            for (var i = this.paths.length; i--; )
                this.paths[i].group = this;
            this.setOptions(t);
            this.setCoords();
            t.sourcePath && this.setSourcePath(t.sourcePath)
        },
        render: function(n) {
            var i, r, u;
            if (this.visible) {
                for (n.save(),
                i = this.transformMatrix,
                i && n.transform(i[0], i[1], i[2], i[3], i[4], i[5]),
                this.transform(n),
                this._setShadow(n),
                this.clipTo && t.util.clipContext(this, n),
                r = 0,
                u = this.paths.length; r < u; ++r)
                    this.paths[r].render(n, !0);
                this.clipTo && n.restore();
                this._removeShadow(n);
                this.active && (this.drawBorders(n),
                this.drawControls(n));
                n.restore()
            }
        },
        _set: function(n, t) {
            if (n === "fill" && t && this.isSameColor())
                for (var i = this.paths.length; i--; )
                    this.paths[i]._set(n, t);
            return this.callSuper("_set", n, t)
        },
        toObject: function(n) {
            var t = i(u.call(this, n), {
                paths: r(this.getObjects(), "toObject", n)
            });
            return this.sourcePath && (t.sourcePath = this.sourcePath),
            t
        },
        toDatalessObject: function(n) {
            var t = this.toObject(n);
            return this.sourcePath && (t.paths = this.sourcePath),
            t
        },
        toSVG: function(n) {
            for (var r = this.getObjects(), t = ["<g ", 'style="', this.getSvgStyles(), '" ', 'transform="', this.getSvgTransform(), '" ', ">"], i = 0, u = r.length; i < u; i++)
                t.push(r[i].toSVG(n));
            return t.push("<\/g>"),
            n ? n(t.join("")) : t.join("")
        },
        toString: function() {
            return "#<fabric.PathGroup (" + this.complexity() + "): { top: " + this.top + ", left: " + this.left + " }>"
        },
        isSameColor: function() {
            var n = this.getObjects()[0].get("fill");
            return this.getObjects().every(function(t) {
                return t.get("fill") === n
            })
        },
        complexity: function() {
            return this.paths.reduce(function(n, t) {
                return n + (t && t.complexity ? t.complexity() : 0)
            }, 0)
        },
        getObjects: function() {
            return this.paths
        }
    });
    t.PathGroup.fromObject = function(n, i) {
        typeof n.paths == "string" ? t.loadSVGFromURL(n.paths, function(r) {
            var f = n.paths, u;
            delete n.paths;
            u = t.util.groupSVGElements(r, n, f);
            i(u)
        }) : t.util.enlivenObjects(n.paths, function(r) {
            delete n.paths;
            i(new t.PathGroup(r,n))
        })
    }
    ;
    t.PathGroup.async = !0
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {}), i = t.util.object.extend, r = t.util.array.min, u = t.util.array.max, e = t.util.array.invoke, f;
    t.Group || (f = {
        lockMovementX: !0,
        lockMovementY: !0,
        lockRotation: !0,
        lockScalingX: !0,
        lockScalingY: !0,
        lockUniScaling: !0
    },
    t.Group = t.util.createClass(t.Object, t.Collection, {
        type: "group",
        initialize: function(n, t) {
            t = t || {};
            this._objects = n || [];
            for (var r = this._objects.length; r--; )
                this._objects[r].group = this;
            this.originalState = {};
            this.callSuper("initialize");
            this._calcBounds();
            this._updateObjectsCoords();
            t && i(this, t);
            this._setOpacityIfSame();
            this.setCoords(!0);
            this.saveCoords()
        },
        _updateObjectsCoords: function() {
            this.forEachObject(this._updateObjectCoords, this)
        },
        _updateObjectCoords: function(n) {
            var t = n.getLeft()
              , i = n.getTop();
            n.set({
                originalLeft: t,
                originalTop: i,
                left: t - this.left,
                top: i - this.top
            });
            n.setCoords();
            n.__origHasControls = n.hasControls;
            n.hasControls = !1
        },
        toString: function() {
            return "#<fabric.Group: (" + this.complexity() + ")>"
        },
        addWithUpdate: function(n) {
            return this._restoreObjectsState(),
            this._objects.push(n),
            n.group = this,
            this.forEachObject(this._setObjectActive, this),
            this._calcBounds(),
            this._updateObjectsCoords(),
            this
        },
        _setObjectActive: function(n) {
            n.set("active", !0);
            n.group = this
        },
        removeWithUpdate: function(n) {
            return this._moveFlippedObject(n),
            this._restoreObjectsState(),
            this.forEachObject(this._setObjectActive, this),
            this.remove(n),
            this._calcBounds(),
            this._updateObjectsCoords(),
            this
        },
        _onObjectAdded: function(n) {
            n.group = this
        },
        _onObjectRemoved: function(n) {
            delete n.group;
            n.set("active", !1)
        },
        delegatedProperties: {
            fill: !0,
            opacity: !0,
            fontFamily: !0,
            fontWeight: !0,
            fontSize: !0,
            fontStyle: !0,
            lineHeight: !0,
            textDecoration: !0,
            textAlign: !0,
            backgroundColor: !0
        },
        _set: function(n, t) {
            if (n in this.delegatedProperties) {
                var i = this._objects.length;
                for (this[n] = t; i--; )
                    this._objects[i].set(n, t)
            } else
                this[n] = t
        },
        toObject: function(n) {
            return i(this.callSuper("toObject", n), {
                objects: e(this._objects, "toObject", n)
            })
        },
        render: function(n, i) {
            if (this.visible) {
                n.save();
                this.transform(n);
                this.clipTo && t.util.clipContext(this, n);
                for (var r = 0, u = this._objects.length; r < u; r++)
                    this._renderObject(this._objects[r], n);
                this.clipTo && n.restore();
                !i && this.active && (this.drawBorders(n),
                this.drawControls(n));
                n.restore()
            }
        },
        _renderObject: function(n, t) {
            var i = n.borderScaleFactor
              , r = n.hasRotatingPoint
              , u = Math.max(this.scaleX, this.scaleY);
            n.visible && (n.borderScaleFactor = u,
            n.hasRotatingPoint = !1,
            n.render(t),
            n.borderScaleFactor = i,
            n.hasRotatingPoint = r)
        },
        _restoreObjectsState: function() {
            return this._objects.forEach(this._restoreObjectState, this),
            this
        },
        _moveFlippedObject: function(n) {
            var i = n.get("originX"), r = n.get("originY"), u = n.getCenterPoint(), t;
            return n.set({
                originX: "center",
                originY: "center",
                left: u.x,
                top: u.y
            }),
            this._toggleFlipping(n),
            t = n.getPointByOrigin(i, r),
            n.set({
                originX: i,
                originY: r,
                left: t.x,
                top: t.y
            }),
            this
        },
        _toggleFlipping: function(n) {
            this.flipX && (n.toggle("flipX"),
            n.set("left", -n.get("left")),
            n.setAngle(-n.getAngle()));
            this.flipY && (n.toggle("flipY"),
            n.set("top", -n.get("top")),
            n.setAngle(-n.getAngle()))
        },
        _restoreObjectState: function(n) {
            return this._setObjectPosition(n),
            n.setCoords(),
            n.hasControls = n.__origHasControls,
            delete n.__origHasControls,
            n.set("active", !1),
            n.setCoords(),
            delete n.group,
            this
        },
        _setObjectPosition: function(n) {
            var i = this.getLeft()
              , r = this.getTop()
              , t = this._getRotatedLeftTop(n);
            n.set({
                angle: n.getAngle() + this.getAngle(),
                left: i + t.left,
                top: r + t.top,
                scaleX: n.get("scaleX") * this.get("scaleX"),
                scaleY: n.get("scaleY") * this.get("scaleY")
            })
        },
        _getRotatedLeftTop: function(n) {
            var t = this.getAngle() * (Math.PI / 180);
            return {
                left: -Math.sin(t) * n.getTop() * this.get("scaleY") + Math.cos(t) * n.getLeft() * this.get("scaleX"),
                top: Math.cos(t) * n.getTop() * this.get("scaleY") + Math.sin(t) * n.getLeft() * this.get("scaleX")
            }
        },
        destroy: function() {
            return this._objects.forEach(this._moveFlippedObject, this),
            this._restoreObjectsState()
        },
        saveCoords: function() {
            return this._originalLeft = this.get("left"),
            this._originalTop = this.get("top"),
            this
        },
        hasMoved: function() {
            return this._originalLeft !== this.get("left") || this._originalTop !== this.get("top")
        },
        setObjectsCoords: function() {
            return this.forEachObject(function(n) {
                n.setCoords()
            }),
            this
        },
        _setOpacityIfSame: function() {
            var n = this.getObjects()
              , t = n[0] ? n[0].get("opacity") : 1
              , i = n.every(function(n) {
                return n.get("opacity") === t
            });
            i && (this.opacity = t)
        },
        _calcBounds: function() {
            for (var i, r = [], u = [], n, t = 0, f = this._objects.length; t < f; ++t) {
                n = this._objects[t];
                n.setCoords();
                for (i in n.oCoords)
                    r.push(n.oCoords[i].x),
                    u.push(n.oCoords[i].y)
            }
            this.set(this._getBounds(r, u))
        },
        _getBounds: function(n, t) {
            var i = r(n)
              , s = u(n)
              , f = r(t)
              , h = u(t)
              , e = s - i || 0
              , o = h - f || 0;
            return {
                width: e,
                height: o,
                left: i + e / 2 || 0,
                top: f + o / 2 || 0
            }
        },
        toSVG: function(n) {
            for (var t = ["<g ", 'transform="', this.getSvgTransform(), '">'], i = 0, r = this._objects.length; i < r; i++)
                t.push(this._objects[i].toSVG(n));
            return t.push("<\/g>"),
            n ? n(t.join("")) : t.join("")
        },
        get: function(n) {
            if (n in f) {
                if (this[n])
                    return this[n];
                for (var t = 0, i = this._objects.length; t < i; t++)
                    if (this._objects[t][n])
                        return !0;
                return !1
            }
            return n in this.delegatedProperties ? this._objects[0] && this._objects[0].get(n) : this[n]
        }
    }),
    t.Group.fromObject = function(n, i) {
        t.util.enlivenObjects(n.objects, function(r) {
            delete n.objects;
            i && i(new t.Group(r,n))
        })
    }
    ,
    t.Group.async = !0)
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = fabric.util.object.extend;
    if (n.fabric || (n.fabric = {}),
    n.fabric.Image) {
        fabric.warn("fabric.Image is already defined.");
        return
    }
    fabric.Image = fabric.util.createClass(fabric.Object, {
        type: "image",
        crossOrigin: "",
        initialize: function(n, t) {
            t || (t = {});
            this.filters = [];
            this.callSuper("initialize", t);
            this._initElement(n, t);
            this._initConfig(t);
            t.filters && (this.filters = t.filters,
            this.applyFilters())
        },
        getElement: function() {
            return this._element
        },
        setElement: function(n, t) {
            return this._element = n,
            this._originalElement = n,
            this._initConfig(),
            this.filters.length !== 0 && this.applyFilters(t),
            this
        },
        setCrossOrigin: function(n) {
            return this.crossOrigin = n,
            this._element.crossOrigin = n,
            this
        },
        getOriginalSize: function() {
            var n = this.getElement();
            return {
                width: n.width,
                height: n.height
            }
        },
        render: function(n, t) {
            if (this.visible) {
                n.save();
                var i = this.transformMatrix
                  , r = this.group && this.group.type === "path-group";
                r && n.translate(-this.group.width / 2 + this.width / 2, -this.group.height / 2 + this.height / 2);
                i && n.transform(i[0], i[1], i[2], i[3], i[4], i[5]);
                t || this.transform(n);
                n.save();
                this._setShadow(n);
                this.clipTo && fabric.util.clipContext(this, n);
                this._render(n);
                this.shadow && !this.shadow.affectStroke && this._removeShadow(n);
                this._renderStroke(n);
                this.clipTo && n.restore();
                n.restore();
                this.active && !t && (this.drawBorders(n),
                this.drawControls(n));
                n.restore()
            }
        },
        _stroke: function(n) {
            n.save();
            this._setStrokeStyles(n);
            n.beginPath();
            n.strokeRect(-this.width / 2, -this.height / 2, this.width, this.height);
            n.closePath();
            n.restore()
        },
        _renderDashedStroke: function(n) {
            var t = -this.width / 2
              , i = -this.height / 2
              , r = this.width
              , u = this.height;
            n.save();
            this._setStrokeStyles(n);
            n.beginPath();
            fabric.util.drawDashedLine(n, t, i, t + r, i, this.strokeDashArray);
            fabric.util.drawDashedLine(n, t + r, i, t + r, i + u, this.strokeDashArray);
            fabric.util.drawDashedLine(n, t + r, i + u, t, i + u, this.strokeDashArray);
            fabric.util.drawDashedLine(n, t, i + u, t, i, this.strokeDashArray);
            n.closePath();
            n.restore()
        },
        toObject: function(n) {
            return t(this.callSuper("toObject", n), {
                src: this._originalElement.src || this._originalElement._src,
                filters: this.filters.map(function(n) {
                    return n && n.toObject()
                }),
                crossOrigin: this.crossOrigin
            })
        },
        toSVG: function(n) {
            var t = [], i;
            return t.push('<g transform="', this.getSvgTransform(), '">', '<image xlink:href="', this.getSvgSrc(), '" style="', this.getSvgStyles(), '" transform="translate(' + -this.width / 2 + " " + -this.height / 2 + ")", '" width="', this.width, '" height="', this.height, '" preserveAspectRatio="none"', "><\/image>"),
            (this.stroke || this.strokeDashArray) && (i = this.fill,
            this.fill = null,
            t.push("<rect ", 'x="', this.width / -2, '" y="', this.height / -2, '" width="', this.width, '" height="', this.height, '" style="', this.getSvgStyles(), '"/>'),
            this.fill = i),
            t.push("<\/g>"),
            n ? n(t.join("")) : t.join("")
        },
        getSrc: function() {
            return this.getElement().src || this.getElement()._src
        },
        toString: function() {
            return '#<fabric.Image: { src: "' + this.getSrc() + '" }>'
        },
        clone: function(n, t) {
            this.constructor.fromObject(this.toObject(t), n)
        },
        applyFilters: function(n) {
            if (this.filters.length === 0) {
                this._element = this._originalElement;
                n && n();
                return
            }
            var t = this._originalElement
              , r = fabric.util.createCanvasElement()
              , i = fabric.util.createImage()
              , u = this;
            return r.width = t.width,
            r.height = t.height,
            r.getContext("2d").drawImage(t, 0, 0, t.width, t.height),
            this.filters.forEach(function(n) {
                n && n.applyTo(r)
            }),
            i.width = t.width,
            i.height = t.height,
            fabric.isLikelyNode ? (i.src = r.toBuffer(undefined, fabric.Image.pngCompression),
            u._element = i,
            n && n()) : (i.onload = function() {
                u._element = i;
                n && n();
                i.onload = r = t = null
            }
            ,
            i.src = r.toDataURL("image/png")),
            this
        },
        _render: function(n) {
            n.drawImage(this._element, -this.width / 2, -this.height / 2, this.width, this.height)
        },
        _resetWidthHeight: function() {
            var n = this.getElement();
            this.set("width", n.width);
            this.set("height", n.height)
        },
        _initElement: function(n) {
            this.setElement(fabric.util.getById(n));
            fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS)
        },
        _initConfig: function(n) {
            n || (n = {});
            this.setOptions(n);
            this._setWidthHeight(n);
            this._element.crossOrigin = this.crossOrigin
        },
        _initFilters: function(n, t) {
            n.filters && n.filters.length ? fabric.util.enlivenObjects(n.filters, function(n) {
                t && t(n)
            }, "fabric.Image.filters") : t && t()
        },
        _setWidthHeight: function(n) {
            this.width = "width"in n ? n.width : this.getElement().width || 0;
            this.height = "height"in n ? n.height : this.getElement().height || 0
        },
        complexity: function() {
            return 1
        }
    });
    fabric.Image.CSS_CANVAS = "canvas-img";
    fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc;
    fabric.Image.fromObject = function(n, t) {
        fabric.util.loadImage(n.src, function(i) {
            fabric.Image.prototype._initFilters.call(n, n, function(r) {
                n.filters = r || [];
                var u = new fabric.Image(i,n);
                t && t(u)
            })
        }, null, n.crossOrigin)
    }
    ;
    fabric.Image.fromURL = function(n, t, i) {
        fabric.util.loadImage(n, function(n) {
            t(new fabric.Image(n,i))
        }, null, i && i.crossOrigin)
    }
    ;
    fabric.Image.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat("x y width height xlink:href".split(" "));
    fabric.Image.fromElement = function(n, i, r) {
        var u = fabric.parseAttributes(n, fabric.Image.ATTRIBUTE_NAMES);
        fabric.Image.fromURL(u["xlink:href"], i, t(r ? fabric.util.object.clone(r) : {}, u))
    }
    ;
    fabric.Image.async = !0;
    fabric.Image.pngCompression = 1
}(typeof exports != "undefined" ? exports : this);
fabric.util.object.extend(fabric.Object.prototype, {
    _getAngleValueForStraighten: function() {
        var n = this.getAngle() % 360;
        return n > 0 ? Math.round((n - 1) / 90) * 90 : Math.round(n / 90) * 90
    },
    straighten: function() {
        return this.setAngle(this._getAngleValueForStraighten()),
        this
    },
    fxStraighten: function(n) {
        n = n || {};
        var i = function() {}
          , r = n.onComplete || i
          , u = n.onChange || i
          , t = this;
        return fabric.util.animate({
            startValue: this.get("angle"),
            endValue: this._getAngleValueForStraighten(),
            duration: this.FX_DURATION,
            onChange: function(n) {
                t.setAngle(n);
                u()
            },
            onComplete: function() {
                t.setCoords();
                r()
            },
            onStart: function() {
                t.set("active", !1)
            }
        }),
        this
    }
});
fabric.util.object.extend(fabric.StaticCanvas.prototype, {
    straightenObject: function(n) {
        return n.straighten(),
        this.renderAll(),
        this
    },
    fxStraightenObject: function(n) {
        return n.fxStraighten({
            onChange: this.renderAll.bind(this)
        }),
        this
    }
});
fabric.Image.filters = fabric.Image.filters || {};
fabric.Image.filters.BaseFilter = fabric.util.createClass({
    type: "BaseFilter",
    toObject: function() {
        return {
            type: this.type
        }
    },
    toJSON: function() {
        return this.toObject()
    }
}),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.Brightness = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Brightness",
        initialize: function(n) {
            n = n || {};
            this.brightness = n.brightness || 100
        },
        applyTo: function(n) {
            for (var u = n.getContext("2d"), f = u.getImageData(0, 0, n.width, n.height), i = f.data, r = this.brightness, t = 0, e = i.length; t < e; t += 4)
                i[t] += r,
                i[t + 1] += r,
                i[t + 2] += r;
            u.putImageData(f, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                brightness: this.brightness
            })
        }
    });
    t.Image.filters.Brightness.fromObject = function(n) {
        return new t.Image.filters.Brightness(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.Convolute = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Convolute",
        initialize: function(n) {
            n = n || {};
            this.opaque = n.opaque;
            this.matrix = n.matrix || [0, 0, 0, 0, 1, 0, 0, 0, 0];
            var i = t.util.createCanvasElement();
            this.tmpCtx = i.getContext("2d")
        },
        _createImageData: function(n, t) {
            return this.tmpCtx.createImageData(n, t)
        },
        applyTo: function(n) {
            for (var t, i, r, l, a, u, f, b = this.matrix, k = n.getContext("2d"), v = k.getImageData(0, 0, n.width, n.height), e = Math.round(Math.sqrt(b.length)), d = Math.floor(e / 2), o = v.data, y = v.width, g = v.height, p = y, nt = g, tt = this._createImageData(p, nt), s = tt.data, ft = this.opaque ? 1 : 0, h = 0; h < nt; h++)
                for (t = 0; t < p; t++) {
                    var et = h
                      , ot = t
                      , c = (h * p + t) * 4
                      , it = 0
                      , rt = 0
                      , ut = 0
                      , w = 0;
                    for (i = 0; i < e; i++)
                        for (r = 0; r < e; r++)
                            (l = et + i - d,
                            a = ot + r - d,
                            l < 0 || l > g || a < 0 || a > y) || (u = (l * y + a) * 4,
                            f = b[i * e + r],
                            it += o[u] * f,
                            rt += o[u + 1] * f,
                            ut += o[u + 2] * f,
                            w += o[u + 3] * f);
                    s[c] = it;
                    s[c + 1] = rt;
                    s[c + 2] = ut;
                    s[c + 3] = w + ft * (255 - w)
                }
            k.putImageData(tt, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                opaque: this.opaque,
                matrix: this.matrix
            })
        }
    });
    t.Image.filters.Convolute.fromObject = function(n) {
        return new t.Image.filters.Convolute(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.GradientTransparency = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "GradientTransparency",
        initialize: function(n) {
            n = n || {};
            this.threshold = n.threshold || 100
        },
        applyTo: function(n) {
            for (var r = n.getContext("2d"), u = r.getImageData(0, 0, n.width, n.height), i = u.data, e = this.threshold, f = i.length, t = 0, o = i.length; t < o; t += 4)
                i[t + 3] = e + 255 * (f - t) / f;
            r.putImageData(u, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                threshold: this.threshold
            })
        }
    });
    t.Image.filters.GradientTransparency.fromObject = function(n) {
        return new t.Image.filters.GradientTransparency(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {});
    t.Image.filters.Grayscale = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Grayscale",
        applyTo: function(n) {
            for (var f = n.getContext("2d"), r = f.getImageData(0, 0, n.width, n.height), i = r.data, e = r.width * r.height * 4, t = 0, u; t < e; )
                u = (i[t] + i[t + 1] + i[t + 2]) / 3,
                i[t] = u,
                i[t + 1] = u,
                i[t + 2] = u,
                t += 4;
            f.putImageData(r, 0, 0)
        }
    });
    t.Image.filters.Grayscale.fromObject = function() {
        return new t.Image.filters.Grayscale
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {});
    t.Image.filters.Invert = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Invert",
        applyTo: function(n) {
            for (var r = n.getContext("2d"), u = r.getImageData(0, 0, n.width, n.height), i = u.data, f = i.length, t = 0; t < f; t += 4)
                i[t] = 255 - i[t],
                i[t + 1] = 255 - i[t + 1],
                i[t + 2] = 255 - i[t + 2];
            r.putImageData(u, 0, 0)
        }
    });
    t.Image.filters.Invert.fromObject = function() {
        return new t.Image.filters.Invert
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.Mask = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Mask",
        initialize: function(n) {
            n = n || {};
            this.mask = n.mask;
            this.channel = [0, 1, 2, 3].indexOf(n.channel) > -1 ? n.channel : 0
        },
        applyTo: function(n) {
            var o, s;
            if (this.mask) {
                var e = n.getContext("2d"), u = e.getImageData(0, 0, n.width, n.height), h = u.data, i = this.mask.getElement(), f = t.util.createCanvasElement(), c = this.channel, r, l = u.width * u.height * 4;
                for (f.width = i.width,
                f.height = i.height,
                f.getContext("2d").drawImage(i, 0, 0, i.width, i.height),
                o = f.getContext("2d").getImageData(0, 0, i.width, i.height),
                s = o.data,
                r = 0; r < l; r += 4)
                    h[r + 3] = s[r + c];
                e.putImageData(u, 0, 0)
            }
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                mask: this.mask.toObject(),
                channel: this.channel
            })
        }
    });
    t.Image.filters.Mask.fromObject = function(n, i) {
        t.util.loadImage(n.mask.src, function(r) {
            n.mask = new t.Image(r,n.mask);
            i && i(new t.Image.filters.Mask(n))
        })
    }
    ;
    t.Image.filters.Mask.async = !0
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.Noise = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Noise",
        initialize: function(n) {
            n = n || {};
            this.noise = n.noise || 100
        },
        applyTo: function(n) {
            for (var u = n.getContext("2d"), f = u.getImageData(0, 0, n.width, n.height), i = f.data, e = this.noise, r, t = 0, o = i.length; t < o; t += 4)
                r = (.5 - Math.random()) * e,
                i[t] += r,
                i[t + 1] += r,
                i[t + 2] += r;
            u.putImageData(f, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                noise: this.noise
            })
        }
    });
    t.Image.filters.Noise.fromObject = function(n) {
        return new t.Image.filters.Noise(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.Pixelate = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Pixelate",
        initialize: function(n) {
            n = n || {};
            this.blocksize = n.blocksize || 4
        },
        applyTo: function(n) {
            for (var h = n.getContext("2d"), f = h.getImageData(0, 0, n.width, n.height), i = f.data, w = f.height, s = f.width, t, u, c, l, a, v, e, y, o, p, r = 0; r < w; r += this.blocksize)
                for (u = 0; u < s; u += this.blocksize)
                    for (t = r * 4 * s + u * 4,
                    c = i[t],
                    l = i[t + 1],
                    a = i[t + 2],
                    v = i[t + 3],
                    e = r,
                    y = r + this.blocksize; e < y; e++)
                        for (o = u,
                        p = u + this.blocksize; o < p; o++)
                            t = e * 4 * s + o * 4,
                            i[t] = c,
                            i[t + 1] = l,
                            i[t + 2] = a,
                            i[t + 3] = v;
            h.putImageData(f, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                blocksize: this.blocksize
            })
        }
    });
    t.Image.filters.Pixelate.fromObject = function(n) {
        return new t.Image.filters.Pixelate(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.RemoveWhite = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "RemoveWhite",
        initialize: function(n) {
            n = n || {};
            this.threshold = n.threshold || 30;
            this.distance = n.distance || 20
        },
        applyTo: function(n) {
            for (var h = n.getContext("2d"), c = h.getImageData(0, 0, n.width, n.height), i = c.data, l = this.threshold, e = this.distance, o = 255 - l, s = Math.abs, r, u, f, t = 0, a = i.length; t < a; t += 4)
                r = i[t],
                u = i[t + 1],
                f = i[t + 2],
                r > o && u > o && f > o && s(r - u) < e && s(r - f) < e && s(u - f) < e && (i[t + 3] = 1);
            h.putImageData(c, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                threshold: this.threshold,
                distance: this.distance
            })
        }
    });
    t.Image.filters.RemoveWhite.fromObject = function(n) {
        return new t.Image.filters.RemoveWhite(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {});
    t.Image.filters.Sepia = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Sepia",
        applyTo: function(n) {
            for (var u = n.getContext("2d"), f = u.getImageData(0, 0, n.width, n.height), i = f.data, e = i.length, r, t = 0; t < e; t += 4)
                r = .3 * i[t] + .59 * i[t + 1] + .11 * i[t + 2],
                i[t] = r + 100,
                i[t + 1] = r + 50,
                i[t + 2] = r + 255;
            u.putImageData(f, 0, 0)
        }
    });
    t.Image.filters.Sepia.fromObject = function() {
        return new t.Image.filters.Sepia
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {});
    t.Image.filters.Sepia2 = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Sepia2",
        applyTo: function(n) {
            for (var e = n.getContext("2d"), o = e.getImageData(0, 0, n.width, n.height), i = o.data, s = i.length, r, u, f, t = 0; t < s; t += 4)
                r = i[t],
                u = i[t + 1],
                f = i[t + 2],
                i[t] = (r * .393 + u * .769 + f * .189) / 1.351,
                i[t + 1] = (r * .349 + u * .686 + f * .168) / 1.203,
                i[t + 2] = (r * .272 + u * .534 + f * .131) / 2.14;
            e.putImageData(o, 0, 0)
        }
    });
    t.Image.filters.Sepia2.fromObject = function() {
        return new t.Image.filters.Sepia2
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {})
      , i = t.util.object.extend;
    t.Image.filters.Tint = t.util.createClass(t.Image.filters.BaseFilter, {
        type: "Tint",
        initialize: function(n) {
            n = n || {};
            this.color = n.color || "#000000";
            this.opacity = typeof n.opacity != "undefined" ? n.opacity : new t.Color(this.color).getAlpha()
        },
        applyTo: function(n) {
            var e = n.getContext("2d"), o = e.getImageData(0, 0, n.width, n.height), r = o.data, y = r.length, i, s, h, c, l, a, v, u, f;
            for (f = new t.Color(this.color).getSource(),
            s = f[0] * this.opacity,
            h = f[1] * this.opacity,
            c = f[2] * this.opacity,
            u = 1 - this.opacity,
            i = 0; i < y; i += 4)
                l = r[i],
                a = r[i + 1],
                v = r[i + 2],
                r[i] = s + l * u,
                r[i + 1] = h + a * u,
                r[i + 2] = c + v * u;
            e.putImageData(o, 0, 0)
        },
        toObject: function() {
            return i(this.callSuper("toObject"), {
                color: this.color,
                opacity: this.opacity
            })
        }
    });
    t.Image.filters.Tint.fromObject = function(n) {
        return new t.Image.filters.Tint(n)
    }
}(typeof exports != "undefined" ? exports : this),
function(n) {
    "use strict";
    var t = n.fabric || (n.fabric = {}), u = t.util.object.extend, f = t.util.object.clone, i = t.util.toFixed, e = t.StaticCanvas.supports("setLineDash"), r;
    if (t.Text) {
        t.warn("fabric.Text is already defined");
        return
    }
    r = t.Object.prototype.stateProperties.concat();
    r.push("fontFamily", "fontWeight", "fontSize", "text", "textDecoration", "textAlign", "fontStyle", "lineHeight", "textBackgroundColor", "useNative", "path");
    t.Text = t.util.createClass(t.Object, {
        _dimensionAffectingProps: {
            fontSize: !0,
            fontWeight: !0,
            fontFamily: !0,
            textDecoration: !0,
            fontStyle: !0,
            lineHeight: !0,
            stroke: !0,
            strokeWidth: !0,
            text: !0
        },
        _reNewline: /\r?\n/,
        type: "text",
        fontSize: 40,
        fontWeight: "normal",
        fontFamily: "Times New Roman",
        textDecoration: "",
        textAlign: "left",
        fontStyle: "",
        lineHeight: 1.3,
        textBackgroundColor: "",
        path: null,
        useNative: !0,
        stateProperties: r,
        stroke: null,
        shadow: null,
        initialize: function(n, t) {
            t = t || {};
            this.text = n;
            this.__skipDimension = !0;
            this.setOptions(t);
            this.__skipDimension = !1;
            this._initDimensions();
            this.setCoords()
        },
        _initDimensions: function() {
            if (!this.__skipDimension) {
                var n = t.util.createCanvasElement();
                this._render(n.getContext("2d"))
            }
        },
        toString: function() {
            return "#<fabric.Text (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '" }>'
        },
        _render: function(n) {
            var t = this.group && this.group.type === "path-group";
            t && !this.transformMatrix ? n.translate(-this.group.width / 2 + this.left, -this.group.height / 2 + this.top) : t && this.transformMatrix && n.translate(-this.group.width / 2, -this.group.height / 2);
            typeof Cufon == "undefined" || this.useNative === !0 ? this._renderViaNative(n) : this._renderViaCufon(n)
        },
        _renderViaNative: function(n) {
            var i = this.text.split(this._reNewline);
            this.transform(n, t.isLikelyNode);
            this._setTextStyles(n);
            this.width = this._getTextWidth(n, i);
            this.height = this._getTextHeight(n, i);
            this.clipTo && t.util.clipContext(this, n);
            this._renderTextBackground(n, i);
            this._translateForTextAlign(n);
            this._renderText(n, i);
            this.textAlign !== "left" && this.textAlign !== "justify" && n.restore();
            this._renderTextDecoration(n, i);
            this.clipTo && n.restore();
            this._setBoundaries(n, i);
            this._totalLineHeight = 0
        },
        _renderText: function(n, t) {
            n.save();
            this._setShadow(n);
            this._renderTextFill(n, t);
            this._renderTextStroke(n, t);
            this._removeShadow(n);
            n.restore()
        },
        _translateForTextAlign: function(n) {
            this.textAlign !== "left" && this.textAlign !== "justify" && (n.save(),
            n.translate(this.textAlign === "center" ? this.width / 2 : this.width, 0))
        },
        _setBoundaries: function(n, t) {
            var i, u, r, f;
            for (this._boundaries = [],
            i = 0,
            u = t.length; i < u; i++)
                r = this._getLineWidth(n, t[i]),
                f = this._getLineLeftOffset(r),
                this._boundaries.push({
                    height: this.fontSize * this.lineHeight,
                    width: r,
                    left: f
                })
        },
        _setTextStyles: function(n) {
            this._setFillStyles(n);
            this._setStrokeStyles(n);
            n.textBaseline = "alphabetic";
            this.skipTextAlign || (n.textAlign = this.textAlign);
            n.font = this._getFontDeclaration()
        },
        _getTextHeight: function(n, t) {
            return this.fontSize * t.length * this.lineHeight
        },
        _getTextWidth: function(n, t) {
            for (var u, i = n.measureText(t[0] || "|").width, r = 1, f = t.length; r < f; r++)
                u = n.measureText(t[r]).width,
                u > i && (i = u);
            return i
        },
        _renderChars: function(n, t, i, r, u) {
            t[n](i, r, u)
        },
        _renderTextLine: function(n, t, i, r, u, f) {
            var h, s, e, l;
            if (u -= this.fontSize / 4,
            this.textAlign !== "justify") {
                this._renderChars(n, t, i, r, u, f);
                return
            }
            if (h = t.measureText(i).width,
            s = this.width,
            s > h) {
                var o = i.split(/\s+/)
                  , a = t.measureText(i.replace(/\s+/g, "")).width
                  , v = s - a
                  , y = o.length - 1
                  , p = v / y
                  , c = 0;
                for (e = 0,
                l = o.length; e < l; e++)
                    this._renderChars(n, t, o[e], r + c, u, f),
                    c += t.measureText(o[e]).width + p
            } else
                this._renderChars(n, t, i, r, u, f)
        },
        _getLeftOffset: function() {
            return t.isLikelyNode ? 0 : -this.width / 2
        },
        _getTopOffset: function() {
            return -this.height / 2
        },
        _renderTextFill: function(n, t) {
            var r, i, u, f;
            if (this.fill || this._skipFillStrokeCheck)
                for (this._boundaries = [],
                r = 0,
                i = 0,
                u = t.length; i < u; i++)
                    f = this._getHeightOfLine(n, i, t),
                    r += f,
                    this._renderTextLine("fillText", n, t[i], this._getLeftOffset(), this._getTopOffset() + r, i)
        },
        _renderTextStroke: function(n, t) {
            var r, i, u, f;
            if (this.stroke || this._skipFillStrokeCheck) {
                for (r = 0,
                n.save(),
                this.strokeDashArray && (1 & this.strokeDashArray.length && this.strokeDashArray.push.apply(this.strokeDashArray, this.strokeDashArray),
                e && n.setLineDash(this.strokeDashArray)),
                n.beginPath(),
                i = 0,
                u = t.length; i < u; i++)
                    f = this._getHeightOfLine(n, i, t),
                    r += f,
                    this._renderTextLine("strokeText", n, t[i], this._getLeftOffset(), this._getTopOffset() + r, i);
                n.closePath();
                n.restore()
            }
        },
        _getHeightOfLine: function() {
            return this.fontSize * this.lineHeight
        },
        _renderTextBackground: function(n, t) {
            this._renderTextBoxBackground(n);
            this._renderTextLinesBackground(n, t)
        },
        _renderTextBoxBackground: function(n) {
            this.backgroundColor && (n.save(),
            n.fillStyle = this.backgroundColor,
            n.fillRect(this._getLeftOffset(), this._getTopOffset(), this.width, this.height),
            n.restore())
        },
        _renderTextLinesBackground: function(n, t) {
            var i, u, r, f;
            if (this.textBackgroundColor) {
                for (n.save(),
                n.fillStyle = this.textBackgroundColor,
                i = 0,
                u = t.length; i < u; i++)
                    t[i] !== "" && (r = this._getLineWidth(n, t[i]),
                    f = this._getLineLeftOffset(r),
                    n.fillRect(this._getLeftOffset() + f, this._getTopOffset() + i * this.fontSize * this.lineHeight, r, this.fontSize * this.lineHeight));
                n.restore()
            }
        },
        _getLineLeftOffset: function(n) {
            return this.textAlign === "center" ? (this.width - n) / 2 : this.textAlign === "right" ? this.width - n : 0
        },
        _getLineWidth: function(n, t) {
            return this.textAlign === "justify" ? this.width : n.measureText(t).width
        },
        _renderTextDecoration: function(n, t) {
            function r(r) {
                for (var e, s, f = 0, o = t.length; f < o; f++)
                    e = i._getLineWidth(n, t[f]),
                    s = i._getLineLeftOffset(e),
                    n.fillRect(i._getLeftOffset() + s, ~~(r + f * i._getHeightOfLine(n, f, t) - u), e, 1)
            }
            if (this.textDecoration) {
                var u = this._getTextHeight(n, t) / 2
                  , i = this;
                this.textDecoration.indexOf("underline") > -1 && r(this.fontSize * this.lineHeight);
                this.textDecoration.indexOf("line-through") > -1 && r(this.fontSize * this.lineHeight - this.fontSize / 2);
                this.textDecoration.indexOf("overline") > -1 && r(this.fontSize * this.lineHeight - this.fontSize)
            }
        },
        _getFontDeclaration: function() {
            return [t.isLikelyNode ? this.fontWeight : this.fontStyle, t.isLikelyNode ? this.fontStyle : this.fontWeight, this.fontSize + "px", t.isLikelyNode ? '"' + this.fontFamily + '"' : this.fontFamily].join(" ")
        },
        render: function(n, t) {
            this.visible && (n.save(),
            this._render(n),
            !t && this.active && (this.drawBorders(n),
            this.drawControls(n)),
            n.restore())
        },
        toObject: function(n) {
            var t = u(this.callSuper("toObject", n), {
                text: this.text,
                fontSize: this.fontSize,
                fontWeight: this.fontWeight,
                fontFamily: this.fontFamily,
                fontStyle: this.fontStyle,
                lineHeight: this.lineHeight,
                textDecoration: this.textDecoration,
                textAlign: this.textAlign,
                path: this.path,
                textBackgroundColor: this.textBackgroundColor,
                useNative: this.useNative
            });
            return this.includeDefaultValues || this._removeDefaultValues(t),
            t
        },
        toSVG: function(n) {
            var i = []
              , r = this.text.split(this._reNewline)
              , t = this._getSVGLeftTopOffsets(r)
              , u = this._getSVGTextAndBg(t.lineTop, t.textLeft, r)
              , f = this._getSVGShadows(t.lineTop, r);
            return t.textTop += this._fontAscent ? this._fontAscent / 5 * this.lineHeight : 0,
            this._wrapSVGTextAndBg(i, u, f, t),
            n ? n(i.join("")) : i.join("")
        },
        _getSVGLeftTopOffsets: function(n) {
            var t = this.useNative ? this.fontSize * this.lineHeight : -this._fontAscent - this._fontAscent / 5 * this.lineHeight
              , i = -(this.width / 2)
              , r = this.useNative ? this.fontSize - 1 : this.height / 2 - n.length * this.fontSize - this._totalLineHeight;
            return {
                textLeft: i,
                textTop: r,
                lineTop: t
            }
        },
        _wrapSVGTextAndBg: function(n, t, r, u) {
            n.push('<g transform="', this.getSvgTransform(), '">', t.textBgRects.join(""), "<text ", this.fontFamily ? 'font-family="' + this.fontFamily.replace(/"/g, "'") + '" ' : "", this.fontSize ? 'font-size="' + this.fontSize + '" ' : "", this.fontStyle ? 'font-style="' + this.fontStyle + '" ' : "", this.fontWeight ? 'font-weight="' + this.fontWeight + '" ' : "", this.textDecoration ? 'text-decoration="' + this.textDecoration + '" ' : "", 'style="', this.getSvgStyles(), '" ', 'transform="translate(', i(u.textLeft, 2), " ", i(u.textTop, 2), ')">', r.join(""), t.textSpans.join(""), "<\/text>", "<\/g>")
        },
        _getSVGShadows: function(n, r) {
            var f = [], u, o, e = 1, s;
            if (!this.shadow || !this._boundaries)
                return f;
            for (u = 0,
            o = r.length; u < o; u++)
                r[u] !== "" ? (s = this._boundaries && this._boundaries[u] ? this._boundaries[u].left : 0,
                f.push('<tspan x="', i(s + e + this.shadow.offsetX, 2), u === 0 || this.useNative ? '" y' : '" dy', '="', i(this.useNative ? n * u - this.height / 2 + this.shadow.offsetY : n + (u === 0 ? this.shadow.offsetY : 0), 2), '" ', this._getFillAttributes(this.shadow.color), ">", t.util.string.escapeXml(r[u]), "<\/tspan>"),
                e = 1) : e++;
            return f
        },
        _getSVGTextAndBg: function(n, t, i) {
            var e = [], u = [], f = 1, r, o;
            for (this._setSVGBg(u),
            r = 0,
            o = i.length; r < o; r++)
                (i[r] !== "" ? (this._setSVGTextLineText(i[r], r, e, n, f, u),
                f = 1) : f++,
                this.textBackgroundColor && this._boundaries) && this._setSVGTextLineBg(u, r, t, n);
            return {
                textSpans: e,
                textBgRects: u
            }
        },
        _setSVGTextLineText: function(n, r, u, f, e) {
            var o = this._boundaries && this._boundaries[r] ? i(this._boundaries[r].left, 2) : 0;
            u.push('<tspan x="', o, '" ', r === 0 || this.useNative ? "y" : "dy", '="', i(this.useNative ? f * r - this.height / 2 : f * e, 2), '" ', this._getFillAttributes(this.fill), ">", t.util.string.escapeXml(n), "<\/tspan>")
        },
        _setSVGTextLineBg: function(n, t, r, u) {
            n.push("<rect ", this._getFillAttributes(this.textBackgroundColor), ' x="', i(r + this._boundaries[t].left, 2), '" y="', i(u * t - this.height / 2, 2), '" width="', i(this._boundaries[t].width, 2), '" height="', i(this._boundaries[t].height, 2), '"><\/rect>')
        },
        _setSVGBg: function(n) {
            this.backgroundColor && this._boundaries && n.push("<rect ", this._getFillAttributes(this.backgroundColor), ' x="', i(-this.width / 2, 2), '" y="', i(-this.height / 2, 2), '" width="', i(this.width, 2), '" height="', i(this.height, 2), '"><\/rect>')
        },
        _getFillAttributes: function(n) {
            var i = n && typeof n == "string" ? new t.Color(n) : "";
            return !i || !i.getSource() || i.getAlpha() === 1 ? 'fill="' + n + '"' : 'opacity="' + i.getAlpha() + '" fill="' + i.setAlpha(1).toRgb() + '"'
        },
        _set: function(n, t) {
            n === "fontFamily" && this.path && (this.path = this.path.replace(/(.*?)([^\/]*)(\.font\.js)/, "$1" + t + "$3"));
            this.callSuper("_set", n, t);
            n in this._dimensionAffectingProps && (this._initDimensions(),
            this.setCoords())
        },
        complexity: function() {
            return 1
        }
    });
    t.Text.ATTRIBUTE_NAMES = t.SHARED_ATTRIBUTES.concat("x y font-family font-style font-weight font-size text-decoration".split(" "));
    t.Text.fromElement = function(n, i) {
        var u, r;
        return n ? (u = t.parseAttributes(n, t.Text.ATTRIBUTE_NAMES),
        i = t.util.object.extend(i ? t.util.object.clone(i) : {}, u),
        r = new t.Text(n.textContent,i),
        r.set({
            left: r.getLeft() + r.getWidth() / 2,
            top: r.getTop() - r.getHeight() / 2
        }),
        r) : null
    }
    ;
    t.Text.fromObject = function(n) {
        return new t.Text(n.text,f(n))
    }
    ;
    t.util.createAccessors(t.Text)
}(typeof exports != "undefined" ? exports : this),
function() {
    var n = fabric.util.object.clone;
    fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, {
        type: "i-text",
        selectionStart: 0,
        selectionEnd: 0,
        selectionColor: "rgba(17,119,255,0.3)",
        isEditing: !1,
        editable: !0,
        editingBorderColor: "rgba(102,153,255,0.25)",
        cursorWidth: 2,
        cursorColor: "#333",
        cursorDelay: 1e3,
        cursorDuration: 600,
        styles: null,
        caching: !0,
        _skipFillStrokeCheck: !0,
        _reSpace: /\s|\n/,
        _fontSizeFraction: 4,
        _currentCursorOpacity: 0,
        _selectionDirection: null,
        _abortCursorAnimation: !1,
        _charWidthsCache: {},
        initialize: function(n, t) {
            this.styles = t ? t.styles || {} : {};
            this.callSuper("initialize", n, t);
            this.initBehavior();
            fabric.IText.instances.push(this);
            this.__lineWidths = {};
            this.__lineHeights = {};
            this.__lineOffsets = {}
        },
        isEmptyStyles: function() {
            var n, t, i, r;
            if (!this.styles)
                return !0;
            n = this.styles;
            for (t in n)
                for (i in n[t])
                    for (r in n[t][i])
                        return !1;
            return !0
        },
        setSelectionStart: function(n) {
            this.selectionStart = n;
            this.hiddenTextarea && (this.hiddenTextarea.selectionStart = n)
        },
        setSelectionEnd: function(n) {
            this.selectionEnd = n;
            this.hiddenTextarea && (this.hiddenTextarea.selectionEnd = n)
        },
        getSelectionStyles: function(n, t) {
            var u, i, r;
            if (arguments.length === 2) {
                for (u = [],
                i = n; i < t; i++)
                    u.push(this.getSelectionStyles(i));
                return u
            }
            return r = this.get2DCursorLocation(n),
            this.styles[r.lineIndex] ? this.styles[r.lineIndex][r.charIndex] || {} : {}
        },
        setSelectionStyles: function(n) {
            if (this.selectionStart === this.selectionEnd)
                this._extendStyles(this.selectionStart, n);
            else
                for (var t = this.selectionStart; t < this.selectionEnd; t++)
                    this._extendStyles(t, n);
            return this
        },
        _extendStyles: function(n, t) {
            var i = this.get2DCursorLocation(n);
            this.styles[i.lineIndex] || (this.styles[i.lineIndex] = {});
            this.styles[i.lineIndex][i.charIndex] || (this.styles[i.lineIndex][i.charIndex] = {});
            fabric.util.object.extend(this.styles[i.lineIndex][i.charIndex], t)
        },
        _render: function(n) {
            this.callSuper("_render", n);
            this.ctx = n;
            this.isEditing && this.renderCursorOrSelection()
        },
        renderCursorOrSelection: function() {
            if (this.active) {
                var t = this.text.split(""), n;
                this.selectionStart === this.selectionEnd ? (n = this._getCursorBoundaries(t, "cursor"),
                this.renderCursor(n)) : (n = this._getCursorBoundaries(t, "selection"),
                this.renderSelection(t, n))
            }
        },
        get2DCursorLocation: function(n) {
            typeof n == "undefined" && (n = this.selectionStart);
            var i = this.text.slice(0, n)
              , t = i.split(this._reNewline);
            return {
                lineIndex: t.length - 1,
                charIndex: t[t.length - 1].length
            }
        },
        getCurrentCharFontSize: function(n, t) {
            return this.styles[n] && this.styles[n][t === 0 ? 0 : t - 1] && this.styles[n][t === 0 ? 0 : t - 1].fontSize || this.fontSize
        },
        getCurrentCharColor: function(n, t) {
            return this.styles[n] && this.styles[n][t === 0 ? 0 : t - 1] && this.styles[n][t === 0 ? 0 : t - 1].fill || this.cursorColor
        },
        _getCursorBoundaries: function(n, t) {
            var r = this.get2DCursorLocation()
              , u = this.text.split(this._reNewline)
              , f = Math.round(this._getLeftOffset())
              , e = -this.height / 2
              , i = this._getCursorBoundariesOffsets(n, t, r, u);
            return {
                left: f,
                top: e,
                leftOffset: i.left + i.lineLeft,
                topOffset: i.top
            }
        },
        _getCursorBoundariesOffsets: function(n, t, i, r) {
            for (var c, s = 0, u = 0, e = 0, o = 0, h = t === "cursor" ? this._getHeightOfLine(this.ctx, 0) - this.getCurrentCharFontSize(i.lineIndex, i.charIndex) : 0, f = 0; f < this.selectionStart; f++)
                n[f] === "\n" ? (o = 0,
                c = u + (t === "cursor" ? 1 : 0),
                h += this._getCachedLineHeight(c),
                u++,
                e = 0) : (o += this._getWidthOfChar(this.ctx, n[f], u, e),
                e++),
                s = this._getCachedLineOffset(u, r);
            return this._clearCache(),
            {
                top: h,
                left: o,
                lineLeft: s
            }
        },
        _clearCache: function() {
            this.__lineWidths = {};
            this.__lineHeights = {};
            this.__lineOffsets = {}
        },
        _getCachedLineHeight: function(n) {
            return this.__lineHeights[n] || (this.__lineHeights[n] = this._getHeightOfLine(this.ctx, n))
        },
        _getCachedLineWidth: function(n, t) {
            return this.__lineWidths[n] || (this.__lineWidths[n] = this._getWidthOfLine(this.ctx, n, t))
        },
        _getCachedLineOffset: function(n, t) {
            var i = this._getCachedLineWidth(n, t);
            return this.__lineOffsets[n] || (this.__lineOffsets[n] = this._getLineLeftOffset(i))
        },
        renderCursor: function(n) {
            var t = this.ctx;
            t.save();
            var i = this.get2DCursorLocation()
              , r = i.lineIndex
              , u = i.charIndex
              , f = this.getCurrentCharFontSize(r, u);
            t.fillStyle = this.getCurrentCharColor(r, u);
            t.globalAlpha = this._currentCursorOpacity;
            t.fillRect(n.left + n.leftOffset, n.top + n.topOffset, this.cursorWidth / this.scaleX, f);
            t.restore()
        },
        renderSelection: function(n, t) {
            var i = this.ctx, u, e, o;
            i.save();
            i.fillStyle = this.selectionColor;
            var s = this.get2DCursorLocation()
              , r = s.lineIndex
              , f = s.charIndex
              , h = this.text.split(this._reNewline)
              , c = r;
            for (u = this.selectionStart; u < this.selectionEnd; u++)
                n[u] === "\n" ? (t.leftOffset = 0,
                t.topOffset += this._getHeightOfLine(i, r),
                r++,
                f = 0) : u !== this.text.length && (e = this._getWidthOfChar(i, n[u], r, f),
                o = this._getLineLeftOffset(this._getWidthOfLine(i, r, h)) || 0,
                r === c && (o = 0),
                i.fillRect(t.left + t.leftOffset + o, t.top + t.topOffset, e, this._getHeightOfLine(i, r)),
                t.leftOffset += e,
                f++);
            i.restore()
        },
        _renderChars: function(n, t, i, r, u, f) {
            var e, h;
            if (this.isEmptyStyles())
                return this._renderCharsFast(n, t, i, r, u);
            this.skipTextAlign = !0;
            r -= this.textAlign === "center" ? this.width / 2 : this.textAlign === "right" ? this.width : 0;
            var o = this.text.split(this._reNewline)
              , c = this._getWidthOfLine(t, f, o)
              , l = this._getHeightOfLine(t, f, o)
              , a = this._getLineLeftOffset(c)
              , s = i.split("");
            for (r += a || 0,
            t.save(),
            e = 0,
            h = s.length; e < h; e++)
                this._renderChar(n, t, f, e, s[e], r, u, l);
            t.restore()
        },
        _renderCharsFast: function(n, t, i, r, u) {
            this.skipTextAlign = !1;
            n === "fillText" && this.fill && this.callSuper("_renderChars", n, t, i, r, u);
            n === "strokeText" && this.stroke && this.callSuper("_renderChars", n, t, i, r, u)
        },
        _renderChar: function(n, t, i, r, u, f, e, o) {
            var s, h, c, l, a;
            this.styles && this.styles[i] && (s = this.styles[i][r]) ? (l = s.stroke || this.stroke,
            a = s.fill || this.fill,
            t.save(),
            h = this._applyCharStylesGetWidth(t, u, i, r, s),
            c = this._getHeightOfChar(t, u, i, r),
            a && t.fillText(u, f, e),
            l && t.strokeText(u, f, e),
            this._renderCharDecoration(t, s, f, e, h, o, c),
            t.restore(),
            t.translate(h, 0)) : (n === "strokeText" && this.stroke && t[n](u, f, e),
            n === "fillText" && this.fill && t[n](u, f, e),
            h = this._applyCharStylesGetWidth(t, u, i, r),
            this._renderCharDecoration(t, null, f, e, h, o),
            t.translate(t.measureText(u).width, 0))
        },
        _renderCharDecoration: function(n, t, i, r, u, f, e) {
            var o = t ? t.textDecoration || this.textDecoration : this.textDecoration
              , s = (t ? t.fontSize : null) || this.fontSize;
            o && (o.indexOf("underline") > -1 && this._renderCharDecorationAtOffset(n, i, r + this.fontSize / this._fontSizeFraction, u, 0, this.fontSize / 20),
            o.indexOf("line-through") > -1 && this._renderCharDecorationAtOffset(n, i, r + this.fontSize / this._fontSizeFraction, u, e / 2, s / 20),
            o.indexOf("overline") > -1 && this._renderCharDecorationAtOffset(n, i, r, u, f - this.fontSize / this._fontSizeFraction, this.fontSize / 20))
        },
        _renderCharDecorationAtOffset: function(n, t, i, r, u, f) {
            n.fillRect(t, i - u, r, f)
        },
        _renderTextLine: function(n, t, i, r, u, f) {
            u += this.fontSize / 4;
            this.callSuper("_renderTextLine", n, t, i, r, u, f)
        },
        _renderTextDecoration: function(n, t) {
            if (this.isEmptyStyles())
                return this.callSuper("_renderTextDecoration", n, t)
        },
        _renderTextLinesBackground: function(n, t) {
            var u, e, i, h, f, o, s, r, c, l;
            if (this.textBackgroundColor || this.styles) {
                for (n.save(),
                this.textBackgroundColor && (n.fillStyle = this.textBackgroundColor),
                u = 0,
                e = this.fontSize / this._fontSizeFraction,
                i = 0,
                h = t.length; i < h; i++) {
                    if (f = this._getHeightOfLine(n, i, t),
                    t[i] === "") {
                        u += f;
                        continue
                    }
                    if (o = this._getWidthOfLine(n, i, t),
                    s = this._getLineLeftOffset(o),
                    this.textBackgroundColor && (n.fillStyle = this.textBackgroundColor,
                    n.fillRect(this._getLeftOffset() + s, this._getTopOffset() + u + e, o, f)),
                    this.styles[i])
                        for (r = 0,
                        c = t[i].length; r < c; r++)
                            this.styles[i] && this.styles[i][r] && this.styles[i][r].textBackgroundColor && (l = t[i][r],
                            n.fillStyle = this.styles[i][r].textBackgroundColor,
                            n.fillRect(this._getLeftOffset() + s + this._getWidthOfCharsAt(n, i, r, t), this._getTopOffset() + u + e, this._getWidthOfChar(n, l, i, r, t) + 1, f));
                    u += f
                }
                n.restore()
            }
        },
        _getCacheProp: function(n, t) {
            return n + t.fontFamily + t.fontSize + t.fontWeight + t.fontStyle + t.shadow
        },
        _applyCharStylesGetWidth: function(t, i, r, u, f) {
            var e = f || this.styles[r] && this.styles[r][u], o, s;
            return (e = e ? n(e) : {},
            this._applyFontStyles(e),
            o = this._getCacheProp(i, e),
            this.isEmptyStyles() && this._charWidthsCache[o] && this.caching) ? this._charWidthsCache[o] : (typeof e.shadow == "string" && (e.shadow = new fabric.Shadow(e.shadow)),
            s = e.fill || this.fill,
            t.fillStyle = s.toLive ? s.toLive(t) : s,
            e.stroke && (t.strokeStyle = e.stroke && e.stroke.toLive ? e.stroke.toLive(t) : e.stroke),
            t.lineWidth = e.strokeWidth || this.strokeWidth,
            t.font = this._getFontDeclaration.call(e),
            this._setShadow.call(e, t),
            this.caching ? (this._charWidthsCache[o] || (this._charWidthsCache[o] = t.measureText(i).width),
            this._charWidthsCache[o]) : t.measureText(i).width)
        },
        _applyFontStyles: function(n) {
            n.fontFamily || (n.fontFamily = this.fontFamily);
            n.fontSize || (n.fontSize = this.fontSize);
            n.fontWeight || (n.fontWeight = this.fontWeight);
            n.fontStyle || (n.fontStyle = this.fontStyle)
        },
        _getWidthOfChar: function(n, t, i, r) {
            n.save();
            var u = this._applyCharStylesGetWidth(n, t, i, r);
            return n.restore(),
            u
        },
        _getHeightOfChar: function(n, t, i, r) {
            return this.styles[i] && this.styles[i][r] ? this.styles[i][r].fontSize || this.fontSize : this.fontSize
        },
        _getWidthOfCharAt: function(n, t, i, r) {
            r = r || this.text.split(this._reNewline);
            var u = r[t].split("")[i];
            return this._getWidthOfChar(n, u, t, i)
        },
        _getHeightOfCharAt: function(n, t, i, r) {
            r = r || this.text.split(this._reNewline);
            var u = r[t].split("")[i];
            return this._getHeightOfChar(n, u, t, i)
        },
        _getWidthOfCharsAt: function(n, t, i, r) {
            for (var f = 0, u = 0; u < i; u++)
                f += this._getWidthOfCharAt(n, t, u, r);
            return f
        },
        _getWidthOfLine: function(n, t, i) {
            return this._getWidthOfCharsAt(n, t, i[t].length, i)
        },
        _getTextWidth: function(n, t) {
            var i, r, f, u;
            if (this.isEmptyStyles())
                return this.callSuper("_getTextWidth", n, t);
            for (i = this._getWidthOfLine(n, 0, t),
            r = 1,
            f = t.length; r < f; r++)
                u = this._getWidthOfLine(n, r, t),
                u > i && (i = u);
            return i
        },
        _getHeightOfLine: function(n, t, i) {
            var r, o, f;
            i = i || this.text.split(this._reNewline);
            var u = this._getHeightOfChar(n, i[t][0], t, 0)
              , s = i[t]
              , e = s.split("");
            for (r = 1,
            o = e.length; r < o; r++)
                f = this._getHeightOfChar(n, e[r], t, r),
                f > u && (u = f);
            return u * this.lineHeight
        },
        _getTextHeight: function(n, t) {
            for (var r = 0, i = 0, u = t.length; i < u; i++)
                r += this._getHeightOfLine(n, i, t);
            return r
        },
        _getTopOffset: function() {
            var n = fabric.Text.prototype._getTopOffset.call(this);
            return n - this.fontSize / this._fontSizeFraction
        },
        toObject: function(t) {
            return fabric.util.object.extend(this.callSuper("toObject", t), {
                styles: n(this.styles)
            })
        }
    });
    fabric.IText.fromObject = function(t) {
        return new fabric.IText(t.text,n(t))
    }
    ;
    fabric.IText.instances = []
}(),
function() {
    var n = fabric.util.object.clone;
    fabric.util.object.extend(fabric.IText.prototype, {
        initBehavior: function() {
            this.initKeyHandlers();
            this.initCursorSelectionHandlers();
            this.initDoubleClickSimulation();
            this.initHiddenTextarea()
        },
        initSelectedHandler: function() {
            this.on("selected", function() {
                var n = this;
                setTimeout(function() {
                    n.selected = !0
                }, 100);
                this._hasCanvasHandlers || (this._initCanvasHandlers(),
                this._hasCanvasHandlers = !0)
            })
        },
        _initCanvasHandlers: function() {
            var n = this;
            this.canvas.on("selection:cleared", function(t) {
                t.e && n.canvas.containsPoint(t.e, n) || n.exitEditing()
            });
            this.canvas.on("mouse:up", function() {
                this.getObjects("i-text").forEach(function(n) {
                    n.__isMousedown = !1
                })
            })
        },
        _tick: function() {
            var n = this;
            this._abortCursorAnimation || this.animate("_currentCursorOpacity", 1, {
                duration: this.cursorDuration,
                onComplete: function() {
                    n._onTickComplete()
                },
                onChange: function() {
                    n.canvas && n.canvas.renderAll()
                },
                abort: function() {
                    return n._abortCursorAnimation
                }
            })
        },
        _onTickComplete: function() {
            if (!this._abortCursorAnimation) {
                var n = this;
                this._cursorTimeout1 && clearTimeout(this._cursorTimeout1);
                this._cursorTimeout1 = setTimeout(function() {
                    n.animate("_currentCursorOpacity", 0, {
                        duration: this.cursorDuration / 2,
                        onComplete: function() {
                            n._tick()
                        },
                        onChange: function() {
                            n.canvas && n.canvas.renderAll()
                        },
                        abort: function() {
                            return n._abortCursorAnimation
                        }
                    })
                }, 100)
            }
        },
        initDelayedCursor: function() {
            var n = this;
            this._cursorTimeout2 && clearTimeout(this._cursorTimeout2);
            this._cursorTimeout2 = setTimeout(function() {
                n._abortCursorAnimation = !1;
                n._tick()
            }, this.cursorDelay)
        },
        abortCursorAnimation: function() {
            this._abortCursorAnimation = !0;
            clearTimeout(this._cursorTimeout1);
            clearTimeout(this._cursorTimeout2);
            this._currentCursorOpacity = 0;
            this.canvas && this.canvas.renderAll();
            var n = this;
            setTimeout(function() {
                n._abortCursorAnimation = !1
            }, 10)
        },
        selectAll: function() {
            this.selectionStart = 0;
            this.selectionEnd = this.text.length
        },
        getSelectedText: function() {
            return this.text.slice(this.selectionStart, this.selectionEnd)
        },
        findWordBoundaryLeft: function(n) {
            var i = 0
              , t = n - 1;
            if (this._reSpace.test(this.text.charAt(t)))
                while (this._reSpace.test(this.text.charAt(t)))
                    i++,
                    t--;
            while (/\S/.test(this.text.charAt(t)) && t > -1)
                i++,
                t--;
            return n - i
        },
        findWordBoundaryRight: function(n) {
            var i = 0
              , t = n;
            if (this._reSpace.test(this.text.charAt(t)))
                while (this._reSpace.test(this.text.charAt(t)))
                    i++,
                    t++;
            while (/\S/.test(this.text.charAt(t)) && t < this.text.length)
                i++,
                t++;
            return n + i
        },
        findLineBoundaryLeft: function(n) {
            for (var i = 0, t = n - 1; !/\n/.test(this.text.charAt(t)) && t > -1; )
                i++,
                t--;
            return n - i
        },
        findLineBoundaryRight: function(n) {
            for (var i = 0, t = n; !/\n/.test(this.text.charAt(t)) && t < this.text.length; )
                i++,
                t++;
            return n + i
        },
        getNumNewLinesInSelectedText: function() {
            for (var r = this.getSelectedText(), t = 0, n = 0, i = r.split(""), u = i.length; n < u; n++)
                i[n] === "\n" && t++;
            return t
        },
        searchWordBoundary: function(n, t) {
            for (var i = n, r = this.text.charAt(i), u = /[ \n\.,;!\?\-]/; !u.test(r) && i > 0 && i < this.text.length; )
                i += t,
                r = this.text.charAt(i);
            return u.test(r) && r !== "\n" && (i += t === 1 ? 0 : 1),
            i
        },
        selectWord: function(n) {
            var t = this.searchWordBoundary(n, -1)
              , i = this.searchWordBoundary(n, 1);
            this.setSelectionStart(t);
            this.setSelectionEnd(i)
        },
        selectLine: function(n) {
            var t = this.findLineBoundaryLeft(n)
              , i = this.findLineBoundaryRight(n);
            this.setSelectionStart(t);
            this.setSelectionEnd(i)
        },
        enterEditing: function() {
            if (!this.isEditing && this.editable)
                return this.exitEditingOnOthers(),
                this.isEditing = !0,
                this._updateTextarea(),
                this._saveEditingProps(),
                this._setEditingProps(),
                this._tick(),
                this.canvas && this.canvas.renderAll(),
                this.fire("editing:entered"),
                this
        },
        exitEditingOnOthers: function() {
            fabric.IText.instances.forEach(function(n) {
                n !== this && n.exitEditing()
            }, this)
        },
        _setEditingProps: function() {
            this.hoverCursor = "text";
            this.canvas && (this.canvas.defaultCursor = this.canvas.moveCursor = "text");
            this.borderColor = this.editingBorderColor;
            this.hasControls = this.selectable = !1;
            this.lockMovementX = this.lockMovementY = !0
        },
        _updateTextarea: function() {
            this.hiddenTextarea && (this.hiddenTextarea.value = this.text,
            this.hiddenTextarea.selectionStart = this.selectionStart,
            this.hiddenTextarea.focus())
        },
        _saveEditingProps: function() {
            this._savedProps = {
                hasControls: this.hasControls,
                borderColor: this.borderColor,
                lockMovementX: this.lockMovementX,
                lockMovementY: this.lockMovementY,
                hoverCursor: this.hoverCursor,
                defaultCursor: this.canvas && this.canvas.defaultCursor,
                moveCursor: this.canvas && this.canvas.moveCursor
            }
        },
        _restoreEditingProps: function() {
            this._savedProps && (this.hoverCursor = this._savedProps.overCursor,
            this.hasControls = this._savedProps.hasControls,
            this.borderColor = this._savedProps.borderColor,
            this.lockMovementX = this._savedProps.lockMovementX,
            this.lockMovementY = this._savedProps.lockMovementY,
            this.canvas && (this.canvas.defaultCursor = this._savedProps.defaultCursor,
            this.canvas.moveCursor = this._savedProps.moveCursor))
        },
        exitEditing: function() {
            return this.selected = !1,
            this.isEditing = !1,
            this.selectable = !0,
            this.selectionEnd = this.selectionStart,
            this.hiddenTextarea && this.hiddenTextarea.blur(),
            this.abortCursorAnimation(),
            this._restoreEditingProps(),
            this._currentCursorOpacity = 0,
            this.fire("editing:exited"),
            this
        },
        _removeExtraneousStyles: function() {
            var t = this.text.split(this._reNewline);
            for (var n in this.styles)
                t[n] || delete this.styles[n]
        },
        _removeCharsFromTo: function(n, t) {
            for (var i = t, u, f, r; i !== n; )
                u = this.get2DCursorLocation(i).charIndex,
                i--,
                f = this.get2DCursorLocation(i).charIndex,
                r = f > u,
                r ? this.removeStyleObject(r, i + 1) : this.removeStyleObject(this.get2DCursorLocation(i).charIndex === 0, i);
            this.text = this.text.slice(0, n) + this.text.slice(t)
        },
        insertChars: function(n) {
            var t = this.text.slice(this.selectionStart, this.selectionStart + 1) === "\n";
            this.text = this.text.slice(0, this.selectionStart) + n + this.text.slice(this.selectionEnd);
            this.selectionStart === this.selectionEnd ? this.insertStyleObjects(n, t, this.copiedStyles) : this.selectionEnd - this.selectionStart > 1 && console.log("replacing MORE than 1 char");
            this.selectionStart += n.length;
            this.selectionEnd = this.selectionStart;
            this.canvas && this.canvas.renderAll().renderAll();
            this.setCoords();
            this.fire("text:changed")
        },
        insertNewlineStyleObject: function(t, i, r) {
            var e, u, f;
            if (this.shiftLineStyles(t, 1),
            this.styles[t + 1] || (this.styles[t + 1] = {}),
            e = this.styles[t][i - 1],
            u = {},
            r)
                u[0] = n(e),
                this.styles[t + 1] = u;
            else {
                for (f in this.styles[t])
                    parseInt(f, 10) >= i && (u[parseInt(f, 10) - i] = this.styles[t][f],
                    delete this.styles[t][f]);
                this.styles[t + 1] = u
            }
        },
        insertCharStyleObject: function(t, i, r) {
            var f = this.styles[t], e = n(f), o, u;
            i !== 0 || r || (i = 1);
            for (o in e)
                u = parseInt(o, 10),
                u >= i && (f[u + 1] = e[u]);
            this.styles[t][i] = r || n(f[i - 1])
        },
        insertStyleObjects: function(n, t, i) {
            if (!this.isEmptyStyles()) {
                var u = this.get2DCursorLocation()
                  , r = u.lineIndex
                  , f = u.charIndex;
                this.styles[r] || (this.styles[r] = {});
                n === "\n" ? this.insertNewlineStyleObject(r, f, t) : i ? this._insertStyles(i) : this.insertCharStyleObject(r, f)
            }
        },
        _insertStyles: function(n) {
            for (var t = 0, i = n.length; t < i; t++) {
                var r = this.get2DCursorLocation(this.selectionStart + t)
                  , u = r.lineIndex
                  , f = r.charIndex;
                this.insertCharStyleObject(u, f, n[t])
            }
        },
        shiftLineStyles: function(t, i) {
            var f = n(this.styles), u, r;
            for (u in this.styles)
                r = parseInt(u, 10),
                r > t && (this.styles[r + i] = f[r])
        },
        removeStyleObject: function(t, i) {
            var s = this.get2DCursorLocation(i), r = s.lineIndex, e = s.charIndex, u, h, o, c, f;
            if (t) {
                var l = this.text.split(this._reNewline)
                  , a = l[r - 1]
                  , v = a.length;
                this.styles[r - 1] || (this.styles[r - 1] = {});
                for (e in this.styles[r])
                    this.styles[r - 1][parseInt(e, 10) + v] = this.styles[r][e];
                this.shiftLineStyles(r, -1)
            } else {
                u = this.styles[r];
                u && (h = this.selectionStart === this.selectionEnd ? -1 : 0,
                delete u[e + h]);
                o = n(u);
                for (c in o)
                    f = parseInt(c, 10),
                    f >= e && f !== 0 && (u[f - 1] = o[f],
                    delete u[f])
            }
        },
        insertNewline: function() {
            this.insertChars("\n")
        }
    })
}();
fabric.util.object.extend(fabric.IText.prototype, {
    initDoubleClickSimulation: function() {
        this.__lastClickTime = +new Date;
        this.__lastLastClickTime = +new Date;
        this.lastPointer = {};
        this.on("mousedown", this.onMouseDown.bind(this))
    },
    onMouseDown: function(n) {
        this.__newClickTime = +new Date;
        var t = this.canvas.getPointer(n.e);
        this.isTripleClick(t) ? (this.fire("tripleclick", n),
        this._stopEvent(n.e)) : this.isDoubleClick(t) && (this.fire("dblclick", n),
        this._stopEvent(n.e));
        this.__lastLastClickTime = this.__lastClickTime;
        this.__lastClickTime = this.__newClickTime;
        this.__lastPointer = t
    },
    isDoubleClick: function(n) {
        return this.__newClickTime - this.__lastClickTime < 500 && this.__lastPointer.x === n.x && this.__lastPointer.y === n.y
    },
    isTripleClick: function(n) {
        return this.__newClickTime - this.__lastClickTime < 500 && this.__lastClickTime - this.__lastLastClickTime < 500 && this.__lastPointer.x === n.x && this.__lastPointer.y === n.y
    },
    _stopEvent: function(n) {
        n.preventDefault && n.preventDefault();
        n.stopPropagation && n.stopPropagation()
    },
    initCursorSelectionHandlers: function() {
        this.initSelectedHandler();
        this.initMousedownHandler();
        this.initMousemoveHandler();
        this.initMouseupHandler();
        this.initClicks()
    },
    initClicks: function() {
        this.on("dblclick", function(n) {
            this.selectWord(this.getSelectionStartFromPointer(n.e))
        });
        this.on("tripleclick", function(n) {
            this.selectLine(this.getSelectionStartFromPointer(n.e))
        })
    },
    initMousedownHandler: function() {
        this.on("mousedown", function(n) {
            var t = this.canvas.getPointer(n.e);
            this.__mousedownX = t.x;
            this.__mousedownY = t.y;
            this.__isMousedown = !0;
            this.hiddenTextarea && this.canvas && this.canvas.wrapperEl.appendChild(this.hiddenTextarea);
            this.isEditing ? (this.setCursorByClick(n.e),
            this.__selectionStartOnMouseDown = this.selectionStart) : this.exitEditingOnOthers()
        })
    },
    initMousemoveHandler: function() {
        this.on("mousemove", function(n) {
            if (this.__isMousedown && this.isEditing) {
                var t = this.getSelectionStartFromPointer(n.e);
                t >= this.__selectionStartOnMouseDown ? (this.setSelectionStart(this.__selectionStartOnMouseDown),
                this.setSelectionEnd(t)) : (this.setSelectionStart(t),
                this.setSelectionEnd(this.__selectionStartOnMouseDown))
            }
        })
    },
    _isObjectMoved: function(n) {
        var t = this.canvas.getPointer(n);
        return this.__mousedownX !== t.x || this.__mousedownY !== t.y
    },
    initMouseupHandler: function() {
        this.on("mouseup", function(n) {
            (this.__isMousedown = !1,
            this._isObjectMoved(n.e)) || this.selected && this.enterEditing()
        })
    },
    setCursorByClick: function(n) {
        var t = this.getSelectionStartFromPointer(n);
        n.shiftKey ? t < this.selectionStart ? (this.setSelectionEnd(this.selectionStart),
        this.setSelectionStart(t)) : this.setSelectionEnd(t) : (this.setSelectionStart(t),
        this.setSelectionEnd(t))
    },
    _getLocalRotatedPointer: function(n) {
        var t = this.canvas.getPointer(n)
          , i = new fabric.Point(t.x,t.y)
          , r = new fabric.Point(this.left,this.top)
          , u = fabric.util.rotatePoint(i, r, fabric.util.degreesToRadians(-this.angle));
        return this.getLocalPointer(n, u)
    },
    getSelectionStartFromPointer: function(n) {
        for (var c, l, r, f, a, e = this._getLocalRotatedPointer(n), i = this.text.split(this._reNewline), o = 0, u = 0, s = 0, h = 0, v, t = 0, y = i.length; t < y; t++)
            for (s += this._getHeightOfLine(this.ctx, t) * this.scaleY,
            c = this._getWidthOfLine(this.ctx, t, i),
            l = this._getLineLeftOffset(c),
            u = l,
            this.flipX && (i[t] = i[t].split("").reverse().join("")),
            r = 0,
            f = i[t].length; r < f; r++) {
                if (a = i[t][r],
                o = u,
                u += this._getWidthOfChar(this.ctx, a, t, this.flipX ? f - r : r) * this.scaleX,
                s <= e.y || u <= e.x) {
                    h++;
                    continue
                }
                return this._getNewSelectionStartFromOffset(e, o, u, h + t, f)
            }
        if (typeof v == "undefined")
            return this.text.length
    },
    _getNewSelectionStartFromOffset: function(n, t, i, r, u) {
        var e = n.x - t
          , o = i - n.x
          , s = o > e ? 0 : 1
          , f = r + s;
        return this.flipX && (f = u - f),
        f > this.text.length && (f = this.text.length),
        f
    }
});
fabric.util.object.extend(fabric.IText.prototype, {
    initKeyHandlers: function() {
        fabric.util.addListener(fabric.document, "keydown", this.onKeyDown.bind(this));
        fabric.util.addListener(fabric.document, "keypress", this.onKeyPress.bind(this))
    },
    initHiddenTextarea: function() {
        this.hiddenTextarea = fabric.document.createElement("textarea");
        this.hiddenTextarea.setAttribute("autocapitalize", "off");
        this.hiddenTextarea.style.cssText = "position: absolute; top: 0; left: -9999px";
        fabric.document.body.appendChild(this.hiddenTextarea)
    },
    _keysMap: {
        8: "removeChars",
        13: "insertNewline",
        37: "moveCursorLeft",
        38: "moveCursorUp",
        39: "moveCursorRight",
        40: "moveCursorDown",
        46: "forwardDelete"
    },
    _ctrlKeysMap: {
        65: "selectAll",
        67: "copy",
        86: "paste",
        88: "cut"
    },
    onKeyDown: function(n) {
        if (this.isEditing) {
            if (n.keyCode in this._keysMap)
                this[this._keysMap[n.keyCode]](n);
            else {
                if (!(n.keyCode in this._ctrlKeysMap && (n.ctrlKey || n.metaKey)))
                    return;
                this[this._ctrlKeysMap[n.keyCode]](n)
            }
            n.preventDefault();
            n.stopPropagation();
            this.canvas && this.canvas.renderAll()
        }
    },
    forwardDelete: function(n) {
        this.selectionStart === this.selectionEnd && this.moveCursorRight(n);
        this.removeChars(n)
    },
    copy: function() {
        var n = this.getSelectedText();
        this.copiedText = n;
        this.copiedStyles = this.getSelectionStyles(this.selectionStart, this.selectionEnd)
    },
    paste: function() {
        this.copiedText && this.insertChars(this.copiedText)
    },
    cut: function(n) {
        this.copy();
        this.removeChars(n)
    },
    onKeyPress: function(n) {
        !this.isEditing || n.metaKey || n.ctrlKey || n.keyCode === 8 || n.keyCode === 13 || (this.insertChars(String.fromCharCode(n.which)),
        n.preventDefault(),
        n.stopPropagation())
    },
    getDownCursorOffset: function(n, t) {
        var r = t ? this.selectionEnd : this.selectionStart, f = this.text.split(this._reNewline), o, s, h = this.text.slice(0, r), c = this.text.slice(r), l = h.slice(h.lastIndexOf("\n") + 1), w = c.match(/(.*)\n?/)[1], b = (c.match(/.*\n(.*)\n?/) || {})[1] || "", u = this.get2DCursorLocation(r), a, e, v, i, y, p;
        if (u.lineIndex === f.length - 1 || n.metaKey)
            return this.text.length - r;
        for (a = this._getWidthOfLine(this.ctx, u.lineIndex, f),
        s = this._getLineLeftOffset(a),
        e = s,
        v = u.lineIndex,
        i = 0,
        y = l.length; i < y; i++)
            o = l[i],
            e += this._getWidthOfChar(this.ctx, o, v, i);
        return p = this._getIndexOnNextLine(u, b, e, f),
        w.length + 1 + p
    },
    _getIndexOnNextLine: function(n, t, i, r) {
        for (var c, o, s = n.lineIndex + 1, l = this._getWidthOfLine(this.ctx, s, r), a = this._getLineLeftOffset(l), f = a, e = 0, h, u = 0, v = t.length; u < v; u++)
            if (c = t[u],
            o = this._getWidthOfChar(this.ctx, c, s, u),
            f += o,
            f > i) {
                h = !0;
                var y = f - o
                  , p = f
                  , w = Math.abs(y - i)
                  , b = Math.abs(p - i);
                e = b < w ? u + 1 : u;
                break
            }
        return h || (e = t.length),
        e
    },
    moveCursorDown: function(n) {
        this.abortCursorAnimation();
        this._currentCursorOpacity = 1;
        var t = this.getDownCursorOffset(n, this._selectionDirection === "right");
        n.shiftKey ? this.moveCursorDownWithShift(t) : this.moveCursorDownWithoutShift(t);
        this.initDelayedCursor()
    },
    moveCursorDownWithoutShift: function(n) {
        this._selectionDirection = "right";
        this.selectionStart += n;
        this.selectionStart > this.text.length && (this.selectionStart = this.text.length);
        this.selectionEnd = this.selectionStart
    },
    moveCursorDownWithShift: function(n) {
        if (this._selectionDirection === "left" && this.selectionStart !== this.selectionEnd) {
            this.selectionStart += n;
            this._selectionDirection = "left";
            return
        }
        this._selectionDirection = "right";
        this.selectionEnd += n;
        this.selectionEnd > this.text.length && (this.selectionEnd = this.text.length)
    },
    getUpCursorOffset: function(n, t) {
        var u = t ? this.selectionEnd : this.selectionStart, r = this.get2DCursorLocation(u), o, a, i, v, y;
        if (r.lineIndex === 0 || n.metaKey)
            return u;
        var f = this.text.slice(0, u), e = f.slice(f.lastIndexOf("\n") + 1), s = (f.match(/\n?(.*)\n.*$/) || {})[1] || "", h = this.text.split(this._reNewline), c, l, p = this._getWidthOfLine(this.ctx, r.lineIndex, h);
        for (l = this._getLineLeftOffset(p),
        o = l,
        a = r.lineIndex,
        i = 0,
        v = e.length; i < v; i++)
            c = e[i],
            o += this._getWidthOfChar(this.ctx, c, a, i);
        return y = this._getIndexOnPrevLine(r, s, o, h),
        s.length - y + e.length
    },
    _getIndexOnPrevLine: function(n, t, i, r) {
        for (var c, o, s = n.lineIndex - 1, l = this._getWidthOfLine(this.ctx, s, r), a = this._getLineLeftOffset(l), f = a, e = 0, h, u = 0, v = t.length; u < v; u++)
            if (c = t[u],
            o = this._getWidthOfChar(this.ctx, c, s, u),
            f += o,
            f > i) {
                h = !0;
                var y = f - o
                  , p = f
                  , w = Math.abs(y - i)
                  , b = Math.abs(p - i);
                e = b < w ? u : u - 1;
                break
            }
        return h || (e = t.length - 1),
        e
    },
    moveCursorUp: function(n) {
        this.abortCursorAnimation();
        this._currentCursorOpacity = 1;
        var t = this.getUpCursorOffset(n, this._selectionDirection === "right");
        n.shiftKey ? this.moveCursorUpWithShift(t) : this.moveCursorUpWithoutShift(t);
        this.initDelayedCursor()
    },
    moveCursorUpWithShift: function(n) {
        if (this.selectionStart === this.selectionEnd)
            this.selectionStart -= n;
        else {
            if (this._selectionDirection === "right") {
                this.selectionEnd -= n;
                this._selectionDirection = "right";
                return
            }
            this.selectionStart -= n
        }
        this.selectionStart < 0 && (this.selectionStart = 0);
        this._selectionDirection = "left"
    },
    moveCursorUpWithoutShift: function(n) {
        this.selectionStart === this.selectionEnd && (this.selectionStart -= n);
        this.selectionStart < 0 && (this.selectionStart = 0);
        this.selectionEnd = this.selectionStart;
        this._selectionDirection = "left"
    },
    moveCursorLeft: function(n) {
        (this.selectionStart !== 0 || this.selectionEnd !== 0) && (this.abortCursorAnimation(),
        this._currentCursorOpacity = 1,
        n.shiftKey ? this.moveCursorLeftWithShift(n) : this.moveCursorLeftWithoutShift(n),
        this.initDelayedCursor())
    },
    _move: function(n, t, i) {
        n.altKey ? this[t] = this["findWordBoundary" + i](this[t]) : n.metaKey ? this[t] = this["findLineBoundary" + i](this[t]) : this[t] += i === "Left" ? -1 : 1
    },
    _moveLeft: function(n, t) {
        this._move(n, t, "Left")
    },
    _moveRight: function(n, t) {
        this._move(n, t, "Right")
    },
    moveCursorLeftWithoutShift: function(n) {
        this._selectionDirection = "left";
        this.selectionEnd === this.selectionStart && this._moveLeft(n, "selectionStart");
        this.selectionEnd = this.selectionStart
    },
    moveCursorLeftWithShift: function(n) {
        this._selectionDirection === "right" && this.selectionStart !== this.selectionEnd ? this._moveLeft(n, "selectionEnd") : (this._selectionDirection = "left",
        this._moveLeft(n, "selectionStart"),
        this.text.charAt(this.selectionStart) === "\n" && this.selectionStart--,
        this.selectionStart < 0 && (this.selectionStart = 0))
    },
    moveCursorRight: function(n) {
        this.selectionStart >= this.text.length && this.selectionEnd >= this.text.length || (this.abortCursorAnimation(),
        this._currentCursorOpacity = 1,
        n.shiftKey ? this.moveCursorRightWithShift(n) : this.moveCursorRightWithoutShift(n),
        this.initDelayedCursor())
    },
    moveCursorRightWithShift: function(n) {
        this._selectionDirection === "left" && this.selectionStart !== this.selectionEnd ? this._moveRight(n, "selectionStart") : (this._selectionDirection = "right",
        this._moveRight(n, "selectionEnd"),
        this.text.charAt(this.selectionEnd - 1) === "\n" && this.selectionEnd++,
        this.selectionEnd > this.text.length && (this.selectionEnd = this.text.length))
    },
    moveCursorRightWithoutShift: function(n) {
        this._selectionDirection = "right";
        this.selectionStart === this.selectionEnd ? (this._moveRight(n, "selectionStart"),
        this.selectionEnd = this.selectionStart) : (this.selectionEnd += this.getNumNewLinesInSelectedText(),
        this.selectionEnd > this.text.length && (this.selectionEnd = this.text.length),
        this.selectionStart = this.selectionEnd)
    },
    removeChars: function(n) {
        this.selectionStart === this.selectionEnd ? this._removeCharsNearCursor(n) : this._removeCharsFromTo(this.selectionStart, this.selectionEnd);
        this.selectionEnd = this.selectionStart;
        this._removeExtraneousStyles();
        this.canvas && this.canvas.renderAll().renderAll();
        this.setCoords();
        this.fire("text:changed")
    },
    _removeCharsNearCursor: function(n) {
        var t, i, r;
        this.selectionStart !== 0 && (n.metaKey ? (t = this.findLineBoundaryLeft(this.selectionStart),
        this._removeCharsFromTo(t, this.selectionStart),
        this.selectionStart = t) : n.altKey ? (i = this.findWordBoundaryLeft(this.selectionStart),
        this._removeCharsFromTo(i, this.selectionStart),
        this.selectionStart = i) : (r = this.text.slice(this.selectionStart - 1, this.selectionStart) === "\n",
        this.removeStyleObject(r),
        this.selectionStart--,
        this.text = this.text.slice(0, this.selectionStart) + this.text.slice(this.selectionStart + 1)))
    }
});
fabric.util.object.extend(fabric.IText.prototype, {
    _setSVGTextLineText: function(n, t, i, r, u, f) {
        this.styles[t] ? this._setSVGTextLineChars(n, t, i, r, u, f) : this.callSuper("_setSVGTextLineText", n, t, i, r, u)
    },
    _setSVGTextLineChars: function(n, t, i, r, u, f) {
        for (var o, c, v = t === 0 || this.useNative ? "y" : "dy", s = n.split(""), h = 0, l = this._getSVGLineLeftOffset(t), a = this._getSVGLineTopOffset(t), y = this._getHeightOfLine(this.ctx, t), e = 0, p = s.length; e < p; e++)
            o = this.styles[t][e] || {},
            i.push(this._createTextCharSpan(s[e], o, l, a, v, h)),
            c = this._getWidthOfChar(this.ctx, s[e], t, e),
            o.textBackgroundColor && f.push(this._createTextCharBg(o, l, a, y, c, h)),
            h += c
    },
    _getSVGLineLeftOffset: function(n) {
        return this._boundaries && this._boundaries[n] ? fabric.util.toFixed(this._boundaries[n].left, 2) : 0
    },
    _getSVGLineTopOffset: function(n) {
        for (var i = 0, t = 0; t <= n; t++)
            i += this._getHeightOfLine(this.ctx, t);
        return i - this.height / 2
    },
    _createTextCharBg: function(n, t, i, r, u, f) {
        return ['<rect fill="', n.textBackgroundColor, '" transform="translate(', -this.width / 2, " ", -this.height + r, ")", '" x="', t + f, '" y="', i + r, '" width="', u, '" height="', r, '"><\/rect>'].join("")
    },
    _createTextCharSpan: function(n, t, i, r, u, f) {
        var e = this.getSvgStyles.call(fabric.util.object.extend({
            visible: !0,
            fill: this.fill,
            stroke: this.stroke,
            type: "text"
        }, t));
        return ['<tspan x="', i + f, '" ', u, '="', r, '" ', t.fontFamily ? 'font-family="' + t.fontFamily.replace(/"/g, "'") + '" ' : "", t.fontSize ? 'font-size="' + t.fontSize + '" ' : "", t.fontStyle ? 'font-style="' + t.fontStyle + '" ' : "", t.fontWeight ? 'font-weight="' + t.fontWeight + '" ' : "", t.textDecoration ? 'text-decoration="' + t.textDecoration + '" ' : "", 'style="', e, '">', fabric.util.string.escapeXml(n), "<\/tspan>"].join("")
    }
}),
function() {
    function n(n, t, i) {
        var r = e.parse(n), f, u;
        r.port || (r.port = r.protocol.indexOf("https:") === 0 ? 443 : 80);
        f = r.port === 443 ? s : o;
        u = f.request({
            hostname: r.hostname,
            port: r.port,
            path: r.path,
            method: "GET"
        }, function(n) {
            var r = "";
            t && n.setEncoding(t);
            n.on("end", function() {
                i(r)
            });
            n.on("data", function(t) {
                n.statusCode === 200 && (r += t)
            })
        });
        u.on("error", function(n) {
            n.errno === process.ECONNREFUSED ? fabric.log("ECONNREFUSED: connection refused to " + r.hostname + ":" + r.port) : fabric.log(n.message)
        });
        u.end()
    }
    function t(n, t) {
        var i = require("fs");
        i.readFile(n, function(n, i) {
            if (n)
                throw fabric.log(n),
                n;
            t(i)
        })
    }
    var r, u;
    if (typeof document == "undefined" || typeof window == "undefined") {
        var f = new require("xmldom").DOMParser
          , e = require("url")
          , o = require("http")
          , s = require("https")
          , i = require("canvas")
          , h = require("canvas").Image;
        fabric.util.loadImage = function(i, r, u) {
            var e = function(n) {
                f.src = new Buffer(n,"binary");
                f._src = i;
                r && r.call(u, f)
            }
              , f = new h;
            i && (i instanceof Buffer || i.indexOf("data") === 0) ? (f.src = f._src = i,
            r && r.call(u, f)) : i && i.indexOf("http") !== 0 ? t(i, e) : i ? n(i, "binary", e) : r && r.call(u, i)
        }
        ;
        fabric.loadSVGFromURL = function(i, r, u) {
            i = i.replace(/^\n\s*/, "").replace(/\?.*$/, "").trim();
            i.indexOf("http") !== 0 ? t(i, function(n) {
                fabric.loadSVGFromString(n, r, u)
            }) : n(i, "", function(n) {
                fabric.loadSVGFromString(n, r, u)
            })
        }
        ;
        fabric.loadSVGFromString = function(n, t, i) {
            var r = (new f).parseFromString(n);
            fabric.parseSVGDocument(r.documentElement, function(n, i) {
                t && t(n, i)
            }, i)
        }
        ;
        fabric.util.getScript = function(t, i) {
            n(t, "", function(n) {
                eval(n);
                i && i()
            })
        }
        ;
        fabric.Image.fromObject = function(n, t) {
            fabric.util.loadImage(n.src, function(i) {
                var r = new fabric.Image(i);
                r._initConfig(n);
                r._initFilters(n, function(n) {
                    r.filters = n || [];
                    t && t(r)
                })
            })
        }
        ;
        fabric.createCanvasForNode = function(n, t) {
            var u = fabric.document.createElement("canvas"), f = new i(n || 600,t || 600), e, r;
            return u.style = {},
            u.width = f.width,
            u.height = f.height,
            e = fabric.Canvas || fabric.StaticCanvas,
            r = new e(u),
            r.contextContainer = f.getContext("2d"),
            r.nodeCanvas = f,
            r.Font = i.Font,
            r
        }
        ;
        fabric.StaticCanvas.prototype.createPNGStream = function() {
            return this.nodeCanvas.createPNGStream()
        }
        ;
        fabric.StaticCanvas.prototype.createJPEGStream = function(n) {
            return this.nodeCanvas.createJPEGStream(n)
        }
        ;
        r = fabric.StaticCanvas.prototype.setWidth;
        fabric.StaticCanvas.prototype.setWidth = function(n) {
            return r.call(this, n),
            this.nodeCanvas.width = n,
            this
        }
        ;
        fabric.Canvas && (fabric.Canvas.prototype.setWidth = fabric.StaticCanvas.prototype.setWidth);
        u = fabric.StaticCanvas.prototype.setHeight;
        fabric.StaticCanvas.prototype.setHeight = function(n) {
            return u.call(this, n),
            this.nodeCanvas.height = n,
            this
        }
        ;
        fabric.Canvas && (fabric.Canvas.prototype.setHeight = fabric.StaticCanvas.prototype.setHeight)
    }
}(),
function(n) {
    n.notification = function(t) {
        function v(n) {
            var f = [[2, "One second", "1 second from now"], [60, "seconds", 1], [120, "One minute", "1 minute from now"], [3600, "minutes", 60], [7200, "One hour", "1 hour from now"], [86400, "hours", 3600], [172800, "One day", "tomorrow"], [604800, "days", 86400], [1209600, "One week", "next week"], [2419200, "weeks", 604800], [4838400, "One month", "next month"], [29030400, "months", 2419200], [58060800, "One year", "next year"], [290304e4, "years", 29030400], [580608e4, "One century", "next century"], [580608e5, "centuries", 290304e4]], i = (new Date - n) / 1e3, e = "ago", r = 1, u, t;
            for (i < 0 && (i = Math.abs(i),
            e = "from now",
            r = 1),
            u = 0; t = f[u++]; )
                if (i < t[0])
                    return typeof t[2] == "string" ? t[r] : Math.floor(i / t[2]) + " " + t[1];
            return n
        }
        var u, i, f, e, o, s, h, l, a, r, c;
        return t = n.extend({
            title: undefined,
            content: undefined,
            timeout: 0,
            img: undefined,
            border: !0,
            fill: !1,
            showTime: !1,
            click: undefined,
            icon: undefined,
            color: undefined,
            type: undefined,
            noHide: undefined
        }, t),
        u = n("#notifications"),
        u.length || (u = n("<div>", {
            id: "notifications"
        }).appendTo(n("#toastBox"))),
        i = n("<div>"),
        i.addClass("notification animated fadeInLeftMiddle fast"),
        i.attr("onclick", "$(this).remove();"),
        t.type != undefined && i.addClass(t.type),
        n("#notifications .notification").length > 0 ? i.addClass("more") : u.addClass("animated flipInX").delay(1e3).queue(function() {
            u.removeClass("animated flipInX");
            u.clearQueue()
        }),
        t.noHide == undefined && (f = n("<div>", {
            tap: function() {
                var t = n(this);
                t.parent().is(":last-child") ? (t.parent().remove(),
                n("#notifications .notification:last-child").removeClass("more")) : t.parent().fadeOut("fast", function() {
                    setTimeout(function() {
                        t.parent().remove()
                    }, 1e3)
                })
            }
        }),
        f.addClass("hide")),
        s = n("<div class='left'>"),
        o = n("<div class='right'>"),
        l = t.title != undefined ? "<h2>" + t.title + "<\/h2>" : "",
        a = t.content != undefined ? t.content : "",
        h = n("<div>", {
            html: l + a
        }),
        h.addClass("inner"),
        h.appendTo(o),
        t.img != undefined ? (e = n("<div>", {
            style: "background-image: url('" + t.img + "')"
        }),
        e.addClass("img"),
        e.appendTo(s),
        t.border == !1 && e.addClass("border"),
        t.fill == !0 && e.addClass("fill")) : (t.icon != undefined ? r = t.icon : (t.type == undefined ? r = "fa fa-info-circle" : t.type.indexOf("error") != -1 ? r = "fa fa-times" : t.type.indexOf("info") != -1 ? r = "fa fa-info-circle" : t.type.indexOf("success") != -1 ? r = "fa fa-check" : t.type.indexOf("warning") != -1 && (r = "fa fa-warning"),
        icon = n('<div class="">').html(r)),
        icon = t.title != undefined ? n("<div class=' " + r + "' style='font-size:35px; line-height:58px'>") : n("<div class=' " + r + "' style='font-size:35px;'>"),
        t.color != undefined && icon.css("color", t.color),
        icon.appendTo(s)),
        s.appendTo(i),
        o.appendTo(i),
        t.noHide == undefined && f.appendTo(i),
        t.showTime != !1 && (c = Number(new Date),
        timeHTML = n("<div>", {
            html: "<strong>" + v(c) + "<\/strong> ago"
        }),
        timeHTML.addClass("time").attr("title", c),
        timeHTML.appendTo(o),
        setInterval(function() {
            n(".time").each(function() {
                var t = n(this).attr("title");
                n(this).html("<strong>" + v(t) + "<\/strong> ago")
            })
        }, 4e3)),
        t.noHide == undefined && i.hover(function() {
            f.show()
        }, function() {
            f.hide()
        }),
        i.prependTo(u),
        i.show(),
        setTimeout(function() {
            i.removeClass("animated fast fadeInLeftMiddle")
        }, 1e3),
        t.timeout && setTimeout(function() {
            var t = i.prev();
            t.hasClass("more") && (t.is(":first-child") || i.is(":last-child")) && t.removeClass("more");
            i.slideUp(250, function() {
                setTimeout(function() {
                    n(this).remove()
                }, 250)
            })
        }, t.timeout),
        t.click != undefined && (i.addClass("click"),
        i.bind("tap", function(i) {
            var r = n(i.target);
            r.is(".hide") || t.click.call(this)
        })),
        this
    }
}(jQuery);
!function(n) {
    "use strict";
    function dt() {}
    function d(n) {
        return !!n && ("object" == typeof Element ? n instanceof Element : n && "object" == typeof n && null !== n && 1 === n.nodeType && "string" == typeof n.nodeName)
    }
    function hi(n, t) {
        gt(t, pi);
        n.pageX = pi.x;
        n.pageY = pi.y;
        pr(t, pi);
        n.clientX = pi.x;
        n.clientY = pi.y;
        n.timeStamp = (new Date).getTime()
    }
    function su(n, t, i) {
        n.pageX = i.pageX - t.pageX;
        n.pageY = i.pageY - t.pageY;
        n.clientX = i.clientX - t.clientX;
        n.clientY = i.clientY - t.clientY;
        n.timeStamp = (new Date).getTime() - t.timeStamp;
        var r = Math.max(n.timeStamp / 1e3, .001);
        n.pageSpeed = ri(n.pageX, n.pageY) / r;
        n.pageVX = n.pageX / r;
        n.pageVY = n.pageY / r;
        n.clientSpeed = ri(n.clientX, n.pageY) / r;
        n.clientVX = n.clientX / r;
        n.clientVY = n.clientY / r
    }
    function ir(n, t, i) {
        var r, u, f;
        return i = i || {},
        n = n || "page",
        /touch/.test(t.type) && t.touches ? (r = t.touches.length ? t.touches[0] : t.changedTouches[0],
        u = r[n + "X"],
        f = r[n + "Y"]) : (u = t[n + "X"],
        f = t[n + "Y"]),
        i.x = u,
        i.y = f,
        i
    }
    function gt(t, r) {
        return r = r || {},
        t instanceof c ? /inertiastart/.test(t.type) ? (gt(i.pointerUp, r),
        r.x += i.sx,
        r.y += i.sy) : (r.x = t.pageX,
        r.y = t.pageY) : ff ? (ir("screen", t, r),
        r.x += n.scrollX,
        r.y += n.scrollY) : /gesture|inertia/i.test(t.type) ? (ir("client", t, r),
        r.x += s.documentElement.scrollLeft,
        r.y += s.documentElement.scrollTop) : ir("page", t, r),
        r
    }
    function pr(n, t) {
        return t = t || {},
        n instanceof c ? /inertiastart/.test(n.type) ? (pr(i.pointerUp, t),
        t.x += i.sx,
        t.y += i.sy) : (t.x = n.clientX,
        t.y = n.clientY) : ir(ff ? "screen" : "client", n, t),
        t
    }
    function ef() {
        return {
            x: n.scrollX || s.documentElement.scrollLeft,
            y: n.scrollY || s.documentElement.scrollTop
        }
    }
    function ki(n) {
        var i = /ipad|iphone|ipod/i.test(navigator.userAgent) ? {
            x: 0,
            y: 0
        } : ef()
          , t = n instanceof eu ? n.getBoundingClientRect() : n.getClientRects()[0];
        return t && {
            left: t.left + i.x,
            right: t.right + i.x,
            top: t.top + i.y,
            bottom: t.bottom + i.y,
            width: t.width || t.right - t.left,
            height: t.heigh || t.bottom - t.top
        }
    }
    function rr(n) {
        var t = [];
        return n instanceof Array ? (t[0] = n[0],
        t[1] = n[1]) : w ? (t[0] = ft[0],
        t[1] = ft[1]) : (t[0] = n.touches[0],
        t[1] = "touchend" === n.type && 1 === n.touches.length ? n.changedTouches[0] : n.touches[1]),
        t
    }
    function hu(n) {
        var t = rr(n);
        return {
            pageX: (t[0].pageX + t[1].pageX) / 2,
            pageY: (t[0].pageY + t[1].pageY) / 2,
            clientX: (t[0].clientX + t[1].clientX) / 2,
            clientY: (t[0].clientY + t[1].clientY) / 2
        }
    }
    function wr(n) {
        if (n.touches && n.touches.length || w && ft.length) {
            var t = rr(n)
              , i = Math.min(t[0].pageX, t[1].pageX)
              , r = Math.min(t[0].pageY, t[1].pageY)
              , u = Math.max(t[0].pageX, t[1].pageX)
              , f = Math.max(t[0].pageY, t[1].pageY);
            return {
                x: i,
                y: r,
                left: i,
                top: r,
                width: u - i,
                height: f - r
            }
        }
    }
    function br(n) {
        var r = (t && t.options || o).deltaSource
          , u = r + "X"
          , f = r + "Y"
          , i = rr(n)
          , e = i[0][u] - i[1][u]
          , s = i[0][f] - i[1][f];
        return ri(e, s)
    }
    function kr(n, i) {
        var e = (t && t.options || o).deltaSource, s = e + "X", h = e + "Y", f = rr(n), l = f[0][s] - f[1][s], a = f[0][h] - f[1][h], r = 180 * Math.atan(a / l) / Math.PI, c, u;
        return "number" == typeof i && (c = r - i,
        u = c % 360,
        u > 315 ? r -= 360 + r / 360 | 0 : u > 135 ? r -= 180 + r / 360 | 0 : -315 > u ? r += 360 + r / 360 | 0 : -135 > u && (r += 180 + r / 360 | 0)),
        r
    }
    function ur(n, i) {
        n = n || t;
        var r = n ? n.options.origin : o.origin;
        return i = i || n._element,
        "parent" === r ? r = i.parentNode : "self" === r && (r = i),
        d(r) ? (r = ki(r),
        r.x = r.left,
        r.y = r.top) : "function" == typeof r && (r = r(n && i)),
        r
    }
    function cu(n) {
        for (var t = 0, i = n.length; i > t; t++)
            n[t].rect = n[t].getRect()
    }
    function lu() {
        var u = i.target.options.inertia, f = u.resistance, r = (new Date).getTime() / 1e3 - i.t0, n, t;
        r < i.te ? (n = 1 - (Math.exp(-f * r) - i.lambda_v0) / i.one_ve_v0,
        i.modifiedXe === i.xe && i.modifiedYe === i.ye ? (i.sx = i.xe * n,
        i.sy = i.ye * n) : (t = of(0, 0, i.xe, i.ye, i.modifiedXe, i.modifiedYe, n),
        i.sx = t.x,
        i.sy = t.y),
        ti(i.startEvent),
        i.i = si(lu)) : (i.sx = i.modifiedXe,
        i.sy = i.modifiedYe,
        i.active = !1,
        ti(i.startEvent),
        it(i.startEvent))
    }
    function au(n, t, i, r) {
        var u = 1 - n;
        return u * u * t + 2 * u * n * i + n * n * r
    }
    function of(n, t, i, r, u, f, e) {
        return {
            x: au(e, n, i, u),
            y: au(e, t, r, f)
        }
    }
    function dr(n, t) {
        for (; t = t.parentNode; )
            if (t === n)
                return !0;
        return !1
    }
    function gr(n, t) {
        return n._context === s || dr(n._context, t)
    }
    function ni(n, t) {
        var i = n.options.ignoreFrom;
        return t && d(t) ? "string" == typeof i ? t[ut](i) || ni(n, t.parentNode) : d(i) ? t === i || dr(i, t) : !1 : !1
    }
    function vu(n) {
        var c;
        if (n.length) {
            for (var r, t, u, i, f = n[0], o = [], e = [], h = 1; h < n.length; h++) {
                if (r = n[h],
                !o.length)
                    for (t = f; t.parentNode !== s; )
                        o.unshift(t),
                        t = t.parentNode;
                if (f instanceof lf && r instanceof eu && !(r instanceof cf)) {
                    if (r === f.parentNode)
                        continue;
                    t = r.ownerSVGElement
                } else
                    t = r;
                for (e = []; t.parentNode !== s; )
                    e.unshift(t),
                    t = t.parentNode;
                for (i = 0; e[i] && e[i] === o[i]; )
                    i++;
                for (c = [e[i - 1], e[i], o[i]],
                u = c[0].lastChild; u; ) {
                    if (u === c[1]) {
                        f = r;
                        o = [];
                        break
                    }
                    if (u === c[2])
                        break;
                    u = u.previousSibling
                }
            }
            return {
                element: f,
                index: n.indexOf(f)
            }
        }
    }
    function yu(n, i) {
        var f;
        if (et.length || ot.length) {
            var e, o, u, a = [], h = [], c = [], s = [];
            for (i = i || t._element,
            e = 0; e < et.length; e++) {
                if (f = et[e],
                d(f.options.accept)) {
                    if (f.options.accept !== i)
                        continue
                } else if ("string" == typeof f.options.accept && !i[ut](f.options.accept))
                    continue;
                i !== f._element && f.dropCheck(n, t, i) && (a.push(f),
                h.push(f._element))
            }
            if (o = vu(h),
            u = o ? a[o.index] : null,
            ot.length) {
                for (e = 0; e < ot.length; e++)
                    for (var r = ot[e], y = r._context, v = y.querySelectorAll(r.selector), l = 0, p = v.length; p > l; l++) {
                        if (r._element = v[l],
                        r.rect = r.getRect(),
                        d(r.options.accept)) {
                            if (r.options.accept !== i)
                                continue
                        } else if ("string" == typeof r.options.accept && !i[ut](r.options.accept))
                            continue;
                        r._element !== i && -1 === h.indexOf(r._element) && s.indexOf(-1 === r._element) && r.dropCheck(n, t) && (c.push(r),
                        s.push(r._element))
                    }
                s.length && (u && (c.push(u),
                s.push(u._element)),
                o = vu(s),
                o && (u = c[o.index],
                u.selector && (u._element = s[o.index])))
            }
            return u ? {
                dropzone: u,
                element: u._element
            } : null
        }
    }
    function c(n, r, u, e, s) {
        var l, a, y = (t && t.options || o).deltaSource, tt = y + "X", it = y + "Y", d = t ? t.options : o, v = ur(t, e), k, p, b, g;
        (e = e || t._element,
        "gesture" === r) ? (k = hu(n),
        a = {
            x: k.pageX - v.x,
            y: k.pageY - v.y
        },
        l = {
            x: k.clientX - v.x,
            y: k.clientY - v.y
        }) : (a = gt(n),
        l = pr(n),
        a.x -= v.x,
        a.y -= v.y,
        l.x -= v.x,
        l.y -= v.y,
        d.snapEnabled && -1 !== d.snap.actions.indexOf(r) && (this.snap = {
            range: h.range,
            locked: h.locked,
            x: h.x,
            y: h.y,
            realX: h.realX,
            realY: h.realY,
            dx: h.dx,
            dy: h.dy
        },
        h.locked && (a.x += h.dx,
        a.y += h.dy,
        l.x += h.dx,
        l.y += h.dy)));
        (t.options.restrict[r] && yt.restricted && (a.x += yt.dx,
        a.y += yt.dy,
        l.x += yt.dx,
        l.y += yt.dy,
        this.restrict = {
            dx: yt.dx,
            dy: yt.dy
        }),
        this.pageX = a.x,
        this.pageY = a.y,
        this.clientX = l.x,
        this.clientY = l.y,
        "start" !== u || n instanceof c || hi(rt, this),
        this.x0 = rt.pageX,
        this.y0 = rt.pageY,
        this.clientX0 = rt.clientX,
        this.clientY0 = rt.clientY,
        this.ctrlKey = n.ctrlKey,
        this.altKey = n.altKey,
        this.shiftKey = n.shiftKey,
        this.metaKey = n.metaKey,
        this.button = n.button,
        this.target = e,
        this.t0 = ui,
        this.type = r + (u || ""),
        i.active && (this.detail = "inertia"),
        s && (this.relatedTarget = s),
        f && "inertia" === f.detail && !i.active && d.inertia.zeroResumeDelta ? this.dx = this.dy = 0 : "end" === u || "drop" === r ? "client" === y ? (this.dx = l.x - rt.clientX,
        this.dy = l.y - rt.clientY) : (this.dx = a.x - rt.pageX,
        this.dy = a.y - rt.pageY) : "inertiastart" === u ? (this.dx = f.dx,
        this.dy = f.dy) : "client" === y ? (this.dx = l.x - f.clientX,
        this.dy = l.y - f.clientY) : (this.dx = a.x - f.pageX,
        this.dy = a.y - f.pageY),
        "resize" === r ? d.squareResize || n.shiftKey ? ("y" === kt ? this.dx = this.dy : this.dy = this.dx,
        this.axes = "xy") : (this.axes = kt,
        "x" === kt ? this.dy = 0 : "y" === kt && (this.dx = 0)) : "gesture" === r && (this.touches = w ? [ft[0], ft[1]] : n.touches,
        "start" === u ? (this.distance = br(n),
        this.box = wr(n),
        this.scale = 1,
        this.ds = 0,
        this.angle = kr(n),
        this.da = 0) : "end" === u || n instanceof c ? (this.distance = f.distance,
        this.box = f.box,
        this.scale = f.scale,
        this.ds = this.scale - 1,
        this.angle = f.angle,
        this.da = this.angle - nt.startAngle) : (this.distance = br(n),
        this.box = wr(n),
        this.scale = this.distance / nt.startDistance,
        this.angle = kr(n, nt.prevAngle),
        this.ds = this.scale - nt.prevScale,
        this.da = this.angle - nt.prevAngle)),
        "start" === u) ? (this.timeStamp = ui,
        this.dt = 0,
        this.duration = 0,
        this.speed = 0,
        this.velocityX = 0,
        this.velocityY = 0) : "inertiastart" === u ? (this.timeStamp = (new Date).getTime(),
        this.dt = f.dt,
        this.duration = f.duration,
        this.speed = f.speed,
        this.velocityX = f.velocityX,
        this.velocityY = f.velocityY) : (this.timeStamp = (new Date).getTime(),
        this.dt = this.timeStamp - f.timeStamp,
        this.duration = this.timeStamp - ui,
        "end" === u || n instanceof c ? (g = Math.max(("end" === u ? this.duration : this.dt) / 1e3, .001),
        p = this[tt] - f[tt],
        b = this[it] - f[it],
        this.snap && this.snap.locked && (p -= this.snap.dx,
        b -= this.snap.dy),
        this.restrict && (p -= this.restrict.dx,
        b -= this.restrict.dy),
        f.snap && f.snap.locked && (p -= f[tt] - f.snap.dx,
        b -= f[it] - f.snap.dy),
        f.restrict && (p += f.restrict.dx,
        b += f.restrict.dy),
        this.speed = ri(p, b) / g,
        this.velocityX = p / g,
        this.velocityY = b / g) : (this.speed = wt[y + "Speed"],
        this.velocityX = wt[y + "VX"],
        this.velocityY = wt[y + "VY"]))
    }
    function pu() {
        this.originalEvent.preventDefault()
    }
    function sf(n, t, i) {
        var e, u, r = {}, s, h, o, f;
        for (e in n)
            r[e] = n[e];
        for (r.preventDefault = pu,
        r.stopPropagation = c.prototype.stopPropagation,
        r.stopImmediatePropagation = c.prototype.stopImmediatePropagation,
        r.timeStamp = (new Date).getTime(),
        r.originalEvent = n,
        r.dt = r.timeStamp - ui,
        r.type = "tap",
        s = r.timeStamp - rf,
        h = gi && "doubletap" !== gi.type && gi.target === r.target && 500 > s,
        rf = r.timeStamp,
        u = 0; u < t.length; u++)
            if (o = ur(t[u], i[u]),
            r.pageX -= o.x,
            r.pageY -= o.y,
            r.clientX -= o.x,
            r.clientY -= o.y,
            r.currentTarget = i[u],
            t[u].fire(r),
            r.immediatePropagationStopped || r.propagationStopped && t[u + 1] !== r.currentTarget)
                break;
        if (h) {
            f = {};
            for (e in r)
                f[e] = r[e];
            for (f.dt = s,
            f.type = "doubletap",
            u = 0; u < t.length && (f.currentTarget = i[u],
            t[u].fire(f),
            !(f.immediatePropagationStopped || f.propagationStopped && t[u + 1] !== f.currentTarget)); u++)
                ;
            gi = f
        } else
            gi = r
    }
    function nu(n) {
        function e(n, r, e) {
            var o = Element.prototype[ut] === fu ? e.querySelectorAll(r) : void 0;
            t !== s && gr(n, t) && !ni(n, f) && t[ut](r, o) && (i.push(n),
            u.push(t))
        }
        if (!v || !ei && n instanceof v.constructor && v.target === n.target) {
            for (var i = [], u = [], f = n.target instanceof cr ? n.target.correspondingUseElement : n.target, t = f; t; )
                r.isSet(t) && (i.push(r(t)),
                u.push(t)),
                g.forEachSelector(e),
                t = t.parentNode;
            i.length && sf(n, i, u)
        }
    }
    function wu(n) {
        var u, f, i = this.getRect(), r = null, e = gt(n), t = this.options;
        return i ? (lt.resize && t.resizable && (u = "y" !== t.resizeAxis && e.x > i.right - vr,
        f = "x" !== t.resizeAxis && e.y > i.bottom - vr),
        kt = (u ? "x" : "") + (f ? "y" : ""),
        r = kt ? "resize" + kt : lt.drag && t.draggable ? "drag" : null,
        lt.gesture && (n.touches && n.touches.length >= 2 || w && k.length >= 2) && !a && !y && (r = "gesture"),
        r) : null
    }
    function ci(n, i) {
        if ("string" != typeof n)
            return null;
        i = i || t;
        var u = -1 !== n.indexOf("resize") ? "resize" : n
          , r = (i || t).options;
        return ("resize" === u && r.resizable || "drag" === n && r.draggable || "gesture" === n && r.gesturable) && lt[u] ? (("resize" === n || "resizeyx" === n) && (n = "resizexy"),
        n) : null
    }
    function tu(n) {
        function e(n, t, i) {
            var u = Element.prototype[ut] === fu ? i.querySelectorAll(t) : void 0;
            gr(n, r) && !ni(n, f) && r[ut](t, u) && (n._element = r,
            tt.push(n))
        }
        if (b && v && n.type !== v.type)
            return void (/^input$|^textarea$/i.test(t._element.nodeName) || n.preventDefault());
        if (!(v && "mousedown" === n.type && "touchstart" === v.type && n.timeStamp - v.timeStamp < 300)) {
            var u, f = n.target instanceof cr ? n.target.correspondingUseElement : n.target, r = f;
            if (w && ai(n),
            i.active && t.selector)
                for (; r && r !== s; ) {
                    if (r === i.targetElement && ci(t.getAction(n)) === b)
                        return pt(i.i),
                        i.active = !1,
                        void (w && ai(n, ar));
                    r = r.parentNode
                }
            if (!(a || y || p)) {
                if (tt.length && /mousedown|pointerdown/i.test(n.type))
                    u = or(n, tt);
                else
                    for (; r && r !== s && !u; )
                        tt = [],
                        g.forEachSelector(e),
                        u = or(n, tt),
                        r = r.parentNode;
                return u ? (st = !0,
                b = u,
                li(n, u)) : (ui = (new Date).getTime(),
                v = n,
                hi(vi, n),
                ei = !1,
                void 0)
            }
        }
    }
    function li(n, r) {
        var f, e, u;
        if (!r && st && v && n.type !== v.type)
            return void (/^input$|^textarea$/i.test(t._element.nodeName) || n.preventDefault());
        if ((st = !0,
        w && ai(n),
        (!(n.touches && n.touches.length < 2 || k && k.length < 2) || t) && b) || (f = g.get(n.currentTarget),
        ni(f, n.target) || (t = f)),
        e = t && t.options,
        !t || a || y || p)
            i.active && n.currentTarget === i.targetElement && t === i.target && ci(t.getAction(n)) === b && (pt(i.i),
            i.active = !1,
            w && (t._gesture.target || (t._gesture.target = t._element),
            ai(n, t._gesture)));
        else {
            if (u = ci(r || t.getAction(n)),
            hi(rt, n),
            w && n instanceof w && (t._gesture.target || (t._gesture.target = t._element),
            ai(n, t._gesture)),
            !u)
                return n;
            ei = !1;
            e.styleCursor && (s.documentElement.style.cursor = wi[u].cursor);
            kt = "resizexy" === u ? "xy" : "resizex" === u ? "x" : "resizey" === u ? "y" : "";
            "gesture" === u && (n.touches && n.touches.length < 2 || w && k.length < 2) && (u = null);
            b = u;
            h.x = null;
            h.y = null;
            ui = (new Date).getTime();
            v = n;
            hi(vi, n);
            ei = !1;
            /^input$|^textarea$/i.test(t._element.nodeName) || n.preventDefault()
        }
    }
    function di(n, i) {
        var f, r, s, o, b, a, v, c, l, w, u = t.options.snap, p = u.anchors, k, e, y;
        if ((i = i || h,
        i.useStatusXY) ? f = {
            x: i.x,
            y: i.y
        } : (k = ur(t),
        f = gt(n),
        f.x -= k.x,
        f.y -= k.y),
        i.realX = f.x,
        i.realY = f.y,
        u.range < 0 && (u.range = 1 / 0),
        "path" === u.mode)
            for (p = [],
            l = 0,
            w = u.paths.length; w > l; l++)
                e = u.paths[l],
                "function" == typeof e && (e = e(f.x, f.y)),
                p.push({
                    x: "number" == typeof e.x ? e.x : f.x,
                    y: "number" == typeof e.y ? e.y : f.y,
                    range: "number" == typeof e.range ? e.range : u.range
                });
        if (("anchor" === u.mode || "path" === u.mode) && p.length) {
            for (r = {
                anchor: null,
                distance: 0,
                range: 0,
                dx: 0,
                dy: 0
            },
            l = 0,
            w = p.length; w > l; l++)
                y = p[l],
                s = "number" == typeof y.range ? y.range : u.range,
                a = y.x - f.x,
                v = y.y - f.y,
                c = ri(a, v),
                o = s > c,
                1 / 0 === s && r.inRange && 1 / 0 !== r.range && (o = !1),
                (!r.anchor || (o ? r.inRange && 1 / 0 !== s ? c / s < r.distance / r.range : c < r.distance : !r.inRange && c < r.distance)) && (1 / 0 === s && (o = !0),
                r.anchor = y,
                r.distance = c,
                r.range = s,
                r.inRange = o,
                r.dx = a,
                r.dy = v,
                i.range = s);
            o = r.inRange;
            b = r.anchor.x !== i.x || r.anchor.y !== i.y;
            i.x = r.anchor.x;
            i.y = r.anchor.y;
            i.dx = r.dx;
            i.dy = r.dy
        } else if ("grid" === u.mode) {
            var nt = Math.round((f.x - u.gridOffset.x) / u.grid.x)
              , tt = Math.round((f.y - u.gridOffset.y) / u.grid.y)
              , d = nt * u.grid.x + u.gridOffset.x
              , g = tt * u.grid.y + u.gridOffset.y;
            a = d - f.x;
            v = g - f.y;
            c = ri(a, v);
            o = c < u.range;
            b = d !== i.x || g !== i.y;
            i.x = d;
            i.y = g;
            i.dx = a;
            i.dy = v;
            i.range = u.range
        }
        return i.changed = b || o && !i.locked,
        i.locked = o,
        i
    }
    function iu(n, i) {
        var f, o = r.currentAction() || b, u = t && t.options.restrict[o], e;
        return (i = i || yt,
        f = f = i.useStatusXY ? {
            x: i.x,
            y: i.y
        } : gt(n),
        i.snap && i.snap.locked && (f.x += i.snap.dx || 0,
        f.y += i.snap.dy || 0),
        i.dx = 0,
        i.dy = 0,
        i.restricted = !1,
        !o || !u) ? i : ("parent" === u ? u = t._element.parentNode : "self" === u && (u = t._element),
        d(u) ? e = ki(u) : ("function" == typeof u && (u = u(f.x, f.y, t._element)),
        e = u,
        "x"in u && "y"in u && (e = {
            left: u.x,
            top: u.y,
            right: u.x + u.width,
            bottom: u.y + u.height
        })),
        i.dx = Math.max(Math.min(e.right, f.x), e.left) - f.x,
        i.dy = Math.max(Math.min(e.bottom, f.y), e.top) - f.y,
        i.restricted = !0,
        i)
    }
    function ti(n, r) {
        var o, s;
        if (st && ((n instanceof c || hi(yi, n),
        ei) || (o = yi.clientX - rt.clientX,
        s = yi.clientY - rt.clientY,
        ei = ri(o, s) > 1),
        b && ("mousemove" !== n.type || "touchstart" !== v.type))) {
            if (ei && (!i.active || n instanceof c && /inertiastart/.test(n.type)) && (a || y || p || su(wt, vi, yi),
            b && t)) {
                var u = t.options.restrictEnabled && (!t.options.restrict.endOnly || r)
                  , l = !(a || y || p)
                  , w = l ? v : n;
                l && (f = v);
                u || (yt.restricted = !1);
                !t.options.snapEnabled || -1 === t.options.snap.actions.indexOf(b) || t.options.snap.endOnly && !r ? (u && iu(n),
                wi[b].moveListener(n)) : (di(w),
                (h.changed || !h.locked || u) && (u && iu(n),
                wi[b].moveListener(n)))
            }
            n instanceof c || (su(wt, vi, yi),
            hi(vi, n));
            (a || y) && e.edgeMove(n)
        }
    }
    function ai(n, t) {
        if (!k.length || ft[0].pointerType === n.pointerType) {
            t && t.addPointer(n.pointerId);
            var i = k.indexOf(n.pointerId);
            -1 === i ? (k.push(n.pointerId),
            ft[k.length - 1] = n) : ft[i] = n
        }
    }
    function bu(n) {
        var t = k.indexOf(n.pointerId);
        -1 !== t && k.splice(t, 1)
    }
    function fr(n) {
        var i = k.indexOf(n.pointerId);
        -1 !== i && (/move/i.test(n.type) ? ft[i] = n : /up|cancel/i.test(n.type) && (bu(n),
        p && k.length < 2 && t._gesture.stop()))
    }
    function ku(n) {
        var i, h, l, r, y, e, o, p, u, s;
        if (n.preventDefault(),
        !a) {
            if (i = new c(v,"drag","start"),
            a = !0,
            t.fire(i),
            !oi)
                for (cu(et),
                e = 0; e < ot.length; e++)
                    o = ot[e],
                    p = o._context,
                    o._elements = p.querySelectorAll(o.selector);
            f = i;
            t.options.snapEnabled && !t.options.snap.endOnly && di(n)
        }
        i = new c(n,"drag","move");
        u = t._element;
        s = yu(i, u);
        s ? (r = s.dropzone,
        ct = s.element) : r = ct = null;
        t._element = u;
        ct !== fi && (bt && (l = new c(n,"drag","leave",fi,u),
        i.dragLeave = fi,
        y = bt,
        bt = fi = null),
        r && (h = new c(n,"drag","enter",ct,u),
        i.dragEnter = r._element,
        bt = r,
        fi = bt._element));
        t.fire(i);
        l && y.fire(l);
        h && r.fire(h);
        f = i
    }
    function er(n) {
        n.preventDefault();
        var i;
        y || (i = new c(v,"resize","start"),
        t.fire(i),
        t.fire(i),
        y = !0,
        f = i,
        t.options.snapEnabled && !t.options.snap.endOnly && di(n));
        i = new c(n,"resize","move");
        t.fire(i);
        f = i
    }
    function du(n) {
        if (n.touches && !(n.touches.length < 2) || w) {
            n.preventDefault();
            var i;
            p || (i = new c(v,"gesture","start"),
            i.ds = 0,
            nt.startDistance = nt.prevDistance = i.distance,
            nt.startAngle = nt.prevAngle = i.angle,
            nt.scale = 1,
            p = !0,
            t.fire(i),
            f = i,
            t.options.snapEnabled && !t.options.snap.endOnly && di(n));
            i = new c(n,"gesture","move");
            i.ds = i.scale - nt.scale;
            t.fire(i);
            f = i;
            nt.prevAngle = i.angle;
            nt.prevDistance = i.distance;
            1 / 0 === i.scale || null === i.scale || void 0 === i.scale || isNaN(i.scale) || (nt.scale = i.scale)
        }
    }
    function or(n, i) {
        for (var r, f, u = 0, e = i.length; e > u; u++)
            if (r = i[u],
            f = ci(r.getAction(n, r), r),
            f)
                return t = r,
                f
    }
    function gu(n) {
        function c(n, t) {
            n && gr(n, i) && !ni(n, i) && i[ut](t) && (n._element = i,
            e.push(n))
        }
        var r, s, h, f;
        if (!(st || a || y || p)) {
            var e = []
              , o = t && t._element
              , i = n.target instanceof cr ? n.target.correspondingUseElement : n.target;
            if (t && ni(t, i) && (t = null,
            tt = []),
            r = g.get(i),
            s = r && !ni(r, i) && ci(r.getAction(n), r),
            s)
                t = r,
                tt = [];
            else if (g.forEachSelector(c),
            or(n, e))
                tt = e,
                vt(n, tt),
                u.addToElement(i, "mousemove", vt);
            else if (t)
                if (h = o.querySelectorAll("*"),
                -1 !== Array.prototype.indexOf.call(h, i)) {
                    for (f = 0; f < tt.length; f++)
                        tt[f]._element = o;
                    vt(n, tt);
                    u.addToElement(t._element, "mousemove", vt)
                } else
                    t = null,
                    tt = []
        }
    }
    function nf(n) {
        if (!(st || a || y || p)) {
            var i = n.target instanceof cr ? n.target.correspondingUseElement : n.target;
            g.get(i) || u.removeFromElement(i, vt);
            !t || !t.options.styleCursor || a || y || p || (s.documentElement.style.cursor = "")
        }
    }
    function vt(n, i) {
        if (st || a || y || p)
            b && n.preventDefault();
        else {
            var r;
            i ? r = or(n, i) : t && (r = ci(t.getAction(n)));
            t && t.options.styleCursor && (s.documentElement.style.cursor = r ? wi[r].cursor : "")
        }
    }
    function it(n) {
        var o, ft, s, g, l, e, k, nt, d, tt, it, rt, et, ot, h, ut, ht;
        if ((n instanceof c || w || !st || !v || n instanceof v.constructor) && !(n.touches && n.touches.length >= 2)) {
            if (tf && n instanceof tf && /inertiastart/i.test(n.type))
                return void n.gestureObject.stop();
            if (s = t && t.options.inertia,
            a || y || p) {
                if (i.active)
                    return;
                if (g = t.options.deltaSource,
                l = wt[g + "Speed"],
                t.options.inertiaEnabled && "gesture" !== b && -1 !== s.actions.indexOf(b) && n !== i.startEvent && (new Date).getTime() - yi.timeStamp < 50 && l > s.minSpeed && l > s.endSpeed) {
                    if (k = s.resistance,
                    nt = -Math.log(s.endSpeed / l) / k,
                    i.active = !0,
                    i.target = t,
                    i.targetElement = t._element,
                    u.useAttachEvent)
                        for (ft in n)
                            i.pointerUp[ft] = n[ft];
                    else
                        i.pointerUp = n;
                    return i.startEvent = e = new c(n,"drag","inertiastart"),
                    i.vx0 = wt[g + "VX"],
                    i.vy0 = wt[g + "VY"],
                    i.v0 = l,
                    i.x0 = f.pageX,
                    i.y0 = f.pageY,
                    i.t0 = i.startEvent.timeStamp / 1e3,
                    i.sx = i.sy = 0,
                    i.modifiedXe = i.xe = (i.vx0 - nt) / k,
                    i.modifiedYe = i.ye = (i.vy0 - nt) / k,
                    i.te = nt,
                    i.lambda_v0 = k / i.v0,
                    i.one_ve_v0 = 1 - s.endSpeed / i.v0,
                    tt = e.pageX,
                    it = e.pageY,
                    (e.snap && e.snap.locked && (tt -= e.snap.dx,
                    it -= e.snap.dy),
                    e.restrict && (tt -= e.restrict.dx,
                    it -= e.restrict.dy),
                    d = {
                        useStatusXY: !0,
                        x: tt + i.xe,
                        y: it + i.ye,
                        dx: 0,
                        dy: 0,
                        snap: null
                    },
                    d.snap = d,
                    t.options.snapEnabled && t.options.snap.endOnly) && (rt = di(n, d),
                    rt.locked && (i.modifiedXe += rt.dx,
                    i.modifiedYe += rt.dy)),
                    t.options.restrictEnabled && t.options.restrict.endOnly && (et = iu(n, d),
                    i.modifiedXe += et.dx,
                    i.modifiedYe += et.dy),
                    pt(i.i),
                    i.i = si(lu),
                    void t.fire(i.startEvent)
                }
                (t.options.snapEnabled && t.options.snap.endOnly || t.options.restrictEnabled && t.options.restrict.endOnly) && ti(n, !0)
            }
            a ? (o = new c(n,"drag","end"),
            h = t._element,
            ut = yu(o, h),
            (ut ? (nr = ut.dropzone,
            ct = ut.element) : (nr = null,
            ct = null),
            t._element = h,
            nr) ? (ot = new c(n,"drop",null,ct,h),
            o.dropzone = ct) : bt && (ht = new c(n,"drag","leave",ct,h),
            bt.fire(ht, h),
            o.dragLeave = fi),
            t.fire(o),
            ot && nr.fire(ot)) : y ? (o = new c(n,"resize","end"),
            t.fire(o)) : p && (o = new c(n,"gesture","end"),
            t.fire(o));
            r.stop()
        }
    }
    function sr(n, t) {
        var e = {}, o = ht[n.type], i = n.target, h, u, c, l, f, r;
        t = t ? !0 : !1;
        for (h in n)
            e[h] = n[h];
        for (e.originalEvent = n,
        e.preventDefault = pu; i && i !== s; ) {
            for (u = 0; u < o.selectors.length; u++)
                if (c = o.selectors[u],
                l = o.contexts[u],
                i[ut](c) && l === n.currentTarget && dr(l, i))
                    for (f = o.listeners[u],
                    e.currentTarget = i,
                    r = 0; r < f.length; r++)
                        if (f[r][1] === t)
                            try {
                                f[r][0](e)
                            } catch (a) {
                                hr.error('Error thrown from delegated listener: "' + c + '" ' + n.type + " " + (f[r][0].name ? f[r][0].name : ""));
                                hr.log(a)
                            }
            i = i.parentNode
        }
    }
    function ru(n) {
        return sr.call(this, n, !0)
    }
    function hf() {
        t && !t.selector && (t = null);
        nr = ct = bt = fi = null
    }
    function r(n, t) {
        return g.get(n, t) || new ii(n,t)
    }
    function uu(n) {
        for (var t in o)
            n.hasOwnProperty(t) && typeof n[t] == typeof o[t] && (this[t] = n[t])
    }
    function ii(t, i) {
        this._element = t;
        this._iEvents = this._iEvents || {};
        "string" == typeof t ? (s.querySelector(t),
        this.selector = t,
        this._gesture = ar,
        i && i.context && (n.Node ? i.context instanceof n.Node : d(i.context) || i.context === s) && (this._context = i.context)) : d(t) && (w ? (u.add(this, "pointerdown", li),
        u.add(this, "pointermove", vt),
        this._gesture = new lr,
        this._gesture.target = t) : (u.add(this, "mousedown", li),
        u.add(this, "mousemove", vt),
        u.add(this, "touchstart", li),
        u.add(this, "touchmove", vt)));
        g.push(this);
        this.set(i)
    }
    var fu, s = n.document, hr = n.console, eu = n.SVGElement || dt, cf = n.SVGSVGElement || dt, cr = n.SVGElementInstance || dt, lf = n.HTMLElement || n.Element, lr = n.Gesture || n.MSGesture, w = lr && (n.PointerEvent || n.MSPointerEvent), tf = lr && (n.GestureEvent || n.MSGestureEvent), ri = Math.hypot || function(n, t) {
        return Math.sqrt(n * n + t * t)
    }
    , vi = {
        pageX: 0,
        pageY: 0,
        clientX: 0,
        clientY: 0,
        timeStamp: 0
    }, yi = {
        pageX: 0,
        pageY: 0,
        clientX: 0,
        clientY: 0,
        timeStamp: 0
    }, rt = {
        pageX: 0,
        pageY: 0,
        clientX: 0,
        clientY: 0,
        timeStamp: 0
    }, wt = {
        pageX: 0,
        pageY: 0,
        clientX: 0,
        clientY: 0,
        timeStamp: 0,
        pageSpeed: 0,
        clientSpeed: 0
    }, k = w ? [] : null, ft = w ? [] : null, ui = 0, v = null, f = null, rf = 0, gi = null, pi = {}, i = {
        active: !1,
        target: null,
        targetElement: null,
        startEvent: null,
        pointerUp: {},
        xe: 0,
        ye: 0,
        duration: 0,
        t0: 0,
        vx0: 0,
        vys: 0,
        lambda_v0: 0,
        one_ve_v0: 0,
        i: null
    }, nt = {
        start: {
            x: 0,
            y: 0
        },
        startDistance: 0,
        prevDistance: 0,
        distance: 0,
        scale: 1,
        startAngle: 0,
        prevAngle: 0
    }, g = [], et = [], ot = [], tt = [], ar = null, ht = {}, t = null, nr = null, ct = null, bt = null, fi = null, o = {
        draggable: !1,
        dropzone: !1,
        accept: null,
        resizable: !1,
        squareResize: !1,
        resizeAxis: "xy",
        gesturable: !1,
        actionChecker: null,
        styleCursor: !0,
        snap: {
            mode: "grid",
            endOnly: !1,
            actions: ["drag"],
            range: 1 / 0,
            grid: {
                x: 100,
                y: 100
            },
            gridOffset: {
                x: 0,
                y: 0
            },
            anchors: [],
            paths: [],
            arrayTypes: /^anchors$|^paths$|^actions$/,
            objectTypes: /^grid$|^gridOffset$/,
            stringTypes: /^mode$/,
            numberTypes: /^range$/,
            boolTypes: /^endOnly$/
        },
        snapEnabled: !1,
        restrict: {
            drag: null,
            resize: null,
            gesture: null,
            endOnly: !1
        },
        restrictEnabled: !0,
        autoScroll: {
            container: n,
            margin: 60,
            speed: 300,
            numberTypes: /^margin$|^speed$/
        },
        autoScrollEnabled: !1,
        inertia: {
            resistance: 10,
            minSpeed: 100,
            endSpeed: 10,
            actions: ["drag", "resize"],
            zeroResumeDelta: !1,
            numberTypes: /^resistance$|^minSpeed$|^endSpeed$/,
            arrayTypes: /^actions$/,
            boolTypes: /^zeroResumeDelta$/
        },
        inertiaEnabled: !1,
        origin: {
            x: 0,
            y: 0
        },
        deltaSource: "page",
        context: s
    }, h = {
        locked: !1,
        x: 0,
        y: 0,
        dx: 0,
        dy: 0,
        realX: 0,
        realY: 0,
        anchors: [],
        paths: []
    }, yt = {
        dx: 0,
        dy: 0,
        snap: h,
        restricted: !1
    }, e = {
        target: null,
        i: null,
        x: 0,
        y: 0,
        scroll: function() {
            var r = e.target.options.autoScroll
              , t = r.container
              , u = (new Date).getTime()
              , f = (u - e.prevTime) / 1e3
              , i = r.speed * f;
            i >= 1 && (t instanceof n.Window ? t.scrollBy(e.x * i, e.y * i) : t && (t.scrollLeft += e.x * i,
            t.scrollTop += e.y * i),
            e.prevTime = u);
            e.isScrolling && (pt(e.i),
            e.i = si(e.scroll))
        },
        edgeMove: function(i) {
            var f, o, s, h, r, u;
            t && t.options.autoScrollEnabled && (a || y) && (r = t.options.autoScroll,
            r.container instanceof n.Window ? (h = i.clientX < e.margin,
            f = i.clientY < e.margin,
            o = i.clientX > r.container.innerWidth - e.margin,
            s = i.clientY > r.container.innerHeight - e.margin) : (u = ki(r.container),
            h = i.clientX < u.left + e.margin,
            f = i.clientY < u.top + e.margin,
            o = i.clientX > u.right - e.margin,
            s = i.clientY > u.bottom - e.margin),
            e.x = o ? 1 : h ? -1 : 0,
            e.y = s ? 1 : f ? -1 : 0,
            e.isScrolling || (e.margin = r.margin,
            e.speed = r.speed,
            e.start(t)))
        },
        isScrolling: !1,
        prevTime: 0,
        start: function(n) {
            e.isScrolling = !0;
            pt(e.i);
            e.target = n;
            e.prevTime = (new Date).getTime();
            e.i = si(e.scroll)
        },
        stop: function() {
            e.isScrolling = !1;
            pt(e.i)
        }
    }, ou = "createTouch"in s, vr = ou ? 20 : 10, st = !1, ei = !1, p = !1, a = !1, oi = !1, y = !1, kt = "xy", wi = {
        drag: {
            cursor: "move",
            moveListener: ku
        },
        resizex: {
            cursor: "e-resize",
            moveListener: er
        },
        resizey: {
            cursor: "s-resize",
            moveListener: er
        },
        resizexy: {
            cursor: "se-resize",
            moveListener: er
        },
        gesture: {
            cursor: "",
            moveListener: du
        }
    }, lt = {
        drag: !0,
        resize: !0,
        gesture: !0
    }, b = null, uf = "onmousewheel"in s ? "mousewheel" : "wheel", bi = ["dragstart", "dragmove", "draginertiastart", "dragend", "dragenter", "dragleave", "drop", "resizestart", "resizemove", "resizeinertiastart", "resizeend", "gesturestart", "gesturemove", "gestureinertiastart", "gestureend", "tap", "doubletap"], at = {}, yr = {
        directBind: 0,
        onevent: 1,
        globalBind: 2
    }, ff = "Opera" == navigator.appName && ou && navigator.userAgent.match("Presto"), ut = "matchesSelector"in Element.prototype ? "matchesSelector" : "webkitMatchesSelector"in Element.prototype ? "webkitMatchesSelector" : "mozMatchesSelector"in Element.prototype ? "mozMatchesSelector" : "oMatchesSelector"in Element.prototype ? "oMatchesSelector" : "msMatchesSelector", si = n.requestAnimationFrame, pt = n.cancelAnimationFrame, af = {
        _element: n,
        events: {}
    }, l = {
        _element: s,
        events: {}
    }, vf = {
        _element: n.parent,
        events: {}
    }, tr = {
        _element: null,
        events: {}
    }, u = function() {
        function o(n, i, r, o) {
            var v = u.indexOf(n), l = f[v], y;
            if (l || (l = {
                events: {},
                typeCount: 0
            },
            v = u.push(n) - 1,
            f.push(l),
            e.push(t ? {
                supplied: [],
                wrapped: [],
                useCount: []
            } : null)),
            l.events[i] || (l.events[i] = [],
            l.typeCount++),
            -1 === l.events[i].indexOf(r)) {
                if (t) {
                    var a = e[v]
                      , p = a.supplied.indexOf(r)
                      , w = a.wrapped[p] || function(t) {
                        t.immediatePropagationStopped || (t.target = t.srcElement,
                        t.currentTarget = n,
                        /mouse|click/.test(t.type) && (t.pageX = t.clientX + s.documentElement.scrollLeft,
                        t.pageY = t.clientY + s.documentElement.scrollTop),
                        r(t))
                    }
                    ;
                    y = n[h](c + i, w, Boolean(o));
                    -1 === p ? (a.supplied.push(r),
                    a.wrapped.push(w),
                    a.useCount.push(1)) : a.useCount[p]++
                } else
                    y = n[h](i, r, o || !1);
                return l.events[i].push(r),
                y
            }
        }
        function r(n, i, o, s) {
            var a, v, y, p = u.indexOf(n), h = f[p], b = o, w;
            if (h && h.events)
                if (t && (v = e[p],
                y = v.supplied.indexOf(o),
                b = v.wrapped[y]),
                "all" !== i) {
                    if (h.events[i]) {
                        if (w = h.events[i].length,
                        "all" === o)
                            for (a = 0; w > a; a++)
                                r(n, i, h.events[i][a], Boolean(s));
                        else
                            for (a = 0; w > a; a++)
                                if (h.events[i][a] === o) {
                                    n[l](c + i, b, s || !1);
                                    h.events[i].splice(a, 1);
                                    t && v && (v.useCount[y]--,
                                    0 === v.useCount[y] && (v.supplied.splice(y, 1),
                                    v.wrapped.splice(y, 1),
                                    v.useCount.splice(y, 1)));
                                    break
                                }
                        h.events[i] && 0 === h.events[i].length && (h.events[i] = null,
                        h.typeCount--)
                    }
                    h.typeCount || (f.splice(p),
                    u.splice(p),
                    e.splice(p))
                } else
                    for (i in h.events)
                        h.events.hasOwnProperty(i) && r(n, i, "all")
        }
        var i = n.Event
          , t = "attachEvent"in n && !("addEventListener"in n)
          , h = t ? "attachEvent" : "addEventListener"
          , l = t ? "detachEvent" : "removeEventListener"
          , c = t ? "on" : ""
          , u = []
          , f = []
          , e = [];
        return "indexOf"in Array.prototype || (Array.prototype.indexOf = function(n) {
            var i = this.length >>> 0
              , t = Number(arguments[1]) || 0;
            for (t = 0 > t ? Math.ceil(t) : Math.floor(t),
            0 > t && (t += i); i > t; t++)
                if (t in this && this[t] === n)
                    return t;
            return -1
        }
        ),
        "stopPropagation"in i.prototype || (i.prototype.stopPropagation = function() {
            this.cancelBubble = !0
        }
        ,
        i.prototype.stopImmediatePropagation = function() {
            this.cancelBubble = !0;
            this.immediatePropagationStopped = !0
        }
        ),
        "preventDefault"in i.prototype || (i.prototype.preventDefault = function() {
            this.returnValue = !1
        }
        ),
        "hasOwnProperty"in i.prototype || (i.prototype.hasOwnProperty = Object.prototype.hasOwnProperty),
        {
            add: function(n, t, i, r) {
                o(n._element, t, i, r)
            },
            remove: function(n, t, i, u) {
                r(n._element, t, i, u)
            },
            addToElement: o,
            removeFromElement: r,
            useAttachEvent: t
        }
    }();
    c.prototype = {
        preventDefault: dt,
        stopImmediatePropagation: function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        },
        stopPropagation: function() {
            this.propagationStopped = !0
        }
    };
    g.indexOfElement = et.indexOfElement = function(n, t) {
        for (var r, i = 0; i < this.length; i++)
            if (r = this[i],
            r.selector === n && r._context === (t || s) || !r.selector && r._element === n)
                return i;
        return -1
    }
    ;
    g.get = et.get = function(n, t) {
        return this[this.indexOfElement(n, t && t.context)]
    }
    ;
    g.forEachSelector = function(n) {
        for (var i, t = 0; t < this.length; t++)
            if (i = this[t],
            i.selector && n(i, i.selector, i._context, t, this) === !1)
                return
    }
    ;
    uu.prototype = o;
    ii.prototype = {
        setOnEvents: function(n, t) {
            if ("drop" === n) {
                var i = t.ondrop || t.onDrop || t.drop
                  , r = t.ondragenter || t.onDropEnter || t.dragenter
                  , u = t.ondragleave || t.onDropLeave || t.dragleave;
                "function" == typeof i && (this.ondrop = i);
                "function" == typeof r && (this.ondragenter = r);
                "function" == typeof u && (this.ondragleave = u)
            } else {
                var f = t.onstart || t.onStart || t.start
                  , e = t.onmove || t.onMove || t.move
                  , o = t.onend || t.onEnd || t.end
                  , s = t.oninertiastart || t.onInertiaStart || t.inertiastart;
                n = "on" + n;
                "function" == typeof f && (this[n + "start"] = f);
                "function" == typeof e && (this[n + "move"] = e);
                "function" == typeof o && (this[n + "end"] = o);
                "function" == typeof s && (this[n + "inertiastart"] = s)
            }
            return this
        },
        draggable: function(n) {
            return n instanceof Object ? (this.options.draggable = !0,
            this.setOnEvents("drag", n),
            this) : "boolean" == typeof n ? (this.options.draggable = n,
            this) : null === n ? (delete this.options.draggable,
            this) : this.options.draggable
        },
        dropzone: function(n) {
            if (n instanceof Object)
                return this.options.dropzone = !0,
                this.setOnEvents("drop", n),
                this.accept(n.accept),
                (this.selector ? ot : et).push(this),
                oi || this.selector || (this.rect = this.getRect()),
                this;
            if ("boolean" == typeof n) {
                if (n)
                    (this.selector ? ot : et).push(this),
                    oi || this.selector || (this.rect = this.getRect());
                else {
                    var t = this.selector ? ot : et
                      , i = t.indexOf(this);
                    -1 !== i && t.splice(i, 1)
                }
                return this.options.dropzone = n,
                this
            }
            return null === n ? (delete this.options.dropzone,
            this) : this.options.dropzone
        },
        dropCheck: function(n, t, i) {
            var u, f, r = gt(n), e = ur(t, i);
            return r.x += e.x,
            r.y += e.y,
            oi && (this.rect = this.getRect()),
            this.rect ? (u = r.x > this.rect.left && r.x < this.rect.right,
            f = r.y > this.rect.top && r.y < this.rect.bottom,
            u && f) : !1
        },
        dropChecker: function(n) {
            return "function" == typeof n ? (this.dropCheck = n,
            this) : this.dropCheck
        },
        accept: function(n) {
            return d(n) ? (this.options.accept = n,
            this) : "string" == typeof n ? (s.querySelector(n),
            this.options.accept = n,
            this) : null === n ? (delete this.options.accept,
            this) : this.options.accept
        },
        resizable: function(n) {
            return n instanceof Object ? (this.options.resizable = !0,
            this.setOnEvents("resize", n),
            /^x$|^y$|^xy$/.test(n.axis) ? this.options.resizeAxis = n.axis : null === n.axis && (this.options.resizeAxis = o.resizeAxis),
            this) : "boolean" == typeof n ? (this.options.resizable = n,
            this) : this.options.resizable
        },
        resizeable: dt,
        squareResize: function(n) {
            return "boolean" == typeof n ? (this.options.squareResize = n,
            this) : null === n ? (delete this.options.squareResize,
            this) : this.options.squareResize
        },
        gesturable: function(n) {
            return n instanceof Object ? (this.options.gesturable = !0,
            this.setOnEvents("gesture", n),
            this) : "boolean" == typeof n ? (this.options.gesturable = n,
            this) : null === n ? (delete this.options.gesturable,
            this) : this.options.gesturable
        },
        gestureable: dt,
        autoScroll: function(t) {
            var r = o.autoScroll, i;
            return t instanceof Object ? (i = this.options.autoScroll,
            i === r && (i = this.options.autoScroll = {
                margin: r.margin,
                distance: r.distance,
                interval: r.interval,
                container: r.container
            }),
            i.margin = this.validateSetting("autoScroll", "margin", t.margin),
            i.speed = this.validateSetting("autoScroll", "speed", t.speed),
            i.container = d(t.container) || t.container instanceof n.Window ? t.container : r.container,
            this.options.autoScrollEnabled = !0,
            this.options.autoScroll = i,
            this) : "boolean" == typeof t ? (this.options.autoScrollEnabled = t,
            this) : null === t ? (delete this.options.autoScrollEnabled,
            delete this.options.autoScroll,
            this) : this.options.autoScrollEnabled ? this.options.autoScroll : !1
        },
        snap: function(n) {
            var i = o.snap, t;
            return n instanceof Object ? (t = this.options.snap,
            t === i && (t = {}),
            t.mode = this.validateSetting("snap", "mode", n.mode),
            t.endOnly = this.validateSetting("snap", "endOnly", n.endOnly),
            t.actions = this.validateSetting("snap", "actions", n.actions),
            t.range = this.validateSetting("snap", "range", n.range),
            t.paths = this.validateSetting("snap", "paths", n.paths),
            t.grid = this.validateSetting("snap", "grid", n.grid),
            t.gridOffset = this.validateSetting("snap", "gridOffset", n.gridOffset),
            t.anchors = this.validateSetting("snap", "anchors", n.anchors),
            this.options.snapEnabled = !0,
            this.options.snap = t,
            this) : "boolean" == typeof n ? (this.options.snapEnabled = n,
            this) : null === n ? (delete this.options.snapEnabled,
            delete this.options.snap,
            this) : this.options.snapEnabled ? this.options.snap : !1
        },
        inertia: function(n) {
            var i = o.inertia, t;
            return n instanceof Object ? (t = this.options.inertia,
            t === i && (t = this.options.inertia = {
                resistance: i.resistance,
                minSpeed: i.minSpeed,
                endSpeed: i.endSpeed,
                actions: i.actions,
                zeroResumeDelta: i.zeroResumeDelta
            }),
            t.resistance = this.validateSetting("inertia", "resistance", n.resistance),
            t.minSpeed = this.validateSetting("inertia", "minSpeed", n.minSpeed),
            t.endSpeed = this.validateSetting("inertia", "endSpeed", n.endSpeed),
            t.actions = this.validateSetting("inertia", "actions", n.actions),
            t.zeroResumeDelta = this.validateSetting("inertia", "zeroResumeDelta", n.zeroResumeDelta),
            this.options.inertiaEnabled = !0,
            this.options.inertia = t,
            this) : "boolean" == typeof n ? (this.options.inertiaEnabled = n,
            this) : null === n ? (delete this.options.inertiaEnabled,
            delete this.options.inertia,
            this) : this.options.inertiaEnabled ? this.options.inertia : !1
        },
        getAction: function(n) {
            var t = this.defaultActionChecker(n);
            return this.options.actionChecker && (t = this.options.actionChecker(n, t, this)),
            t
        },
        defaultActionChecker: wu,
        actionChecker: function(n) {
            return "function" == typeof n ? (this.options.actionChecker = n,
            this) : null === n ? (delete this.options.actionChecker,
            this) : this.options.actionChecker
        },
        getRect: function() {
            return this.selector && !d(this._element) && (this._element = this._context.querySelector(this.selector)),
            ki(this._element)
        },
        rectChecker: function(n) {
            return "function" == typeof n ? (this.getRect = n,
            this) : null === n ? (delete this.options.getRect,
            this) : this.getRect
        },
        styleCursor: function(n) {
            return "boolean" == typeof n ? (this.options.styleCursor = n,
            this) : null === n ? (delete this.options.styleCursor,
            this) : this.options.styleCursor
        },
        origin: function(n) {
            return n instanceof Object || /^parent$|^self$/.test(n) ? (this.options.origin = n,
            this) : null === n ? (delete this.options.origin,
            this) : this.options.origin
        },
        deltaSource: function(n) {
            return "page" === n || "client" === n ? (this.options.deltaSource = n,
            this) : null === n ? (delete this.options.deltaSource,
            this) : this.options.deltaSource
        },
        restrict: function(n) {
            if (void 0 === n)
                return this.options.restrict;
            if (n instanceof Object) {
                var t = {};
                (n.drag instanceof Object || /^parent$|^self$/.test(n.drag)) && (t.drag = n.drag);
                (n.resize instanceof Object || /^parent$|^self$/.test(n.resize)) && (t.resize = n.resize);
                (n.gesture instanceof Object || /^parent$|^self$/.test(n.gesture)) && (t.gesture = n.gesture);
                "boolean" == typeof n.endOnly && (t.endOnly = n.endOnly);
                this.options.restrictEnabled = !0;
                this.options.restrict = t
            } else
                null === n && (delete this.options.restrict,
                delete this.options.restrictEnabled);
            return this
        },
        context: function() {
            return this._context
        },
        _context: s,
        ignoreFrom: function(n) {
            return "string" == typeof n || d(n) ? (this.options.ignoreFrom = n,
            this) : null === n ? (delete this.options.ignoreFrom,
            this) : this.options.ignoreFrom
        },
        validateSetting: function(n, t, i) {
            var r = o[n]
              , u = this.options[n];
            if (void 0 !== r && void 0 !== r[t]) {
                if ("objectTypes"in r && r.objectTypes.test(t))
                    return i instanceof Object ? i : t in u && u[t]instanceof Object ? u[t] : r[t];
                if ("arrayTypes"in r && r.arrayTypes.test(t))
                    return i instanceof Array ? i : t in u && u[t]instanceof Array ? u[t] : r[t];
                if ("stringTypes"in r && r.stringTypes.test(t))
                    return "string" == typeof i ? i : t in u && "string" == typeof u[t] ? u[t] : r[t];
                if ("numberTypes"in r && r.numberTypes.test(t))
                    return "number" == typeof i ? i : t in u && "number" == typeof u[t] ? u[t] : r[t];
                if ("boolTypes"in r && r.boolTypes.test(t))
                    return "boolean" == typeof i ? i : t in u && "boolean" == typeof u[t] ? u[t] : r[t];
                if ("elementTypes"in r && r.elementTypes.test(t))
                    return d(i) ? i : t in u && d(u[t]) ? u[t] : r[t]
            }
            return null
        },
        element: function() {
            return this._element
        },
        fire: function(n) {
            if (!n || !n.type || -1 === bi.indexOf(n.type))
                return this;
            for (var i, u, r = 0, t = 0, f = "on" + n.type; 3 > r; )
                try {
                    switch (r) {
                    case yr.directBind:
                        if (n.type in this._iEvents) {
                            for (i = this._iEvents[n.type],
                            u = i.length; u > t && !n.immediatePropagationStopped; t++)
                                i[t](n);
                            break
                        }
                        break;
                    case yr.onevent:
                        "function" == typeof this[f] && this[f](n);
                        break;
                    case yr.globalBind:
                        if (n.type in at && (i = at[n.type]))
                            for (u = i.length; u > t && !n.immediatePropagationStopped; t++)
                                i[t](n)
                    }
                    if (n.propagationStopped)
                        break;
                    t = 0;
                    r++
                } catch (e) {
                    hr.error("Error thrown from " + n.type + " listener");
                    hr.error(e);
                    t++;
                    r === yr.onevent && r++
                }
            return this
        },
        on: function(n, t, i) {
            if ("wheel" === n && (n = uf),
            i = i ? !0 : !1,
            -1 !== bi.indexOf(n))
                n in this._iEvents ? -1 === this._iEvents[n].indexOf(t) && this._iEvents[n].push(t) : this._iEvents[n] = [t];
            else if (this.selector) {
                ht[n] || (ht[n] = {
                    selectors: [],
                    contexts: [],
                    listeners: []
                },
                u.addToElement(this._context, n, sr),
                u.addToElement(this._context, n, ru, !0));
                for (var f = ht[n], r = f.selectors.length - 1; r >= 0 && (f.selectors[r] !== this.selector || f.contexts[r] !== this._context); r--)
                    ;
                -1 === r && (r = f.selectors.length,
                f.selectors.push(this.selector),
                f.contexts.push(this._context),
                f.listeners.push([]));
                f.listeners[r].push([t, i])
            } else
                u.add(this, n, t, i);
            return this
        },
        off: function(n, t, i) {
            var s, r = -1, f, h, e, o, c, l;
            if (i = i ? !0 : !1,
            "wheel" === n && (n = uf),
            -1 !== bi.indexOf(n))
                s = this._iEvents[n],
                s && -1 !== (r = s.indexOf(t)) && this._iEvents[n].splice(r, 1);
            else if (this.selector) {
                if (f = ht[n],
                h = !1,
                !f)
                    return this;
                for (r = f.selectors.length - 1; r >= 0; r--)
                    if (f.selectors[r] === this.selector && f.contexts[r] === this._context) {
                        for (e = f.listeners[r],
                        o = e.length - 1; o >= 0; o--)
                            if (c = e[o][0],
                            l = e[o][1],
                            c === t && l === i) {
                                e.splice(o, 1);
                                e.length || (f.selectors.splice(r, 1),
                                f.contexts.splice(r, 1),
                                f.listeners.splice(r, 1),
                                u.removeFromElement(this._context, n, sr),
                                u.removeFromElement(this._context, n, ru, !0),
                                f.selectors.length || (ht[n] = null));
                                h = !0;
                                break
                            }
                        if (h)
                            break
                    }
            } else
                u.remove(this, t, i);
            return this
        },
        set: function(n) {
            var t;
            n && "object" == typeof n || (n = {});
            this.options = new uu(n);
            this.draggable("draggable"in n ? n.draggable : this.options.draggable);
            this.dropzone("dropzone"in n ? n.dropzone : this.options.dropzone);
            this.resizable("resizable"in n ? n.resizable : this.options.resizable);
            this.gesturable("gesturable"in n ? n.gesturable : this.options.gesturable);
            for (var r = ["accept", "actionChecker", "autoScroll", "dropChecker", "ignoreFrom", "inertia", "origin", "rectChecker", "restrict", "snap"], i = 0, u = r.length; u > i; i++)
                t = r[i],
                t in n && this[t](n[t]);
            return this
        },
        unset: function() {
            var i, n, t;
            if (u.remove(this, "all"),
            "string" != typeof this.selector)
                u.remove(this, "all"),
                this.options.styleCursor && (this._element.style.cursor = ""),
                this._gesture && (this._gesture.target = null);
            else
                for (i in ht)
                    for (n = ht[i],
                    t = 0; t < n.selectors.length; t++) {
                        n.selectors[t] === this.selector && n.contexts[t] === this._context && (n.selectors.splice(t, 1),
                        n.contexts.splice(t, 1),
                        n.listeners.splice(t, 1),
                        n.selectors.length || (ht[i] = null));
                        u.removeFromElement(this._context, i, sr);
                        u.removeFromElement(this._context, i, ru, !0);
                        break
                    }
            return this.dropzone(!1),
            g.splice(g.indexOf(this), 1),
            r
        }
    };
    ii.prototype.gestureable = ii.prototype.gesturable;
    ii.prototype.resizeable = ii.prototype.resizable;
    r.isSet = function(n, t) {
        return -1 !== g.indexOfElement(n, t && t.context)
    }
    ;
    r.on = function(n, t, i) {
        return -1 !== bi.indexOf(n) ? at[n] ? -1 === at[n].indexOf(t) && at[n].push(t) : at[n] = [t] : u.add(l, n, t, i),
        r
    }
    ;
    r.off = function(n, t, i) {
        if (-1 === bi.indexOf(n))
            u.remove(l, n, t, i);
        else {
            var f;
            n in at && -1 !== (f = at[n].indexOf(t)) && at[n].splice(f, 1)
        }
        return r
    }
    ;
    r.simulate = function(n, i, u) {
        var o, e, f = {};
        if ("resize" === n && (n = "resizexy"),
        !(n in wi))
            return r;
        if (u)
            for (o in u)
                f[o] = u[o];
        else
            e = t._element instanceof eu ? i.getBoundingClientRect() : e = i.getClientRects()[0],
            "drag" === n ? (f.pageX = e.left + e.width / 2,
            f.pageY = e.top + e.height / 2) : (f.pageX = e.right,
            f.pageY = e.bottom);
        return f.target = f.currentTarget = i,
        f.preventDefault = f.stopPropagation = dt,
        li(f, n),
        r
    }
    ;
    r.enableDragging = function(n) {
        return null !== n && void 0 !== n ? (lt.drag = n,
        r) : lt.drag
    }
    ;
    r.enableResizing = function(n) {
        return null !== n && void 0 !== n ? (lt.resize = n,
        r) : lt.resize
    }
    ;
    r.enableGesturing = function(n) {
        return null !== n && void 0 !== n ? (lt.gesture = n,
        r) : lt.gesture
    }
    ;
    r.eventTypes = bi;
    r.debug = function() {
        return {
            target: t,
            dragging: a,
            resizing: y,
            gesturing: p,
            prepared: b,
            prevCoords: vi,
            downCoords: rt,
            pointerIds: k,
            pointerMoves: ft,
            addPointer: ai,
            removePointer: bu,
            recordPointers: fr,
            inertia: i,
            downTime: ui,
            downEvent: v,
            prevEvent: f,
            Interactable: ii,
            IOptions: uu,
            interactables: g,
            dropzones: et,
            pointerIsDown: st,
            defaultOptions: o,
            defaultActionChecker: wu,
            actions: wi,
            dragMove: ku,
            resizeMove: er,
            gestureMove: du,
            pointerUp: it,
            pointerDown: li,
            pointerMove: ti,
            pointerHover: vt,
            events: u,
            globalEvents: at,
            delegatedEvents: ht
        }
    }
    ;
    r.getTouchAverage = hu;
    r.getTouchBBox = wr;
    r.getTouchDistance = br;
    r.getTouchAngle = kr;
    r.getElementRect = ki;
    r.margin = function(n) {
        return "number" == typeof n ? (vr = n,
        r) : vr
    }
    ;
    r.styleCursor = function(n) {
        return "boolean" == typeof n ? (o.styleCursor = n,
        r) : o.styleCursor
    }
    ;
    r.autoScroll = function(t) {
        var i = o.autoScroll;
        return t instanceof Object ? (o.autoScrollEnabled = !0,
        "number" == typeof t.margin && (i.margin = t.margin),
        "number" == typeof t.speed && (i.speed = t.speed),
        i.container = d(t.container) || t.container instanceof n.Window ? t.container : i.container,
        r) : "boolean" == typeof t ? (o.autoScrollEnabled = t,
        r) : o.autoScrollEnabled ? i : !1
    }
    ;
    r.snap = function(n) {
        var t = o.snap;
        return n instanceof Object ? (o.snapEnabled = !0,
        "string" == typeof n.mode && (t.mode = n.mode),
        "boolean" == typeof n.endOnly && (t.endOnly = n.endOnly),
        "number" == typeof n.range && (t.range = n.range),
        n.actions instanceof Array && (t.actions = n.actions),
        n.anchors instanceof Array && (t.anchors = n.anchors),
        n.grid instanceof Object && (t.grid = n.grid),
        n.gridOffset instanceof Object && (t.gridOffset = n.gridOffset),
        r) : "boolean" == typeof n ? (o.snapEnabled = n,
        r) : {
            enabled: o.snapEnabled,
            mode: t.mode,
            actions: t.actions,
            grid: t.grid,
            gridOffset: t.gridOffset,
            anchors: t.anchors,
            paths: t.paths,
            range: t.range,
            locked: h.locked,
            x: h.x,
            y: h.y,
            realX: h.realX,
            realY: h.realY,
            dx: h.dx,
            dy: h.dy
        }
    }
    ;
    r.inertia = function(n) {
        var t = o.inertia;
        return n instanceof Object ? (o.inertiaEnabled = !0,
        "number" == typeof n.resistance && (t.resistance = n.resistance),
        "number" == typeof n.minSpeed && (t.minSpeed = n.minSpeed),
        "number" == typeof n.endSpeed && (t.endSpeed = n.endSpeed),
        "boolean" == typeof n.zeroResumeDelta && (t.zeroResumeDelta = n.zeroResumeDelta),
        n.actions instanceof Array && (t.actions = n.actions),
        r) : "boolean" == typeof n ? (o.inertiaEnabled = n,
        r) : {
            enabled: o.inertiaEnabled,
            resistance: t.resistance,
            minSpeed: t.minSpeed,
            endSpeed: t.endSpeed,
            actions: t.actions,
            zeroResumeDelta: t.zeroResumeDelta
        }
    }
    ;
    r.supportsTouch = function() {
        return ou
    }
    ;
    r.currentAction = function() {
        return a && "drag" || y && "resize" || p && "gesture" || null
    }
    ;
    r.stop = function(n) {
        if (a || y || p) {
            e.stop();
            tt = [];
            t.options.styleCursor && (s.documentElement.style.cursor = "");
            t._gesture && t._gesture.stop();
            hf();
            for (var i = 0; i < ot.length; i++)
                ot._elements = [];
            n && "function" == typeof n.preventDefault && n.preventDefault()
        }
        return k && k.length && (k.splice(0),
        ft.splice(0)),
        st = h.locked = a = y = p = !1,
        b = f = null,
        r
    }
    ;
    r.dynamicDrop = function(n) {
        return "boolean" == typeof n ? (a && oi !== n && !n && cu(et),
        oi = n,
        r) : oi
    }
    ;
    r.deltaSource = function(n) {
        return "page" === n || "client" === n ? (o.deltaSource = n,
        this) : o.deltaSource
    }
    ;
    r.restrict = function(n) {
        var t = o.restrict;
        return void 0 === n ? o.restrict : (n instanceof Object ? ((n.drag instanceof Object || /^parent$|^self$/.test(n.drag)) && (t.drag = n.drag),
        (n.resize instanceof Object || /^parent$|^self$/.test(n.resize)) && (t.resize = n.resize),
        (n.gesture instanceof Object || /^parent$|^self$/.test(n.gesture)) && (t.gesture = n.gesture),
        "boolean" == typeof n.endOnly && (t.endOnly = n.endOnly)) : null === n && (t.drag = t.resize = t.gesture = null,
        t.endOnly = !1),
        this)
    }
    ;
    w ? (u.add(l, "pointerup", nu),
    u.add(l, "pointerdown", tu),
    u.add(l, "MSGestureChange", ti),
    u.add(l, "MSGestureEnd", it),
    u.add(l, "MSInertiaStart", it),
    u.add(l, "pointerover", gu),
    u.add(l, "pointerout", nf),
    u.add(l, "pointermove", fr),
    u.add(l, "pointerup", fr),
    u.add(l, "pointercancel", fr),
    u.add(l, "pointerup", function() {
        a || y || p || (st = !1)
    }),
    ar = new lr,
    ar.target = s.documentElement) : (u.add(l, "mouseup", nu),
    u.add(l, "touchend", nu),
    u.add(l, "mousedown", tu),
    u.add(l, "mousemove", ti),
    u.add(l, "mouseup", it),
    u.add(l, "mouseover", gu),
    u.add(l, "mouseout", nf),
    u.add(l, "touchstart", tu),
    u.add(l, "touchmove", ti),
    u.add(l, "touchend", it),
    u.add(l, "touchcancel", it));
    u.add(af, "blur", it);
    try {
        n.frameElement && (tr._element = n.frameElement.ownerDocument,
        u.add(tr, "mouseup", it),
        u.add(tr, "touchend", it),
        u.add(tr, "touchcancel", it),
        u.add(tr, "pointerup", it),
        u.add(vf, "blur", it))
    } catch (yf) {
        r.windowParentError = yf
    }
    u.add(l, "selectstart", function(n) {
        (a || y || p) && n.preventDefault()
    });
    ut in Element.prototype && "function" == typeof Element.prototype[ut] || (Element.prototype[ut] = fu = function(n, t) {
        t = t || this.parentNode.querySelectorAll(n);
        for (var r = t.length, i = 0; r > i; i++)
            if (t[i] === this)
                return !0;
        return !1
    }
    ),
    function() {
        for (var r = 0, i = ["ms", "moz", "webkit", "o"], t = 0; t < i.length && !n.requestAnimationFrame; ++t)
            si = n[i[t] + "RequestAnimationFrame"],
            pt = n[i[t] + "CancelAnimationFrame"] || n[i[t] + "CancelRequestAnimationFrame"];
        si || (si = function(t) {
            var i = (new Date).getTime()
              , u = Math.max(0, 16 - (i - r))
              , f = n.setTimeout(function() {
                t(i + u)
            }, u);
            return r = i + u,
            f
        }
        );
        pt || (pt = function(n) {
            clearTimeout(n)
        }
        )
    }();
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = r),
    exports.interact = r) : "function" == typeof define && define.amd ? define("interact", function() {
        return r
    }) : n.interact = r
}(this);
/**
 * @license AngularJS v1.2.25
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(n, t, i) {
    "use strict";
    function y(n) {
        return function() {
            var r = arguments[0], f = "[" + (n ? n + ":" : "") + r + "] ", e = arguments[1], u = arguments, o = function(n) {
                return typeof n == "function" ? n.toString().replace(/ \{[\s\S]*$/, "") : typeof n == "undefined" ? "undefined" : typeof n != "string" ? JSON.stringify(n) : n
            }, t, i;
            for (t = f + e.replace(/\{\d+\}/g, function(n) {
                var i = +n.slice(1, -1), t;
                return i + 2 < u.length ? (t = u[i + 2],
                typeof t == "function") ? t.toString().replace(/ ?\{[\s\S]*$/, "") : typeof t == "undefined" ? "undefined" : typeof t != "string" ? et(t) : t : n
            }),
            t = t + "\nhttp://errors.angularjs.org/1.2.25/" + (n ? n + "/" : "") + r,
            i = 2; i < arguments.length; i++)
                t = t + (i == 2 ? "?" : "&") + "p" + (i - 2) + "=" + encodeURIComponent(o(arguments[i]));
            return new Error(t)
        }
    }
    function yi(n) {
        if (n == null || ei(n))
            return !1;
        var t = n.length;
        return n.nodeType === 1 && t ? !0 : e(n) || o(n) || t === 0 || typeof t == "number" && t > 0 && t - 1 in n
    }
    function r(n, t, i) {
        var u;
        if (n)
            if (c(n))
                for (u in n)
                    u != "prototype" && u != "length" && u != "name" && (!n.hasOwnProperty || n.hasOwnProperty(u)) && t.call(i, n[u], u);
            else if (o(n) || yi(n))
                for (u = 0; u < n.length; u++)
                    t.call(i, n[u], u);
            else if (n.forEach && n.forEach !== r)
                n.forEach(t, i);
            else
                for (u in n)
                    n.hasOwnProperty(u) && t.call(i, n[u], u);
        return n
    }
    function gf(n) {
        var t = [];
        for (var i in n)
            n.hasOwnProperty(i) && t.push(i);
        return t.sort()
    }
    function hs(n, t, i) {
        for (var r = gf(n), u = 0; u < r.length; u++)
            t.call(i, n[r[u]], r[u]);
        return r
    }
    function ne(n) {
        return function(t, i) {
            n(i, t)
        }
    }
    function lr() {
        for (var n = vt.length, t; n; ) {
            if (n--,
            t = vt[n].charCodeAt(0),
            t == 57)
                return vt[n] = "A",
                vt.join("");
            if (t == 90)
                vt[n] = "0";
            else
                return vt[n] = String.fromCharCode(t + 1),
                vt.join("")
        }
        return vt.unshift("0"),
        vt.join("")
    }
    function te(n, t) {
        t ? n.$$hashKey = t : delete n.$$hashKey
    }
    function h(n) {
        var t = n.$$hashKey;
        return r(arguments, function(t) {
            t !== n && r(t, function(t, i) {
                n[i] = t
            })
        }),
        te(n, t),
        n
    }
    function k(n) {
        return parseInt(n, 10)
    }
    function ie(n, t) {
        return h(new (h(function() {}, {
            prototype: n
        })), t)
    }
    function s() {}
    function pi(n) {
        return n
    }
    function nt(n) {
        return function() {
            return n
        }
    }
    function l(n) {
        return typeof n == "undefined"
    }
    function f(n) {
        return typeof n != "undefined"
    }
    function a(n) {
        return n != null && typeof n == "object"
    }
    function e(n) {
        return typeof n == "string"
    }
    function ar(n) {
        return typeof n == "number"
    }
    function yt(n) {
        return fi.call(n) === "[object Date]"
    }
    function c(n) {
        return typeof n == "function"
    }
    function vr(n) {
        return fi.call(n) === "[object RegExp]"
    }
    function ei(n) {
        return n && n.document && n.location && n.alert && n.setInterval
    }
    function yr(n) {
        return n && n.$evalAsync && n.$watch
    }
    function cs(n) {
        return fi.call(n) === "[object File]"
    }
    function ls(n) {
        return fi.call(n) === "[object Blob]"
    }
    function pr(n) {
        return n && c(n.then)
    }
    function as(n) {
        return !!(n && (n.nodeName || n.prop && n.attr && n.find))
    }
    function vs(n, t, i) {
        var u = [];
        return r(n, function(n, r, f) {
            u.push(t.call(i, n, r, f))
        }),
        u
    }
    function ys(n, t) {
        return wi(n, t) != -1
    }
    function wi(n, t) {
        if (n.indexOf)
            return n.indexOf(t);
        for (var i = 0; i < n.length; i++)
            if (t === n[i])
                return i;
        return -1
    }
    function bi(n, t) {
        var i = wi(n, t);
        return i >= 0 && n.splice(i, 1),
        t
    }
    function oi(n, t, i, u) {
        var h, f, e, c, s;
        if (ei(n) || yr(n))
            throw ur("cpws", "Can't copy! Making copies of Window or Scope instances is not supported.");
        if (t) {
            if (n === t)
                throw ur("cpi", "Can't copy! Source and destination are identical.");
            if (i = i || [],
            u = u || [],
            a(n)) {
                if (h = wi(i, n),
                h !== -1)
                    return u[h];
                i.push(n);
                u.push(t)
            }
            if (o(n))
                for (t.length = 0,
                e = 0; e < n.length; e++)
                    f = oi(n[e], null, i, u),
                    a(n[e]) && (i.push(n[e]),
                    u.push(f)),
                    t.push(f);
            else {
                c = t.$$hashKey;
                o(t) ? t.length = 0 : r(t, function(n, i) {
                    delete t[i]
                });
                for (s in n)
                    f = oi(n[s], null, i, u),
                    a(n[s]) && (i.push(n[s]),
                    u.push(f)),
                    t[s] = f;
                te(t, c)
            }
        } else
            t = n,
            n && (o(n) ? t = oi(n, [], i, u) : yt(n) ? t = new Date(n.getTime()) : vr(n) ? (t = new RegExp(n.source,n.toString().match(/[^\/]*$/)[0]),
            t.lastIndex = n.lastIndex) : a(n) && (t = oi(n, {}, i, u)));
        return t
    }
    function ft(n, t) {
        var r, i;
        if (o(n))
            for (t = t || [],
            r = 0; r < n.length; r++)
                t[r] = n[r];
        else if (a(n)) {
            t = t || {};
            for (i in n)
                uu.call(n, i) && (i.charAt(0) !== "$" || i.charAt(1) !== "$") && (t[i] = n[i])
        }
        return t || n
    }
    function ni(n, t) {
        if (n === t)
            return !0;
        if (n === null || t === null)
            return !1;
        if (n !== n && t !== t)
            return !0;
        var f = typeof n, s = typeof t, e, r, u;
        if (f == s && f == "object")
            if (o(n)) {
                if (!o(t))
                    return !1;
                if ((e = n.length) == t.length) {
                    for (r = 0; r < e; r++)
                        if (!ni(n[r], t[r]))
                            return !1;
                    return !0
                }
            } else {
                if (yt(n))
                    return yt(t) ? isNaN(n.getTime()) && isNaN(t.getTime()) || n.getTime() === t.getTime() : !1;
                if (vr(n) && vr(t))
                    return n.toString() == t.toString();
                if (yr(n) || yr(t) || ei(n) || ei(t) || o(t))
                    return !1;
                u = {};
                for (r in n)
                    if (r.charAt(0) !== "$" && !c(n[r])) {
                        if (!ni(n[r], t[r]))
                            return !1;
                        u[r] = !0
                    }
                for (r in t)
                    if (!u.hasOwnProperty(r) && r.charAt(0) !== "$" && t[r] !== i && !c(t[r]))
                        return !1;
                return !0
            }
        return !1
    }
    function lu(n, t, i) {
        return n.concat(wf.call(t, i))
    }
    function au(n, t) {
        return wf.call(n, t || 0)
    }
    function vu(n, t) {
        var i = arguments.length > 2 ? au(arguments, 2) : [];
        return !c(t) || t instanceof RegExp ? t : i.length ? function() {
            return arguments.length ? t.apply(n, i.concat(wf.call(arguments, 0))) : t.apply(n, i)
        }
        : function() {
            return arguments.length ? t.apply(n, arguments) : t.call(n)
        }
    }
    function ps(n, r) {
        var u = r;
        return typeof n == "string" && n.charAt(0) === "$" ? u = i : ei(r) ? u = "$WINDOW" : r && t === r ? u = "$DOCUMENT" : yr(r) && (u = "$SCOPE"),
        u
    }
    function et(n, t) {
        return typeof n == "undefined" ? i : JSON.stringify(n, ps, t ? "  " : null)
    }
    function re(n) {
        return e(n) ? JSON.parse(n) : n
    }
    function ki(n) {
        if (typeof n == "function")
            n = !0;
        else if (n && n.length !== 0) {
            var t = v("" + n);
            n = !(t == "f" || t == "0" || t == "false" || t == "no" || t == "n" || t == "[]")
        } else
            n = !1;
        return n
    }
    function ot(n) {
        n = u(n).clone();
        try {
            n.empty()
        } catch (i) {}
        var t = u("<div>").append(n).html();
        try {
            return n[0].nodeType === 3 ? v(t) : t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function(n, t) {
                return "<" + v(t)
            })
        } catch (i) {
            return v(t)
        }
    }
    function ue(n) {
        try {
            return decodeURIComponent(n)
        } catch (t) {}
    }
    function fe(n) {
        var i = {}, u, t;
        return r((n || "").split("&"), function(n) {
            if (n && (u = n.replace(/\+/g, "%20").split("="),
            t = ue(u[0]),
            f(t))) {
                var r = f(u[1]) ? ue(u[1]) : !0;
                uu.call(i, t) ? o(i[t]) ? i[t].push(r) : i[t] = [i[t], r] : i[t] = r
            }
        }),
        i
    }
    function yu(n) {
        var t = [];
        return r(n, function(n, i) {
            o(n) ? r(n, function(n) {
                t.push(ti(i, !0) + (n === !0 ? "" : "=" + ti(n, !0)))
            }) : t.push(ti(i, !0) + (n === !0 ? "" : "=" + ti(n, !0)))
        }),
        t.length ? t.join("&") : ""
    }
    function wr(n) {
        return ti(n, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
    }
    function ti(n, t) {
        return encodeURIComponent(n).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, t ? "%20" : "+")
    }
    function ws(n, i) {
        function f(n) {
            n && s.push(n)
        }
        var s = [n], u, e, o = ["ng:app", "ng-app", "x-ng-app", "data-ng-app"], h = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;
        r(o, function(i) {
            o[i] = !0;
            f(t.getElementById(i));
            i = i.replace(":", "\\:");
            n.querySelectorAll && (r(n.querySelectorAll("." + i), f),
            r(n.querySelectorAll("." + i + "\\:"), f),
            r(n.querySelectorAll("[" + i + "]"), f))
        });
        r(s, function(n) {
            if (!u) {
                var i = " " + n.className + " "
                  , t = h.exec(i);
                t ? (u = n,
                e = (t[2] || "").replace(/\s+/g, ",")) : r(n.attributes, function(t) {
                    !u && o[t.name] && (u = n,
                    e = t.value)
                })
            }
        });
        u && i(u, e ? [e] : [])
    }
    function ee(i, f) {
        var e = function() {
            var r, n;
            if (i = u(i),
            i.injector()) {
                r = i[0] === t ? "document" : ot(i);
                throw ur("btstrpd", "App Already Bootstrapped with this Element '{0}'", r.replace(/</, "&lt;").replace(/>/, "&gt;"));
            }
            return f = f || [],
            f.unshift(["$provide", function(n) {
                n.value("$rootElement", i)
            }
            ]),
            f.unshift("ng"),
            n = ve(f),
            n.invoke(["$rootScope", "$rootElement", "$compile", "$injector", "$animate", function(n, t, i, r) {
                n.$apply(function() {
                    t.data("$injector", r);
                    i(t)(n)
                })
            }
            ]),
            n
        }
          , o = /^NG_DEFER_BOOTSTRAP!/;
        if (n && !o.test(n.name))
            return e();
        n.name = n.name.replace(o, "");
        fr.resumeBootstrap = function(n) {
            r(n, function(n) {
                f.push(n)
            });
            e()
        }
    }
    function br(n, t) {
        return t = t || "_",
        n.replace(yo, function(n, i) {
            return (i ? t : "") + n.toLowerCase()
        })
    }
    function bs() {
        gt = n.jQuery;
        gt && gt.fn.on ? (u = gt,
        h(gt.fn, {
            scope: ui.scope,
            isolateScope: ui.isolateScope,
            controller: ui.controller,
            injector: ui.injector,
            inheritedData: ui.inheritedData
        }),
        bu("remove", !0, !0, !1),
        bu("empty", !1, !1, !1),
        bu("html", !1, !1, !0)) : u = w;
        fr.element = u
    }
    function pu(n, t, i) {
        if (!n)
            throw ur("areq", "Argument '{0}' is {1}", t || "?", i || "required");
        return n
    }
    function di(n, t, i) {
        return i && o(n) && (n = n[n.length - 1]),
        pu(c(n), t, "not a function, got " + (n && typeof n == "object" ? n.constructor.name || "Object" : typeof n)),
        n
    }
    function ii(n, t) {
        if (n === "hasOwnProperty")
            throw ur("badname", "hasOwnProperty is not a valid {0} name", t);
    }
    function oe(n, t, i) {
        var r;
        if (!t)
            return n;
        var u = t.split("."), f, e = n, o = u.length;
        for (r = 0; r < o; r++)
            f = u[r],
            n && (n = (e = n)[f]);
        return !i && c(n) ? vu(e, n) : n
    }
    function wu(n) {
        var i = n[0], f = n[n.length - 1], t, r;
        if (i === f)
            return u(i);
        t = i;
        r = [t];
        do {
            if (t = t.nextSibling,
            !t)
                break;
            r.push(t)
        } while (t !== f);return u(r)
    }
    function ks(n) {
        function t(n, t, i) {
            return n[t] || (n[t] = i())
        }
        var r = y("$injector")
          , u = y("ng")
          , i = t(n, "angular", Object);
        return i.$$minErr = i.$$minErr || y,
        t(i, "module", function() {
            var n = {};
            return function(i, f, e) {
                var o = function(n, t) {
                    if (n === "hasOwnProperty")
                        throw u("badname", "hasOwnProperty is not a valid {0} name", t);
                };
                return o(i, "module"),
                f && n.hasOwnProperty(i) && (n[i] = null),
                t(n, i, function() {
                    function n(n, i, r) {
                        return function() {
                            return t[r || "push"]([n, i, arguments]),
                            s
                        }
                    }
                    if (!f)
                        throw r("nomod", "Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.", i);
                    var t = []
                      , u = []
                      , o = n("$injector", "invoke")
                      , s = {
                        _invokeQueue: t,
                        _runBlocks: u,
                        requires: f,
                        name: i,
                        provider: n("$provide", "provider"),
                        factory: n("$provide", "factory"),
                        service: n("$provide", "service"),
                        value: n("$provide", "value"),
                        constant: n("$provide", "constant", "unshift"),
                        animation: n("$animateProvider", "register"),
                        filter: n("$filterProvider", "register"),
                        controller: n("$controllerProvider", "register"),
                        directive: n("$compileProvider", "directive"),
                        config: o,
                        run: function(n) {
                            return u.push(n),
                            this
                        }
                    };
                    return e && o(e),
                    s
                })
            }
        })
    }
    function ds(t) {
        h(t, {
            bootstrap: ee,
            copy: oi,
            extend: h,
            equals: ni,
            element: u,
            forEach: r,
            injector: ve,
            noop: s,
            bind: vu,
            toJson: et,
            fromJson: re,
            identity: pi,
            isUndefined: l,
            isDefined: f,
            isString: e,
            isFunction: c,
            isObject: a,
            isNumber: ar,
            isElement: as,
            isArray: o,
            version: po,
            isDate: yt,
            lowercase: v,
            uppercase: ri,
            callbacks: {
                counter: 0
            },
            $$minErr: y,
            $$csp: ci
        });
        er = ks(n);
        try {
            er("ngLocale")
        } catch (i) {
            er("ngLocale", []).provider("$locale", kh)
        }
        er("ng", ["ngLocale"], ["$provide", function(n) {
            n.provider({
                $$sanitizeUri: oc
            });
            n.provider("$compile", ye).directive({
                a: ts,
                input: es,
                textarea: es,
                form: sa,
                script: ny,
                select: ry,
                style: fy,
                option: uy,
                ngBind: da,
                ngBindHtml: nv,
                ngBindTemplate: ga,
                ngClass: tv,
                ngClassEven: rv,
                ngClassOdd: iv,
                ngCloak: uv,
                ngController: fv,
                ngForm: ha,
                ngHide: pv,
                ngIf: ov,
                ngInclude: sv,
                ngInit: cv,
                ngNonBindable: lv,
                ngPluralize: av,
                ngRepeat: vv,
                ngShow: yv,
                ngStyle: wv,
                ngSwitch: bv,
                ngSwitchWhen: kv,
                ngSwitchDefault: dv,
                ngOptions: iy,
                ngTransclude: gv,
                ngModel: ya,
                ngList: wa,
                ngChange: pa,
                required: os,
                ngRequired: os,
                ngValue: ka
            }).directive({
                ngInclude: hv
            }).directive(eu).directive(ss);
            n.provider({
                $anchorScroll: rh,
                $animate: bo,
                $browser: eh,
                $cacheFactory: oh,
                $controller: hh,
                $document: ch,
                $exceptionHandler: lh,
                $filter: eo,
                $interpolate: wh,
                $interval: bh,
                $http: ah,
                $httpBackend: yh,
                $location: gh,
                $log: nc,
                $parse: ic,
                $rootScope: ec,
                $q: rc,
                $sce: lc,
                $sceDelegate: cc,
                $sniffer: ac,
                $templateCache: sh,
                $timeout: vc,
                $window: yc,
                $$rAF: fc,
                $$asyncCallback: uh
            })
        }
        ])
    }
    function gs() {
        return ++hl
    }
    function gi(n) {
        return n.replace(cl, function(n, t, i, r) {
            return r ? i.toUpperCase() : i
        }).replace(ll, "Moz$1")
    }
    function bu(n, t, i, r) {
        function e(n) {
            var s = i && n ? [this.filter(n)] : [this], h = t, c, e, a, l, o, v, y;
            if (!r || n != null)
                while (s.length)
                    for (c = s.shift(),
                    e = 0,
                    a = c.length; e < a; e++)
                        for (l = u(c[e]),
                        h ? l.triggerHandler("$destroy") : h = !h,
                        o = 0,
                        v = (y = l.children()).length; o < v; o++)
                            s.push(gt(y[o]));
            return f.apply(this, arguments)
        }
        var f = gt.fn[n];
        f = f.$original || f;
        e.$original = f;
        gt.fn[n] = e
    }
    function ku(n) {
        return !vl.test(n)
    }
    function nh(n, t) {
        var i, o, r, u = t.createDocumentFragment(), e = [], s, f, h;
        if (ku(n))
            e.push(t.createTextNode(n));
        else {
            for (i = u.appendChild(t.createElement("div")),
            o = (yl.exec(n) || ["", ""])[1].toLowerCase(),
            r = ut[o] || ut._default,
            i.innerHTML = "<div>&#160;<\/div>" + r[1] + n.replace(pl, "<$1><\/$2>") + r[2],
            i.removeChild(i.firstChild),
            s = r[0]; s--; )
                i = i.lastChild;
            for (f = 0,
            h = i.childNodes.length; f < h; ++f)
                e.push(i.childNodes[f]);
            i = u.firstChild;
            i.textContent = ""
        }
        return u.textContent = "",
        u.innerHTML = "",
        e
    }
    function th(n, i) {
        i = i || t;
        var r;
        return (r = al.exec(n)) ? [i.createElement(r[1])] : nh(n, i)
    }
    function w(n) {
        if (n instanceof w)
            return n;
        if (e(n) && (n = g(n)),
        !(this instanceof w)) {
            if (e(n) && n.charAt(0) != "<")
                throw bf("nosel", "Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");
            return new w(n)
        }
        if (e(n)) {
            rf(this, th(n));
            var i = u(t.createDocumentFragment());
            i.append(this)
        } else
            rf(this, n)
    }
    function du(n) {
        return n.cloneNode(!0)
    }
    function si(n) {
        gu(n);
        for (var t = 0, i = n.childNodes || []; t < i.length; t++)
            si(i[t])
    }
    function se(n, t, i, u) {
        if (f(u))
            throw bf("offargs", "jqLite#off() does not support the `selector` argument");
        var e = ht(n, "events")
          , o = ht(n, "handle");
        o && (l(t) ? r(e, function(t, i) {
            sr(n, i, t);
            delete e[i]
        }) : r(t.split(" "), function(t) {
            l(i) ? (sr(n, t, e[t]),
            delete e[t]) : bi(e[t] || [], i)
        }))
    }
    function gu(n, t) {
        var u = n.ng339
          , r = or[u];
        if (r) {
            if (t) {
                delete or[u].data[t];
                return
            }
            r.handle && (r.events.$destroy && r.handle({}, "$destroy"),
            se(n));
            delete or[u];
            n.ng339 = i
        }
    }
    function ht(n, t, i) {
        var u = n.ng339
          , r = or[u || -1];
        if (f(i))
            r || (n.ng339 = u = gs(),
            r = or[u] = {}),
            r[t] = i;
        else
            return r && r[t]
    }
    function nf(n, t, i) {
        var r = ht(n, "data")
          , u = f(i)
          , e = !u && f(t)
          , o = e && !a(t);
        if (r || o || ht(n, "data", r = {}),
        u)
            r[t] = i;
        else if (e) {
            if (o)
                return r && r[t];
            h(r, t)
        } else
            return r
    }
    function tf(n, t) {
        return n.getAttribute ? (" " + (n.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + t + " ") > -1 : !1
    }
    function kr(n, t) {
        t && n.setAttribute && r(t.split(" "), function(t) {
            n.setAttribute("class", g((" " + (n.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + g(t) + " ", " ")))
        })
    }
    function dr(n, t) {
        if (t && n.setAttribute) {
            var i = (" " + (n.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
            r(t.split(" "), function(n) {
                n = g(n);
                i.indexOf(" " + n + " ") === -1 && (i += n + " ")
            });
            n.setAttribute("class", g(i))
        }
    }
    function rf(n, t) {
        if (t) {
            t = !t.nodeName && f(t.length) && !ei(t) ? t : [t];
            for (var i = 0; i < t.length; i++)
                n.push(t[i])
        }
    }
    function he(n, t) {
        return gr(n, "$" + (t || "ngController") + "Controller")
    }
    function gr(n, t, r) {
        var e, f, s;
        for (n.nodeType == 9 && (n = n.documentElement),
        e = o(t) ? t : [t]; n; ) {
            for (f = 0,
            s = e.length; f < s; f++)
                if ((r = u.data(n, e[f])) !== i)
                    return r;
            n = n.parentNode || n.nodeType === 11 && n.host
        }
    }
    function ce(n) {
        for (var t = 0, i = n.childNodes; t < i.length; t++)
            si(i[t]);
        while (n.firstChild)
            n.removeChild(n.firstChild)
    }
    function le(n, t) {
        var i = ir[t.toLowerCase()];
        return i && lf[n.nodeName] && i
    }
    function ih(n, i) {
        var u = function(u, f) {
            var e, o;
            u.preventDefault || (u.preventDefault = function() {
                u.returnValue = !1
            }
            );
            u.stopPropagation || (u.stopPropagation = function() {
                u.cancelBubble = !0
            }
            );
            u.target || (u.target = u.srcElement || t);
            l(u.defaultPrevented) && (e = u.preventDefault,
            u.preventDefault = function() {
                u.defaultPrevented = !0;
                e.call(u)
            }
            ,
            u.defaultPrevented = !1);
            u.isDefaultPrevented = function() {
                return u.defaultPrevented || u.returnValue === !1
            }
            ;
            o = ft(i[f || u.type] || []);
            r(o, function(t) {
                t.call(n, u)
            });
            p <= 8 ? (u.preventDefault = null,
            u.stopPropagation = null,
            u.isDefaultPrevented = null) : (delete u.preventDefault,
            delete u.stopPropagation,
            delete u.isDefaultPrevented)
        };
        return u.elem = n,
        u
    }
    function hi(n, t) {
        var u = typeof n, r;
        return u == "function" || u == "object" && n !== null ? typeof (r = n.$$hashKey) == "function" ? r = n.$$hashKey() : r === i && (r = n.$$hashKey = (t || lr)()) : r = n,
        u + ":" + r
    }
    function nr(n, t) {
        if (t) {
            var i = 0;
            this.nextUid = function() {
                return ++i
            }
        }
        r(n, this.put, this)
    }
    function ae(n) {
        var t, u, f, i;
        return typeof n == "function" ? (t = n.$inject) || (t = [],
        n.length && (u = n.toString().replace(gl, ""),
        f = u.match(bl),
        r(f[1].split(kl), function(n) {
            n.replace(dl, function(n, i, r) {
                t.push(r)
            })
        })),
        n.$inject = t) : o(n) ? (i = n.length - 1,
        di(n[i], "fn"),
        t = n.slice(0, i)) : di(n, "fn", !0),
        t
    }
    function ve(n) {
        function i(n) {
            return function(t, i) {
                if (a(t))
                    r(t, ne(n));
                else
                    return n(t, i)
            }
        }
        function w(n, i) {
            if (ii(n, "service"),
            (c(i) || o(i)) && (i = t.instantiate(i)),
            !i.$get)
                throw hr("pget", "Provider '{0}' must define $get factory method.", n);
            return u[n + h] = i
        }
        function v(n, t) {
            return w(n, {
                $get: t
            })
        }
        function g(n, t) {
            return v(n, ["$injector", function(n) {
                return n.instantiate(t)
            }
            ])
        }
        function tt(n, t) {
            return v(n, nt(t))
        }
        function it(n, t) {
            ii(n, "constant");
            u[n] = t;
            p[n] = t
        }
        function rt(n, i) {
            var r = t.get(n + h)
              , u = r.$get;
            r.$get = function() {
                var n = f.invoke(u, r);
                return f.invoke(i, null, {
                    $delegate: n
                })
            }
        }
        function b(n) {
            var i = [], u, s, f, h;
            return r(n, function(n) {
                if (!d.get(n)) {
                    d.put(n, !0);
                    try {
                        if (e(n))
                            for (u = er(n),
                            i = i.concat(b(u.requires)).concat(u._runBlocks),
                            s = u._invokeQueue,
                            f = 0,
                            h = s.length; f < h; f++) {
                                var l = s[f]
                                  , a = t.get(l[0]);
                                a[l[1]].apply(a, l[2])
                            }
                        else
                            c(n) ? i.push(t.invoke(n)) : o(n) ? i.push(t.invoke(n)) : di(n, "module")
                    } catch (r) {
                        o(n) && (n = n[n.length - 1]);
                        r.message && r.stack && r.stack.indexOf(r.message) == -1 && (r = r.message + "\n" + r.stack);
                        throw hr("modulerr", "Failed to instantiate module {0} due to:\n{1}", n, r.stack || r.message || r);
                    }
                }
            }),
            i
        }
        function k(n, t) {
            function i(i) {
                if (n.hasOwnProperty(i)) {
                    if (n[i] === y)
                        throw hr("cdep", "Circular dependency found: {0}", i + " <- " + l.join(" <- "));
                    return n[i]
                }
                try {
                    return l.unshift(i),
                    n[i] = y,
                    n[i] = t(i)
                } catch (r) {
                    n[i] === y && delete n[i];
                    throw r;
                } finally {
                    l.shift()
                }
            }
            function r(n, t, r) {
                for (var e = [], s = ae(n), u, f = 0, h = s.length; f < h; f++) {
                    if (u = s[f],
                    typeof u != "string")
                        throw hr("itkn", "Incorrect injection token! Expected service name as string, got {0}", u);
                    e.push(r && r.hasOwnProperty(u) ? r[u] : i(u))
                }
                return o(n) && (n = n[h]),
                n.apply(t, e)
            }
            function f(n, t) {
                var f = function() {}, u, i;
                return f.prototype = (o(n) ? n[n.length - 1] : n).prototype,
                u = new f,
                i = r(n, u, t),
                a(i) || c(i) ? i : u
            }
            return {
                invoke: r,
                instantiate: f,
                get: i,
                annotate: ae,
                has: function(t) {
                    return u.hasOwnProperty(t + h) || n.hasOwnProperty(t)
                }
            }
        }
        var y = {}
          , h = "Provider"
          , l = []
          , d = new nr([],!0)
          , u = {
            $provide: {
                provider: i(w),
                factory: i(v),
                service: i(g),
                value: i(tt),
                constant: i(it),
                decorator: rt
            }
        }
          , t = u.$injector = k(u, function() {
            throw hr("unpr", "Unknown provider: {0}", l.join(" <- "));
        })
          , p = {}
          , f = p.$injector = k(p, function(n) {
            var i = t.get(n + h);
            return f.invoke(i.$get, i)
        });
        return r(b(n), function(n) {
            f.invoke(n || s)
        }),
        f
    }
    function rh() {
        var n = !0;
        this.disableAutoScrolling = function() {
            n = !1
        }
        ;
        this.$get = ["$window", "$location", "$rootScope", function(t, i, u) {
            function o(n) {
                var t = null;
                return r(n, function(n) {
                    t || v(n.nodeName) !== "a" || (t = n)
                }),
                t
            }
            function f() {
                var n = i.hash(), r;
                n ? (r = e.getElementById(n)) ? r.scrollIntoView() : (r = o(e.getElementsByName(n))) ? r.scrollIntoView() : n === "top" && t.scrollTo(0, 0) : t.scrollTo(0, 0)
            }
            var e = t.document;
            return n && u.$watch(function() {
                return i.hash()
            }, function() {
                u.$evalAsync(f)
            }),
            f
        }
        ]
    }
    function uh() {
        this.$get = ["$$rAF", "$timeout", function(n, t) {
            return n.supported ? function(t) {
                return n(t)
            }
            : function(n) {
                return t(n, 0, !1)
            }
        }
        ]
    }
    function fh(n, t, f, o) {
        function nt(n) {
            try {
                n.apply(null, au(arguments, 1))
            } finally {
                if (a--,
                a === 0)
                    while (b.length)
                        try {
                            b.pop()()
                        } catch (t) {
                            f.error(t)
                        }
            }
        }
        function ht(n, t) {
            (function i() {
                r(k, function(n) {
                    n()
                });
                ot = t(i, n)
            }
            )()
        }
        function v() {
            (ut = null,
            d != h.url()) && (d = h.url(),
            r(tt, function(n) {
                n(h.url())
            }))
        }
        var h = this, y = t[0], c = n.location, p = n.history, et = n.setTimeout, ct = n.clearTimeout, w = {}, a, b, k, ot, tt, it;
        h.isMock = !1;
        a = 0;
        b = [];
        h.$$completeOutstandingRequest = nt;
        h.$$incOutstandingRequestCount = function() {
            a++
        }
        ;
        h.notifyWhenNoOutstandingRequests = function(n) {
            r(k, function(n) {
                n()
            });
            a === 0 ? n() : b.push(n)
        }
        ;
        k = [];
        h.addPollFn = function(n) {
            return l(ot) && ht(100, et),
            k.push(n),
            n
        }
        ;
        var d = c.href
          , rt = t.find("base")
          , ut = null;
        h.url = function(t, i) {
            return c !== n.location && (c = n.location),
            p !== n.history && (p = n.history),
            t ? d == t ? void 0 : (d = t,
            o.history ? i ? p.replaceState(null, "", t) : (p.pushState(null, "", t),
            rt.attr("href", rt.attr("href"))) : (ut = t,
            i ? c.replace(t) : c.href = t),
            h) : ut || c.href.replace(/%27/g, "'")
        }
        ;
        tt = [];
        it = !1;
        h.onUrlChange = function(t) {
            if (!it) {
                if (o.history)
                    u(n).on("popstate", v);
                if (o.hashchange)
                    u(n).on("hashchange", v);
                else
                    h.addPollFn(v);
                it = !0
            }
            return tt.push(t),
            t
        }
        ;
        h.$$checkUrlChange = v;
        h.baseHref = function() {
            var n = rt.attr("href");
            return n ? n.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
        }
        ;
        var g = {}
          , ft = ""
          , st = h.baseHref();
        h.cookies = function(n, t) {
            var s, h, r, u, o;
            if (n)
                t === i ? y.cookie = escape(n) + "=;path=" + st + ";expires=Thu, 01 Jan 1970 00:00:00 GMT" : e(t) && (s = (y.cookie = escape(n) + "=" + escape(t) + ";path=" + st).length + 1,
                s > 4096 && f.warn("Cookie '" + n + "' possibly not set or overflowed because it was too large (" + s + " > 4096 bytes)!"));
            else {
                if (y.cookie !== ft)
                    for (ft = y.cookie,
                    h = ft.split("; "),
                    g = {},
                    u = 0; u < h.length; u++)
                        r = h[u],
                        o = r.indexOf("="),
                        o > 0 && (n = unescape(r.substring(0, o)),
                        g[n] === i && (g[n] = unescape(r.substring(o + 1))));
                return g
            }
        }
        ;
        h.defer = function(n, t) {
            var i;
            return a++,
            i = et(function() {
                delete w[i];
                nt(n)
            }, t || 0),
            w[i] = !0,
            i
        }
        ;
        h.defer.cancel = function(n) {
            return w[n] ? (delete w[n],
            ct(n),
            nt(s),
            !0) : !1
        }
    }
    function eh() {
        this.$get = ["$window", "$log", "$sniffer", "$document", function(n, t, i, r) {
            return new fh(n,r,t,i)
        }
        ]
    }
    function oh() {
        this.$get = function() {
            function t(t, i) {
                function a(n) {
                    n != f && (r ? r == n && (r = n.n) : r = n,
                    c(n.n, n.p),
                    c(n, f),
                    f = n,
                    f.n = null)
                }
                function c(n, t) {
                    n != t && (n && (n.p = t),
                    t && (t.n = n))
                }
                if (t in n)
                    throw y("$cacheFactory")("iid", "CacheId '{0}' is already taken!", t);
                var o = 0
                  , v = h({}, i, {
                    id: t
                })
                  , e = {}
                  , s = i && i.capacity || Number.MAX_VALUE
                  , u = {}
                  , f = null
                  , r = null;
                return n[t] = {
                    put: function(n, t) {
                        if (s < Number.MAX_VALUE) {
                            var i = u[n] || (u[n] = {
                                key: n
                            });
                            a(i)
                        }
                        if (!l(t))
                            return n in e || o++,
                            e[n] = t,
                            o > s && this.remove(r.key),
                            t
                    },
                    get: function(n) {
                        if (s < Number.MAX_VALUE) {
                            var t = u[n];
                            if (!t)
                                return;
                            a(t)
                        }
                        return e[n]
                    },
                    remove: function(n) {
                        if (s < Number.MAX_VALUE) {
                            var t = u[n];
                            if (!t)
                                return;
                            t == f && (f = t.p);
                            t == r && (r = t.n);
                            c(t.n, t.p);
                            delete u[n]
                        }
                        delete e[n];
                        o--
                    },
                    removeAll: function() {
                        e = {};
                        o = 0;
                        u = {};
                        f = r = null
                    },
                    destroy: function() {
                        e = null;
                        v = null;
                        u = null;
                        delete n[t]
                    },
                    info: function() {
                        return h({}, v, {
                            size: o
                        })
                    }
                }
            }
            var n = {};
            return t.info = function() {
                var t = {};
                return r(n, function(n, i) {
                    t[i] = n.info()
                }),
                t
            }
            ,
            t.get = function(t) {
                return n[t]
            }
            ,
            t
        }
    }
    function sh() {
        this.$get = ["$cacheFactory", function(n) {
            return n("templates")
        }
        ]
    }
    function ye(n, s) {
        var l = {}
          , v = "Directive"
          , y = /^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/
          , w = /(([\d\w_\-]+)(?:\:([^;]+))?;?)/
          , b = /^(on[a-z]+|formaction)$/;
        this.directive = function k(t, i) {
            return ii(t, "directive"),
            e(t) ? (pu(i, "directiveFactory"),
            l.hasOwnProperty(t) || (l[t] = [],
            n.factory(t + v, ["$injector", "$exceptionHandler", function(n, i) {
                var u = [];
                return r(l[t], function(r, f) {
                    try {
                        var e = n.invoke(r);
                        c(e) ? e = {
                            compile: nt(e)
                        } : !e.compile && e.link && (e.compile = nt(e.link));
                        e.priority = e.priority || 0;
                        e.index = f;
                        e.name = e.name || t;
                        e.require = e.require || e.controller && e.name;
                        e.restrict = e.restrict || "A";
                        u.push(e)
                    } catch (o) {
                        i(o)
                    }
                }),
                u
            }
            ])),
            l[t].push(i)) : r(t, ne(k)),
            this
        }
        ;
        this.aHrefSanitizationWhitelist = function(n) {
            return f(n) ? (s.aHrefSanitizationWhitelist(n),
            this) : s.aHrefSanitizationWhitelist()
        }
        ;
        this.imgSrcSanitizationWhitelist = function(n) {
            return f(n) ? (s.imgSrcSanitizationWhitelist(n),
            this) : s.imgSrcSanitizationWhitelist()
        }
        ;
        this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$http", "$templateCache", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri", function(n, f, s, k, d, nt, tt, rt, ut, et, st, ht) {
            function wt(n, t, i, f, e) {
                n instanceof u || (n = u(n));
                r(n, function(t, i) {
                    t.nodeType == 3 && t.nodeValue.match(/\S+/) && (n[i] = t = u(t).wrap("<span><\/span>").parent()[0])
                });
                var o = bt(n, t, n, i, f, e);
                return lt(n, "ng-scope"),
                function(t, i, u, f) {
                    var e, s, c, l, h;
                    for (pu(t, "scope"),
                    e = i ? ui.clone.call(n) : n,
                    r(u, function(n, t) {
                        e.data("$" + t + "Controller", n)
                    }),
                    s = 0,
                    c = e.length; s < c; s++)
                        l = e[s],
                        h = l.nodeType,
                        (h === 1 || h === 9) && e.eq(s).data("$scope", t);
                    return i && i(e, t),
                    o && o(t, e, e, f),
                    e
                }
            }
            function lt(n, t) {
                try {
                    n.addClass(t)
                } catch (i) {}
            }
            function bt(n, t, r, f, e, o) {
                function w(n, r, f, e) {
                    for (var s, h, l, a, y, v, p, w = r.length, b = new Array(w), o = 0; o < w; o++)
                        b[o] = r[o];
                    for (o = 0,
                    v = 0,
                    y = c.length; o < y; v++)
                        l = b[v],
                        s = c[o++],
                        h = c[o++],
                        s ? (s.scope ? (a = n.$new(),
                        u.data(l, "$scope", a)) : a = n,
                        p = s.transcludeOnThisElement ? vt(n, s.transclude, e) : !s.templateOnThisElement && e ? e : !e && t ? vt(n, t) : null,
                        s(h, a, l, f, p)) : h && h(n, l.childNodes, i, e)
                }
                for (var c = [], l, a, s, v, y, p, h = 0; h < n.length; h++)
                    l = new dt,
                    a = kt(n[h], [], l, h === 0 ? f : i, e),
                    s = a.length ? ii(a, n[h], l, t, r, null, [], [], o) : null,
                    s && s.scope && lt(l.$$element, "ng-scope"),
                    y = s && s.terminal || !(v = n[h].childNodes) || !v.length ? null : bt(v, s ? (s.transcludeOnThisElement || !s.templateOnThisElement) && s.transclude : t),
                    c.push(s, y),
                    p = p || s || y,
                    o = null;
                return p ? w : null
            }
            function vt(n, t, i) {
                return function(r, u, f) {
                    var o = !1, e;
                    if (r || (r = n.$new(),
                    r.$$transcluded = !0,
                    o = !0),
                    e = t(r, u, f, i),
                    o)
                        e.on("$destroy", function() {
                            r.$destroy()
                        });
                    return e
                }
            }
            function kt(n, t, i, r, u) {
                var it = n.nodeType, rt = i.$attr, s, h, a, v, nt;
                switch (it) {
                case 1:
                    yt(t, ct(ai(n).toLowerCase()), "E", r, u);
                    for (var l, o, f, c, b, tt, k = n.attributes, d = 0, ut = k && k.length; d < ut; d++)
                        a = !1,
                        v = !1,
                        l = k[d],
                        (!p || p >= 8 || l.specified) && (o = l.name,
                        b = g(l.value),
                        c = ct(o),
                        (tt = bi.test(c)) && (o = br(c.substr(6), "-")),
                        nt = c.replace(/(Start|End)$/, ""),
                        c === nt + "Start" && (a = o,
                        v = o.substr(0, o.length - 5) + "end",
                        o = o.substr(0, o.length - 6)),
                        f = ct(o.toLowerCase()),
                        rt[f] = o,
                        (tt || !i.hasOwnProperty(f)) && (i[f] = b,
                        le(n, f) && (i[f] = !0)),
                        wi(n, t, b, f),
                        yt(t, f, "A", r, u, a, v));
                    if (h = n.className,
                    e(h) && h !== "")
                        while (s = w.exec(h))
                            f = ct(s[2]),
                            yt(t, f, "C", r, u) && (i[f] = g(s[3])),
                            h = h.substr(s.index + s[0].length);
                    break;
                case 3:
                    vi(t, n.nodeValue);
                    break;
                case 8:
                    try {
                        s = y.exec(n.nodeValue);
                        s && (f = ct(s[1]),
                        yt(t, f, "M", r, u) && (i[f] = g(s[2])))
                    } catch (ft) {}
                }
                return t.sort(li),
                t
            }
            function gt(n, t, i) {
                var r = [], f = 0, e;
                if (t && n.hasAttribute && n.hasAttribute(t)) {
                    e = n;
                    do {
                        if (!n)
                            throw it("uterdir", "Unterminated attribute, found '{0}' but no matching '{1}' found.", t, i);
                        n.nodeType == 1 && (n.hasAttribute(t) && f++,
                        n.hasAttribute(i) && f--);
                        r.push(n);
                        n = n.nextSibling
                    } while (f > 0)
                } else
                    r.push(n);
                return u(r)
            }
            function ti(n, t, i) {
                return function(r, u, f, e, o) {
                    return u = gt(u[0], t, i),
                    n(r, u, f, e, o)
                }
            }
            function ii(n, h, l, v, y, p, w, b, k) {
                function gi(n, t, i, r) {
                    n && (i && (n = ti(n, i, r)),
                    n.require = d.require,
                    n.directiveName = st,
                    (rt === d || d.$$isolateScope) && (n = ei(n, {
                        isolateScope: !0
                    })),
                    w.push(n));
                    t && (i && (t = ti(t, i, r)),
                    t.require = d.require,
                    t.directiveName = st,
                    (rt === d || d.$$isolateScope) && (t = ei(t, {
                        isolateScope: !0
                    })),
                    b.push(t))
                }
                function bi(n, t, i, u) {
                    var f, s = "data", h = !1;
                    if (e(t)) {
                        while ((f = t.charAt(0)) == "^" || f == "?")
                            t = t.substr(1),
                            f == "^" && (s = "inheritedData"),
                            h = h || f == "?";
                        if (f = null,
                        u && s === "data" && (f = u[t]),
                        f = f || i[s]("$" + t + "Controller"),
                        !f && !h)
                            throw it("ctreq", "Controller '{0}', required by directive '{1}', can't be found!", t, n);
                        return f
                    }
                    return o(t) && (f = [],
                    r(t, function(t) {
                        f.push(bi(n, t, i, u))
                    })),
                    f
                }
                function yt(n, t, e, o, c) {
                    function at(n, t) {
                        var r;
                        return arguments.length < 2 && (t = n,
                        n = i),
                        pi && (r = g),
                        c(n, t, r)
                    }
                    var v, y, k, st, p, d, a, g = {}, ut, ht, et;
                    for (v = h === e ? l : ft(l, new dt(u(e),l.$attr)),
                    y = v.$$element,
                    rt && (ht = /^\s*([@=&])(\??)\s*(\w*)\s*$/,
                    a = t.$new(!0),
                    vt && (vt === rt || vt === rt.$$originalDirective) ? y.data("$isolateScope", a) : y.data("$isolateScopeNoTemplate", a),
                    lt(y, "ng-isolate-scope"),
                    r(rt.scope, function(n, i) {
                        var o = n.match(ht) || [], r = o[3] || i, l = o[2] == "?", h = o[1], e, u, c, s;
                        a.$$isolateBindings[i] = h + r;
                        switch (h) {
                        case "@":
                            v.$observe(r, function(n) {
                                a[i] = n
                            });
                            v.$$observers[r].$$scope = t;
                            v[r] && (a[i] = f(v[r])(t));
                            break;
                        case "=":
                            if (l && !v[r])
                                return;
                            u = nt(v[r]);
                            s = u.literal ? ni : function(n, t) {
                                return n === t || n !== n && t !== t
                            }
                            ;
                            c = u.assign || function() {
                                e = a[i] = u(t);
                                throw it("nonassign", "Expression '{0}' used with directive '{1}' is non-assignable!", v[r], rt.name);
                            }
                            ;
                            e = a[i] = u(t);
                            a.$watch(function() {
                                var n = u(t);
                                return s(n, a[i]) || (s(n, e) ? c(t, n = a[i]) : a[i] = n),
                                e = n
                            }, null, u.literal);
                            break;
                        case "&":
                            u = nt(v[r]);
                            a[i] = function(n) {
                                return u(t, n)
                            }
                            ;
                            break;
                        default:
                            throw it("iscp", "Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}", rt.name, i, n);
                        }
                    })),
                    ut = c && at,
                    bt && r(bt, function(n) {
                        var r = {
                            $scope: n === rt || n.$$isolateScope ? a : t,
                            $element: y,
                            $attrs: v,
                            $transclude: ut
                        }, i;
                        d = n.controller;
                        d == "@" && (d = v[n.name]);
                        i = tt(d, r);
                        g[n.name] = i;
                        pi || y.data("$" + n.name + "Controller", i);
                        n.controllerAs && (r.$scope[n.controllerAs] = i)
                    }),
                    k = 0,
                    st = w.length; k < st; k++)
                        try {
                            p = w[k];
                            p(p.isolateScope ? a : t, y, v, p.require && bi(p.directiveName, p.require, y, g), ut)
                        } catch (ct) {
                            s(ct, ot(y))
                        }
                    for (et = t,
                    rt && (rt.template || rt.templateUrl === null) && (et = a),
                    n && n(et, e.childNodes, i, c),
                    k = b.length - 1; k >= 0; k--)
                        try {
                            p = b[k];
                            p(p.isolateScope ? a : t, y, v, p.require && bi(p.directiveName, p.require, y, g), ut)
                        } catch (ct) {
                            s(ct, ot(y))
                        }
                }
                var ct, li, ui, ai;
                k = k || {};
                var oi = -Number.MAX_VALUE, vi, bt = k.controllerDirectives, rt = k.newIsolateScopeDirective, vt = k.templateDirective, yi = k.nonTlbTranscludeDirective, ki = !1, di = !1, pi = k.hasElementTranscludeDirective, ut = l.$$element = u(h), d, st, ht, wi = p, si = v, ii, et;
                for (ct = 0,
                li = n.length; ct < li; ct++) {
                    if (d = n[ct],
                    ui = d.$$start,
                    ai = d.$$end,
                    ui && (ut = gt(h, ui, ai)),
                    ht = i,
                    oi > d.priority)
                        break;
                    if ((et = d.scope) && (vi = vi || d,
                    d.templateUrl || (at("new/isolated scope", rt, d, ut),
                    a(et) && (rt = d))),
                    st = d.name,
                    !d.templateUrl && d.controller && (et = d.controller,
                    bt = bt || {},
                    at("'" + st + "' controller", bt[st], d, ut),
                    bt[st] = d),
                    (et = d.transclude) && (ki = !0,
                    d.$$tlb || (at("transclusion", yi, d, ut),
                    yi = d),
                    et == "element" ? (pi = !0,
                    oi = d.priority,
                    ht = ut,
                    ut = l.$$element = u(t.createComment(" " + st + ": " + l[st] + " ")),
                    h = ut[0],
                    pt(y, au(ht), h),
                    si = wt(ht, v, oi, wi && wi.name, {
                        nonTlbTranscludeDirective: yi
                    })) : (ht = u(du(h)).contents(),
                    ut.empty(),
                    si = wt(ht, v))),
                    d.template)
                        if (di = !0,
                        at("template", vt, d, ut),
                        vt = d,
                        et = c(d.template) ? d.template(ut, l) : d.template,
                        et = hi(et),
                        d.replace) {
                            if (wi = d,
                            ht = ku(et) ? [] : u(g(et)),
                            h = ht[0],
                            ht.length != 1 || h.nodeType !== 1)
                                throw it("tplrt", "Template for directive '{0}' must have exactly one root element. {1}", st, "");
                            pt(y, ut, h);
                            var nr = {
                                $attr: {}
                            }
                              , tr = kt(h, [], nr)
                              , ir = n.splice(ct + 1, n.length - (ct + 1));
                            rt && ri(tr);
                            n = n.concat(tr).concat(ir);
                            fi(l, nr);
                            li = n.length
                        } else
                            ut.html(et);
                    if (d.templateUrl)
                        di = !0,
                        at("template", vt, d, ut),
                        vt = d,
                        d.replace && (wi = d),
                        yt = ci(n.splice(ct, n.length - ct), ut, l, y, ki && si, w, b, {
                            controllerDirectives: bt,
                            newIsolateScopeDirective: rt,
                            templateDirective: vt,
                            nonTlbTranscludeDirective: yi
                        }),
                        li = n.length;
                    else if (d.compile)
                        try {
                            ii = d.compile(ut, l, si);
                            c(ii) ? gi(null, ii, ui, ai) : ii && gi(ii.pre, ii.post, ui, ai)
                        } catch (rr) {
                            s(rr, ot(ut))
                        }
                    d.terminal && (yt.terminal = !0,
                    oi = Math.max(oi, d.priority))
                }
                return yt.scope = vi && vi.scope === !0,
                yt.transcludeOnThisElement = ki,
                yt.templateOnThisElement = di,
                yt.transclude = si,
                k.hasElementTranscludeDirective = pi,
                yt
            }
            function ri(n) {
                for (var t = 0, i = n.length; t < i; t++)
                    n[t] = ie(n[t], {
                        $$isolateScope: !0
                    })
            }
            function yt(t, r, u, f, e, o, h) {
                var a;
                if (r === e)
                    return null;
                if (a = null,
                l.hasOwnProperty(r))
                    for (var c, p = n.get(r + v), y = 0, w = p.length; y < w; y++)
                        try {
                            c = p[y];
                            (f === i || f > c.priority) && c.restrict.indexOf(u) != -1 && (o && (c = ie(c, {
                                $$start: o,
                                $$end: h
                            })),
                            t.push(c),
                            a = c)
                        } catch (b) {
                            s(b)
                        }
                return a
            }
            function fi(n, t) {
                var u = t.$attr
                  , f = n.$attr
                  , i = n.$$element;
                r(n, function(i, r) {
                    r.charAt(0) != "$" && (t[r] && t[r] !== i && (i += (r === "style" ? ";" : " ") + t[r]),
                    n.$set(r, i, !0, u[r]))
                });
                r(t, function(t, r) {
                    r == "class" ? (lt(i, t),
                    n["class"] = (n["class"] ? n["class"] + " " : "") + t) : r == "style" ? (i.attr("style", i.attr("style") + ";" + t),
                    n.style = (n.style ? n.style + ";" : "") + t) : r.charAt(0) == "$" || n.hasOwnProperty(r) || (n[r] = t,
                    f[r] = u[r])
                })
            }
            function ci(n, t, i, f, e, o, s, l) {
                var v = [], p, w, b = t[0], y = n.shift(), tt = h({}, y, {
                    templateUrl: null,
                    transclude: null,
                    replace: null,
                    $$originalDirective: y
                }), nt = c(y.templateUrl) ? y.templateUrl(t, i) : y.templateUrl;
                return t.empty(),
                k.get(et.getTrustedResourceUrl(nt), {
                    cache: d
                }).success(function(h) {
                    var c, d, rt, et, ut, ot;
                    if (h = hi(h),
                    y.replace) {
                        if (rt = ku(h) ? [] : u(g(h)),
                        c = rt[0],
                        rt.length != 1 || c.nodeType !== 1)
                            throw it("tplrt", "Template for directive '{0}' must have exactly one root element. {1}", y.name, nt);
                        d = {
                            $attr: {}
                        };
                        pt(f, t, c);
                        ut = kt(c, [], d);
                        a(y.scope) && ri(ut);
                        n = ut.concat(n);
                        fi(i, d)
                    } else
                        c = b,
                        t.html(h);
                    for (n.unshift(tt),
                    p = ii(n, c, i, e, t, y, o, s, l),
                    r(f, function(n, i) {
                        n == c && (f[i] = t[0])
                    }),
                    w = bt(t[0].childNodes, e); v.length; ) {
                        var st = v.shift()
                          , ft = v.shift()
                          , ct = v.shift()
                          , ht = v.shift()
                          , k = t[0];
                        ft !== b && (ot = ft.className,
                        l.hasElementTranscludeDirective && y.replace || (k = du(c)),
                        pt(ct, u(ft), k),
                        lt(u(k), ot));
                        et = p.transcludeOnThisElement ? vt(st, p.transclude, ht) : ht;
                        p(w, st, k, f, et)
                    }
                    v = null
                }).error(function(n, t, i, r) {
                    throw it("tpload", "Failed to load template: {0}", r.url);
                }),
                function(n, t, i, r, u) {
                    var f = u;
                    v ? (v.push(t),
                    v.push(i),
                    v.push(r),
                    v.push(f)) : (p.transcludeOnThisElement && (f = vt(t, p.transclude, u)),
                    p(w, t, i, r, f))
                }
            }
            function li(n, t) {
                var i = t.priority - n.priority;
                return i !== 0 ? i : n.name !== t.name ? n.name < t.name ? -1 : 1 : n.index - t.index
            }
            function at(n, t, i, r) {
                if (t)
                    throw it("multidir", "Multiple directives [{0}, {1}] asking for {2} on: {3}", t.name, i.name, n, ot(r));
            }
            function vi(n, t) {
                var i = f(t, !0);
                i && n.push({
                    priority: 0,
                    compile: function(n) {
                        var r = n.parent()
                          , t = r.length;
                        return t && lt(n.parent(), "ng-binding"),
                        function(n, r) {
                            var u = r.parent()
                              , f = u.data("$binding") || [];
                            f.push(i);
                            u.data("$binding", f);
                            t || lt(u, "ng-binding");
                            n.$watch(i, function(n) {
                                r[0].nodeValue = n
                            })
                        }
                    }
                })
            }
            function yi(n, t) {
                if (t == "srcdoc")
                    return et.HTML;
                var i = ai(n);
                if (t == "xlinkHref" || i == "FORM" && t == "action" || i != "IMG" && (t == "src" || t == "ngSrc"))
                    return et.RESOURCE_URL
            }
            function wi(n, t, i, r) {
                var u = f(i, !0);
                if (u) {
                    if (r === "multiple" && ai(n) === "SELECT")
                        throw it("selmulti", "Binding to the 'multiple' attribute is not supported. Element: {0}", ot(n));
                    t.push({
                        priority: 100,
                        compile: function() {
                            return {
                                pre: function(t, i, e) {
                                    var o = e.$$observers || (e.$$observers = {});
                                    if (b.test(r))
                                        throw it("nodomevents", "Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");
                                    (u = f(e[r], !0, yi(n, r)),
                                    u) && (e[r] = u(t),
                                    (o[r] || (o[r] = [])).$$inter = !0,
                                    (e.$$observers && e.$$observers[r].$$scope || t).$watch(u, function(n, t) {
                                        r === "class" && n != t ? e.$updateClass(n, t) : e.$set(r, n)
                                    }))
                                }
                            }
                        }
                    })
                }
            }
            function pt(n, i, r) {
                var e = i[0], a = i.length, v = e.parentNode, f, y, h, o, p, c;
                if (n)
                    for (f = 0,
                    y = n.length; f < y; f++)
                        if (n[f] == e) {
                            n[f++] = r;
                            for (var s = f, l = s + a - 1, w = n.length; s < w; s++,
                            l++)
                                l < w ? n[s] = n[l] : delete n[s];
                            n.length -= a - 1;
                            break
                        }
                for (v && v.replaceChild(r, e),
                h = t.createDocumentFragment(),
                h.appendChild(e),
                r[u.expando] = e[u.expando],
                o = 1,
                p = i.length; o < p; o++)
                    c = i[o],
                    u(c).remove(),
                    h.appendChild(c),
                    delete i[o];
                i[0] = r;
                i.length = 1
            }
            function ei(n, t) {
                return h(function() {
                    return n.apply(null, arguments)
                }, n, t)
            }
            var dt = function(n, t) {
                this.$$element = n;
                this.$attr = t || {}
            };
            dt.prototype = {
                $normalize: ct,
                $addClass: function(n) {
                    n && n.length > 0 && st.addClass(this.$$element, n)
                },
                $removeClass: function(n) {
                    n && n.length > 0 && st.removeClass(this.$$element, n)
                },
                $updateClass: function(n, t) {
                    var i = pe(n, t)
                      , r = pe(t, n);
                    i.length === 0 ? st.removeClass(this.$$element, r) : r.length === 0 ? st.addClass(this.$$element, i) : st.setClass(this.$$element, i, r)
                },
                $set: function(n, t, u, f) {
                    var h = le(this.$$element[0], n), e, o;
                    h && (this.$$element.prop(n, t),
                    f = h);
                    this[n] = t;
                    f ? this.$attr[n] = f : (f = this.$attr[n],
                    f || (this.$attr[n] = f = br(n, "-")));
                    e = ai(this.$$element);
                    (e === "A" && n === "href" || e === "IMG" && n === "src") && (this[n] = t = ht(t, n === "src"));
                    u !== !1 && (t === null || t === i ? this.$$element.removeAttr(f) : this.$$element.attr(f, t));
                    o = this.$$observers;
                    o && r(o[n], function(n) {
                        try {
                            n(t)
                        } catch (i) {
                            s(i)
                        }
                    })
                },
                $observe: function(n, t) {
                    var i = this
                      , r = i.$$observers || (i.$$observers = {})
                      , u = r[n] || (r[n] = []);
                    return u.push(t),
                    rt.$evalAsync(function() {
                        u.$$inter || t(i[n])
                    }),
                    t
                }
            };
            var oi = f.startSymbol()
              , si = f.endSymbol()
              , hi = oi == "{{" || si == "}}" ? pi : function(n) {
                return n.replace(/\{\{/g, oi).replace(/}}/g, si)
            }
              , bi = /^ngAttr[A-Z]/;
            return wt
        }
        ]
    }
    function ct(n) {
        return gi(n.replace(ko, ""))
    }
    function pe(n, t) {
        var u = "", e = n.split(/\s+/), o = t.split(/\s+/), i, f, r;
        n: for (i = 0; i < e.length; i++) {
            for (f = e[i],
            r = 0; r < o.length; r++)
                if (f == o[r])
                    continue n;
            u += (u.length > 0 ? " " : "") + f
        }
        return u
    }
    function hh() {
        var n = {}
          , t = /^(\S+)(\s+as\s+(\w+))?$/;
        this.register = function(t, i) {
            ii(t, "controller");
            a(t) ? h(n, t) : n[t] = i
        }
        ;
        this.$get = ["$injector", "$window", function(i, r) {
            return function(u, f) {
                var h, c, o, s;
                if (e(u) && (c = u.match(t),
                o = c[1],
                s = c[3],
                u = n.hasOwnProperty(o) ? n[o] : oe(f.$scope, o, !0) || oe(r, o, !0),
                di(u, o, !0)),
                h = i.instantiate(u, f),
                s) {
                    if (!(f && typeof f.$scope == "object"))
                        throw y("$controller")("noscp", "Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.", o || u.name, s);
                    f.$scope[s] = h
                }
                return h
            }
        }
        ]
    }
    function ch() {
        this.$get = ["$window", function(n) {
            return u(n.document)
        }
        ]
    }
    function lh() {
        this.$get = ["$log", function(n) {
            return function() {
                n.error.apply(n, arguments)
            }
        }
        ]
    }
    function we(n) {
        var t = {}, i, u, f;
        return n ? (r(n.split("\n"), function(n) {
            f = n.indexOf(":");
            i = v(g(n.substr(0, f)));
            u = g(n.substr(f + 1));
            i && (t[i] = t[i] ? t[i] + ", " + u : u)
        }),
        t) : t
    }
    function be(n) {
        var t = a(n) ? n : i;
        return function(i) {
            return (t || (t = we(n)),
            i) ? t[v(i)] || null : t
        }
    }
    function ke(n, t, i) {
        return c(i) ? i(n, t) : (r(i, function(i) {
            n = i(n, t)
        }),
        n)
    }
    function uf(n) {
        return 200 <= n && n < 300
    }
    function ah() {
        var u = /^\s*(\[|\{[^\{])/
          , s = /[\}\]]\s*$/
          , y = /^\)\]\}',?\n/
          , t = {
            "Content-Type": "application/json;charset=utf-8"
        }
          , n = this.defaults = {
            transformResponse: [function(n) {
                return e(n) && (n = n.replace(y, ""),
                u.test(n) && s.test(n) && (n = re(n))),
                n
            }
            ],
            transformRequest: [function(n) {
                return a(n) && !cs(n) && !ls(n) ? et(n) : n
            }
            ],
            headers: {
                common: {
                    Accept: "application/json, text/plain, */*"
                },
                post: ft(t),
                put: ft(t),
                patch: ft(t)
            },
            xsrfCookieName: "XSRF-TOKEN",
            xsrfHeaderName: "X-XSRF-TOKEN"
        }
          , p = this.interceptors = []
          , w = this.responseInterceptors = [];
        this.$get = ["$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector", function(t, u, s, y, b, k) {
            function d(t) {
                function s(n) {
                    var t = h({}, n, {
                        data: ke(n.data, n.headers, f.transformResponse)
                    });
                    return uf(n.status) ? t : b.reject(t)
                }
                function p(t) {
                    function s(n) {
                        var t;
                        r(n, function(i, r) {
                            c(i) && (t = i(),
                            t != null ? n[r] = t : delete n[r])
                        })
                    }
                    var i = n.headers, u = h({}, t.headers), f, e, o;
                    i = h({}, i.common, i[v(t.method)]);
                    n: for (f in i) {
                        e = v(f);
                        for (o in u)
                            if (v(o) === e)
                                continue n;
                        u[f] = i[f]
                    }
                    return s(u),
                    u
                }
                var f = {
                    method: "get",
                    transformRequest: n.transformRequest,
                    transformResponse: n.transformResponse
                }, e = p(t), a, y;
                h(f, t);
                f.headers = e;
                f.method = ri(f.method);
                var w = function(t) {
                    e = t.headers;
                    var i = ke(t.data, be(e), t.transformRequest);
                    return l(i) && r(e, function(n, t) {
                        v(t) === "content-type" && delete e[t]
                    }),
                    l(t.withCredentials) && !l(n.withCredentials) && (t.withCredentials = n.withCredentials),
                    it(t, i, e).then(s, s)
                }
                  , o = [w, i]
                  , u = b.when(f);
                for (r(g, function(n) {
                    (n.request || n.requestError) && o.unshift(n.request, n.requestError);
                    (n.response || n.responseError) && o.push(n.response, n.responseError)
                }); o.length; )
                    a = o.shift(),
                    y = o.shift(),
                    u = u.then(a, y);
                return u.success = function(n) {
                    return u.then(function(t) {
                        n(t.data, t.status, t.headers, f)
                    }),
                    u
                }
                ,
                u.error = function(n) {
                    return u.then(null, function(t) {
                        n(t.data, t.status, t.headers, f)
                    }),
                    u
                }
                ,
                u
            }
            function nt() {
                r(arguments, function(n) {
                    d[n] = function(t, i) {
                        return d(h(i || {}, {
                            method: n,
                            url: t
                        }))
                    }
                })
            }
            function tt() {
                r(arguments, function(n) {
                    d[n] = function(t, i, r) {
                        return d(h(r || {}, {
                            method: n,
                            url: t,
                            data: i
                        }))
                    }
                })
            }
            function it(r, e, s) {
                function tt(n, t, i, r) {
                    c && (uf(n) ? c.put(v, [n, t, we(i), r]) : c.remove(v));
                    w(t, n, i, r);
                    y.$$phase || y.$apply()
                }
                function w(n, t, i, u) {
                    t = Math.max(t, 0);
                    (uf(t) ? k.resolve : k.reject)({
                        data: n,
                        status: t,
                        headers: be(i),
                        config: r,
                        statusText: u
                    })
                }
                function p() {
                    var n = wi(d.pendingRequests, r);
                    n !== -1 && d.pendingRequests.splice(n, 1)
                }
                var k = b.defer(), g = k.promise, c, h, v = rt(r.url, r.params), nt;
                if (d.pendingRequests.push(r),
                g.then(p, p),
                (r.cache || n.cache) && r.cache !== !1 && (r.method === "GET" || r.method === "JSONP") && (c = a(r.cache) ? r.cache : a(n.cache) ? n.cache : ut),
                c)
                    if (h = c.get(v),
                    f(h)) {
                        if (pr(h))
                            return h.then(p, p),
                            h;
                        o(h) ? w(h[1], h[0], ft(h[2]), h[3]) : w(h, 200, {}, "OK")
                    } else
                        c.put(v, g);
                return l(h) && (nt = fo(r.url) ? u.cookies()[r.xsrfCookieName || n.xsrfCookieName] : i,
                nt && (s[r.xsrfHeaderName || n.xsrfHeaderName] = nt),
                t(r.method, v, e, tt, s, r.timeout, r.withCredentials, r.responseType)),
                g
            }
            function rt(n, t) {
                if (!t)
                    return n;
                var i = [];
                return hs(t, function(n, t) {
                    n === null || l(n) || (o(n) || (n = [n]),
                    r(n, function(n) {
                        a(n) && (n = yt(n) ? n.toISOString() : et(n));
                        i.push(ti(t) + "=" + ti(n))
                    }))
                }),
                i.length > 0 && (n += (n.indexOf("?") == -1 ? "?" : "&") + i.join("&")),
                n
            }
            var ut = s("$http")
              , g = [];
            return r(p, function(n) {
                g.unshift(e(n) ? k.get(n) : k.invoke(n))
            }),
            r(w, function(n, t) {
                var i = e(n) ? k.get(n) : k.invoke(n);
                g.splice(t, 0, {
                    response: function(n) {
                        return i(b.when(n))
                    },
                    responseError: function(n) {
                        return i(b.reject(n))
                    }
                })
            }),
            d.pendingRequests = [],
            nt("get", "delete", "head", "jsonp"),
            tt("post", "put"),
            d.defaults = n,
            d
        }
        ]
    }
    function vh(t) {
        if (p <= 8 && (!t.match(/^(get|post|head|put|delete|options)$/i) || !n.XMLHttpRequest))
            return new n.ActiveXObject("Microsoft.XMLHTTP");
        if (n.XMLHttpRequest)
            return new n.XMLHttpRequest;
        throw y("$httpBackend")("noxhr", "This browser does not support XMLHttpRequest.");
    }
    function yh() {
        this.$get = ["$browser", "$window", "$document", function(n, t, i) {
            return ph(n, vh, n.defer, t.angular.callbacks, i[0])
        }
        ]
    }
    function ph(n, t, i, u, o) {
        function c(n, t, i) {
            var r = o.createElement("script")
              , f = null;
            return r.type = "text/javascript",
            r.src = n,
            r.async = !0,
            f = function(n) {
                sr(r, "load", f);
                sr(r, "error", f);
                o.body.removeChild(r);
                r = null;
                var e = -1
                  , s = "unknown";
                n && (n.type !== "load" || u[t].called || (n = {
                    type: "error"
                }),
                s = n.type,
                e = n.type === "error" ? 404 : 200);
                i && i(e, s)
            }
            ,
            ou(r, "load", f),
            ou(r, "error", f),
            p <= 8 && (r.onreadystatechange = function() {
                e(r.readyState) && /loaded|complete/.test(r.readyState) && (r.onreadystatechange = null,
                f({
                    type: "load"
                }))
            }
            ),
            o.body.appendChild(r),
            f
        }
        var h = -1;
        return function(e, o, l, a, y, w, b, k) {
            function rt() {
                nt = h;
                tt && tt();
                d && d.abort()
            }
            function ut(t, r, u, f, e) {
                it && i.cancel(it);
                tt = d = null;
                r === 0 && (r = u ? 200 : wt(o).protocol == "file" ? 404 : 0);
                r = r === 1223 ? 204 : r;
                e = e || "";
                t(r, u, f, e);
                n.$$completeOutstandingRequest(s)
            }
            var nt, g, tt, d, it;
            if (n.$$incOutstandingRequestCount(),
            o = o || n.url(),
            v(e) == "jsonp")
                g = "_" + (u.counter++).toString(36),
                u[g] = function(n) {
                    u[g].data = n;
                    u[g].called = !0
                }
                ,
                tt = c(o.replace("JSON_CALLBACK", "angular.callbacks." + g), g, function(n, t) {
                    ut(a, n, u[g].data, "", t);
                    u[g] = s
                });
            else {
                if (d = t(e),
                d.open(e, o, !0),
                r(y, function(n, t) {
                    f(n) && d.setRequestHeader(t, n)
                }),
                d.onreadystatechange = function() {
                    if (d && d.readyState == 4) {
                        var n = null
                          , t = null
                          , i = "";
                        nt !== h && (n = d.getAllResponseHeaders(),
                        t = "response"in d ? d.response : d.responseText);
                        nt === h && p < 10 || (i = d.statusText);
                        ut(a, nt || d.status, t, n, i)
                    }
                }
                ,
                b && (d.withCredentials = !0),
                k)
                    try {
                        d.responseType = k
                    } catch (ft) {
                        if (k !== "json")
                            throw ft;
                    }
                d.send(l || null)
            }
            w > 0 ? it = i(rt, w) : pr(w) && w.then(rt)
        }
    }
    function wh() {
        var n = "{{"
          , t = "}}";
        this.startSymbol = function(t) {
            return t ? (n = t,
            this) : n
        }
        ;
        this.endSymbol = function(n) {
            return n ? (t = n,
            this) : t
        }
        ;
        this.$get = ["$parse", "$exceptionHandler", "$sce", function(i, r, u) {
            function f(f, s, h) {
                for (var y, p, c = 0, l = [], a = f.length, b = !1, v, k, w = []; c < a; )
                    (y = f.indexOf(n, c)) != -1 && (p = f.indexOf(t, y + e)) != -1 ? (c != y && l.push(f.substring(c, y)),
                    l.push(v = i(k = f.substring(y + e, p))),
                    v.exp = k,
                    c = p + o,
                    b = !0) : (c != a && l.push(f.substring(c)),
                    c = a);
                if ((a = l.length) || (l.push(""),
                a = 1),
                h && l.length > 1)
                    throw af("noconcat", "Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce", f);
                if (!s || b)
                    return w.length = a,
                    v = function(n) {
                        var i, e, t, o;
                        try {
                            for (i = 0,
                            e = a; i < e; i++) {
                                if (typeof (t = l[i]) == "function")
                                    if (t = t(n),
                                    t = h ? u.getTrusted(h, t) : u.valueOf(t),
                                    t == null)
                                        t = "";
                                    else
                                        switch (typeof t) {
                                        case "string":
                                            break;
                                        case "number":
                                            t = "" + t;
                                            break;
                                        default:
                                            t = et(t)
                                        }
                                w[i] = t
                            }
                            return w.join("")
                        } catch (s) {
                            o = af("interr", "Can't interpolate: {0}\n{1}", f, s.toString());
                            r(o)
                        }
                    }
                    ,
                    v.exp = f,
                    v.parts = l,
                    v
            }
            var e = n.length
              , o = t.length;
            return f.startSymbol = function() {
                return n
            }
            ,
            f.endSymbol = function() {
                return t
            }
            ,
            f
        }
        ]
    }
    function bh() {
        this.$get = ["$rootScope", "$window", "$q", function(n, t, i) {
            function u(u, e, o, s) {
                var a = t.setInterval
                  , v = t.clearInterval
                  , c = i.defer()
                  , h = c.promise
                  , l = 0
                  , y = f(s) && !s;
                return o = f(o) ? o : 0,
                h.then(null, null, u),
                h.$$intervalId = a(function() {
                    c.notify(l++);
                    o > 0 && l >= o && (c.resolve(l),
                    v(h.$$intervalId),
                    delete r[h.$$intervalId]);
                    y || n.$apply()
                }, e),
                r[h.$$intervalId] = c,
                h
            }
            var r = {};
            return u.cancel = function(n) {
                return n && n.$$intervalId in r ? (r[n.$$intervalId].reject("canceled"),
                t.clearInterval(n.$$intervalId),
                delete r[n.$$intervalId],
                !0) : !1
            }
            ,
            u
        }
        ]
    }
    function kh() {
        this.$get = function() {
            return {
                id: "en-us",
                NUMBER_FORMATS: {
                    DECIMAL_SEP: ".",
                    GROUP_SEP: ",",
                    PATTERNS: [{
                        minInt: 1,
                        minFrac: 0,
                        maxFrac: 3,
                        posPre: "",
                        posSuf: "",
                        negPre: "-",
                        negSuf: "",
                        gSize: 3,
                        lgSize: 3
                    }, {
                        minInt: 1,
                        minFrac: 2,
                        maxFrac: 2,
                        posPre: "",
                        posSuf: "",
                        negPre: "(",
                        negSuf: ")",
                        gSize: 3,
                        lgSize: 3
                    }],
                    CURRENCY_SYM: "$"
                },
                DATETIME_FORMATS: {
                    MONTH: "January,February,March,April,May,June,July,August,September,October,November,December".split(","),
                    SHORTMONTH: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
                    DAY: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
                    SHORTDAY: "Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),
                    AMPMS: ["AM", "PM"],
                    medium: "MMM d, y h:mm:ss a",
                    short: "M/d/yy h:mm a",
                    fullDate: "EEEE, MMMM d, y",
                    longDate: "MMMM d, y",
                    mediumDate: "MMM d, y",
                    shortDate: "M/d/yy",
                    mediumTime: "h:mm:ss a",
                    shortTime: "h:mm a"
                },
                pluralCat: function(n) {
                    return n === 1 ? "one" : "other"
                }
            }
        }
    }
    function ff(n) {
        for (var t = n.split("/"), i = t.length; i--; )
            t[i] = wr(t[i]);
        return t.join("/")
    }
    function de(n, t, i) {
        var r = wt(n, i);
        t.$$protocol = r.protocol;
        t.$$host = r.hostname;
        t.$$port = k(r.port) || ta[r.protocol] || null
    }
    function ge(n, t, i) {
        var u = n.charAt(0) !== "/", r;
        u && (n = "/" + n);
        r = wt(n, i);
        t.$$path = decodeURIComponent(u && r.pathname.charAt(0) === "/" ? r.pathname.substring(1) : r.pathname);
        t.$$search = fe(r.search);
        t.$$hash = decodeURIComponent(r.hash);
        t.$$path && t.$$path.charAt(0) != "/" && (t.$$path = "/" + t.$$path)
    }
    function lt(n, t) {
        if (t.indexOf(n) === 0)
            return t.substr(n.length)
    }
    function tr(n) {
        var t = n.indexOf("#");
        return t == -1 ? n : n.substr(0, t)
    }
    function ef(n) {
        return n.substr(0, tr(n).lastIndexOf("/") + 1)
    }
    function dh(n) {
        return n.substring(0, n.indexOf("/", n.indexOf("//") + 2))
    }
    function no(n, t) {
        this.$$html5 = !0;
        t = t || "";
        var r = ef(n);
        de(n, this, n);
        this.$$parse = function(t) {
            var i = lt(r, t);
            if (!e(i))
                throw kf("ipthprfx", 'Invalid url "{0}", missing path prefix "{1}".', t, r);
            ge(i, this, n);
            this.$$path || (this.$$path = "/");
            this.$$compose()
        }
        ;
        this.$$compose = function() {
            var n = yu(this.$$search)
              , t = this.$$hash ? "#" + wr(this.$$hash) : "";
            this.$$url = ff(this.$$path) + (n ? "?" + n : "") + t;
            this.$$absUrl = r + this.$$url.substr(1)
        }
        ;
        this.$$rewrite = function(u) {
            var f, e;
            return (f = lt(n, u)) !== i ? (e = f,
            (f = lt(t, f)) !== i ? r + (lt("/", f) || f) : n + e) : (f = lt(r, u)) !== i ? r + f : r == u + "/" ? r : void 0
        }
    }
    function of(n, t) {
        var i = ef(n);
        de(n, this, n);
        this.$$parse = function(r) {
            function o(n, t, i) {
                var u = /^\/[A-Z]:(\/.*)/, r;
                return (t.indexOf(i) === 0 && (t = t.replace(i, "")),
                u.exec(t)) ? n : (r = u.exec(n),
                r ? r[1] : n)
            }
            var u = lt(n, r) || lt(i, r)
              , f = u.charAt(0) == "#" ? lt(t, u) : this.$$html5 ? u : "";
            if (!e(f))
                throw kf("ihshprfx", 'Invalid url "{0}", missing hash prefix "{1}".', r, t);
            ge(f, this, n);
            this.$$path = o(this.$$path, f, n);
            this.$$compose()
        }
        ;
        this.$$compose = function() {
            var i = yu(this.$$search)
              , r = this.$$hash ? "#" + wr(this.$$hash) : "";
            this.$$url = ff(this.$$path) + (i ? "?" + i : "") + r;
            this.$$absUrl = n + (this.$$url ? t + this.$$url : "")
        }
        ;
        this.$$rewrite = function(t) {
            if (tr(n) == tr(t))
                return t
        }
    }
    function sf(n, t) {
        this.$$html5 = !0;
        of.apply(this, arguments);
        var i = ef(n);
        this.$$rewrite = function(r) {
            var u;
            return n == tr(r) ? r : (u = lt(i, r)) ? n + t + u : i === r + "/" ? i : void 0
        }
        ;
        this.$$compose = function() {
            var i = yu(this.$$search)
              , r = this.$$hash ? "#" + wr(this.$$hash) : "";
            this.$$url = ff(this.$$path) + (i ? "?" + i : "") + r;
            this.$$absUrl = n + t + this.$$url
        }
    }
    function nu(n) {
        return function() {
            return this[n]
        }
    }
    function to(n, t) {
        return function(i) {
            return l(i) ? this[n] : (this[n] = t(i),
            this.$$compose(),
            this)
        }
    }
    function gh() {
        var t = ""
          , i = !1;
        this.hashPrefix = function(n) {
            return f(n) ? (t = n,
            this) : t
        }
        ;
        this.html5Mode = function(n) {
            return f(n) ? (i = n,
            this) : i
        }
        ;
        this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", function(r, f, e, o) {
            function p(n) {
                r.$broadcast("$locationChangeSuccess", s.absUrl(), n)
            }
            var s, c, b = f.baseHref(), l = f.url(), h, w, y;
            i ? (h = dh(l) + (b || "/"),
            c = e.history ? no : sf) : (h = tr(l),
            c = of);
            s = new c(h,"#" + t);
            s.$$parse(s.$$rewrite(l));
            w = /^\s*(javascript|mailto):/i;
            o.on("click", function(i) {
                var l, e, y, d, p, k, b, g;
                if (!i.ctrlKey && !i.metaKey && i.which != 2) {
                    for (l = u(i.target); v(l[0].nodeName) !== "a"; )
                        if (l[0] === o[0] || !(l = l.parent())[0])
                            return;
                    if (e = l.prop("href"),
                    a(e) && e.toString() === "[object SVGAnimatedString]" && (e = wt(e.animVal).href),
                    !w.test(e)) {
                        if (c === sf && (y = l.attr("href") || l.attr("xlink:href"),
                        y && y.indexOf("://") < 0))
                            if (d = "#" + t,
                            y[0] == "/")
                                e = h + d + y;
                            else if (y[0] == "#")
                                e = h + d + (s.path() || "/") + y;
                            else {
                                for (p = s.path().split("/"),
                                k = y.split("/"),
                                p.length !== 2 || p[1] || (p.length = 1),
                                b = 0; b < k.length; b++)
                                    if (k[b] == ".")
                                        continue;
                                    else
                                        k[b] == ".." ? p.pop() : k[b].length && p.push(k[b]);
                                e = h + d + p.join("/")
                            }
                        g = s.$$rewrite(e);
                        e && !l.attr("target") && g && !i.isDefaultPrevented() && (i.preventDefault(),
                        g != f.url() && (s.$$parse(g),
                        r.$apply(),
                        n.angular["ff-684208-preventDefault"] = !0))
                    }
                }
            });
            s.absUrl() != l && f.url(s.absUrl(), !0);
            f.onUrlChange(function(n) {
                s.absUrl() != n && (r.$evalAsync(function() {
                    var t = s.absUrl();
                    s.$$parse(n);
                    r.$broadcast("$locationChangeStart", n, t).defaultPrevented ? (s.$$parse(t),
                    f.url(t)) : p(t)
                }),
                r.$$phase || r.$digest())
            });
            return y = 0,
            r.$watch(function() {
                var n = f.url()
                  , t = s.$$replace;
                return y && n == s.absUrl() || (y++,
                r.$evalAsync(function() {
                    r.$broadcast("$locationChangeStart", s.absUrl(), n).defaultPrevented ? s.$$parse(n) : (f.url(s.absUrl(), t),
                    p(n))
                })),
                s.$$replace = !1,
                y
            }),
            s
        }
        ]
    }
    function nc() {
        var n = !0
          , t = this;
        this.debugEnabled = function(t) {
            return f(t) ? (n = t,
            this) : n
        }
        ;
        this.$get = ["$window", function(i) {
            function f(n) {
                return n instanceof Error && (n.stack ? n = n.message && n.stack.indexOf(n.message) === -1 ? "Error: " + n.message + "\n" + n.stack : n.stack : n.sourceURL && (n = n.message + "\n" + n.sourceURL + ":" + n.line)),
                n
            }
            function u(n) {
                var t = i.console || {}
                  , u = t[n] || t.log || s
                  , e = !1;
                try {
                    e = !!u.apply
                } catch (o) {}
                return e ? function() {
                    var n = [];
                    return r(arguments, function(t) {
                        n.push(f(t))
                    }),
                    u.apply(t, n)
                }
                : function(n, t) {
                    u(n, t == null ? "" : t)
                }
            }
            return {
                log: u("log"),
                info: u("info"),
                warn: u("warn"),
                error: u("error"),
                debug: function() {
                    var i = u("debug");
                    return function() {
                        n && i.apply(t, arguments)
                    }
                }()
            }
        }
        ]
    }
    function st(n, t) {
        if (n === "__defineGetter__" || n === "__defineSetter__" || n === "__lookupGetter__" || n === "__lookupSetter__" || n === "__proto__")
            throw rt("isecfld", "Attempting to access a disallowed field in Angular expressions! Expression: {0}", t);
        return n
    }
    function pt(n, t) {
        if (n)
            if (n.constructor === n)
                throw rt("isecfn", "Referencing Function in Angular expressions is disallowed! Expression: {0}", t);
            else if (n.document && n.location && n.alert && n.setInterval)
                throw rt("isecwindow", "Referencing the Window in Angular expressions is disallowed! Expression: {0}", t);
            else if (n.children && (n.nodeName || n.prop && n.attr && n.find))
                throw rt("isecdom", "Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}", t);
            else if (n === Object)
                throw rt("isecobj", "Referencing Object in Angular expressions is disallowed! Expression: {0}", t);
        return n
    }
    function tc(n, t) {
        if (n)
            if (n.constructor === n)
                throw rt("isecfn", "Referencing Function in Angular expressions is disallowed! Expression: {0}", t);
            else if (n === ia || n === ra || rs && n === rs)
                throw rt("isecff", "Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}", t);
    }
    function tu(n, t, r, u, f) {
        var s, e, h, o;
        for (pt(n, u),
        f = f || {},
        s = t.split("."),
        h = 0; s.length > 1; h++)
            e = st(s.shift(), u),
            o = pt(n[e], u),
            o || (o = {},
            n[e] = o),
            n = o,
            n.then && f.unwrapPromises && (dt(u),
            "$$v"in n || function(n) {
                n.then(function(t) {
                    n.$$v = t
                })
            }(n),
            n.$$v === i && (n.$$v = {}),
            n = n.$$v);
        return e = st(s.shift(), u),
        pt(n[e], u),
        n[e] = r,
        r
    }
    function io(n, t, r, u, f, e, o) {
        return st(n, e),
        st(t, e),
        st(r, e),
        st(u, e),
        st(f, e),
        o.unwrapPromises ? function(o, s) {
            var h = s && s.hasOwnProperty(n) ? s : o, c;
            return h == null ? h : (h = h[n],
            h && h.then && (dt(e),
            "$$v"in h || (c = h,
            c.$$v = i,
            c.then(function(n) {
                c.$$v = n
            })),
            h = h.$$v),
            !t) ? h : h == null ? i : (h = h[t],
            h && h.then && (dt(e),
            "$$v"in h || (c = h,
            c.$$v = i,
            c.then(function(n) {
                c.$$v = n
            })),
            h = h.$$v),
            !r) ? h : h == null ? i : (h = h[r],
            h && h.then && (dt(e),
            "$$v"in h || (c = h,
            c.$$v = i,
            c.then(function(n) {
                c.$$v = n
            })),
            h = h.$$v),
            !u) ? h : h == null ? i : (h = h[u],
            h && h.then && (dt(e),
            "$$v"in h || (c = h,
            c.$$v = i,
            c.then(function(n) {
                c.$$v = n
            })),
            h = h.$$v),
            !f) ? h : h == null ? i : (h = h[f],
            h && h.then && (dt(e),
            "$$v"in h || (c = h,
            c.$$v = i,
            c.then(function(n) {
                c.$$v = n
            })),
            h = h.$$v),
            h)
        }
        : function(e, o) {
            var s = o && o.hasOwnProperty(n) ? o : e;
            return s == null ? s : (s = s[n],
            !t) ? s : s == null ? i : (s = s[t],
            !r) ? s : s == null ? i : (s = s[r],
            !u) ? s : s == null ? i : (s = s[u],
            !f) ? s : s == null ? i : s[f]
        }
    }
    function ro(n, t, u) {
        var f, h, o, e, s;
        return fu.hasOwnProperty(n) ? fu[n] : (f = n.split("."),
        h = f.length,
        t.csp ? o = h < 6 ? io(f[0], f[1], f[2], f[3], f[4], u, t) : function(n, r) {
            var e = 0, o;
            do
                o = io(f[e++], f[e++], f[e++], f[e++], f[e++], u, t)(n, r),
                r = i,
                n = o;
            while (e < h);return o
        }
        : (e = "var p;\n",
        r(f, function(n, i) {
            st(n, u);
            e += "if(s == null) return undefined;\ns=" + (i ? "s" : '((k&&k.hasOwnProperty("' + n + '"))?k:s)') + '["' + n + '"];\n' + (t.unwrapPromises ? 'if (s && s.then) {\n pw("' + u.replace(/(["\r\n])/g, "\\$1") + '");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n' : "")
        }),
        e += "return s;",
        s = new Function("s","k","pw",e),
        s.toString = nt(e),
        o = t.unwrapPromises ? function(n, t) {
            return s(n, t, dt)
        }
        : s),
        n !== "hasOwnProperty" && (fu[n] = o),
        o)
    }
    function ic() {
        var t = {}
          , n = {
            csp: !1,
            unwrapPromises: !1,
            logPromiseWarnings: !0
        };
        this.unwrapPromises = function(t) {
            return f(t) ? (n.unwrapPromises = !!t,
            this) : n.unwrapPromises
        }
        ;
        this.logPromiseWarnings = function(t) {
            return f(t) ? (n.logPromiseWarnings = t,
            this) : n.logPromiseWarnings
        }
        ;
        this.$get = ["$filter", "$sniffer", "$log", function(i, r, u) {
            return n.csp = r.csp,
            dt = function(t) {
                n.logPromiseWarnings && !vf.hasOwnProperty(t) && (vf[t] = !0,
                u.warn("[$parse] Promise found in the expression `" + t + "`. Automatic unwrapping of promises in Angular expressions is deprecated."))
            }
            ,
            function(r) {
                var u, f, e;
                switch (typeof r) {
                case "string":
                    return t.hasOwnProperty(r) ? t[r] : (f = new df(n),
                    e = new li(f,i,n),
                    u = e.parse(r),
                    r !== "hasOwnProperty" && (t[r] = u),
                    u);
                case "function":
                    return r;
                default:
                    return s
                }
            }
        }
        ]
    }
    function rc() {
        this.$get = ["$rootScope", "$exceptionHandler", function(n, t) {
            return uc(function(t) {
                n.$evalAsync(t)
            }, t)
        }
        ]
    }
    function uc(n, t) {
        function f(n) {
            return n
        }
        function h(n) {
            return s(n)
        }
        function l(n) {
            var i = u()
              , f = 0
              , t = o(n) ? [] : {};
            return r(n, function(n, r) {
                f++;
                e(n).then(function(n) {
                    t.hasOwnProperty(r) || (t[r] = n,
                    --f || i.resolve(t))
                }, function(n) {
                    t.hasOwnProperty(r) || i.reject(n)
                })
            }),
            f === 0 && i.resolve(t),
            i.promise
        }
        var u = function() {
            var r = [], o, s;
            return s = {
                resolve: function(t) {
                    if (r) {
                        var u = r;
                        r = i;
                        o = e(t);
                        u.length && n(function() {
                            for (var n, t = 0, i = u.length; t < i; t++)
                                n = u[t],
                                o.then(n[0], n[1], n[2])
                        })
                    }
                },
                reject: function(n) {
                    s.resolve(a(n))
                },
                notify: function(t) {
                    if (r) {
                        var i = r;
                        r.length && n(function() {
                            for (var r, n = 0, u = i.length; n < u; n++)
                                r = i[n],
                                r[2](t)
                        })
                    }
                },
                promise: {
                    then: function(n, i, e) {
                        var s = u()
                          , l = function(i) {
                            try {
                                s.resolve((c(n) ? n : f)(i))
                            } catch (r) {
                                s.reject(r);
                                t(r)
                            }
                        }
                          , a = function(n) {
                            try {
                                s.resolve((c(i) ? i : h)(n))
                            } catch (r) {
                                s.reject(r);
                                t(r)
                            }
                        }
                          , v = function(n) {
                            try {
                                s.notify((c(e) ? e : f)(n))
                            } catch (i) {
                                t(i)
                            }
                        };
                        return r ? r.push([l, a, v]) : o.then(l, a, v),
                        s.promise
                    },
                    "catch": function(n) {
                        return this.then(null, n)
                    },
                    "finally": function(n) {
                        function t(n, t) {
                            var i = u();
                            return t ? i.resolve(n) : i.reject(n),
                            i.promise
                        }
                        function i(i, r) {
                            var u = null;
                            try {
                                u = (n || f)()
                            } catch (e) {
                                return t(e, !1)
                            }
                            return pr(u) ? u.then(function() {
                                return t(i, r)
                            }, function(n) {
                                return t(n, !1)
                            }) : t(i, r)
                        }
                        return this.then(function(n) {
                            return i(n, !0)
                        }, function(n) {
                            return i(n, !1)
                        })
                    }
                }
            }
        }
          , e = function(t) {
            return pr(t) ? t : {
                then: function(i) {
                    var r = u();
                    return n(function() {
                        r.resolve(i(t))
                    }),
                    r.promise
                }
            }
        }
          , s = function(n) {
            var t = u();
            return t.reject(n),
            t.promise
        }
          , a = function(i) {
            return {
                then: function(r, f) {
                    var e = u();
                    return n(function() {
                        try {
                            e.resolve((c(f) ? f : h)(i))
                        } catch (n) {
                            e.reject(n);
                            t(n)
                        }
                    }),
                    e.promise
                }
            }
        }
          , v = function(i, r, o, l) {
            var v = u(), a, w = function(n) {
                try {
                    return (c(r) ? r : f)(n)
                } catch (i) {
                    return t(i),
                    s(i)
                }
            }, y = function(n) {
                try {
                    return (c(o) ? o : h)(n)
                } catch (i) {
                    return t(i),
                    s(i)
                }
            }, p = function(n) {
                try {
                    return (c(l) ? l : f)(n)
                } catch (i) {
                    t(i)
                }
            };
            return n(function() {
                e(i).then(function(n) {
                    a || (a = !0,
                    v.resolve(e(n).then(w, y, p)))
                }, function(n) {
                    a || (a = !0,
                    v.resolve(y(n)))
                }, function(n) {
                    a || v.notify(p(n))
                })
            }),
            v.promise
        };
        return {
            defer: u,
            reject: s,
            when: v,
            all: l
        }
    }
    function fc() {
        this.$get = ["$window", "$timeout", function(n, t) {
            var i = n.requestAnimationFrame || n.webkitRequestAnimationFrame || n.mozRequestAnimationFrame
              , f = n.cancelAnimationFrame || n.webkitCancelAnimationFrame || n.mozCancelAnimationFrame || n.webkitCancelRequestAnimationFrame
              , r = !!i
              , u = r ? function(n) {
                var t = i(n);
                return function() {
                    f(t)
                }
            }
            : function(n) {
                var i = t(n, 16.66, !1);
                return function() {
                    t.cancel(i)
                }
            }
            ;
            return u.supported = r,
            u
        }
        ]
    }
    function ec() {
        var t = 10
          , i = y("$rootScope")
          , n = null;
        this.digestTtl = function(n) {
            return arguments.length && (t = n),
            t
        }
        ;
        this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser", function(u, f, e, o) {
            function v() {
                this.$id = lr();
                this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null;
                this["this"] = this.$root = this;
                this.$$destroyed = !1;
                this.$$asyncQueue = [];
                this.$$postDigestQueue = [];
                this.$$listeners = {};
                this.$$listenerCount = {};
                this.$$isolateBindings = {}
            }
            function y(n) {
                if (h.$$phase)
                    throw i("inprog", "{0} already in progress", h.$$phase);
                h.$$phase = n
            }
            function l() {
                h.$$phase = null
            }
            function p(n, t) {
                var i = e(n);
                return di(i, t),
                i
            }
            function w(n, t, i) {
                do
                    n.$$listenerCount[i] -= t,
                    n.$$listenerCount[i] === 0 && delete n.$$listenerCount[i];
                while (n = n.$parent)
            }
            function b() {}
            v.prototype = {
                constructor: v,
                $new: function(n) {
                    var t;
                    return n ? (t = new v,
                    t.$root = this.$root,
                    t.$$asyncQueue = this.$$asyncQueue,
                    t.$$postDigestQueue = this.$$postDigestQueue) : (this.$$childScopeClass || (this.$$childScopeClass = function() {
                        this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null;
                        this.$$listeners = {};
                        this.$$listenerCount = {};
                        this.$id = lr();
                        this.$$childScopeClass = null
                    }
                    ,
                    this.$$childScopeClass.prototype = this),
                    t = new this.$$childScopeClass),
                    t["this"] = t,
                    t.$parent = this,
                    t.$$prevSibling = this.$$childTail,
                    this.$$childHead ? (this.$$childTail.$$nextSibling = t,
                    this.$$childTail = t) : this.$$childHead = this.$$childTail = t,
                    t
                },
                $watch: function(t, i, r) {
                    var e = this, o = p(t, "watch"), f = e.$$watchers, u = {
                        fn: i,
                        last: b,
                        get: o,
                        exp: t,
                        eq: !!r
                    }, h, l;
                    return n = null,
                    c(i) || (h = p(i || s, "listener"),
                    u.fn = function(n, t, i) {
                        h(i)
                    }
                    ),
                    typeof t == "string" && o.constant && (l = u.fn,
                    u.fn = function(n, t, i) {
                        l.call(this, n, t, i);
                        bi(f, u)
                    }
                    ),
                    f || (f = e.$$watchers = []),
                    f.unshift(u),
                    function() {
                        bi(f, u);
                        n = null
                    }
                },
                $watchCollection: function(n, t) {
                    function v() {
                        var e, n, o, t;
                        if (i = w(s),
                        a(i))
                            if (yi(i))
                                for (r !== h && (r = h,
                                f = r.length = 0,
                                u++),
                                e = i.length,
                                f !== e && (u++,
                                r.length = f = e),
                                t = 0; t < e; t++)
                                    o = r[t] !== r[t] && i[t] !== i[t],
                                    o || r[t] === i[t] || (u++,
                                    r[t] = i[t]);
                            else {
                                r !== c && (r = c = {},
                                f = 0,
                                u++);
                                e = 0;
                                for (n in i)
                                    i.hasOwnProperty(n) && (e++,
                                    r.hasOwnProperty(n) ? (o = r[n] !== r[n] && i[n] !== i[n],
                                    o || r[n] === i[n] || (u++,
                                    r[n] = i[n])) : (f++,
                                    r[n] = i[n],
                                    u++));
                                if (f > e) {
                                    u++;
                                    for (n in r)
                                        r.hasOwnProperty(n) && !i.hasOwnProperty(n) && (f--,
                                        delete r[n])
                                }
                            }
                        else
                            r !== i && (r = i,
                            u++);
                        return u
                    }
                    function y() {
                        var n, r;
                        if (l ? (l = !1,
                        t(i, i, s)) : t(i, o, s),
                        p)
                            if (a(i))
                                if (yi(i))
                                    for (o = new Array(i.length),
                                    n = 0; n < i.length; n++)
                                        o[n] = i[n];
                                else {
                                    o = {};
                                    for (r in i)
                                        uu.call(i, r) && (o[r] = i[r])
                                }
                            else
                                o = i
                    }
                    var s = this, i, r, o, p = t.length > 1, u = 0, w = e(n), h = [], c = {}, l = !0, f = 0;
                    return this.$watch(v, y)
                },
                $digest: function() {
                    var r, e, s, w, a = this.$$asyncQueue, ut = this.$$postDigestQueue, k, h, d = t, g, u, nt = this, v = [], p, tt, it;
                    y("$digest");
                    o.$$checkUrlChange();
                    n = null;
                    do {
                        for (h = !1,
                        u = nt; a.length; ) {
                            try {
                                it = a.shift();
                                it.scope.$eval(it.expression)
                            } catch (rt) {
                                l();
                                f(rt)
                            }
                            n = null
                        }
                        n: do {
                            if (w = u.$$watchers)
                                for (k = w.length; k--; )
                                    try {
                                        if (r = w[k],
                                        r)
                                            if ((e = r.get(u)) === (s = r.last) || (r.eq ? ni(e, s) : typeof e == "number" && typeof s == "number" && isNaN(e) && isNaN(s))) {
                                                if (r === n) {
                                                    h = !1;
                                                    break n
                                                }
                                            } else
                                                h = !0,
                                                n = r,
                                                r.last = r.eq ? oi(e, null) : e,
                                                r.fn(e, s === b ? e : s, u),
                                                d < 5 && (p = 4 - d,
                                                v[p] || (v[p] = []),
                                                tt = c(r.exp) ? "fn: " + (r.exp.name || r.exp.toString()) : r.exp,
                                                tt += "; newVal: " + et(e) + "; oldVal: " + et(s),
                                                v[p].push(tt))
                                    } catch (rt) {
                                        l();
                                        f(rt)
                                    }
                            if (!(g = u.$$childHead || u !== nt && u.$$nextSibling))
                                while (u !== nt && !(g = u.$$nextSibling))
                                    u = u.$parent
                        } while (u = g);if ((h || a.length) && !d--) {
                            l();
                            throw i("infdig", "{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}", t, et(v));
                        }
                    } while (h || a.length);for (l(); ut.length; )
                        try {
                            ut.shift()()
                        } catch (rt) {
                            f(rt)
                        }
                },
                $destroy: function() {
                    if (!this.$$destroyed) {
                        var n = this.$parent;
                        (this.$broadcast("$destroy"),
                        this.$$destroyed = !0,
                        this !== h) && (r(this.$$listenerCount, vu(null, w, this)),
                        n.$$childHead == this && (n.$$childHead = this.$$nextSibling),
                        n.$$childTail == this && (n.$$childTail = this.$$prevSibling),
                        this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling),
                        this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling),
                        this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = null,
                        this.$$listeners = {},
                        this.$$watchers = this.$$asyncQueue = this.$$postDigestQueue = [],
                        this.$destroy = this.$digest = this.$apply = s,
                        this.$on = this.$watch = function() {
                            return s
                        }
                        )
                    }
                },
                $eval: function(n, t) {
                    return e(n)(this, t)
                },
                $evalAsync: function(n) {
                    h.$$phase || h.$$asyncQueue.length || o.defer(function() {
                        h.$$asyncQueue.length && h.$digest()
                    });
                    this.$$asyncQueue.push({
                        scope: this,
                        expression: n
                    })
                },
                $$postDigest: function(n) {
                    this.$$postDigestQueue.push(n)
                },
                $apply: function(n) {
                    try {
                        return y("$apply"),
                        this.$eval(n)
                    } catch (t) {
                        f(t)
                    } finally {
                        l();
                        try {
                            h.$digest()
                        } catch (t) {
                            f(t);
                            throw t;
                        }
                    }
                },
                $on: function(n, t) {
                    var r = this.$$listeners[n], i, u;
                    r || (this.$$listeners[n] = r = []);
                    r.push(t);
                    i = this;
                    do
                        i.$$listenerCount[n] || (i.$$listenerCount[n] = 0),
                        i.$$listenerCount[n]++;
                    while (i = i.$parent);return u = this,
                    function() {
                        r[wi(r, t)] = null;
                        w(u, 1, n)
                    }
                },
                $emit: function(n) {
                    var s = [], r, i = this, o = !1, u = {
                        name: n,
                        targetScope: i,
                        stopPropagation: function() {
                            o = !0
                        },
                        preventDefault: function() {
                            u.defaultPrevented = !0
                        },
                        defaultPrevented: !1
                    }, h = lu([u], arguments, 1), t, e;
                    do {
                        for (r = i.$$listeners[n] || s,
                        u.currentScope = i,
                        t = 0,
                        e = r.length; t < e; t++) {
                            if (!r[t]) {
                                r.splice(t, 1);
                                t--;
                                e--;
                                continue
                            }
                            try {
                                r[t].apply(null, h)
                            } catch (c) {
                                f(c)
                            }
                        }
                        if (o)
                            return u;
                        i = i.$parent
                    } while (i);return u
                },
                $broadcast: function(n) {
                    for (var r = this, t = r, o = r, e = {
                        name: n,
                        targetScope: r,
                        preventDefault: function() {
                            e.defaultPrevented = !0
                        },
                        defaultPrevented: !1
                    }, h = lu([e], arguments, 1), u, i, s; t = o; ) {
                        for (e.currentScope = t,
                        u = t.$$listeners[n] || [],
                        i = 0,
                        s = u.length; i < s; i++) {
                            if (!u[i]) {
                                u.splice(i, 1);
                                i--;
                                s--;
                                continue
                            }
                            try {
                                u[i].apply(null, h)
                            } catch (c) {
                                f(c)
                            }
                        }
                        if (!(o = t.$$listenerCount[n] && t.$$childHead || t !== r && t.$$nextSibling))
                            while (t !== r && !(o = t.$$nextSibling))
                                t = t.$parent
                    }
                    return e
                }
            };
            var h = new v;
            return h
        }
        ]
    }
    function oc() {
        var n = /^\s*(https?|ftp|mailto|tel|file):/
          , t = /^\s*((https?|ftp|file):|data:image\/)/;
        this.aHrefSanitizationWhitelist = function(t) {
            return f(t) ? (n = t,
            this) : n
        }
        ;
        this.imgSrcSanitizationWhitelist = function(n) {
            return f(n) ? (t = n,
            this) : t
        }
        ;
        this.$get = function() {
            return function(i, r) {
                var f = r ? t : n, u;
                return (!p || p >= 8) && (u = wt(i).href,
                u !== "" && !u.match(f)) ? "unsafe:" + u : i
            }
        }
    }
    function sc(n) {
        return n.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08")
    }
    function hc(n) {
        if (n === "self")
            return n;
        if (e(n)) {
            if (n.indexOf("***") > -1)
                throw at("iwcard", "Illegal sequence *** in string matcher.  String: {0}", n);
            return n = sc(n).replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"),
            new RegExp("^" + n + "$")
        }
        if (vr(n))
            return new RegExp("^" + n.source + "$");
        throw at("imatcher", 'Matchers may only be "self", string patterns or RegExp objects');
    }
    function uo(n) {
        var t = [];
        return f(n) && r(n, function(n) {
            t.push(hc(n))
        }),
        t
    }
    function cc() {
        this.SCE_CONTEXTS = tt;
        var n = ["self"]
          , t = [];
        this.resourceUrlWhitelist = function(t) {
            return arguments.length && (n = uo(t)),
            n
        }
        ;
        this.resourceUrlBlacklist = function(n) {
            return arguments.length && (t = uo(n)),
            t
        }
        ;
        this.$get = ["$injector", function(r) {
            function o(n, t) {
                return n === "self" ? fo(t) : !!n.exec(t.href)
            }
            function h(i) {
                for (var e = wt(i.toString()), u = !1, r = 0, f = n.length; r < f; r++)
                    if (o(n[r], e)) {
                        u = !0;
                        break
                    }
                if (u)
                    for (r = 0,
                    f = t.length; r < f; r++)
                        if (o(t[r], e)) {
                            u = !1;
                            break
                        }
                return u
            }
            function f(n) {
                var t = function(n) {
                    this.$$unwrapTrustedValue = function() {
                        return n
                    }
                };
                return n && (t.prototype = new n),
                t.prototype.valueOf = function() {
                    return this.$$unwrapTrustedValue()
                }
                ,
                t.prototype.toString = function() {
                    return this.$$unwrapTrustedValue().toString()
                }
                ,
                t
            }
            function c(n, t) {
                var r = u.hasOwnProperty(n) ? u[n] : null;
                if (!r)
                    throw at("icontext", "Attempted to trust a value in invalid context. Context: {0}; Value: {1}", n, t);
                if (t === null || t === i || t === "")
                    return t;
                if (typeof t != "string")
                    throw at("itype", "Attempted to trust a non-string value in a content requiring a string: Context: {0}", n);
                return new r(t)
            }
            function l(n) {
                return n instanceof e ? n.$$unwrapTrustedValue() : n
            }
            function a(n, t) {
                if (t === null || t === i || t === "")
                    return t;
                var r = u.hasOwnProperty(n) ? u[n] : null;
                if (r && t instanceof r)
                    return t.$$unwrapTrustedValue();
                if (n === tt.RESOURCE_URL) {
                    if (h(t))
                        return t;
                    throw at("insecurl", "Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}", t.toString());
                } else if (n === tt.HTML)
                    return s(t);
                throw at("unsafe", "Attempting to use an unsafe value in a safe context.");
            }
            var s = function() {
                throw at("unsafe", "Attempting to use an unsafe value in a safe context.");
            }, e, u;
            return r.has("$sanitize") && (s = r.get("$sanitize")),
            e = f(),
            u = {},
            u[tt.HTML] = f(e),
            u[tt.CSS] = f(e),
            u[tt.URL] = f(e),
            u[tt.JS] = f(e),
            u[tt.RESOURCE_URL] = f(u[tt.URL]),
            {
                trustAs: c,
                getTrusted: a,
                valueOf: l
            }
        }
        ]
    }
    function lc() {
        var n = !0;
        this.enabled = function(t) {
            return arguments.length && (n = !!t),
            n
        }
        ;
        this.$get = ["$parse", "$sniffer", "$sceDelegate", function(t, i, u) {
            var f;
            if (n && i.msie && i.msieDocumentMode < 8)
                throw at("iequirks", "Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");
            f = ft(tt);
            f.isEnabled = function() {
                return n
            }
            ;
            f.trustAs = u.trustAs;
            f.getTrusted = u.getTrusted;
            f.valueOf = u.valueOf;
            n || (f.trustAs = f.getTrusted = function(n, t) {
                return t
            }
            ,
            f.valueOf = pi);
            f.parseAs = function(n, i) {
                var r = t(i);
                return r.literal && r.constant ? r : function(t, i) {
                    return f.getTrusted(n, r(t, i))
                }
            }
            ;
            var e = f.parseAs
              , o = f.getTrusted
              , s = f.trustAs;
            return r(tt, function(n, t) {
                var i = v(t);
                f[gi("parse_as_" + i)] = function(t) {
                    return e(n, t)
                }
                ;
                f[gi("get_trusted_" + i)] = function(t) {
                    return o(n, t)
                }
                ;
                f[gi("trust_as_" + i)] = function(t) {
                    return s(n, t)
                }
            }),
            f
        }
        ]
    }
    function ac() {
        this.$get = ["$window", "$document", function(n, t) {
            var s = {}, h = k((/android (\d+)/.exec(v((n.navigator || {}).userAgent)) || [])[1]), w = /Boxee/i.test((n.navigator || {}).userAgent), u = t[0] || {}, c = u.documentMode, i, r = u.body && u.body.style, f = !1, o = !1, a, y;
            if (r) {
                for (y in r)
                    if (a = /^(Moz|webkit|O|ms)(?=[A-Z])/.exec(y)) {
                        i = a[0];
                        i = i.substr(0, 1).toUpperCase() + i.substr(1);
                        break
                    }
                i || (i = "WebkitOpacity"in r && "webkit");
                f = !!("transition"in r || i + "Transition"in r);
                o = !!("animation"in r || i + "Animation"in r);
                !h || f && o || (f = e(u.body.style.webkitTransition),
                o = e(u.body.style.webkitAnimation))
            }
            return {
                history: !!(n.history && n.history.pushState && !(h < 4) && !w),
                hashchange: "onhashchange"in n && (!c || c > 7),
                hasEvent: function(n) {
                    if (n == "input" && p == 9)
                        return !1;
                    if (l(s[n])) {
                        var t = u.createElement("div");
                        s[n] = "on" + n in t
                    }
                    return s[n]
                },
                csp: ci(),
                vendorPrefix: i,
                transitions: f,
                animations: o,
                android: h,
                msie: p,
                msieDocumentMode: c
            }
        }
        ]
    }
    function vc() {
        this.$get = ["$rootScope", "$browser", "$q", "$exceptionHandler", function(n, t, i, r) {
            function e(e, o, s) {
                var h = i.defer(), c = h.promise, a = f(s) && !s, l;
                return l = t.defer(function() {
                    try {
                        h.resolve(e())
                    } catch (t) {
                        h.reject(t);
                        r(t)
                    } finally {
                        delete u[c.$$timeoutId]
                    }
                    a || n.$apply()
                }, o),
                c.$$timeoutId = l,
                u[l] = h,
                c
            }
            var u = {};
            return e.cancel = function(n) {
                return n && n.$$timeoutId in u ? (u[n.$$timeoutId].reject("canceled"),
                delete u[n.$$timeoutId],
                t.defer.cancel(n.$$timeoutId)) : !1
            }
            ,
            e
        }
        ]
    }
    function wt(n) {
        var t = n;
        return p && (b.setAttribute("href", t),
        t = b.href),
        b.setAttribute("href", t),
        {
            href: b.href,
            protocol: b.protocol ? b.protocol.replace(/:$/, "") : "",
            host: b.host,
            search: b.search ? b.search.replace(/^\?/, "") : "",
            hash: b.hash ? b.hash.replace(/^#/, "") : "",
            hostname: b.hostname,
            port: b.port,
            pathname: b.pathname.charAt(0) === "/" ? b.pathname : "/" + b.pathname
        }
    }
    function fo(n) {
        var t = e(n) ? wt(n) : n;
        return t.protocol === yf.protocol && t.host === yf.host
    }
    function yc() {
        this.$get = nt(n)
    }
    function eo(n) {
        function t(u, f) {
            if (a(u)) {
                var e = {};
                return r(u, function(n, i) {
                    e[i] = t(i, n)
                }),
                e
            }
            return n.factory(u + i, f)
        }
        var i = "Filter";
        this.register = t;
        this.$get = ["$injector", function(n) {
            return function(t) {
                return n.get(t + i)
            }
        }
        ];
        t("currency", oo);
        t("date", co);
        t("filter", pc);
        t("json", kc);
        t("limitTo", dc);
        t("lowercase", go);
        t("number", so);
        t("orderBy", lo);
        t("uppercase", ns)
    }
    function pc() {
        return function(n, t, i) {
            var e, r, u, c, s, f, h;
            if (!o(n))
                return n;
            e = typeof i;
            r = [];
            r.check = function(n) {
                for (var t = 0; t < r.length; t++)
                    if (!r[t](n))
                        return !1;
                return !0
            }
            ;
            e !== "function" && (i = e === "boolean" && i ? function(n, t) {
                return fr.equals(n, t)
            }
            : function(n, t) {
                if (n && t && typeof n == "object" && typeof t == "object") {
                    for (var r in n)
                        if (r.charAt(0) !== "$" && uu.call(n, r) && i(n[r], t[r]))
                            return !0;
                    return !1
                }
                return t = ("" + t).toLowerCase(),
                ("" + n).toLowerCase().indexOf(t) > -1
            }
            );
            u = function(n, t) {
                var f, r;
                if (typeof t == "string" && t.charAt(0) === "!")
                    return !u(n, t.substr(1));
                switch (typeof n) {
                case "boolean":
                case "number":
                case "string":
                    return i(n, t);
                case "object":
                    switch (typeof t) {
                    case "object":
                        return i(n, t);
                    default:
                        for (f in n)
                            if (f.charAt(0) !== "$" && u(n[f], t))
                                return !0
                    }
                    return !1;
                case "array":
                    for (r = 0; r < n.length; r++)
                        if (u(n[r], t))
                            return !0;
                    return !1;
                default:
                    return !1
                }
            }
            ;
            switch (typeof t) {
            case "boolean":
            case "number":
            case "string":
                t = {
                    $: t
                };
            case "object":
                for (c in t)
                    (function(n) {
                        typeof t[n] != "undefined" && r.push(function(i) {
                            return u(n == "$" ? i : i && i[n], t[n])
                        })
                    }
                    )(c);
                break;
            case "function":
                r.push(t);
                break;
            default:
                return n
            }
            for (s = [],
            f = 0; f < n.length; f++)
                h = n[f],
                r.check(h) && s.push(h);
            return s
        }
    }
    function oo(n) {
        var t = n.NUMBER_FORMATS;
        return function(n, i) {
            return l(i) && (i = t.CURRENCY_SYM),
            ho(n, t.PATTERNS[1], t.GROUP_SEP, t.DECIMAL_SEP, 2).replace(/\u00A4/g, i)
        }
    }
    function so(n) {
        var t = n.NUMBER_FORMATS;
        return function(n, i) {
            return ho(n, t.PATTERNS[0], t.GROUP_SEP, t.DECIMAL_SEP, i)
        }
    }
    function ho(n, t, i, r, u) {
        var c, v, b, o, s;
        if (n == null || !isFinite(n) || a(n))
            return "";
        c = n < 0;
        n = Math.abs(n);
        var h = n + ""
          , e = ""
          , y = []
          , k = !1;
        if (h.indexOf("e") !== -1 && (v = h.match(/([\d\.]+)e(-?)(\d+)/),
        v && v[2] == "-" && v[3] > u + 1 ? (h = "0",
        n = 0) : (e = h,
        k = !0)),
        k)
            u > 0 && n > -1 && n < 1 && (e = n.toFixed(u));
        else {
            b = (h.split(pf)[1] || "").length;
            l(u) && (u = Math.min(Math.max(t.minFrac, b), t.maxFrac));
            n = +(Math.round(+(n.toString() + "e" + u)).toString() + "e" + -u);
            n === 0 && (c = !1);
            o = ("" + n).split(pf);
            s = o[0];
            o = o[1] || "";
            var f, p = 0, w = t.lgSize, d = t.gSize;
            if (s.length >= w + d)
                for (p = s.length - w,
                f = 0; f < p; f++)
                    (p - f) % d == 0 && f !== 0 && (e += i),
                    e += s.charAt(f);
            for (f = p; f < s.length; f++)
                (s.length - f) % w == 0 && f !== 0 && (e += i),
                e += s.charAt(f);
            while (o.length < u)
                o += "0";
            u && u !== "0" && (e += r + o.substr(0, u))
        }
        return y.push(c ? t.negPre : t.posPre),
        y.push(e),
        y.push(c ? t.negSuf : t.posSuf),
        y.join("")
    }
    function hf(n, t, i) {
        var r = "";
        for (n < 0 && (r = "-",
        n = -n),
        n = "" + n; n.length < t; )
            n = "0" + n;
        return i && (n = n.substr(n.length - t)),
        r + n
    }
    function d(n, t, i, r) {
        return i = i || 0,
        function(u) {
            var f = u["get" + n]();
            return (i > 0 || f > -i) && (f += i),
            f === 0 && i == -12 && (f = 12),
            hf(f, t, r)
        }
    }
    function iu(n, t) {
        return function(i, r) {
            var u = i["get" + n]()
              , f = ri(t ? "SHORT" + n : n);
            return r[f][u]
        }
    }
    function wc(n) {
        var t = -1 * n.getTimezoneOffset()
          , i = t >= 0 ? "+" : "";
        return i + (hf(Math[t > 0 ? "floor" : "ceil"](t / 60), 2) + hf(Math.abs(t % 60), 2))
    }
    function bc(n, t) {
        return n.getHours() < 12 ? t.AMPMS[0] : t.AMPMS[1]
    }
    function co(n) {
        function t(n) {
            var t;
            if (t = n.match(i)) {
                var r = new Date(0)
                  , u = 0
                  , f = 0
                  , e = t[8] ? r.setUTCFullYear : r.setFullYear
                  , o = t[8] ? r.setUTCHours : r.setHours;
                t[9] && (u = k(t[9] + t[10]),
                f = k(t[9] + t[11]));
                e.call(r, k(t[1]), k(t[2]) - 1, k(t[3]));
                var s = k(t[4] || 0) - u
                  , h = k(t[5] || 0) - f
                  , c = k(t[6] || 0)
                  , l = Math.round(parseFloat("0." + (t[7] || 0)) * 1e3);
                return o.call(r, s, h, c, l),
                r
            }
            return n
        }
        var i = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
        return function(i, u) {
            var h = "", f = [], o, s;
            if (u = u || "mediumDate",
            u = n.DATETIME_FORMATS[u] || u,
            e(i) && (i = oa.test(i) ? k(i) : t(i)),
            ar(i) && (i = new Date(i)),
            !yt(i))
                return i;
            while (u)
                s = ea.exec(u),
                s ? (f = lu(f, s, 1),
                u = f.pop()) : (f.push(u),
                u = null);
            return r(f, function(t) {
                o = fa[t];
                h += o ? o(i, n.DATETIME_FORMATS) : t.replace(/(^'|'$)/g, "").replace(/''/g, "'")
            }),
            h
        }
    }
    function kc() {
        return function(n) {
            return et(n, !0)
        }
    }
    function dc() {
        return function(n, t) {
            if (!o(n) && !e(n))
                return n;
            if (t = Math.abs(Number(t)) === Infinity ? Number(t) : k(t),
            e(n))
                return t ? t >= 0 ? n.slice(0, t) : n.slice(t, n.length) : "";
            var u = [], i, r;
            for (t > n.length ? t = n.length : t < -n.length && (t = -n.length),
            t > 0 ? (i = 0,
            r = t) : (i = n.length + t,
            r = n.length); i < r; i++)
                u.push(n[i]);
            return u
        }
    }
    function lo(n) {
        return function(t, i, r) {
            function c(n, t) {
                for (var r, u = 0; u < i.length; u++)
                    if (r = i[u](n, t),
                    r !== 0)
                        return r;
                return 0
            }
            function f(n, t) {
                return ki(t) ? function(t, i) {
                    return n(i, t)
                }
                : n
            }
            function h(n, t) {
                var i = typeof n
                  , r = typeof t;
                return i == r ? (yt(n) && yt(t) && (n = n.valueOf(),
                t = t.valueOf()),
                i == "string" && (n = n.toLowerCase(),
                t = t.toLowerCase()),
                n === t) ? 0 : n < t ? -1 : 1 : i < r ? -1 : 1
            }
            var s, u;
            if (!yi(t) || !i)
                return t;
            for (i = o(i) ? i : [i],
            i = vs(i, function(t) {
                var r = !1, i = t || pi, u;
                return e(t) && ((t.charAt(0) == "+" || t.charAt(0) == "-") && (r = t.charAt(0) == "-",
                t = t.substring(1)),
                i = n(t),
                i.constant) ? (u = i(),
                f(function(n, t) {
                    return h(n[u], t[u])
                }, r)) : f(function(n, t) {
                    return h(i(n), i(t))
                }, r)
            }),
            s = [],
            u = 0; u < t.length; u++)
                s.push(t[u]);
            return s.sort(f(c, r))
        }
    }
    function bt(n) {
        return c(n) && (n = {
            link: n
        }),
        n.restrict = n.restrict || "AC",
        nt(n)
    }
    function ao(n, t, i, u) {
        function e(t, i) {
            i = i ? "-" + br(i, "-") : "";
            u.setClass(n, (t ? su : hu) + i, (t ? hu : su) + i)
        }
        var f = this
          , o = n.parent().controller("form") || rr
          , s = 0
          , h = f.$error = {}
          , c = [];
        f.$name = t.name || t.ngForm;
        f.$dirty = !1;
        f.$pristine = !0;
        f.$valid = !0;
        f.$invalid = !1;
        o.$addControl(f);
        n.addClass(vi);
        e(!0);
        f.$addControl = function(n) {
            ii(n.$name, "input");
            c.push(n);
            n.$name && (f[n.$name] = n)
        }
        ;
        f.$removeControl = function(n) {
            n.$name && f[n.$name] === n && delete f[n.$name];
            r(h, function(t, i) {
                f.$setValidity(i, !0, n)
            });
            bi(c, n)
        }
        ;
        f.$setValidity = function(n, t, i) {
            var r = h[n];
            if (t)
                r && (bi(r, i),
                r.length || (s--,
                s || (e(t),
                f.$valid = !0,
                f.$invalid = !1),
                h[n] = !1,
                e(!0, n),
                o.$setValidity(n, !0, f)));
            else {
                if (s || e(t),
                r) {
                    if (ys(r, i))
                        return
                } else
                    h[n] = r = [],
                    s++,
                    e(!1, n),
                    o.$setValidity(n, !1, f);
                r.push(i);
                f.$valid = !1;
                f.$invalid = !0
            }
        }
        ;
        f.$setDirty = function() {
            u.removeClass(n, vi);
            u.addClass(n, cu);
            f.$dirty = !0;
            f.$pristine = !1;
            o.$setDirty()
        }
        ;
        f.$setPristine = function() {
            u.removeClass(n, cu);
            u.addClass(n, vi);
            f.$dirty = !1;
            f.$pristine = !0;
            r(c, function(n) {
                n.$setPristine()
            })
        }
    }
    function kt(n, t, r, u) {
        return n.$setValidity(t, r),
        r ? u : i
    }
    function vo(n, t) {
        var i, r;
        if (t)
            for (i = 0; i < t.length; ++i)
                if (r = t[i],
                n[r])
                    return !0;
        return !1
    }
    function gc(n, t, i, r, u) {
        if (a(u)) {
            n.$$hasNativeValidators = !0;
            var f = function(f) {
                if (!n.$error[t] && !vo(u, r) && vo(u, i)) {
                    n.$setValidity(t, !1);
                    return
                }
                return f
            };
            n.$parsers.push(f)
        }
    }
    function ru(n, t, i, r, u, f) {
        var nt = t.prop(fl), tt = t[0].placeholder, ut = {}, ft = v(t[0].type), s, o, l, a, e, h, c, w, it, b, rt, d;
        if (r.$$validityState = nt,
        !u.android) {
            s = !1;
            t.on("compositionstart", function() {
                s = !0
            });
            t.on("compositionend", function() {
                s = !1;
                o()
            })
        }
        if (o = function(u) {
            var f, e;
            if (!s) {
                if (f = t.val(),
                p && (u || ut).type === "input" && t[0].placeholder !== tt) {
                    tt = t[0].placeholder;
                    return
                }
                ft !== "password" && ki(i.ngTrim || "T") && (f = g(f));
                e = nt && r.$$hasNativeValidators;
                (r.$viewValue !== f || f === "" && e) && (n.$root.$$phase ? r.$setViewValue(f) : n.$apply(function() {
                    r.$setViewValue(f)
                }))
            }
        }
        ,
        u.hasEvent("input"))
            t.on("input", o);
        else {
            a = function() {
                l || (l = f.defer(function() {
                    o();
                    l = null
                }))
            }
            ;
            t.on("keydown", function(n) {
                var t = n.keyCode;
                t === 91 || 15 < t && t < 19 || 37 <= t && t <= 40 || a()
            });
            if (u.hasEvent("paste"))
                t.on("paste cut", a)
        }
        t.on("change", o);
        r.$render = function() {
            t.val(r.$isEmpty(r.$viewValue) ? "" : r.$viewValue)
        }
        ;
        e = i.ngPattern;
        e && (w = function(n, t) {
            return kt(r, "pattern", r.$isEmpty(t) || n.test(t), t)
        }
        ,
        c = e.match(/^\/(.*)\/([gim]*)$/),
        c ? (e = new RegExp(c[1],c[2]),
        h = function(n) {
            return w(e, n)
        }
        ) : h = function(i) {
            var r = n.$eval(e);
            if (!r || !r.test)
                throw y("ngPattern")("noregexp", "Expected {0} to be a RegExp but was {1}. Element: {2}", e, r, ot(t));
            return w(r, i)
        }
        ,
        r.$formatters.push(h),
        r.$parsers.push(h));
        i.ngMinlength && (it = k(i.ngMinlength),
        b = function(n) {
            return kt(r, "minlength", r.$isEmpty(n) || n.length >= it, n)
        }
        ,
        r.$parsers.push(b),
        r.$formatters.push(b));
        i.ngMaxlength && (rt = k(i.ngMaxlength),
        d = function(n) {
            return kt(r, "maxlength", r.$isEmpty(n) || n.length <= rt, n)
        }
        ,
        r.$parsers.push(d),
        r.$formatters.push(d))
    }
    function nl(n, t, r, u, f, e) {
        var o, s;
        ru(n, t, r, u, f, e);
        u.$parsers.push(function(n) {
            var t = u.$isEmpty(n);
            return t || aa.test(n) ? (u.$setValidity("number", !0),
            n === "" ? null : t ? n : parseFloat(n)) : (u.$setValidity("number", !1),
            i)
        });
        gc(u, "number", is, null, u.$$validityState);
        u.$formatters.push(function(n) {
            return u.$isEmpty(n) ? "" : "" + n
        });
        r.min && (o = function(n) {
            var t = parseFloat(r.min);
            return kt(u, "min", u.$isEmpty(n) || n >= t, n)
        }
        ,
        u.$parsers.push(o),
        u.$formatters.push(o));
        r.max && (s = function(n) {
            var t = parseFloat(r.max);
            return kt(u, "max", u.$isEmpty(n) || n <= t, n)
        }
        ,
        u.$parsers.push(s),
        u.$formatters.push(s));
        u.$formatters.push(function(n) {
            return kt(u, "number", u.$isEmpty(n) || ar(n), n)
        })
    }
    function tl(n, t, i, r, u, f) {
        ru(n, t, i, r, u, f);
        var e = function(n) {
            return kt(r, "url", r.$isEmpty(n) || ca.test(n), n)
        };
        r.$formatters.push(e);
        r.$parsers.push(e)
    }
    function il(n, t, i, r, u, f) {
        ru(n, t, i, r, u, f);
        var e = function(n) {
            return kt(r, "email", r.$isEmpty(n) || la.test(n), n)
        };
        r.$formatters.push(e);
        r.$parsers.push(e)
    }
    function rl(n, t, i, r) {
        l(i.name) && t.attr("name", lr());
        t.on("click", function() {
            t[0].checked && n.$apply(function() {
                r.$setViewValue(i.value)
            })
        });
        r.$render = function() {
            var n = i.value;
            t[0].checked = n == r.$viewValue
        }
        ;
        i.$observe("value", r.$render)
    }
    function ul(n, t, i, r) {
        var u = i.ngTrueValue
          , f = i.ngFalseValue;
        e(u) || (u = !0);
        e(f) || (f = !1);
        t.on("click", function() {
            n.$apply(function() {
                r.$setViewValue(t[0].checked)
            })
        });
        r.$render = function() {
            t[0].checked = r.$viewValue
        }
        ;
        r.$isEmpty = function(n) {
            return n !== u
        }
        ;
        r.$formatters.push(function(n) {
            return n === u
        });
        r.$parsers.push(function(n) {
            return n ? u : f
        })
    }
    function cf(n, t) {
        return n = "ngClass" + n,
        ["$animate", function(i) {
            function f(n, t) {
                var f = [], i, u, r;
                n: for (i = 0; i < n.length; i++) {
                    for (u = n[i],
                    r = 0; r < t.length; r++)
                        if (u == t[r])
                            continue n;
                    f.push(u)
                }
                return f
            }
            function u(n) {
                if (o(n))
                    return n;
                if (e(n))
                    return n.split(" ");
                if (a(n)) {
                    var t = [];
                    return r(n, function(n, i) {
                        n && (t = t.concat(i.split(" ")))
                    }),
                    t
                }
                return n
            }
            return {
                restrict: "AC",
                link: function(e, o, s) {
                    function l(n) {
                        var t = h(n, 1);
                        s.$addClass(t)
                    }
                    function v(n) {
                        var t = h(n, -1);
                        s.$removeClass(t)
                    }
                    function h(n, t) {
                        var i = o.data("$classCounts") || {}
                          , u = [];
                        return r(n, function(n) {
                            (t > 0 || i[n]) && (i[n] = (i[n] || 0) + t,
                            i[n] === +(t > 0) && u.push(n))
                        }),
                        o.data("$classCounts", i),
                        u.join(" ")
                    }
                    function y(n, t) {
                        var r = f(t, n)
                          , u = f(n, t);
                        u = h(u, -1);
                        r = h(r, 1);
                        r.length === 0 ? i.removeClass(o, u) : u.length === 0 ? i.addClass(o, r) : i.setClass(o, r, u)
                    }
                    function a(n) {
                        var i, r;
                        (t === !0 || e.$index % 2 === t) && (i = u(n || []),
                        c ? ni(n, c) || (r = u(c),
                        y(r, i)) : l(i));
                        c = ft(n)
                    }
                    var c;
                    e.$watch(s[n], a, !0);
                    s.$observe("class", function() {
                        a(e.$eval(s[n]))
                    });
                    n !== "ngClass" && e.$watch("$index", function(i, r) {
                        var o = i & 1, f;
                        o !== (r & 1) && (f = u(e.$eval(s[n])),
                        o === t ? l(f) : v(f))
                    })
                }
            }
        }
        ]
    }
    var fl = "validity", v = function(n) {
        return e(n) ? n.toLowerCase() : n
    }, uu = Object.prototype.hasOwnProperty, ri = function(n) {
        return e(n) ? n.toUpperCase() : n
    }, el = function(n) {
        return e(n) ? n.replace(/[A-Z]/g, function(n) {
            return String.fromCharCode(n.charCodeAt(0) | 32)
        }) : n
    }, ol = function(n) {
        return e(n) ? n.replace(/[a-z]/g, function(n) {
            return String.fromCharCode(n.charCodeAt(0) & -33)
        }) : n
    }, o, g, ci, yo, po, ui, ir, lf, wo, bo, it, ko, af, rt, vf, dt, li, fu, at, tt, b, yf, pf, go, ns, ts, eu, rr, is;
    "i" !== "I".toLowerCase() && (v = el,
    ri = ol);
    var p, u, gt, wf = [].slice, sl = [].push, fi = Object.prototype.toString, ur = y("ng"), fr = n.angular || (n.angular = {}), er, ai, vt = ["0", "0", "0"];
    p = k((/msie (\d+)/.exec(v(navigator.userAgent)) || [])[1]);
    isNaN(p) && (p = k((/trident\/.*; rv:(\d+)/.exec(v(navigator.userAgent)) || [])[1]));
    s.$inject = [];
    pi.$inject = [];
    o = function() {
        return c(Array.isArray) ? Array.isArray : function(n) {
            return fi.call(n) === "[object Array]"
        }
    }();
    g = function() {
        return String.prototype.trim ? function(n) {
            return e(n) ? n.trim() : n
        }
        : function(n) {
            return e(n) ? n.replace(/^\s\s*/, "").replace(/\s\s*$/, "") : n
        }
    }();
    ai = p < 9 ? function(n) {
        return n = n.nodeName ? n : n[0],
        n.scopeName && n.scopeName != "HTML" ? ri(n.scopeName + ":" + n.nodeName) : n.nodeName
    }
    : function(n) {
        return n.nodeName ? n.nodeName : n[0].nodeName
    }
    ;
    ci = function() {
        if (f(ci.isActive_))
            return ci.isActive_;
        var n = !!(t.querySelector("[ng-csp]") || t.querySelector("[data-ng-csp]"));
        if (!n)
            try {
                new Function("")
            } catch (i) {
                n = !0
            }
        return ci.isActive_ = n
    }
    ;
    yo = /[A-Z]/g;
    po = {
        full: "1.2.25",
        major: 1,
        minor: 2,
        dot: 25,
        codeName: "hypnotic-gesticulation"
    };
    w.expando = "ng339";
    var or = w.cache = {}
      , hl = 1
      , ou = n.document.addEventListener ? function(n, t, i) {
        n.addEventListener(t, i, !1)
    }
    : function(n, t, i) {
        n.attachEvent("on" + t, i)
    }
      , sr = n.document.removeEventListener ? function(n, t, i) {
        n.removeEventListener(t, i, !1)
    }
    : function(n, t, i) {
        n.detachEvent("on" + t, i)
    }
      , ey = w._data = function(n) {
        return this.cache[n[this.expando]] || {}
    }
      , cl = /([\:\-\_]+(.))/g
      , ll = /^moz([A-Z])/
      , bf = y("jqLite")
      , al = /^<(\w+)\s*\/?>(?:<\/\1>|)$/
      , vl = /<|&#?\w+;/
      , yl = /<([\w:]+)/
      , pl = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi
      , ut = {
        option: [1, '<select multiple="multiple">', "<\/select>"],
        thead: [1, "<table>", "<\/table>"],
        col: [2, "<table><colgroup>", "<\/colgroup><\/table>"],
        tr: [2, "<table><tbody>", "<\/tbody><\/table>"],
        td: [3, "<table><tbody><tr>", "<\/tr><\/tbody><\/table>"],
        _default: [0, "", ""]
    };
    ut.optgroup = ut.option;
    ut.tbody = ut.tfoot = ut.colgroup = ut.caption = ut.thead;
    ut.th = ut.td;
    ui = w.prototype = {
        ready: function(i) {
            function r() {
                u || (u = !0,
                i())
            }
            var u = !1;
            if (t.readyState === "complete")
                setTimeout(r);
            else {
                this.on("DOMContentLoaded", r);
                w(n).on("load", r)
            }
        },
        toString: function() {
            var n = [];
            return r(this, function(t) {
                n.push("" + t)
            }),
            "[" + n.join(", ") + "]"
        },
        eq: function(n) {
            return n >= 0 ? u(this[n]) : u(this[this.length + n])
        },
        length: 0,
        push: sl,
        sort: [].sort,
        splice: [].splice
    };
    ir = {};
    r("multiple,selected,checked,disabled,readOnly,required,open".split(","), function(n) {
        ir[v(n)] = n
    });
    lf = {};
    r("input,select,option,textarea,button,form,details".split(","), function(n) {
        lf[ri(n)] = !0
    });
    r({
        data: nf,
        removeData: gu
    }, function(n, t) {
        w[t] = n
    });
    r({
        data: nf,
        inheritedData: gr,
        scope: function(n) {
            return u.data(n, "$scope") || gr(n.parentNode || n, ["$isolateScope", "$scope"])
        },
        isolateScope: function(n) {
            return u.data(n, "$isolateScope") || u.data(n, "$isolateScopeNoTemplate")
        },
        controller: he,
        injector: function(n) {
            return gr(n, "$injector")
        },
        removeAttr: function(n, t) {
            n.removeAttribute(t)
        },
        hasClass: tf,
        css: function(n, t, r) {
            if (t = gi(t),
            f(r))
                n.style[t] = r;
            else {
                var u;
                return p <= 8 && (u = n.currentStyle && n.currentStyle[t],
                u === "" && (u = "auto")),
                u = u || n.style[t],
                p <= 8 && (u = u === "" ? i : u),
                u
            }
        },
        attr: function(n, t, r) {
            var u = v(t), e;
            if (ir[u])
                if (f(r))
                    r ? (n[t] = !0,
                    n.setAttribute(t, u)) : (n[t] = !1,
                    n.removeAttribute(u));
                else
                    return n[t] || (n.attributes.getNamedItem(t) || s).specified ? u : i;
            else if (f(r))
                n.setAttribute(t, r);
            else if (n.getAttribute)
                return e = n.getAttribute(t, 2),
                e === null ? i : e
        },
        prop: function(n, t, i) {
            if (f(i))
                n[t] = i;
            else
                return n[t]
        },
        text: function() {
            function t(t, i) {
                var r = n[t.nodeType];
                if (l(i))
                    return r ? t[r] : "";
                t[r] = i
            }
            var n = [];
            return p < 9 ? (n[1] = "innerText",
            n[3] = "nodeValue") : n[1] = n[3] = "textContent",
            t.$dv = "",
            t
        }(),
        val: function(n, t) {
            if (l(t)) {
                if (ai(n) === "SELECT" && n.multiple) {
                    var i = [];
                    return r(n.options, function(n) {
                        n.selected && i.push(n.value || n.text)
                    }),
                    i.length === 0 ? null : i
                }
                return n.value
            }
            n.value = t
        },
        html: function(n, t) {
            if (l(t))
                return n.innerHTML;
            for (var i = 0, r = n.childNodes; i < r.length; i++)
                si(r[i]);
            n.innerHTML = t
        },
        empty: ce
    }, function(n, t) {
        w.prototype[t] = function(t, r) {
            var u, s, e = this.length, f, c, o, h;
            if (n !== ce && (n.length == 2 && n !== tf && n !== he ? t : r) === i) {
                if (a(t)) {
                    for (u = 0; u < e; u++)
                        if (n === nf)
                            n(this[u], t);
                        else
                            for (s in t)
                                n(this[u], s, t[s]);
                    return this
                }
                for (f = n.$dv,
                c = f === i ? Math.min(e, 1) : e,
                o = 0; o < c; o++)
                    h = n(this[o], t, r),
                    f = f ? f + h : h;
                return f
            }
            for (u = 0; u < e; u++)
                n(this[u], t, r);
            return this
        }
    });
    r({
        removeData: gu,
        dealoc: si,
        on: function wl(n, i, u, e) {
            if (f(e))
                throw bf("onargs", "jqLite#on() does not support the `selector` or `eventData` parameters");
            var o = ht(n, "events")
              , s = ht(n, "handle");
            o || ht(n, "events", o = {});
            s || ht(n, "handle", s = ih(n, o));
            r(i.split(" "), function(i) {
                var r = o[i], f, e;
                r || (i == "mouseenter" || i == "mouseleave" ? (f = t.body.contains || t.body.compareDocumentPosition ? function(n, t) {
                    var r = n.nodeType === 9 ? n.documentElement : n
                      , i = t && t.parentNode;
                    return n === i || !!(i && i.nodeType === 1 && (r.contains ? r.contains(i) : n.compareDocumentPosition && n.compareDocumentPosition(i) & 16))
                }
                : function(n, t) {
                    if (t)
                        while (t = t.parentNode)
                            if (t === n)
                                return !0;
                    return !1
                }
                ,
                o[i] = [],
                e = {
                    mouseleave: "mouseout",
                    mouseenter: "mouseover"
                },
                wl(n, e[i], function(n) {
                    var r = this
                      , t = n.relatedTarget;
                    t && (t === r || f(r, t)) || s(n, i)
                })) : (ou(n, i, s),
                o[i] = []),
                r = o[i]);
                r.push(u)
            })
        },
        off: se,
        one: function(n, t, i) {
            n = u(n);
            n.on(t, function r() {
                n.off(t, i);
                n.off(t, r)
            });
            n.on(t, i)
        },
        replaceWith: function(n, t) {
            var i, u = n.parentNode;
            si(n);
            r(new w(t), function(t) {
                i ? u.insertBefore(t, i.nextSibling) : u.replaceChild(t, n);
                i = t
            })
        },
        children: function(n) {
            var t = [];
            return r(n.childNodes, function(n) {
                n.nodeType === 1 && t.push(n)
            }),
            t
        },
        contents: function(n) {
            return n.contentDocument || n.childNodes || []
        },
        append: function(n, t) {
            r(new w(t), function(t) {
                (n.nodeType === 1 || n.nodeType === 11) && n.appendChild(t)
            })
        },
        prepend: function(n, t) {
            if (n.nodeType === 1) {
                var i = n.firstChild;
                r(new w(t), function(t) {
                    n.insertBefore(t, i)
                })
            }
        },
        wrap: function(n, t) {
            t = u(t)[0];
            var i = n.parentNode;
            i && i.replaceChild(t, n);
            t.appendChild(n)
        },
        remove: function(n) {
            si(n);
            var t = n.parentNode;
            t && t.removeChild(n)
        },
        after: function(n, t) {
            var i = n
              , u = n.parentNode;
            r(new w(t), function(n) {
                u.insertBefore(n, i.nextSibling);
                i = n
            })
        },
        addClass: dr,
        removeClass: kr,
        toggleClass: function(n, t, i) {
            t && r(t.split(" "), function(t) {
                var r = i;
                l(r) && (r = !tf(n, t));
                (r ? dr : kr)(n, t)
            })
        },
        parent: function(n) {
            var t = n.parentNode;
            return t && t.nodeType !== 11 ? t : null
        },
        next: function(n) {
            if (n.nextElementSibling)
                return n.nextElementSibling;
            for (var t = n.nextSibling; t != null && t.nodeType !== 1; )
                t = t.nextSibling;
            return t
        },
        find: function(n, t) {
            return n.getElementsByTagName ? n.getElementsByTagName(t) : []
        },
        clone: du,
        triggerHandler: function(n, t, i) {
            var u, f, e, o = t.type || t, c = (ht(n, "events") || {})[o];
            c && (u = {
                preventDefault: function() {
                    this.defaultPrevented = !0
                },
                isDefaultPrevented: function() {
                    return this.defaultPrevented === !0
                },
                stopPropagation: s,
                type: o,
                target: n
            },
            t.type && (u = h(u, t)),
            f = ft(c),
            e = i ? [u].concat(i) : [u],
            r(f, function(t) {
                t.apply(n, e)
            }))
        }
    }, function(n, t) {
        w.prototype[t] = function(t, i, r) {
            for (var e, o = 0; o < this.length; o++)
                l(e) ? (e = n(this[o], t, i, r),
                f(e) && (e = u(e))) : rf(e, n(this[o], t, i, r));
            return f(e) ? e : this
        }
        ;
        w.prototype.bind = w.prototype.on;
        w.prototype.unbind = w.prototype.off
    });
    nr.prototype = {
        put: function(n, t) {
            this[hi(n, this.nextUid)] = t
        },
        get: function(n) {
            return this[hi(n, this.nextUid)]
        },
        remove: function(n) {
            var t = this[n = hi(n, this.nextUid)];
            return delete this[n],
            t
        }
    };
    var bl = /^function\s*[^\(]*\(\s*([^\)]*)\)/m
      , kl = /,/
      , dl = /^\s*(_?)(\S+?)\1\s*$/
      , gl = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg
      , hr = y("$injector");
    wo = y("$animate");
    bo = ["$provide", function(n) {
        this.$$selectors = {};
        this.register = function(t, i) {
            var r = t + "-animation";
            if (t && t.charAt(0) != ".")
                throw wo("notcsel", "Expecting class selector starting with '.' got '{0}'.", t);
            this.$$selectors[t.substr(1)] = r;
            n.factory(r, i)
        }
        ;
        this.classNameFilter = function(n) {
            return arguments.length === 1 && (this.$$classNameFilter = n instanceof RegExp ? n : null),
            this.$$classNameFilter
        }
        ;
        this.$get = ["$timeout", "$$asyncCallback", function(n, t) {
            function i(n) {
                n && t(n)
            }
            return {
                enter: function(n, t, r, u) {
                    r ? r.after(n) : (t && t[0] || (t = r.parent()),
                    t.append(n));
                    i(u)
                },
                leave: function(n, t) {
                    n.remove();
                    i(t)
                },
                move: function(n, t, i, r) {
                    this.enter(n, t, i, r)
                },
                addClass: function(n, t, u) {
                    t = e(t) ? t : o(t) ? t.join(" ") : "";
                    r(n, function(n) {
                        dr(n, t)
                    });
                    i(u)
                },
                removeClass: function(n, t, u) {
                    t = e(t) ? t : o(t) ? t.join(" ") : "";
                    r(n, function(n) {
                        kr(n, t)
                    });
                    i(u)
                },
                setClass: function(n, t, u, f) {
                    r(n, function(n) {
                        dr(n, t);
                        kr(n, u)
                    });
                    i(f)
                },
                enabled: s
            }
        }
        ]
    }
    ];
    it = y("$compile");
    ye.$inject = ["$provide", "$$sanitizeUriProvider"];
    ko = /^(x[\:\-_]|data[\:\-_])/i;
    af = y("$interpolate");
    var na = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/
      , ta = {
        http: 80,
        https: 443,
        ftp: 21
    }
      , kf = y("$location");
    sf.prototype = of.prototype = no.prototype = {
        $$html5: !1,
        $$replace: !1,
        absUrl: nu("$$absUrl"),
        url: function(n) {
            if (l(n))
                return this.$$url;
            var t = na.exec(n);
            return t[1] && this.path(decodeURIComponent(t[1])),
            (t[2] || t[1]) && this.search(t[3] || ""),
            this.hash(t[5] || ""),
            this
        },
        protocol: nu("$$protocol"),
        host: nu("$$host"),
        port: nu("$$port"),
        path: to("$$path", function(n) {
            return n = n ? n.toString() : "",
            n.charAt(0) == "/" ? n : "/" + n
        }),
        search: function(n, t) {
            switch (arguments.length) {
            case 0:
                return this.$$search;
            case 1:
                if (e(n) || ar(n))
                    n = n.toString(),
                    this.$$search = fe(n);
                else if (a(n))
                    r(n, function(t, i) {
                        t == null && delete n[i]
                    }),
                    this.$$search = n;
                else
                    throw kf("isrcharg", "The first argument of the `$location#search()` call must be a string or an object.");
                break;
            default:
                l(t) || t === null ? delete this.$$search[n] : this.$$search[n] = t
            }
            return this.$$compose(),
            this
        },
        hash: to("$$hash", function(n) {
            return n ? n.toString() : ""
        }),
        replace: function() {
            return this.$$replace = !0,
            this
        }
    };
    rt = y("$parse");
    vf = {};
    var ia = Function.prototype.call
      , ra = Function.prototype.apply
      , rs = Function.prototype.bind
      , cr = {
        "null": function() {
            return null
        },
        "true": function() {
            return !0
        },
        "false": function() {
            return !1
        },
        undefined: s,
        "+": function(n, t, r, u) {
            return (r = r(n, t),
            u = u(n, t),
            f(r)) ? f(u) ? r + u : r : f(u) ? u : i
        },
        "-": function(n, t, i, r) {
            return i = i(n, t),
            r = r(n, t),
            (f(i) ? i : 0) - (f(r) ? r : 0)
        },
        "*": function(n, t, i, r) {
            return i(n, t) * r(n, t)
        },
        "/": function(n, t, i, r) {
            return i(n, t) / r(n, t)
        },
        "%": function(n, t, i, r) {
            return i(n, t) % r(n, t)
        },
        "^": function(n, t, i, r) {
            return i(n, t) ^ r(n, t)
        },
        "=": s,
        "===": function(n, t, i, r) {
            return i(n, t) === r(n, t)
        },
        "!==": function(n, t, i, r) {
            return i(n, t) !== r(n, t)
        },
        "==": function(n, t, i, r) {
            return i(n, t) == r(n, t)
        },
        "!=": function(n, t, i, r) {
            return i(n, t) != r(n, t)
        },
        "<": function(n, t, i, r) {
            return i(n, t) < r(n, t)
        },
        ">": function(n, t, i, r) {
            return i(n, t) > r(n, t)
        },
        "<=": function(n, t, i, r) {
            return i(n, t) <= r(n, t)
        },
        ">=": function(n, t, i, r) {
            return i(n, t) >= r(n, t)
        },
        "&&": function(n, t, i, r) {
            return i(n, t) && r(n, t)
        },
        "||": function(n, t, i, r) {
            return i(n, t) || r(n, t)
        },
        "&": function(n, t, i, r) {
            return i(n, t) & r(n, t)
        },
        "|": function(n, t, i, r) {
            return r(n, t)(n, t, i(n, t))
        },
        "!": function(n, t, i) {
            return !i(n, t)
        }
    }
      , ua = {
        n: "\n",
        f: "\f",
        r: "\r",
        t: "\t",
        v: "\v",
        "'": "'",
        '"': '"'
    }
      , df = function(n) {
        this.options = n
    };
    df.prototype = {
        constructor: df,
        lex: function(n) {
            for (this.text = n,
            this.index = 0,
            this.ch = i,
            this.lastCh = ":",
            this.tokens = []; this.index < this.text.length; ) {
                if (this.ch = this.text.charAt(this.index),
                this.is("\"'"))
                    this.readString(this.ch);
                else if (this.isNumber(this.ch) || this.is(".") && this.isNumber(this.peek()))
                    this.readNumber();
                else if (this.isIdent(this.ch))
                    this.readIdent();
                else if (this.is("(){}[].,;:?"))
                    this.tokens.push({
                        index: this.index,
                        text: this.ch
                    }),
                    this.index++;
                else if (this.isWhitespace(this.ch)) {
                    this.index++;
                    continue
                } else {
                    var t = this.ch + this.peek()
                      , r = t + this.peek(2)
                      , u = cr[this.ch]
                      , f = cr[t]
                      , e = cr[r];
                    e ? (this.tokens.push({
                        index: this.index,
                        text: r,
                        fn: e
                    }),
                    this.index += 3) : f ? (this.tokens.push({
                        index: this.index,
                        text: t,
                        fn: f
                    }),
                    this.index += 2) : u ? (this.tokens.push({
                        index: this.index,
                        text: this.ch,
                        fn: u
                    }),
                    this.index += 1) : this.throwError("Unexpected next character ", this.index, this.index + 1)
                }
                this.lastCh = this.ch
            }
            return this.tokens
        },
        is: function(n) {
            return n.indexOf(this.ch) !== -1
        },
        was: function(n) {
            return n.indexOf(this.lastCh) !== -1
        },
        peek: function(n) {
            var t = n || 1;
            return this.index + t < this.text.length ? this.text.charAt(this.index + t) : !1
        },
        isNumber: function(n) {
            return "0" <= n && n <= "9"
        },
        isWhitespace: function(n) {
            return n === " " || n === "\r" || n === "\t" || n === "\n" || n === '\v' || n === ""
        },
        isIdent: function(n) {
            return "a" <= n && n <= "z" || "A" <= n && n <= "Z" || "_" === n || n === "$"
        },
        isExpOperator: function(n) {
            return n === "-" || n === "+" || this.isNumber(n)
        },
        throwError: function(n, t, i) {
            i = i || this.index;
            var r = f(t) ? "s " + t + "-" + this.index + " [" + this.text.substring(t, i) + "]" : " " + i;
            throw rt("lexerr", "Lexer Error: {0} at column{1} in expression [{2}].", n, r, this.text);
        },
        readNumber: function() {
            for (var n = "", r = this.index, t, i; this.index < this.text.length; ) {
                if (t = v(this.text.charAt(this.index)),
                t == "." || this.isNumber(t))
                    n += t;
                else if (i = this.peek(),
                t == "e" && this.isExpOperator(i))
                    n += t;
                else if (this.isExpOperator(t) && i && this.isNumber(i) && n.charAt(n.length - 1) == "e")
                    n += t;
                else if (!this.isExpOperator(t) || i && this.isNumber(i) || n.charAt(n.length - 1) != "e")
                    break;
                else
                    this.throwError("Invalid exponent");
                this.index++
            }
            n = 1 * n;
            this.tokens.push({
                index: r,
                text: n,
                literal: !0,
                constant: !0,
                fn: function() {
                    return n
                }
            })
        },
        readIdent: function() {
            for (var o = this, n = "", f = this.index, i, u, e, t, r, s; this.index < this.text.length; ) {
                if (t = this.text.charAt(this.index),
                t === "." || this.isIdent(t) || this.isNumber(t))
                    t === "." && (i = this.index),
                    n += t;
                else
                    break;
                this.index++
            }
            if (i)
                for (u = this.index; u < this.text.length; ) {
                    if (t = this.text.charAt(u),
                    t === "(") {
                        e = n.substr(i - f + 1);
                        n = n.substr(0, i - f);
                        this.index = u;
                        break
                    }
                    if (this.isWhitespace(t))
                        u++;
                    else
                        break
                }
            r = {
                index: f,
                text: n
            };
            cr.hasOwnProperty(n) ? (r.fn = cr[n],
            r.literal = !0,
            r.constant = !0) : (s = ro(n, this.options, this.text),
            r.fn = h(function(n, t) {
                return s(n, t)
            }, {
                assign: function(t, i) {
                    return tu(t, n, i, o.text, o.options)
                }
            }));
            this.tokens.push(r);
            e && (this.tokens.push({
                index: i,
                text: "."
            }),
            this.tokens.push({
                index: i + 1,
                text: e
            }))
        },
        readString: function(n) {
            var f = this.index, t, r, e;
            this.index++;
            for (var i = "", o = n, u = !1; this.index < this.text.length; ) {
                if (t = this.text.charAt(this.index),
                o += t,
                u)
                    t === "u" ? (r = this.text.substring(this.index + 1, this.index + 5),
                    r.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + r + "]"),
                    this.index += 4,
                    i += String.fromCharCode(parseInt(r, 16))) : (e = ua[t],
                    i = i + (e || t)),
                    u = !1;
                else if (t === "\\")
                    u = !0;
                else {
                    if (t === n) {
                        this.index++;
                        this.tokens.push({
                            index: f,
                            text: o,
                            string: i,
                            literal: !0,
                            constant: !0,
                            fn: function() {
                                return i
                            }
                        });
                        return
                    }
                    i += t
                }
                this.index++
            }
            this.throwError("Unterminated quote", f)
        }
    };
    li = function(n, t, i) {
        this.lexer = n;
        this.$filter = t;
        this.options = i
    }
    ;
    li.ZERO = h(function() {
        return 0
    }, {
        constant: !0
    });
    li.prototype = {
        constructor: li,
        parse: function(n) {
            this.text = n;
            this.tokens = this.lexer.lex(n);
            var t = this.statements();
            return this.tokens.length !== 0 && this.throwError("is an unexpected token", this.tokens[0]),
            t.literal = !!t.literal,
            t.constant = !!t.constant,
            t
        },
        primary: function() {
            var n, t, i, r;
            for (this.expect("(") ? (n = this.filterChain(),
            this.consume(")")) : this.expect("[") ? n = this.arrayDeclaration() : this.expect("{") ? n = this.object() : (t = this.expect(),
            n = t.fn,
            n || this.throwError("not a primary expression", t),
            n.literal = !!t.literal,
            n.constant = !!t.constant); i = this.expect("(", "[", "."); )
                i.text === "(" ? (n = this.functionCall(n, r),
                r = null) : i.text === "[" ? (r = n,
                n = this.objectIndex(n)) : i.text === "." ? (r = n,
                n = this.fieldAccess(n)) : this.throwError("IMPOSSIBLE");
            return n
        },
        throwError: function(n, t) {
            throw rt("syntax", "Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].", t.text, n, t.index + 1, this.text, this.text.substring(t.index));
        },
        peekToken: function() {
            if (this.tokens.length === 0)
                throw rt("ueoe", "Unexpected end of expression: {0}", this.text);
            return this.tokens[0]
        },
        peek: function(n, t, i, r) {
            if (this.tokens.length > 0) {
                var f = this.tokens[0]
                  , u = f.text;
                if (u === n || u === t || u === i || u === r || !n && !t && !i && !r)
                    return f
            }
            return !1
        },
        expect: function(n, t, i, r) {
            var u = this.peek(n, t, i, r);
            return u ? (this.tokens.shift(),
            u) : !1
        },
        consume: function(n) {
            this.expect(n) || this.throwError("is unexpected, expecting [" + n + "]", this.peek())
        },
        unaryFn: function(n, t) {
            return h(function(i, r) {
                return n(i, r, t)
            }, {
                constant: t.constant
            })
        },
        ternaryFn: function(n, t, i) {
            return h(function(r, u) {
                return n(r, u) ? t(r, u) : i(r, u)
            }, {
                constant: n.constant && t.constant && i.constant
            })
        },
        binaryFn: function(n, t, i) {
            return h(function(r, u) {
                return t(r, u, n, i)
            }, {
                constant: n.constant && i.constant
            })
        },
        statements: function() {
            for (var n = []; ; )
                if (this.tokens.length > 0 && !this.peek("}", ")", ";", "]") && n.push(this.filterChain()),
                !this.expect(";"))
                    return n.length === 1 ? n[0] : function(t, i) {
                        for (var r, f, u = 0; u < n.length; u++)
                            r = n[u],
                            r && (f = r(t, i));
                        return f
                    }
        },
        filterChain: function() {
            for (var n = this.expression(), t; ; )
                if (t = this.expect("|"))
                    n = this.binaryFn(n, t.fn, this.filter());
                else
                    return n
        },
        filter: function() {
            for (var t = this.expect(), r = this.$filter(t.text), n = [], i; ; )
                if (t = this.expect(":"))
                    n.push(this.expression());
                else
                    return i = function(t, i, u) {
                        for (var e = [u], f = 0; f < n.length; f++)
                            e.push(n[f](t, i));
                        return r.apply(t, e)
                    }
                    ,
                    function() {
                        return i
                    }
        },
        expression: function() {
            return this.assignment()
        },
        assignment: function() {
            var n = this.ternary(), i, t;
            return (t = this.expect("=")) ? (n.assign || this.throwError("implies assignment but [" + this.text.substring(0, t.index) + "] can not be assigned to", t),
            i = this.ternary(),
            function(t, r) {
                return n.assign(t, i(t, r), r)
            }
            ) : n
        },
        ternary: function() {
            var t = this.logicalOR(), i, n;
            if (n = this.expect("?")) {
                if (i = this.assignment(),
                n = this.expect(":"))
                    return this.ternaryFn(t, i, this.assignment());
                this.throwError("expected :", n)
            } else
                return t
        },
        logicalOR: function() {
            for (var n = this.logicalAND(), t; ; )
                if (t = this.expect("||"))
                    n = this.binaryFn(n, t.fn, this.logicalAND());
                else
                    return n
        },
        logicalAND: function() {
            var n = this.equality(), t;
            return (t = this.expect("&&")) && (n = this.binaryFn(n, t.fn, this.logicalAND())),
            n
        },
        equality: function() {
            var n = this.relational(), t;
            return (t = this.expect("==", "!=", "===", "!==")) && (n = this.binaryFn(n, t.fn, this.equality())),
            n
        },
        relational: function() {
            var n = this.additive(), t;
            return (t = this.expect("<", ">", "<=", ">=")) && (n = this.binaryFn(n, t.fn, this.relational())),
            n
        },
        additive: function() {
            for (var n = this.multiplicative(), t; t = this.expect("+", "-"); )
                n = this.binaryFn(n, t.fn, this.multiplicative());
            return n
        },
        multiplicative: function() {
            for (var n = this.unary(), t; t = this.expect("*", "/", "%"); )
                n = this.binaryFn(n, t.fn, this.unary());
            return n
        },
        unary: function() {
            var n;
            return this.expect("+") ? this.primary() : (n = this.expect("-")) ? this.binaryFn(li.ZERO, n.fn, this.unary()) : (n = this.expect("!")) ? this.unaryFn(n.fn, this.unary()) : this.primary()
        },
        fieldAccess: function(n) {
            var t = this
              , i = this.expect().text
              , r = ro(i, this.options, this.text);
            return h(function(t, i, u) {
                return r(u || n(t, i))
            }, {
                assign: function(r, u, f) {
                    var e = n(r, f);
                    return e || n.assign(r, e = {}),
                    tu(e, i, u, t.text, t.options)
                }
            })
        },
        objectIndex: function(n) {
            var t = this
              , r = this.expression();
            return this.consume("]"),
            h(function(u, f) {
                var s = n(u, f), h = r(u, f), e, o;
                return (st(h, t.text),
                !s) ? i : (e = pt(s[h], t.text),
                e && e.then && t.options.unwrapPromises && (o = e,
                "$$v"in e || (o.$$v = i,
                o.then(function(n) {
                    o.$$v = n
                })),
                e = e.$$v),
                e)
            }, {
                assign: function(i, u, f) {
                    var o = st(r(i, f), t.text)
                      , e = pt(n(i, f), t.text);
                    return e || n.assign(i, e = {}),
                    e[o] = u
                }
            })
        },
        functionCall: function(n, t) {
            var r = [], i;
            if (this.peekToken().text !== ")")
                do
                    r.push(this.expression());
                while (this.expect(","));return this.consume(")"),
            i = this,
            function(u, f) {
                for (var o, l, e = [], h = t ? t(u, f) : u, c = 0; c < r.length; c++)
                    e.push(pt(r[c](u, f), i.text));
                return o = n(u, f, h) || s,
                pt(h, i.text),
                tc(o, i.text),
                l = o.apply ? o.apply(h, e) : o(e[0], e[1], e[2], e[3], e[4]),
                pt(l, i.text)
            }
        },
        arrayDeclaration: function() {
            var n = [], i = !0, t;
            if (this.peekToken().text !== "]")
                do {
                    if (this.peek("]"))
                        break;
                    t = this.expression();
                    n.push(t);
                    t.constant || (i = !1)
                } while (this.expect(","));return this.consume("]"),
            h(function(t, i) {
                for (var u = [], r = 0; r < n.length; r++)
                    u.push(n[r](t, i));
                return u
            }, {
                literal: !0,
                constant: i
            })
        },
        object: function() {
            var n = [], r = !0, t, u, i;
            if (this.peekToken().text !== "}")
                do {
                    if (this.peek("}"))
                        break;
                    t = this.expect();
                    u = t.string || t.text;
                    this.consume(":");
                    i = this.expression();
                    n.push({
                        key: u,
                        value: i
                    });
                    i.constant || (r = !1)
                } while (this.expect(","));return this.consume("}"),
            h(function(t, i) {
                for (var r, f = {}, u = 0; u < n.length; u++)
                    r = n[u],
                    f[r.key] = r.value(t, i);
                return f
            }, {
                literal: !0,
                constant: r
            })
        }
    };
    fu = {};
    at = y("$sce");
    tt = {
        HTML: "html",
        CSS: "css",
        URL: "url",
        RESOURCE_URL: "resourceUrl",
        JS: "js"
    };
    b = t.createElement("a");
    yf = wt(n.location.href, !0);
    eo.$inject = ["$provide"];
    oo.$inject = ["$locale"];
    so.$inject = ["$locale"];
    pf = ".";
    var fa = {
        yyyy: d("FullYear", 4),
        yy: d("FullYear", 2, 0, !0),
        y: d("FullYear", 1),
        MMMM: iu("Month"),
        MMM: iu("Month", !0),
        MM: d("Month", 2, 1),
        M: d("Month", 1, 1),
        dd: d("Date", 2),
        d: d("Date", 1),
        HH: d("Hours", 2),
        H: d("Hours", 1),
        hh: d("Hours", 2, -12),
        h: d("Hours", 1, -12),
        mm: d("Minutes", 2),
        m: d("Minutes", 1),
        ss: d("Seconds", 2),
        s: d("Seconds", 1),
        sss: d("Milliseconds", 3),
        EEEE: iu("Day"),
        EEE: iu("Day", !0),
        a: bc,
        Z: wc
    }
      , ea = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/
      , oa = /^\-?\d+$/;
    co.$inject = ["$locale"];
    go = nt(v);
    ns = nt(ri);
    lo.$inject = ["$parse"];
    ts = nt({
        restrict: "E",
        compile: function(n, i) {
            return p <= 8 && (i.href || i.name || i.$set("href", ""),
            n.append(t.createComment("IE fix"))),
            !i.href && !i.xlinkHref && !i.name ? function(n, t) {
                var i = fi.call(t.prop("href")) === "[object SVGAnimatedString]" ? "xlink:href" : "href";
                t.on("click", function(n) {
                    t.attr(i) || n.preventDefault()
                })
            }
            : void 0
        }
    });
    eu = {};
    r(ir, function(n, t) {
        if (n != "multiple") {
            var i = ct("ng-" + t);
            eu[i] = function() {
                return {
                    priority: 100,
                    link: function(n, r, u) {
                        n.$watch(u[i], function(n) {
                            u.$set(t, !!n)
                        })
                    }
                }
            }
        }
    });
    r(["src", "srcset", "href"], function(n) {
        var t = ct("ng-" + n);
        eu[t] = function() {
            return {
                priority: 99,
                link: function(i, r, u) {
                    var e = n
                      , f = n;
                    n === "href" && fi.call(r.prop("href")) === "[object SVGAnimatedString]" && (f = "xlinkHref",
                    u.$attr[f] = "xlink:href",
                    e = null);
                    u.$observe(t, function(t) {
                        if (!t) {
                            n === "href" && u.$set(f, null);
                            return
                        }
                        u.$set(f, t);
                        p && e && r.prop(e, u[f])
                    })
                }
            }
        }
    });
    rr = {
        $addControl: s,
        $removeControl: s,
        $setValidity: s,
        $setDirty: s,
        $setPristine: s
    };
    ao.$inject = ["$element", "$attrs", "$scope", "$animate"];
    var us = function(n) {
        return ["$timeout", function(t) {
            return {
                name: "form",
                restrict: n ? "EAC" : "E",
                controller: ao,
                compile: function() {
                    return {
                        pre: function(n, r, u, f) {
                            var o, s, e;
                            if (!u.action) {
                                o = function(n) {
                                    n.preventDefault ? n.preventDefault() : n.returnValue = !1
                                }
                                ;
                                ou(r[0], "submit", o);
                                r.on("$destroy", function() {
                                    t(function() {
                                        sr(r[0], "submit", o)
                                    }, 0, !1)
                                })
                            }
                            if (s = r.parent().controller("form"),
                            e = u.name || u.ngForm,
                            e && tu(n, e, f, e),
                            s)
                                r.on("$destroy", function() {
                                    s.$removeControl(f);
                                    e && tu(n, e, i, e);
                                    h(f, rr)
                                })
                        }
                    }
                }
            }
        }
        ]
    }
      , sa = us()
      , ha = us(!0)
      , ca = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/
      , la = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i
      , aa = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/
      , fs = {
        text: ru,
        number: nl,
        url: tl,
        email: il,
        radio: rl,
        checkbox: ul,
        hidden: s,
        button: s,
        submit: s,
        reset: s,
        file: s
    };
    is = ["badInput"];
    var es = ["$browser", "$sniffer", function(n, t) {
        return {
            restrict: "E",
            require: "?ngModel",
            link: function(i, r, u, f) {
                f && (fs[v(u.type)] || fs.text)(i, r, u, f, t, n)
            }
        }
    }
    ]
      , su = "ng-valid"
      , hu = "ng-invalid"
      , vi = "ng-pristine"
      , cu = "ng-dirty"
      , va = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", function(n, t, i, u, f, e) {
        function h(n, t) {
            t = t ? "-" + br(t, "-") : "";
            e.removeClass(u, (n ? hu : su) + t);
            e.addClass(u, (n ? su : hu) + t)
        }
        var c, a, o;
        if (this.$viewValue = Number.NaN,
        this.$modelValue = Number.NaN,
        this.$parsers = [],
        this.$formatters = [],
        this.$viewChangeListeners = [],
        this.$pristine = !0,
        this.$dirty = !1,
        this.$valid = !0,
        this.$invalid = !1,
        this.$name = i.name,
        c = f(i.ngModel),
        a = c.assign,
        !a)
            throw y("ngModel")("nonassign", "Expression '{0}' is non-assignable. Element: {1}", i.ngModel, ot(u));
        this.$render = s;
        this.$isEmpty = function(n) {
            return l(n) || n === "" || n === null || n !== n
        }
        ;
        var w = u.inheritedData("$formController") || rr
          , v = 0
          , p = this.$error = {};
        u.addClass(vi);
        h(!0);
        this.$setValidity = function(n, t) {
            p[n] !== !t && (t ? (p[n] && v--,
            v || (h(!0),
            this.$valid = !0,
            this.$invalid = !1)) : (h(!1),
            this.$invalid = !0,
            this.$valid = !1,
            v++),
            p[n] = !t,
            h(t, n),
            w.$setValidity(n, t, this))
        }
        ;
        this.$setPristine = function() {
            this.$dirty = !1;
            this.$pristine = !0;
            e.removeClass(u, cu);
            e.addClass(u, vi)
        }
        ;
        this.$setViewValue = function(i) {
            this.$viewValue = i;
            this.$pristine && (this.$dirty = !0,
            this.$pristine = !1,
            e.removeClass(u, vi),
            e.addClass(u, cu),
            w.$setDirty());
            r(this.$parsers, function(n) {
                i = n(i)
            });
            this.$modelValue !== i && (this.$modelValue = i,
            a(n, i),
            r(this.$viewChangeListeners, function(n) {
                try {
                    n()
                } catch (i) {
                    t(i)
                }
            }))
        }
        ;
        o = this;
        n.$watch(function() {
            var t = c(n), i, r;
            if (o.$modelValue !== t) {
                for (i = o.$formatters,
                r = i.length,
                o.$modelValue = t; r--; )
                    t = i[r](t);
                o.$viewValue !== t && (o.$viewValue = t,
                o.$render())
            }
            return t
        })
    }
    ]
      , ya = function() {
        return {
            require: ["ngModel", "^?form"],
            controller: va,
            link: function(n, t, i, r) {
                var u = r[0]
                  , f = r[1] || rr;
                f.$addControl(u);
                n.$on("$destroy", function() {
                    f.$removeControl(u)
                })
            }
        }
    }
      , pa = nt({
        require: "ngModel",
        link: function(n, t, i, r) {
            r.$viewChangeListeners.push(function() {
                n.$eval(i.ngChange)
            })
        }
    })
      , os = function() {
        return {
            require: "?ngModel",
            link: function(n, t, i, r) {
                if (r) {
                    i.required = !0;
                    var u = function(n) {
                        if (i.required && r.$isEmpty(n)) {
                            r.$setValidity("required", !1);
                            return
                        }
                        return r.$setValidity("required", !0),
                        n
                    };
                    r.$formatters.push(u);
                    r.$parsers.unshift(u);
                    i.$observe("required", function() {
                        u(r.$viewValue)
                    })
                }
            }
        }
    }
      , wa = function() {
        return {
            require: "ngModel",
            link: function(n, t, u, f) {
                var e = /\/(.*)\//.exec(u.ngList)
                  , s = e && new RegExp(e[1]) || u.ngList || ","
                  , h = function(n) {
                    if (!l(n)) {
                        var t = [];
                        return n && r(n.split(s), function(n) {
                            n && t.push(g(n))
                        }),
                        t
                    }
                };
                f.$parsers.push(h);
                f.$formatters.push(function(n) {
                    return o(n) ? n.join(", ") : i
                });
                f.$isEmpty = function(n) {
                    return !n || !n.length
                }
            }
        }
    }
      , ba = /^(true|false|\d+)$/
      , ka = function() {
        return {
            priority: 100,
            compile: function(n, t) {
                return ba.test(t.ngValue) ? function(n, t, i) {
                    i.$set("value", n.$eval(i.ngValue))
                }
                : function(n, t, i) {
                    n.$watch(i.ngValue, function(n) {
                        i.$set("value", n)
                    })
                }
            }
        }
    }
      , da = bt({
        compile: function(n) {
            return n.addClass("ng-binding"),
            function(n, t, r) {
                t.data("$binding", r.ngBind);
                n.$watch(r.ngBind, function(n) {
                    t.text(n == i ? "" : n)
                })
            }
        }
    })
      , ga = ["$interpolate", function(n) {
        return function(t, i, r) {
            var u = n(i.attr(r.$attr.ngBindTemplate));
            i.addClass("ng-binding").data("$binding", u);
            r.$observe("ngBindTemplate", function(n) {
                i.text(n)
            })
        }
    }
    ]
      , nv = ["$sce", "$parse", function(n, t) {
        return {
            compile: function(i) {
                return i.addClass("ng-binding"),
                function(i, r, u) {
                    function e() {
                        return (f(i) || "").toString()
                    }
                    r.data("$binding", u.ngBindHtml);
                    var f = t(u.ngBindHtml);
                    i.$watch(e, function() {
                        r.html(n.getTrustedHtml(f(i)) || "")
                    })
                }
            }
        }
    }
    ]
      , tv = cf("", !0)
      , iv = cf("Odd", 0)
      , rv = cf("Even", 1)
      , uv = bt({
        compile: function(n, t) {
            t.$set("ngCloak", i);
            n.removeClass("ng-cloak")
        }
    })
      , fv = [function() {
        return {
            scope: !0,
            controller: "@",
            priority: 500
        }
    }
    ]
      , ss = {}
      , ev = {
        blur: !0,
        focus: !0
    };
    r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function(n) {
        var t = ct("ng-" + n);
        ss[t] = ["$parse", "$rootScope", function(i, r) {
            return {
                compile: function(u, f) {
                    var e = i(f[t]);
                    return function(t, i) {
                        i.on(n, function(i) {
                            var u = function() {
                                e(t, {
                                    $event: i
                                })
                            };
                            ev[n] && r.$$phase ? t.$evalAsync(u) : t.$apply(u)
                        })
                    }
                }
            }
        }
        ]
    });
    var ov = ["$animate", function(n) {
        return {
            transclude: "element",
            priority: 600,
            terminal: !0,
            restrict: "A",
            $$tlb: !0,
            link: function(i, r, u, f, e) {
                var h, o, s;
                i.$watch(u.ngIf, function(f) {
                    ki(f) ? o || (o = i.$new(),
                    e(o, function(i) {
                        i[i.length++] = t.createComment(" end ngIf: " + u.ngIf + " ");
                        h = {
                            clone: i
                        };
                        n.enter(i, r.parent(), r)
                    })) : (s && (s.remove(),
                    s = null),
                    o && (o.$destroy(),
                    o = null),
                    h && (s = wu(h.clone),
                    n.leave(s, function() {
                        s = null
                    }),
                    h = null))
                })
            }
        }
    }
    ]
      , sv = ["$http", "$templateCache", "$anchorScroll", "$animate", "$sce", function(n, t, i, r, u) {
        return {
            restrict: "ECA",
            priority: 400,
            terminal: !0,
            transclude: "element",
            controller: fr.noop,
            compile: function(e, o) {
                var h = o.ngInclude || o.src
                  , c = o.onload || ""
                  , s = o.autoscroll;
                return function(e, o, l, a, v) {
                    var b = 0, y, p, w, k = function() {
                        p && (p.remove(),
                        p = null);
                        y && (y.$destroy(),
                        y = null);
                        w && (r.leave(w, function() {
                            p = null
                        }),
                        p = w,
                        w = null)
                    };
                    e.$watch(u.parseAsResourceUrl(h), function(u) {
                        var l = function() {
                            f(s) && (!s || e.$eval(s)) && i()
                        }
                          , h = ++b;
                        u ? (n.get(u, {
                            cache: t
                        }).success(function(n) {
                            var t, i;
                            h === b && (t = e.$new(),
                            a.template = n,
                            i = v(t, function(n) {
                                k();
                                r.enter(n, null, o, l)
                            }),
                            y = t,
                            w = i,
                            y.$emit("$includeContentLoaded"),
                            e.$eval(c))
                        }).error(function() {
                            h === b && k()
                        }),
                        e.$emit("$includeContentRequested")) : (k(),
                        a.template = null)
                    })
                }
            }
        }
    }
    ]
      , hv = ["$compile", function(n) {
        return {
            restrict: "ECA",
            priority: -400,
            require: "ngInclude",
            link: function(t, i, r, u) {
                i.html(u.template);
                n(i.contents())(t)
            }
        }
    }
    ]
      , cv = bt({
        priority: 450,
        compile: function() {
            return {
                pre: function(n, t, i) {
                    n.$eval(i.ngInit)
                }
            }
        }
    })
      , lv = bt({
        terminal: !0,
        priority: 1e3
    })
      , av = ["$locale", "$interpolate", function(n, t) {
        var i = /{}/g;
        return {
            restrict: "EA",
            link: function(u, f, e) {
                var s = e.count
                  , l = e.$attr.when && f.attr(e.$attr.when)
                  , h = e.offset || 0
                  , o = u.$eval(l) || {}
                  , c = {}
                  , a = t.startSymbol()
                  , y = t.endSymbol()
                  , p = /^when(Minus)?(.+)$/;
                r(e, function(n, t) {
                    p.test(t) && (o[v(t.replace("when", "").replace("Minus", "-"))] = f.attr(e.$attr[t]))
                });
                r(o, function(n, r) {
                    c[r] = t(n.replace(i, a + s + "-" + h + y))
                });
                u.$watch(function() {
                    var t = parseFloat(u.$eval(s));
                    return isNaN(t) ? "" : (t in o || (t = n.pluralCat(t - h)),
                    c[t](u, f, !0))
                }, function(n) {
                    f.text(n)
                })
            }
        }
    }
    ]
      , vv = ["$parse", "$animate", function(n, i) {
        function s(n) {
            return n.clone[0]
        }
        function e(n) {
            return n.clone[n.clone.length - 1]
        }
        var o = "$$NG_REMOVED"
          , f = y("ngRepeat");
        return {
            transclude: "element",
            priority: 1e3,
            terminal: !0,
            $$tlb: !0,
            link: function(h, c, l, a, v) {
                var b = l.ngRepeat, y = b.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/), d, it, g, rt, ut, nt, ft, tt, w, k = {
                    $id: hi
                }, p;
                if (!y)
                    throw f("iexp", "Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.", b);
                if (nt = y[1],
                ft = y[2],
                d = y[3],
                d ? (it = n(d),
                g = function(n, t, i) {
                    return w && (k[w] = n),
                    k[tt] = t,
                    k.$index = i,
                    it(h, k)
                }
                ) : (rt = function(n, t) {
                    return hi(t)
                }
                ,
                ut = function(n) {
                    return n
                }
                ),
                y = nt.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),
                !y)
                    throw f("iidexp", "'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.", nt);
                tt = y[3] || y[1];
                w = y[2];
                p = {};
                h.$watchCollection(ft, function(n) {
                    var l, ct, ft = c[0], ot, st = {}, vt, y, k, ht, nt, lt, d, a, it = [], at;
                    if (yi(n))
                        d = n,
                        lt = g || rt;
                    else {
                        lt = g || ut;
                        d = [];
                        for (k in n)
                            n.hasOwnProperty(k) && k.charAt(0) != "$" && d.push(k);
                        d.sort()
                    }
                    for (vt = d.length,
                    ct = it.length = d.length,
                    l = 0; l < ct; l++)
                        if (k = n === d ? l : d[l],
                        ht = n[k],
                        nt = lt(k, ht, l),
                        ii(nt, "`track by` id"),
                        p.hasOwnProperty(nt))
                            a = p[nt],
                            delete p[nt],
                            st[nt] = a,
                            it[l] = a;
                        else if (st.hasOwnProperty(nt)) {
                            r(it, function(n) {
                                n && n.scope && (p[n.id] = n)
                            });
                            throw f("dupes", "Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}", b, nt, et(ht));
                        } else
                            it[l] = {
                                id: nt
                            },
                            st[nt] = !1;
                    for (k in p)
                        p.hasOwnProperty(k) && (a = p[k],
                        at = wu(a.clone),
                        i.leave(at),
                        r(at, function(n) {
                            n[o] = !0
                        }),
                        a.scope.$destroy());
                    for (l = 0,
                    ct = d.length; l < ct; l++) {
                        if (k = n === d ? l : d[l],
                        ht = n[k],
                        a = it[l],
                        it[l - 1] && (ft = e(it[l - 1])),
                        a.scope) {
                            y = a.scope;
                            ot = ft;
                            do
                                ot = ot.nextSibling;
                            while (ot && ot[o]);s(a) != ot && i.move(wu(a.clone), null, u(ft));
                            ft = e(a)
                        } else
                            y = h.$new();
                        y[tt] = ht;
                        w && (y[w] = k);
                        y.$index = l;
                        y.$first = l === 0;
                        y.$last = l === vt - 1;
                        y.$middle = !(y.$first || y.$last);
                        y.$odd = !(y.$even = (l & 1) == 0);
                        a.scope || v(y, function(n) {
                            n[n.length++] = t.createComment(" end ngRepeat: " + b + " ");
                            i.enter(n, null, u(ft));
                            ft = n;
                            a.scope = y;
                            a.clone = n;
                            st[a.id] = a
                        })
                    }
                    p = st
                })
            }
        }
    }
    ]
      , yv = ["$animate", function(n) {
        return function(t, i, r) {
            t.$watch(r.ngShow, function(t) {
                n[ki(t) ? "removeClass" : "addClass"](i, "ng-hide")
            })
        }
    }
    ]
      , pv = ["$animate", function(n) {
        return function(t, i, r) {
            t.$watch(r.ngHide, function(t) {
                n[ki(t) ? "addClass" : "removeClass"](i, "ng-hide")
            })
        }
    }
    ]
      , wv = bt(function(n, t, i) {
        n.$watch(i.ngStyle, function(n, i) {
            i && n !== i && r(i, function(n, i) {
                t.css(i, "")
            });
            n && t.css(n)
        }, !0)
    })
      , bv = ["$animate", function(n) {
        return {
            restrict: "EA",
            require: "ngSwitch",
            controller: ["$scope", function() {
                this.cases = {}
            }
            ],
            link: function(t, i, u, f) {
                var c = u.ngSwitch || u.on
                  , h = []
                  , s = []
                  , e = []
                  , o = [];
                t.$watch(c, function(i) {
                    for (var l, c = 0, a = e.length; c < a; ++c)
                        e[c].remove();
                    for (e.length = 0,
                    c = 0,
                    a = o.length; c < a; ++c)
                        l = s[c],
                        o[c].$destroy(),
                        e[c] = l,
                        n.leave(l, function() {
                            e.splice(c, 1)
                        });
                    s.length = 0;
                    o.length = 0;
                    (h = f.cases["!" + i] || f.cases["?"]) && (t.$eval(u.change),
                    r(h, function(i) {
                        var r = t.$new();
                        o.push(r);
                        i.transclude(r, function(t) {
                            var r = i.element;
                            s.push(t);
                            n.enter(t, r.parent(), r)
                        })
                    }))
                })
            }
        }
    }
    ]
      , kv = bt({
        transclude: "element",
        priority: 800,
        require: "^ngSwitch",
        link: function(n, t, i, r, u) {
            r.cases["!" + i.ngSwitchWhen] = r.cases["!" + i.ngSwitchWhen] || [];
            r.cases["!" + i.ngSwitchWhen].push({
                transclude: u,
                element: t
            })
        }
    })
      , dv = bt({
        transclude: "element",
        priority: 800,
        require: "^ngSwitch",
        link: function(n, t, i, r, u) {
            r.cases["?"] = r.cases["?"] || [];
            r.cases["?"].push({
                transclude: u,
                element: t
            })
        }
    })
      , gv = bt({
        link: function(n, t, i, r, u) {
            if (!u)
                throw y("ngTransclude")("orphan", "Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}", ot(t));
            u(function(n) {
                t.empty();
                t.append(n)
            })
        }
    })
      , ny = ["$templateCache", function(n) {
        return {
            restrict: "E",
            terminal: !0,
            compile: function(t, i) {
                if (i.type == "text/ng-template") {
                    var r = i.id
                      , u = t[0].text;
                    n.put(r, u)
                }
            }
        }
    }
    ]
      , ty = y("ngOptions")
      , iy = nt({
        terminal: !0
    })
      , ry = ["$compile", "$parse", function(n, e) {
        var h = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/
          , c = {
            $setViewValue: s
        };
        return {
            restrict: "E",
            require: ["select", "?ngModel"],
            controller: ["$element", "$scope", "$attrs", function(n, t, i) {
                var r = this, f = {}, e = c, o, u;
                r.databound = i.ngModel;
                r.init = function(n, t, i) {
                    e = n;
                    o = t;
                    u = i
                }
                ;
                r.addOption = function(t) {
                    ii(t, '"option value"');
                    f[t] = !0;
                    e.$viewValue == t && (n.val(t),
                    u.parent() && u.remove())
                }
                ;
                r.removeOption = function(n) {
                    this.hasOption(n) && (delete f[n],
                    e.$viewValue == n && this.renderUnknownOption(n))
                }
                ;
                r.renderUnknownOption = function(t) {
                    var i = "? " + hi(t) + " ?";
                    u.val(i);
                    n.prepend(u);
                    n.val(i);
                    u.prop("selected", !0)
                }
                ;
                r.hasOption = function(n) {
                    return f.hasOwnProperty(n)
                }
                ;
                t.$on("$destroy", function() {
                    r.renderUnknownOption = s
                })
            }
            ],
            link: function(s, c, a, v) {
                function ut(n, t, i, r) {
                    i.$render = function() {
                        var n = i.$viewValue;
                        r.hasOption(n) ? (k.parent() && k.remove(),
                        t.val(n),
                        n === "" && nt.prop("selected", !0)) : l(n) && nt ? t.val("") : r.renderUnknownOption(n)
                    }
                    ;
                    t.on("change", function() {
                        n.$apply(function() {
                            k.parent() && k.remove();
                            i.$setViewValue(t.val())
                        })
                    })
                }
                function et(n, t, i) {
                    var u;
                    i.$render = function() {
                        var n = new nr(i.$viewValue);
                        r(t.find("option"), function(t) {
                            t.selected = f(n.get(t.value))
                        })
                    }
                    ;
                    n.$watch(function() {
                        ni(u, i.$viewValue) || (u = ft(i.$viewValue),
                        i.$render())
                    });
                    t.on("change", function() {
                        n.$apply(function() {
                            var n = [];
                            r(t.find("option"), function(t) {
                                t.selected && n.push(t.value)
                            });
                            i.$setViewValue(n)
                        })
                    })
                }
                function st(t, r, u) {
                    function tt() {
                        var r = !1, n, f, i;
                        if (w)
                            if (n = u.$modelValue,
                            s && o(n))
                                for (r = new nr([]),
                                f = {},
                                i = 0; i < n.length; i++)
                                    f[l] = n[i],
                                    r.put(s(t, f), n[i]);
                            else
                                r = new nr(n);
                        return r
                    }
                    function b() {
                        for (var ot = {
                            "": []
                        }, yt = [""], o, ut, n, b, g, h, pt = u.$modelValue, wt = d(t) || [], bt = a ? gf(wt) : wt, st, dt, vt, ft, c = {}, ct, lt = tt(), e, et, at, kt, i = 0; vt = bt.length,
                        i < vt; i++) {
                            if (st = i,
                            a) {
                                if (st = bt[i],
                                st.charAt(0) === "$")
                                    continue;
                                c[a] = st
                            }
                            c[l] = wt[st];
                            o = it(t, c) || "";
                            (ut = ot[o]) || (ut = ot[o] = [],
                            yt.push(o));
                            w ? ct = f(lt.remove(s ? s(t, c) : k(t, c))) : (s ? (kt = {},
                            kt[l] = pt,
                            ct = s(t, kt) === s(t, c)) : ct = pt === k(t, c),
                            lt = lt || ct);
                            at = nt(t, c);
                            at = f(at) ? at : "";
                            ut.push({
                                id: s ? s(t, c) : a ? bt[i] : i,
                                label: at,
                                selected: ct
                            })
                        }
                        for (w || (y || pt === null ? ot[""].unshift({
                            id: "",
                            label: "",
                            selected: !lt
                        }) : lt || ot[""].unshift({
                            id: "?",
                            label: "",
                            selected: !0
                        })),
                        ft = 0,
                        dt = yt.length; ft < dt; ft++) {
                            for (o = yt[ft],
                            ut = ot[o],
                            v.length <= ft ? (b = {
                                element: ht.clone().attr("label", o),
                                label: ut.label
                            },
                            g = [b],
                            v.push(g),
                            r.append(b.element)) : (g = v[ft],
                            b = g[0],
                            b.label != o && b.element.attr("label", b.label = o)),
                            e = null,
                            i = 0,
                            vt = ut.length; i < vt; i++)
                                n = ut[i],
                                (h = g[i + 1]) ? (e = h.element,
                                h.label !== n.label && e.text(h.label = n.label),
                                h.id !== n.id && e.val(h.id = n.id),
                                e[0].selected !== n.selected && (e.prop("selected", h.selected = n.selected),
                                p && e.prop("selected", h.selected))) : (n.id === "" && y ? et = y : (et = rt.clone()).val(n.id).prop("selected", n.selected).attr("selected", n.selected).text(n.label),
                                g.push(h = {
                                    element: et,
                                    label: n.label,
                                    id: n.id,
                                    selected: n.selected
                                }),
                                e ? e.after(et) : b.element.append(et),
                                e = et);
                            for (i++; g.length > i; )
                                g.pop().element.remove()
                        }
                        while (v.length > ft)
                            v.pop()[0].element.remove()
                    }
                    var c;
                    if (!(c = g.match(h)))
                        throw ty("iexp", "Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}", g, ot(r));
                    var nt = e(c[2] || c[1])
                      , l = c[4] || c[6]
                      , a = c[5]
                      , it = e(c[3] || "")
                      , k = e(c[2] ? c[1] : l)
                      , d = e(c[7])
                      , ut = c[8]
                      , s = ut ? e(c[8]) : null
                      , v = [[{
                        element: r,
                        label: ""
                    }]];
                    y && (n(y)(t),
                    y.removeClass("ng-scope"),
                    y.remove());
                    r.empty();
                    r.on("change", function() {
                        t.$apply(function() {
                            var p, h = d(t) || [], n = {}, f, o, g, c, y, nt, tt, e;
                            if (w) {
                                for (o = [],
                                y = 0,
                                tt = v.length; y < tt; y++)
                                    for (p = v[y],
                                    c = 1,
                                    nt = p.length; c < nt; c++)
                                        if ((g = p[c].element)[0].selected) {
                                            if (f = g.val(),
                                            a && (n[a] = f),
                                            s) {
                                                for (e = 0; e < h.length; e++)
                                                    if (n[l] = h[e],
                                                    s(t, n) == f)
                                                        break
                                            } else
                                                n[l] = h[f];
                                            o.push(k(t, n))
                                        }
                            } else if (f = r.val(),
                            f == "?")
                                o = i;
                            else if (f === "")
                                o = null;
                            else if (s) {
                                for (e = 0; e < h.length; e++)
                                    if (n[l] = h[e],
                                    s(t, n) == f) {
                                        o = k(t, n);
                                        break
                                    }
                            } else
                                n[l] = h[f],
                                a && (n[a] = f),
                                o = k(t, n);
                            u.$setViewValue(o);
                            b()
                        })
                    });
                    u.$render = b;
                    t.$watchCollection(d, b);
                    t.$watchCollection(function() {
                        var u = {}, i = d(t), r, n, f;
                        if (i) {
                            for (r = new Array(i.length),
                            n = 0,
                            f = i.length; n < f; n++)
                                u[l] = i[n],
                                r[n] = nt(t, u);
                            return r
                        }
                    }, b);
                    w && t.$watchCollection(function() {
                        return u.$modelValue
                    }, b)
                }
                if (v[1]) {
                    for (var it = v[0], b = v[1], w = a.multiple, g = a.ngOptions, y = !1, nt, rt = u(t.createElement("option")), ht = u(t.createElement("optgroup")), k = rt.clone(), d = 0, tt = c.children(), ct = tt.length; d < ct; d++)
                        if (tt[d].value === "") {
                            nt = y = tt.eq(d);
                            break
                        }
                    it.init(b, y, k);
                    w && (b.$isEmpty = function(n) {
                        return !n || n.length === 0
                    }
                    );
                    g ? st(s, c, b) : w ? et(s, c, b) : ut(s, c, b, it)
                }
            }
        }
    }
    ]
      , uy = ["$interpolate", function(n) {
        var t = {
            addOption: s,
            removeOption: s
        };
        return {
            restrict: "E",
            priority: 100,
            compile: function(i, r) {
                if (l(r.value)) {
                    var u = n(i.text(), !0);
                    u || r.$set("value", i.text())
                }
                return function(n, i, r) {
                    var e = "$selectController"
                      , o = i.parent()
                      , f = o.data(e) || o.parent().data(e);
                    f && f.databound ? i.prop("selected", !1) : f = t;
                    u ? n.$watch(u, function(n, t) {
                        r.$set("value", n);
                        n !== t && f.removeOption(t);
                        f.addOption(n)
                    }) : f.addOption(r.value);
                    i.on("$destroy", function() {
                        f.removeOption(r.value)
                    })
                }
            }
        }
    }
    ]
      , fy = nt({
        restrict: "E",
        terminal: !0
    });
    if (n.angular.bootstrap) {
        console.log("WARNING: Tried to load angular more than once.");
        return
    }
    bs();
    ds(fr);
    u(t).ready(function() {
        ws(t, ee)
    })
}
)(window, document);
window.angular.$$csp() || window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}<\/style>');
/**
 * State-based routing for AngularJS
 * @version v0.2.10
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
typeof module != "undefined" && typeof exports != "undefined" && module.exports === exports && (module.exports = "ui.router"),
function(n, t, i) {
    "use strict";
    function c(n, t) {
        return e(new (e(function() {}, {
            prototype: n
        })), t)
    }
    function y(n) {
        return f(arguments, function(t) {
            t !== n && f(t, function(t, i) {
                n.hasOwnProperty(i) || (n[i] = t)
            })
        }),
        n
    }
    function ht(n, t) {
        var r = [];
        for (var i in n.path) {
            if (n.path[i] !== t.path[i])
                break;
            r.push(n.path[i])
        }
        return r
    }
    function ct(n, t) {
        if (Array.prototype.indexOf)
            return n.indexOf(t, Number(arguments[2]) || 0);
        var r = n.length >>> 0
          , i = Number(arguments[2]) || 0;
        for (i = i < 0 ? Math.ceil(i) : Math.floor(i),
        i < 0 && (i += r); i < r; i++)
            if (i in n && n[i] === t)
                return i;
        return -1
    }
    function p(n, t, i, r) {
        var o = ht(i, r), u, h = {}, c = [], s, f;
        for (s in o)
            if (o[s].params && o[s].params.length) {
                u = o[s].params;
                for (f in u)
                    ct(c, u[f]) >= 0 || (c.push(u[f]),
                    h[u[f]] = n[u[f]])
            }
        return e({}, h, t)
    }
    function w(n, t) {
        var i = {};
        return f(n, function(n) {
            var r = t[n];
            i[n] = r != null ? String(r) : null
        }),
        i
    }
    function l(n, t, i) {
        var f, r, u;
        if (!i) {
            i = [];
            for (f in n)
                i.push(f)
        }
        for (r = 0; r < i.length; r++)
            if (u = i[r],
            n[u] != t[u])
                return !1;
        return !0
    }
    function lt(n, t) {
        var i = {};
        return f(n, function(n) {
            i[n] = t[n]
        }),
        i
    }
    function b(n, t) {
        var s = 1
          , c = 2
          , o = {}
          , l = []
          , a = o
          , v = e(n.when(o), {
            $$promises: o,
            $$values: o
        });
        this.study = function(o) {
            function k(n, i) {
                if (b[i] !== c) {
                    if (w.push(i),
                    b[i] === s) {
                        w.splice(0, w.indexOf(i));
                        throw new Error("Cyclic dependency: " + w.join(" -> "));
                    }
                    if (b[i] = s,
                    u(n))
                        p.push(i, [function() {
                            return t.get(n)
                        }
                        ], l);
                    else {
                        var r = t.annotate(n);
                        f(r, function(n) {
                            n !== i && o.hasOwnProperty(n) && k(o[n], n)
                        });
                        p.push(i, n, r)
                    }
                    w.pop();
                    b[i] = c
                }
            }
            function d(n) {
                return h(n) && n.then && n.$$promises
            }
            if (!h(o))
                throw new Error("'invocables' must be an object");
            var p = []
              , w = []
              , b = {};
            return f(o, k),
            o = w = b = null,
            function(u, o, s) {
                function b() {
                    --ut || (it || y(w, o.$$values),
                    l.$$values = w,
                    l.$$promises = !0,
                    nt.resolve(w))
                }
                function g(n) {
                    l.$$failure = n;
                    nt.reject(n)
                }
                function rt(i, e, o) {
                    function c(n) {
                        h.reject(n);
                        g(n)
                    }
                    function v() {
                        if (!r(l.$$failure))
                            try {
                                h.resolve(t.invoke(e, s, w));
                                h.promise.then(function(n) {
                                    w[i] = n;
                                    b()
                                }, c)
                            } catch (n) {
                                c(n)
                            }
                    }
                    var h = n.defer()
                      , a = 0;
                    f(o, function(n) {
                        k.hasOwnProperty(n) && !u.hasOwnProperty(n) && (a++,
                        k[n].then(function(t) {
                            w[n] = t;
                            --a || v()
                        }, c))
                    });
                    a || v();
                    k[i] = h.promise
                }
                var c, tt;
                if (d(u) && s === i && (s = o,
                o = u,
                u = null),
                u) {
                    if (!h(u))
                        throw new Error("'locals' must be an object");
                } else
                    u = a;
                if (o) {
                    if (!d(o))
                        throw new Error("'parent' must be a promise returned by $resolve.resolve()");
                } else
                    o = v;
                var nt = n.defer()
                  , l = nt.promise
                  , k = l.$$promises = {}
                  , w = e({}, u)
                  , ut = 1 + p.length / 3
                  , it = !1;
                if (r(o.$$failure))
                    return g(o.$$failure),
                    l;
                for (o.$$values ? (it = y(w, o.$$values),
                b()) : (e(k, o.$$promises),
                o.then(b, g)),
                c = 0,
                tt = p.length; c < tt; c += 3)
                    u.hasOwnProperty(p[c]) ? b() : rt(p[c], p[c + 1], p[c + 2]);
                return l
            }
        }
        ;
        this.resolve = function(n, t, i, r) {
            return this.study(n)(t, i, r)
        }
    }
    function k(n, t, i) {
        this.fromConfig = function(n, t, i) {
            return r(n.template) ? this.fromString(n.template, t) : r(n.templateUrl) ? this.fromUrl(n.templateUrl, t) : r(n.templateProvider) ? this.fromProvider(n.templateProvider, t, i) : null
        }
        ;
        this.fromString = function(n, t) {
            return o(n) ? n(t) : n
        }
        ;
        this.fromUrl = function(i, r) {
            return o(i) && (i = i(r)),
            i == null ? null : n.get(i, {
                cache: t
            }).then(function(n) {
                return n.data
            })
        }
        ;
        this.fromProvider = function(n, t, r) {
            return i.invoke(n, null, r || {
                params: t
            })
        }
    }
    function s(n) {
        function s(t) {
            if (!/^\w+(-+\w+)*$/.test(t))
                throw new Error("Invalid parameter name '" + t + "' in pattern '" + n + "'");
            if (l[t])
                throw new Error("Duplicate parameter name '" + t + "' in pattern '" + n + "'");
            l[t] = !0;
            p.push(t)
        }
        function h(n) {
            return n.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&")
        }
        var c = /([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, l = {}, e = "^", u = 0, i, o = this.segments = [], p = this.params = [], a, v, t, r, y;
        for (this.source = n; i = c.exec(n); ) {
            if (a = i[2] || i[3],
            v = i[4] || (i[1] == "*" ? ".*" : "[^/]*"),
            t = n.substring(u, i.index),
            t.indexOf("?") >= 0)
                break;
            e += h(t) + "(" + v + ")";
            s(a);
            o.push(t);
            u = c.lastIndex
        }
        t = n.substring(u);
        r = t.indexOf("?");
        r >= 0 ? (y = this.sourceSearch = t.substring(r),
        t = t.substring(0, r),
        this.sourcePath = n.substring(0, u + r),
        f(y.substring(1).split(/[&?]/), s)) : (this.sourcePath = n,
        this.sourceSearch = "");
        e += h(t) + "$";
        o.push(t);
        this.regexp = new RegExp(e);
        this.prefix = o[0]
    }
    function at() {
        this.compile = function(n) {
            return new s(n)
        }
        ;
        this.isMatcher = function(n) {
            return h(n) && o(n.exec) && o(n.format) && o(n.concat)
        }
        ;
        this.$get = function() {
            return this
        }
    }
    function d(n) {
        function s(n) {
            var t = /^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(n.source);
            return t != null ? t[1].replace(/\\(.)/g, "$1") : ""
        }
        function h(n, t) {
            return n.replace(/\$(\$|\d{1,2})/, function(n, i) {
                return t[i === "$" ? 0 : Number(i)]
            })
        }
        function f(n, t, i) {
            if (!i)
                return !1;
            var u = n.invoke(t, t, {
                $match: i
            });
            return r(u) ? u : !0
        }
        var t = []
          , i = null;
        this.rule = function(n) {
            if (!o(n))
                throw new Error("'rule' must be a function");
            return t.push(n),
            this
        }
        ;
        this.otherwise = function(n) {
            if (u(n)) {
                var t = n;
                n = function() {
                    return t
                }
            } else if (!o(n))
                throw new Error("'rule' must be a function");
            return i = n,
            this
        }
        ;
        this.when = function(t, i) {
            var r, c = u(i), y, l, a;
            if (u(t) && (t = n.compile(t)),
            !c && !o(i) && !v(i))
                throw new Error("invalid 'handler' in when()");
            y = {
                matcher: function(t, i) {
                    return c && (r = n.compile(i),
                    i = ["$match", function(n) {
                        return r.format(n)
                    }
                    ]),
                    e(function(n, r) {
                        return f(n, i, t.exec(r.path(), r.search()))
                    }, {
                        prefix: u(t.prefix) ? t.prefix : ""
                    })
                },
                regex: function(n, t) {
                    if (n.global || n.sticky)
                        throw new Error("when() RegExp must not be global or sticky");
                    return c && (r = t,
                    t = ["$match", function(n) {
                        return h(r, n)
                    }
                    ]),
                    e(function(i, r) {
                        return f(i, t, n.exec(r.path()))
                    }, {
                        prefix: s(n)
                    })
                }
            };
            l = {
                matcher: n.isMatcher(t),
                regex: t instanceof RegExp
            };
            for (a in l)
                if (l[a])
                    return this.rule(y[a](t, i));
            throw new Error("invalid 'what' in when()");
        }
        ;
        this.$get = ["$location", "$rootScope", "$injector", function(n, r, f) {
            function e(r) {
                function o(t) {
                    var i = t(f, n);
                    return i ? (u(i) && n.replace().url(i),
                    !0) : !1
                }
                if (!r || !r.defaultPrevented) {
                    for (var s = t.length, e = 0; e < s; e++)
                        if (o(t[e]))
                            return;
                    i && o(i)
                }
            }
            return r.$on("$locationChangeSuccess", e),
            {
                sync: function() {
                    e()
                }
            }
        }
        ]
    }
    function g(n, s, a) {
        function ut(n) {
            return n.indexOf(".") === 0 || n.indexOf("^") === 0
        }
        function k(n, t) {
            var h = u(n), f = h ? n : n.name, c = ut(f), s;
            if (c) {
                if (!t)
                    throw new Error("No reference point given for path '" + f + "'");
                for (var r = f.split("."), e = 0, l = r.length, o = t; e < l; e++) {
                    if (r[e] === "" && e === 0) {
                        o = t;
                        continue
                    }
                    if (r[e] === "^") {
                        if (!o.parent)
                            throw new Error("Path '" + f + "' not valid for state '" + t.name + "'");
                        o = o.parent;
                        continue
                    }
                    break
                }
                r = r.slice(e).join(".");
                f = o.name + (o.name && r ? "." : "") + r
            }
            return (s = nt[f],
            s && (h || !h && (s === n || s.self === n))) ? s : i
        }
        function ft(n, t) {
            g[n] || (g[n] = []);
            g[n].push(t)
        }
        function tt(t) {
            var i, f, r, e;
            if (t = c(t, {
                self: t,
                resolve: t.resolve || {},
                toString: function() {
                    return this.name
                }
            }),
            i = t.name,
            !u(i) || i.indexOf("@") >= 0)
                throw new Error("State must have a valid name");
            if (nt.hasOwnProperty(i))
                throw new Error("State '" + i + "'' is already defined");
            if (f = i.indexOf(".") !== -1 ? i.substring(0, i.lastIndexOf(".")) : u(t.parent) ? t.parent : "",
            f && !nt[f])
                return ft(f, t.self);
            for (r in b)
                o(b[r]) && (t[r] = b[r](t, b.$delegates[r]));
            if (nt[i] = t,
            !t[rt] && t.url && n.when(t.url, ["$match", "$stateParams", function(n, i) {
                y.$current.navigable == t && l(n, i) || y.transitionTo(t, n, {
                    location: !1
                })
            }
            ]),
            g[i])
                for (e = 0; e < g[i].length; e++)
                    tt(g[i][e]);
            return t
        }
        function et(n) {
            return n.indexOf("*") > -1
        }
        function ot(n) {
            var t = n.split("."), i = y.$current.name.split("."), r, u;
            if (t[0] === "**" && (i = i.slice(i.indexOf(t[1])),
            i.unshift("**")),
            t[t.length - 1] === "**" && (i.splice(i.indexOf(t[t.length - 2]) + 1, Number.MAX_VALUE),
            i.push("**")),
            t.length != i.length)
                return !1;
            for (r = 0,
            u = t.length; r < u; r++)
                t[r] === "*" && (i[r] = "*");
            return i.join("") === t.join("")
        }
        function ht(n, t) {
            return u(n) && !r(t) ? b[n] : !o(t) || !u(n) ? this : (b[n] && !b.$delegates[n] && (b.$delegates[n] = b[n]),
            b[n] = t,
            this)
        }
        function ct(n, t) {
            return h(n) ? t = n : t.name = n,
            tt(t),
            this
        }
        function it(n, s, h, b, g, tt, it, ut, ft) {
            function ht() {
                it.url() !== vt && (it.url(vt),
                it.replace())
            }
            function wt(n, i, r, u, e) {
                var a = r ? i : lt(n.params, i), c = {
                    $stateParams: a
                }, l;
                return e.resolve = g.resolve(n.resolve, c, e.resolve, n),
                l = [e.resolve.then(function(n) {
                    e.globals = n
                })],
                u && l.push(u),
                f(n.views, function(i, r) {
                    var u = i.resolve && i.resolve !== n.resolve ? i.resolve : {};
                    u.$template = [function() {
                        return h.load(r, {
                            view: i,
                            locals: c,
                            params: a,
                            notify: !1
                        }) || ""
                    }
                    ];
                    l.push(g.resolve(u, c, e.resolve, n).then(function(f) {
                        if (o(i.controllerProvider) || v(i.controllerProvider)) {
                            var s = t.extend({}, u, c);
                            f.$$controller = b.invoke(i.controllerProvider, null, s)
                        } else
                            f.$$controller = i.controller;
                        f.$$state = n;
                        f.$$controllerAs = i.controllerAs;
                        e[r] = f
                    }))
                }),
                s.all(l).then(function() {
                    return e
                })
            }
            var ct = s.reject(new Error("transition superseded"))
              , bt = s.reject(new Error("transition prevented"))
              , pt = s.reject(new Error("transition aborted"))
              , kt = s.reject(new Error("transition failed"))
              , vt = it.url()
              , yt = ft.baseHref();
            return d.locals = {
                resolve: null,
                globals: {
                    $stateParams: {}
                }
            },
            y = {
                params: {},
                current: d.self,
                $current: d,
                transition: null
            },
            y.reload = function() {
                y.transitionTo(y.current, tt, {
                    reload: !0,
                    inherit: !1,
                    notify: !1
                })
            }
            ,
            y.go = function(n, t, i) {
                return this.transitionTo(n, t, e({
                    inherit: !0,
                    relative: y.$current
                }, i))
            }
            ,
            y.transitionTo = function(t, i, u) {
                var f, ot, lt, ft, yt;
                i = i || {};
                u = e({
                    location: !0,
                    inherit: !1,
                    relative: null,
                    notify: !0,
                    reload: !1,
                    $retry: !1
                }, u || {});
                var a = y.$current, et = y.params, dt = a.path, v, g = k(t, u.relative);
                if (!r(g)) {
                    if (f = {
                        to: t,
                        toParams: i,
                        options: u
                    },
                    v = n.$broadcast("$stateNotFound", f, a.self, et),
                    v.defaultPrevented)
                        return ht(),
                        pt;
                    if (v.retry)
                        return u.$retry ? (ht(),
                        kt) : (ot = y.transition = s.when(v.retry),
                        ot.then(function() {
                            return ot !== y.transition ? ct : (f.options.$retry = !0,
                            y.transitionTo(f.to, f.toParams, f.options))
                        }, function() {
                            return pt
                        }),
                        ht(),
                        ot);
                    if (t = f.to,
                    i = f.toParams,
                    u = f.options,
                    g = k(t, u.relative),
                    !r(g)) {
                        if (u.relative)
                            throw new Error("Could not resolve '" + t + "' from state '" + u.relative + "'");
                        throw new Error("No such state '" + t + "'");
                    }
                }
                if (g[rt])
                    throw new Error("Cannot transition to abstract state '" + t + "'");
                u.inherit && (i = p(tt, i || {}, y.$current, g));
                t = g;
                for (var nt = t.path, ut = d.locals, gt = [], o = 0, h = nt[o]; h && h === dt[o] && l(i, et, h.ownParams) && !u.reload; o++,
                h = nt[o])
                    ut = gt[o] = h.locals;
                if (at(t, a, ut, u))
                    return t.self.reloadOnSearch !== !1 && ht(),
                    y.transition = null,
                    s.when(y.current);
                if (i = w(t.params, i || {}),
                u.notify && (v = n.$broadcast("$stateChangeStart", t.self, i, a.self, et),
                v.defaultPrevented))
                    return ht(),
                    bt;
                for (lt = s.when(ut),
                ft = o; ft < nt.length; ft++,
                h = nt[ft])
                    ut = gt[ft] = c(ut),
                    lt = wt(h, i, h === t, lt, ut);
                return yt = y.transition = lt.then(function() {
                    var r, f, e, s;
                    if (y.transition !== yt)
                        return ct;
                    for (r = dt.length - 1; r >= o; r--)
                        e = dt[r],
                        e.self.onExit && b.invoke(e.self.onExit, e.self, e.locals.globals),
                        e.locals = null;
                    for (r = o; r < nt.length; r++)
                        f = nt[r],
                        f.locals = gt[r],
                        f.self.onEnter && b.invoke(f.self.onEnter, f.self, f.locals.globals);
                    return y.transition !== yt ? ct : (y.$current = t,
                    y.current = t.self,
                    y.params = i,
                    st(y.params, tt),
                    y.transition = null,
                    s = t.navigable,
                    u.location && s && (it.url(s.url.format(s.locals.globals.$stateParams)),
                    u.location === "replace" && it.replace()),
                    u.notify && n.$broadcast("$stateChangeSuccess", t.self, i, a.self, et),
                    vt = it.url(),
                    y.current)
                }, function(r) {
                    return y.transition !== yt ? ct : (y.transition = null,
                    n.$broadcast("$stateChangeError", t.self, i, a.self, et, r),
                    ht(),
                    s.reject(r))
                })
            }
            ,
            y.is = function(n, u) {
                var f = k(n);
                return r(f) ? y.$current !== f ? !1 : r(u) && u !== null ? t.equals(tt, u) : !0 : i
            }
            ,
            y.includes = function(n, f) {
                var e, o;
                if (u(n) && et(n))
                    if (ot(n))
                        n = y.$current.name;
                    else
                        return !1;
                return (e = k(n),
                !r(e)) ? i : r(y.$current.includes[e.name]) ? (o = !0,
                t.forEach(f, function(n, t) {
                    r(tt[t]) && tt[t] === n || (o = !1)
                }),
                o) : !1
            }
            ,
            y.href = function(n, t, i) {
                var f, o, u;
                return (i = e({
                    lossy: !0,
                    inherit: !1,
                    absolute: !1,
                    relative: y.$current
                }, i || {}),
                f = k(n, i.relative),
                !r(f)) ? null : (t = p(tt, t || {}, y.$current, f),
                o = f && i.lossy ? f.navigable : f,
                u = o && o.url ? o.url.format(w(f.params, t || {})) : null,
                !a.html5Mode() && u && (u = "#" + a.hashPrefix() + u),
                yt !== "/" && (a.html5Mode() ? u = yt.slice(0, -1) + u : i.absolute && (u = yt.slice(1) + u)),
                i.absolute && u && (u = it.protocol() + "://" + it.host() + (it.port() == 80 || it.port() == 443 ? "" : ":" + it.port()) + (!a.html5Mode() && u ? "/" : "") + u),
                u)
            }
            ,
            y.get = function(n, t) {
                var u, i;
                return r(n) ? (i = k(n, t),
                i && i.self ? i.self : null) : (u = [],
                f(nt, function(n) {
                    u.push(n.self)
                }),
                u)
            }
            ,
            y
        }
        function at(n, t, i, r) {
            if (n === t && (i === t.locals && !r.reload || n.self.reloadOnSearch === !1))
                return !0
        }
        var d, nt = {}, y, g = {}, rt = "abstract", b = {
            parent: function(n) {
                if (r(n.parent) && n.parent)
                    return k(n.parent);
                var t = /^(.+)\.[^.]+$/.exec(n.name);
                return t ? k(t[1]) : d
            },
            data: function(n) {
                return n.parent && n.parent.data && (n.data = n.self.data = e({}, n.parent.data, n.data)),
                n.data
            },
            url: function(n) {
                var t = n.url;
                if (u(t))
                    return t.charAt(0) == "^" ? s.compile(t.substring(1)) : (n.parent.navigable || d).url.concat(t);
                if (s.isMatcher(t) || t == null)
                    return t;
                throw new Error("Invalid url '" + t + "' in state '" + n + "'");
            },
            navigable: function(n) {
                return n.url ? n : n.parent ? n.parent.navigable : null
            },
            params: function(n) {
                if (!n.params)
                    return n.url ? n.url.parameters() : n.parent.params;
                if (!v(n.params))
                    throw new Error("Invalid params in state '" + n + "'");
                if (n.url)
                    throw new Error("Both params and url specicified in state '" + n + "'");
                return n.params
            },
            views: function(n) {
                var t = {};
                return f(r(n.views) ? n.views : {
                    "": n
                }, function(i, r) {
                    r.indexOf("@") < 0 && (r += "@" + n.parent.name);
                    t[r] = i
                }),
                t
            },
            ownParams: function(n) {
                var t, i;
                return n.parent ? (t = {},
                f(n.params, function(n) {
                    t[n] = !0
                }),
                f(n.parent.params, function(i) {
                    if (!t[i])
                        throw new Error("Missing required parameter '" + i + "' in state '" + n.name + "'");
                    t[i] = !1
                }),
                i = [],
                f(t, function(n, t) {
                    n && i.push(t)
                }),
                i) : n.params
            },
            path: function(n) {
                return n.parent ? n.parent.path.concat(n) : []
            },
            includes: function(n) {
                var t = n.parent ? e({}, n.parent.includes) : {};
                return t[n.name] = !0,
                t
            },
            $delegates: {}
        };
        d = tt({
            name: "",
            url: "^",
            views: null,
            abstract: !0
        });
        d.navigable = null;
        this.decorator = ht;
        this.state = ct;
        this.$get = it;
        it.$inject = ["$rootScope", "$q", "$view", "$injector", "$resolve", "$stateParams", "$location", "$urlRouter", "$browser"]
    }
    function nt() {
        function n(n, t) {
            return {
                load: function(i, r) {
                    var u;
                    return r = e({
                        template: null,
                        controller: null,
                        view: null,
                        locals: null,
                        notify: !0,
                        async: !0,
                        params: {}
                    }, r),
                    r.view && (u = t.fromConfig(r.view, r.params, r.locals)),
                    u && r.notify && n.$broadcast("$viewContentLoading", r),
                    u
                }
            }
        }
        this.$get = n;
        n.$inject = ["$rootScope", "$templateFactory"]
    }
    function vt() {
        var n = !1;
        this.useAnchorScroll = function() {
            n = !0
        }
        ;
        this.$get = ["$anchorScroll", "$timeout", function(t, i) {
            return n ? t : function(n) {
                i(function() {
                    n[0].scrollIntoView()
                }, 0, !1)
            }
        }
        ]
    }
    function a(n, i, r) {
        function o() {
            return i.has ? function(n) {
                return i.has(n) ? i.get(n) : null
            }
            : function(n) {
                try {
                    return i.get(n)
                } catch (t) {
                    return null
                }
            }
        }
        function s(n, t) {
            var r = function() {
                return {
                    enter: function(n, t, i) {
                        t.after(n);
                        i()
                    },
                    leave: function(n, t) {
                        n.remove();
                        t()
                    }
                }
            }, i;
            return f ? {
                enter: function(n, t, i) {
                    f.enter(n, null, t, i)
                },
                leave: function(n, t) {
                    f.leave(n, t)
                }
            } : u ? (i = u && u(t, n),
            {
                enter: function(n, t, r) {
                    i.enter(n, null, t);
                    r()
                },
                leave: function(n, t) {
                    i.leave(n);
                    t()
                }
            }) : r()
        }
        var e = o()
          , u = e("$animator")
          , f = e("$animate");
        return {
            restrict: "ECA",
            terminal: !0,
            priority: 400,
            transclude: "element",
            compile: function(i, u, f) {
                return function(i, u, e) {
                    function p() {
                        c && (c.remove(),
                        c = null);
                        h && (h.$destroy(),
                        h = null);
                        o && (y.leave(o, function() {
                            c = null
                        }),
                        c = o,
                        o = null)
                    }
                    function l(e) {
                        var c = i.$new(), l = o && o.data("$uiViewName"), b = l && n.$current && n.$current.locals[l], s;
                        (e || b !== v) && (s = f(c, function(n) {
                            y.enter(n, u, function() {
                                (t.isDefined(a) && !a || i.$eval(a)) && r(n)
                            });
                            p()
                        }),
                        v = n.$current.locals[s.data("$uiViewName")],
                        o = s,
                        h = c,
                        h.$emit("$viewContentLoaded"),
                        h.$eval(w))
                    }
                    var c, o, h, v, w = e.onload || "", a = e.autoscroll, y = s(e, i);
                    i.$on("$stateChangeSuccess", function() {
                        l(!1)
                    });
                    i.$on("$viewContentLoading", function() {
                        l(!1)
                    });
                    l(!0)
                }
            }
        }
    }
    function tt(n, t, i) {
        return {
            restrict: "ECA",
            priority: -400,
            compile: function(r) {
                var u = r.html();
                return function(r, f, e) {
                    var s = e.uiView || e.name || "", l = f.inheritedData("$uiView"), c, o, a, h;
                    (s.indexOf("@") < 0 && (s = s + "@" + (l ? l.state.name : "")),
                    f.data("$uiViewName", s),
                    c = i.$current,
                    o = c && c.locals[s],
                    o) && (f.data("$uiView", {
                        name: s,
                        state: o.$$state
                    }),
                    f.html(o.$template ? o.$template : u),
                    a = n(f.contents()),
                    o.$$controller && (o.$scope = r,
                    h = t(o.$$controller, o),
                    o.$$controllerAs && (r[o.$$controllerAs] = h),
                    f.data("$ngControllerController", h),
                    f.children().data("$ngControllerController", h)),
                    a(r))
                }
            }
        }
    }
    function yt(n) {
        var t = n.replace(/\n/g, " ").match(/^([^(]+?)\s*(\((.*)\))?$/);
        if (!t || t.length !== 4)
            throw new Error("Invalid state ref '" + n + "'");
        return {
            state: t[1],
            paramExpr: t[3] || null
        }
    }
    function it(n) {
        var t = n.parent().inheritedData("$uiView");
        if (t && t.state && t.state.name)
            return t.state
    }
    function rt(n, i) {
        var r = ["location", "inherit", "reload"];
        return {
            restrict: "A",
            require: "?^uiSrefActive",
            link: function(u, f, e, o) {
                var s = yt(e.uiSref), h = null, p = it(f) || n.$current, a = f[0].nodeName === "FORM", w = a ? "action" : "href", v = !0, c = {
                    relative: p
                }, y = u.$eval(e.uiSrefOpts) || {}, l;
                (t.forEach(r, function(n) {
                    n in y && (c[n] = y[n])
                }),
                l = function(t) {
                    if (t && (h = t),
                    v) {
                        var i = n.href(s.state, h, c);
                        if (o && o.$$setStateInfo(s.state, h),
                        !i)
                            return v = !1,
                            !1;
                        f[0][w] = i
                    }
                }
                ,
                s.paramExpr && (u.$watch(s.paramExpr, function(n) {
                    n !== h && l(n)
                }, !0),
                h = u.$eval(s.paramExpr)),
                l(),
                a) || f.bind("click", function(t) {
                    var r = t.which || t.button;
                    r > 1 || t.ctrlKey || t.metaKey || t.shiftKey || f.attr("target") || (i(function() {
                        n.go(s.state, h, c)
                    }),
                    t.preventDefault())
                })
            }
        }
    }
    function ut(n, t, i) {
        return {
            restrict: "A",
            controller: ["$scope", "$element", "$attrs", function(r, u, f) {
                function s() {
                    n.$current.self === h && c() ? u.addClass(o) : u.removeClass(o)
                }
                function c() {
                    return !e || l(e, t)
                }
                var h, e, o;
                o = i(f.uiSrefActive || "", !1)(r);
                this.$$setStateInfo = function(t, i) {
                    h = n.get(t, it(u));
                    e = i;
                    s()
                }
                ;
                r.$on("$stateChangeSuccess", s)
            }
            ]
        }
    }
    function ft(n) {
        return function(t) {
            return n.is(t)
        }
    }
    function et(n) {
        return function(t) {
            return n.includes(t)
        }
    }
    function ot(n, t) {
        function r(n) {
            this.locals = n.locals.globals;
            this.params = this.locals.$stateParams
        }
        function s() {
            this.locals = null;
            this.params = null
        }
        function h(i, f) {
            if (f.redirectTo != null) {
                var h = f.redirectTo, l;
                if (u(h))
                    l = h;
                else if (o(h))
                    l = function(n, t) {
                        return h(n, t.path(), t.search())
                    }
                    ;
                else
                    throw new Error("Invalid 'redirectTo' in when()");
                t.when(i, l)
            } else
                n.state(c(f, {
                    parent: null,
                    name: "route:" + encodeURIComponent(i),
                    url: i,
                    onEnter: r,
                    onExit: s
                }));
            return e.push(f),
            this
        }
        function f(n, t, r) {
            function u(n) {
                return n.name !== "" ? n : i
            }
            var f = {
                routes: e,
                params: r,
                current: i
            };
            return t.$on("$stateChangeStart", function(n, i, r, f) {
                t.$broadcast("$routeChangeStart", u(i), u(f))
            }),
            t.$on("$stateChangeSuccess", function(n, i, r, e) {
                f.current = u(i);
                t.$broadcast("$routeChangeSuccess", u(i), u(e));
                st(r, f.params)
            }),
            t.$on("$stateChangeError", function(n, i, r, f, e, o) {
                t.$broadcast("$routeChangeError", u(i), u(f), o)
            }),
            f
        }
        var e = [];
        r.$inject = ["$$state"];
        this.when = h;
        this.$get = f;
        f.$inject = ["$state", "$rootScope", "$routeParams"]
    }
    var r = t.isDefined
      , o = t.isFunction
      , u = t.isString
      , h = t.isObject
      , v = t.isArray
      , f = t.forEach
      , e = t.extend
      , st = t.copy;
    t.module("ui.router.util", ["ng"]);
    t.module("ui.router.router", ["ui.router.util"]);
    t.module("ui.router.state", ["ui.router.router", "ui.router.util"]);
    t.module("ui.router", ["ui.router.state"]);
    t.module("ui.router.compat", ["ui.router"]);
    b.$inject = ["$q", "$injector"];
    t.module("ui.router.util").service("$resolve", b);
    k.$inject = ["$http", "$templateCache", "$injector"];
    t.module("ui.router.util").service("$templateFactory", k);
    s.prototype.concat = function(n) {
        return new s(this.sourcePath + n + this.sourceSearch)
    }
    ;
    s.prototype.toString = function() {
        return this.source
    }
    ;
    s.prototype.exec = function(n, t) {
        var u = this.regexp.exec(n);
        if (!u)
            return null;
        var r = this.params, o = r.length, e = this.segments.length - 1, f = {}, i;
        if (e !== u.length - 1)
            throw new Error("Unbalanced capture group in route '" + this.source + "'");
        for (i = 0; i < e; i++)
            f[r[i]] = u[i + 1];
        for (; i < o; i++)
            f[r[i]] = t[r[i]];
        return f
    }
    ;
    s.prototype.parameters = function() {
        return this.params
    }
    ;
    s.prototype.format = function(n) {
        var r = this.segments
          , u = this.params;
        if (!n)
            return r.join("");
        for (var o = r.length - 1, s = u.length, f = r[0], e, i, t = 0; t < o; t++)
            i = n[u[t]],
            i != null && (f += encodeURIComponent(i)),
            f += r[t + 1];
        for (; t < s; t++)
            i = n[u[t]],
            i != null && (f += (e ? "&" : "?") + u[t] + "=" + encodeURIComponent(i),
            e = !0);
        return f
    }
    ;
    t.module("ui.router.util").provider("$urlMatcherFactory", at);
    d.$inject = ["$urlMatcherFactoryProvider"];
    t.module("ui.router.router").provider("$urlRouter", d);
    g.$inject = ["$urlRouterProvider", "$urlMatcherFactoryProvider", "$locationProvider"];
    t.module("ui.router.state").value("$stateParams", {}).provider("$state", g);
    nt.$inject = [];
    t.module("ui.router.state").provider("$view", nt);
    t.module("ui.router.state").provider("$uiViewScroll", vt);
    a.$inject = ["$state", "$injector", "$uiViewScroll"];
    tt.$inject = ["$compile", "$controller", "$state"];
    t.module("ui.router.state").directive("uiView", a);
    t.module("ui.router.state").directive("uiView", tt);
    rt.$inject = ["$state", "$timeout"];
    ut.$inject = ["$state", "$stateParams", "$interpolate"];
    t.module("ui.router.state").directive("uiSref", rt).directive("uiSrefActive", ut);
    ft.$inject = ["$state"];
    et.$inject = ["$state"];
    t.module("ui.router.state").filter("isState", ft).filter("includedByState", et);
    ot.$inject = ["$stateProvider", "$urlRouterProvider"];
    t.module("ui.router.compat").provider("$route", ot).directive("ngView", a)
}(window, window.angular);
/**
 * @license AngularJS v1.2.20
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(n, t, i) {
    "use strict";
    function a(n) {
        var t;
        if (t = n.match(h)) {
            var i = new Date(0)
              , r = 0
              , f = 0;
            return t[9] && (r = u(t[9] + t[10]),
            f = u(t[9] + t[11])),
            i.setUTCFullYear(u(t[1]), u(t[2]) - 1, u(t[3])),
            i.setUTCHours(u(t[4] || 0) - r, u(t[5] || 0) - f, u(t[6] || 0), u(t[7] || 0)),
            i
        }
        return n
    }
    function u(n) {
        return parseInt(n, 10)
    }
    function f(n, t, i) {
        var r = "";
        for (n < 0 && (r = "-",
        n = -n),
        n = "" + n; n.length < t; )
            n = "0" + n;
        return i && (n = n.substr(n.length - t)),
        r + n
    }
    function c(n, r, u) {
        function a(n, i, r, u) {
            return t.isFunction(n) ? n : function() {
                return t.isNumber(n) ? [n, i, r, u] : [200, n, i]
            }
        }
        function o(n, o, l, a, v, p, w) {
            function d(n) {
                return t.isString(n) || t.isFunction(n) || n instanceof RegExp ? n : t.toJson(n)
            }
            function tt(t) {
                function r() {
                    var i = t.response(n, o, l, v);
                    g.$$respHeaders = i[2];
                    a(h(i[0]), h(i[1]), g.getAllResponseHeaders(), h(i[3] || ""))
                }
                function e() {
                    for (var n = 0, t = f.length; n < t; n++)
                        if (f[n] === r) {
                            f.splice(n, 1);
                            a(-1, i, "");
                            break
                        }
                }
                return !u && p && p.then && p.then(e),
                r
            }
            var g = new e, b = s[0], nt = !1, it, k;
            if (b && b.match(n, o)) {
                if (!b.matchData(l))
                    throw new Error("Expected " + b + " with different data\nEXPECTED: " + d(b.data) + "\nGOT:      " + l);
                if (!b.matchHeaders(v))
                    throw new Error("Expected " + b + " with different headers\nEXPECTED: " + d(b.headers) + "\nGOT:      " + d(v));
                if (s.shift(),
                b.response) {
                    f.push(tt(b));
                    return
                }
                nt = !0
            }
            for (it = -1; k = c[++it]; )
                if (k.match(n, o, l, v || {})) {
                    if (k.response)
                        (u ? u.defer : y)(tt(k));
                    else if (k.passThrough)
                        r(n, o, l, a, v, p, w);
                    else
                        throw new Error("No response defined !");
                    return
                }
            throw nt ? new Error("No response defined !") : new Error("Unexpected request: " + n + " " + o + "\n" + (b ? "Expected " + b : "No more request expected"));
        }
        function v(n) {
            t.forEach(["GET", "DELETE", "JSONP"], function(t) {
                o[n + t] = function(r, u) {
                    return o[n](t, r, i, u)
                }
            });
            t.forEach(["PUT", "POST", "PATCH"], function(t) {
                o[n + t] = function(i, r, u) {
                    return o[n](t, i, r, u)
                }
            })
        }
        var c = []
          , s = []
          , f = []
          , y = t.bind(f, f.push)
          , h = t.copy;
        return o.when = function(n, t, i, r) {
            var f = new l(n,t,i,r)
              , e = {
                respond: function(n, t, i, r) {
                    f.response = a(n, t, i, r)
                }
            };
            return u && (e.passThrough = function() {
                f.passThrough = !0
            }
            ),
            c.push(f),
            e
        }
        ,
        v("when"),
        o.expect = function(n, t, i, r) {
            var u = new l(n,t,i,r);
            return s.push(u),
            {
                respond: function(n, t, i, r) {
                    u.response = a(n, t, i, r)
                }
            }
        }
        ,
        v("expect"),
        o.flush = function(i) {
            if (n.$digest(),
            !f.length)
                throw new Error("No pending request to flush !");
            if (t.isDefined(i))
                while (i--) {
                    if (!f.length)
                        throw new Error("No more pending request to flush !");
                    f.shift()()
                }
            else
                while (f.length)
                    f.shift()();
            o.verifyNoOutstandingExpectation()
        }
        ,
        o.verifyNoOutstandingExpectation = function() {
            if (n.$digest(),
            s.length)
                throw new Error("Unsatisfied requests: " + s.join(", "));
        }
        ,
        o.verifyNoOutstandingRequest = function() {
            if (f.length)
                throw new Error("Unflushed requests: " + f.length);
        }
        ,
        o.resetExpectations = function() {
            s.length = 0;
            f.length = 0
        }
        ,
        o
    }
    function l(n, i, r, u) {
        this.data = r;
        this.headers = u;
        this.match = function(i, r, u, f) {
            return n != i ? !1 : this.matchUrl(r) ? t.isDefined(u) && !this.matchData(u) ? !1 : t.isDefined(f) && !this.matchHeaders(f) ? !1 : !0 : !1
        }
        ;
        this.matchUrl = function(n) {
            return i ? t.isFunction(i.test) ? i.test(n) : i == n : !0
        }
        ;
        this.matchHeaders = function(n) {
            return t.isUndefined(u) ? !0 : t.isFunction(u) ? u(n) : t.equals(u, n)
        }
        ;
        this.matchData = function(n) {
            return t.isUndefined(r) ? !0 : r && t.isFunction(r.test) ? r.test(n) : r && t.isFunction(r) ? r(n) : r && !t.isString(r) ? t.equals(r, t.fromJson(n)) : r == n
        }
        ;
        this.toString = function() {
            return n + " " + i
        }
    }
    function e() {
        e.$$lastInstance = this;
        this.open = function(n, t, i) {
            this.$$method = n;
            this.$$url = t;
            this.$$async = i;
            this.$$reqHeaders = {};
            this.$$respHeaders = {}
        }
        ;
        this.send = function(n) {
            this.$$data = n
        }
        ;
        this.setRequestHeader = function(n, t) {
            this.$$reqHeaders[n] = t
        }
        ;
        this.getResponseHeader = function(n) {
            var r = this.$$respHeaders[n];
            return r ? r : (n = t.lowercase(n),
            r = this.$$respHeaders[n],
            r) ? r : (r = i,
            t.forEach(this.$$respHeaders, function(i, u) {
                r || t.lowercase(u) != n || (r = i)
            }),
            r)
        }
        ;
        this.getAllResponseHeaders = function() {
            var n = [];
            return t.forEach(this.$$respHeaders, function(t, i) {
                n.push(i + ": " + t)
            }),
            n.join("\n")
        }
        ;
        this.abort = t.noop
    }
    var h, r, o, s;
    t.mock = {};
    t.mock.$BrowserProvider = function() {
        this.$get = function() {
            return new t.mock.$Browser
        }
    }
    ;
    t.mock.$Browser = function() {
        var n = this;
        this.isMock = !0;
        n.$$url = "http://server/";
        n.$$lastUrl = n.$$url;
        n.pollFns = [];
        n.$$completeOutstandingRequest = t.noop;
        n.$$incOutstandingRequestCount = t.noop;
        n.onUrlChange = function(t) {
            return n.pollFns.push(function() {
                n.$$lastUrl != n.$$url && (n.$$lastUrl = n.$$url,
                t(n.$$url))
            }),
            t
        }
        ;
        n.cookieHash = {};
        n.lastCookieHash = {};
        n.deferredFns = [];
        n.deferredNextId = 0;
        n.defer = function(t, i) {
            return i = i || 0,
            n.deferredFns.push({
                time: n.defer.now + i,
                fn: t,
                id: n.deferredNextId
            }),
            n.deferredFns.sort(function(n, t) {
                return n.time - t.time
            }),
            n.deferredNextId++
        }
        ;
        n.defer.now = 0;
        n.defer.cancel = function(r) {
            var u;
            return (t.forEach(n.deferredFns, function(n, t) {
                n.id === r && (u = t)
            }),
            u !== i) ? (n.deferredFns.splice(u, 1),
            !0) : !1
        }
        ;
        n.defer.flush = function(i) {
            if (t.isDefined(i))
                n.defer.now += i;
            else if (n.deferredFns.length)
                n.defer.now = n.deferredFns[n.deferredFns.length - 1].time;
            else
                throw new Error("No deferred tasks to be flushed");
            while (n.deferredFns.length && n.deferredFns[0].time <= n.defer.now)
                n.deferredFns.shift().fn()
        }
        ;
        n.$$baseHref = "";
        n.baseHref = function() {
            return this.$$baseHref
        }
    }
    ;
    t.mock.$Browser.prototype = {
        poll: function() {
            t.forEach(this.pollFns, function(n) {
                n()
            })
        },
        addPollFn: function(n) {
            return this.pollFns.push(n),
            n
        },
        url: function(n) {
            return n ? (this.$$url = n,
            this) : this.$$url
        },
        cookies: function(n, i) {
            if (n)
                t.isUndefined(i) ? delete this.cookieHash[n] : t.isString(i) && i.length <= 4096 && (this.cookieHash[n] = i);
            else
                return t.equals(this.cookieHash, this.lastCookieHash) || (this.lastCookieHash = t.copy(this.cookieHash),
                this.cookieHash = t.copy(this.cookieHash)),
                this.cookieHash
        },
        notifyWhenNoOutstandingRequests: function(n) {
            n()
        }
    };
    t.mock.$ExceptionHandlerProvider = function() {
        var n;
        this.mode = function(t) {
            switch (t) {
            case "rethrow":
                n = function(n) {
                    throw n;
                }
                ;
                break;
            case "log":
                var i = [];
                n = function(n) {
                    arguments.length == 1 ? i.push(n) : i.push([].slice.call(arguments, 0))
                }
                ;
                n.errors = i;
                break;
            default:
                throw new Error("Unknown mode '" + t + "', only 'log'/'rethrow' modes are allowed!");
            }
        }
        ;
        this.$get = function() {
            return n
        }
        ;
        this.mode("rethrow")
    }
    ;
    t.mock.$LogProvider = function() {
        function n(n, t, i) {
            return n.concat(Array.prototype.slice.call(t, i))
        }
        var i = !0;
        this.debugEnabled = function(n) {
            return t.isDefined(n) ? (i = n,
            this) : i
        }
        ;
        this.$get = function() {
            var r = {
                log: function() {
                    r.log.logs.push(n([], arguments, 0))
                },
                warn: function() {
                    r.warn.logs.push(n([], arguments, 0))
                },
                info: function() {
                    r.info.logs.push(n([], arguments, 0))
                },
                error: function() {
                    r.error.logs.push(n([], arguments, 0))
                },
                debug: function() {
                    i && r.debug.logs.push(n([], arguments, 0))
                }
            };
            return r.reset = function() {
                r.log.logs = [];
                r.info.logs = [];
                r.warn.logs = [];
                r.error.logs = [];
                r.debug.logs = []
            }
            ,
            r.assertEmpty = function() {
                var n = [];
                if (t.forEach(["error", "warn", "info", "log", "debug"], function(i) {
                    t.forEach(r[i].logs, function(r) {
                        t.forEach(r, function(t) {
                            n.push("MOCK $log (" + i + "): " + String(t) + "\n" + (t.stack || ""))
                        })
                    })
                }),
                n.length) {
                    n.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:");
                    n.push("");
                    throw new Error(n.join("\n---------\n"));
                }
            }
            ,
            r.reset(),
            r
        }
    }
    ;
    t.mock.$IntervalProvider = function() {
        this.$get = ["$rootScope", "$q", function(n, r) {
            var u = []
              , f = 0
              , e = 0
              , o = function(o, s, h, c) {
                function p() {
                    if (l.notify(v++),
                    h > 0 && v >= h) {
                        var r;
                        l.resolve(v);
                        t.forEach(u, function(n, t) {
                            n.id === a.$$intervalId && (r = t)
                        });
                        r !== i && u.splice(r, 1)
                    }
                    y || n.$apply()
                }
                var l = r.defer()
                  , a = l.promise
                  , v = 0
                  , y = t.isDefined(c) && !c;
                return h = t.isDefined(h) ? h : 0,
                a.then(null, null, o),
                a.$$intervalId = f,
                u.push({
                    nextTime: e + s,
                    delay: s,
                    fn: p,
                    id: f,
                    deferred: l
                }),
                u.sort(function(n, t) {
                    return n.nextTime - t.nextTime
                }),
                f++,
                a
            };
            return o.cancel = function(n) {
                if (!n)
                    return !1;
                var r;
                return (t.forEach(u, function(t, i) {
                    t.id === n.$$intervalId && (r = i)
                }),
                r !== i) ? (u[r].deferred.reject("canceled"),
                u.splice(r, 1),
                !0) : !1
            }
            ,
            o.flush = function(n) {
                for (e += n; u.length && u[0].nextTime <= e; ) {
                    var t = u[0];
                    t.fn();
                    t.nextTime += t.delay;
                    u.sort(function(n, t) {
                        return n.nextTime - t.nextTime
                    })
                }
                return n
            }
            ,
            o
        }
        ]
    }
    ;
    h = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;
    t.mock.TzDate = function(n, i) {
        var r = new Date(0), u, e, o;
        if (t.isString(i)) {
            if (u = i,
            r.origDate = a(i),
            i = r.origDate.getTime(),
            isNaN(i))
                throw {
                    name: "Illegal Argument",
                    message: "Arg '" + u + "' passed into TzDate constructor is not a valid date string"
                };
        } else
            r.origDate = new Date(i);
        return e = new Date(i).getTimezoneOffset(),
        r.offsetDiff = e * 6e4 - n * 36e5,
        r.date = new Date(i + r.offsetDiff),
        r.getTime = function() {
            return r.date.getTime() - r.offsetDiff
        }
        ,
        r.toLocaleDateString = function() {
            return r.date.toLocaleDateString()
        }
        ,
        r.getFullYear = function() {
            return r.date.getFullYear()
        }
        ,
        r.getMonth = function() {
            return r.date.getMonth()
        }
        ,
        r.getDate = function() {
            return r.date.getDate()
        }
        ,
        r.getHours = function() {
            return r.date.getHours()
        }
        ,
        r.getMinutes = function() {
            return r.date.getMinutes()
        }
        ,
        r.getSeconds = function() {
            return r.date.getSeconds()
        }
        ,
        r.getMilliseconds = function() {
            return r.date.getMilliseconds()
        }
        ,
        r.getTimezoneOffset = function() {
            return n * 60
        }
        ,
        r.getUTCFullYear = function() {
            return r.origDate.getUTCFullYear()
        }
        ,
        r.getUTCMonth = function() {
            return r.origDate.getUTCMonth()
        }
        ,
        r.getUTCDate = function() {
            return r.origDate.getUTCDate()
        }
        ,
        r.getUTCHours = function() {
            return r.origDate.getUTCHours()
        }
        ,
        r.getUTCMinutes = function() {
            return r.origDate.getUTCMinutes()
        }
        ,
        r.getUTCSeconds = function() {
            return r.origDate.getUTCSeconds()
        }
        ,
        r.getUTCMilliseconds = function() {
            return r.origDate.getUTCMilliseconds()
        }
        ,
        r.getDay = function() {
            return r.date.getDay()
        }
        ,
        r.toISOString && (r.toISOString = function() {
            return f(r.origDate.getUTCFullYear(), 4) + "-" + f(r.origDate.getUTCMonth() + 1, 2) + "-" + f(r.origDate.getUTCDate(), 2) + "T" + f(r.origDate.getUTCHours(), 2) + ":" + f(r.origDate.getUTCMinutes(), 2) + ":" + f(r.origDate.getUTCSeconds(), 2) + "." + f(r.origDate.getUTCMilliseconds(), 3) + "Z"
        }
        ),
        o = ["getUTCDay", "getYear", "setDate", "setFullYear", "setHours", "setMilliseconds", "setMinutes", "setMonth", "setSeconds", "setTime", "setUTCDate", "setUTCFullYear", "setUTCHours", "setUTCMilliseconds", "setUTCMinutes", "setUTCMonth", "setUTCSeconds", "setYear", "toDateString", "toGMTString", "toJSON", "toLocaleFormat", "toLocaleString", "toLocaleTimeString", "toSource", "toString", "toTimeString", "toUTCString", "valueOf"],
        t.forEach(o, function(n) {
            r[n] = function() {
                throw new Error("Method '" + n + "' is not implemented in the TzDate mock");
            }
        }),
        r
    }
    ;
    t.mock.TzDate.prototype = Date.prototype;
    t.mock.animate = t.module("ngAnimateMock", ["ng"]).config(["$provide", function(n) {
        var i = [];
        n.value("$$animateReflow", function(n) {
            var t = i.length;
            return i.push(n),
            function() {
                i.splice(t, 1)
            }
        });
        n.decorator("$animate", function(n, r) {
            var u = {
                queue: [],
                enabled: n.enabled,
                triggerCallbacks: function() {
                    r.flush()
                },
                triggerReflow: function() {
                    t.forEach(i, function(n) {
                        n()
                    });
                    i = []
                }
            };
            return t.forEach(["enter", "leave", "move", "addClass", "removeClass", "setClass"], function(t) {
                u[t] = function() {
                    u.queue.push({
                        event: t,
                        element: arguments[0],
                        args: arguments
                    });
                    n[t].apply(n, arguments)
                }
            }),
            u
        })
    }
    ]);
    t.mock.dump = function(n) {
        function i(n) {
            var u;
            return t.isElement(n) ? (n = t.element(n),
            u = t.element("<div><\/div>"),
            t.forEach(n, function(n) {
                u.append(t.element(n).clone())
            }),
            u = u.html()) : t.isArray(n) ? (u = [],
            t.forEach(n, function(n) {
                u.push(i(n))
            }),
            u = "[ " + u.join(", ") + " ]") : u = t.isObject(n) ? t.isFunction(n.$eval) && t.isFunction(n.$apply) ? r(n) : n instanceof Error ? n.stack || "" + n.name + ": " + n.message : t.toJson(n, !0) : String(n),
            u
        }
        function r(n, i) {
            var u, f, e;
            i = i || "  ";
            u = [i + "Scope(" + n.$id + "): {"];
            for (f in n)
                Object.prototype.hasOwnProperty.call(n, f) && !f.match(/^(\$|this)/) && u.push("  " + f + ": " + t.toJson(n[f]));
            for (e = n.$$childHead; e; )
                u.push(r(e, i + "  ")),
                e = e.$$nextSibling;
            return u.push("}"),
            u.join("\n" + i)
        }
        return i(n)
    }
    ;
    t.mock.$HttpBackendProvider = function() {
        this.$get = ["$rootScope", c]
    }
    ;
    t.mock.$TimeoutDecorator = function(n, i) {
        function r(n) {
            var i = [];
            return t.forEach(n, function(n) {
                i.push("{id: " + n.id + ", time: " + n.time + "}")
            }),
            i.join(", ")
        }
        return n.flush = function(n) {
            i.defer.flush(n)
        }
        ,
        n.verifyNoPendingTasks = function() {
            if (i.deferredFns.length)
                throw new Error("Deferred tasks to flush (" + i.deferredFns.length + "): " + r(i.deferredFns));
        }
        ,
        n
    }
    ;
    t.mock.$RAFDecorator = function(n) {
        var t = []
          , i = function(n) {
            var i = t.length;
            return t.push(n),
            function() {
                t.splice(i, 1)
            }
        };
        return i.supported = n.supported,
        i.flush = function() {
            var i, n;
            if (t.length === 0)
                throw new Error("No rAF callbacks present");
            for (i = t.length,
            n = 0; n < i; n++)
                t[n]();
            t = []
        }
        ,
        i
    }
    ;
    t.mock.$AsyncCallbackDecorator = function() {
        var n = []
          , i = function(t) {
            n.push(t)
        };
        return i.flush = function() {
            t.forEach(n, function(n) {
                n()
            });
            n = []
        }
        ,
        i
    }
    ;
    t.mock.$RootElementProvider = function() {
        this.$get = function() {
            return t.element("<div ng-app><\/div>")
        }
    }
    ;
    t.module("ngMock", ["ng"]).provider({
        $browser: t.mock.$BrowserProvider,
        $exceptionHandler: t.mock.$ExceptionHandlerProvider,
        $log: t.mock.$LogProvider,
        $interval: t.mock.$IntervalProvider,
        $httpBackend: t.mock.$HttpBackendProvider,
        $rootElement: t.mock.$RootElementProvider
    }).config(["$provide", function(n) {
        n.decorator("$timeout", t.mock.$TimeoutDecorator);
        n.decorator("$$rAF", t.mock.$RAFDecorator);
        n.decorator("$$asyncCallback", t.mock.$AsyncCallbackDecorator)
    }
    ]);
    t.module("ngMockE2E", ["ng"]).config(["$provide", function(n) {
        n.decorator("$httpBackend", t.mock.e2e.$httpBackendDecorator)
    }
    ]);
    t.mock.e2e = {};
    t.mock.e2e.$httpBackendDecorator = ["$rootScope", "$delegate", "$browser", c];
    t.mock.clearDataCache = function() {
        var n, i = t.element.cache, r;
        for (n in i)
            Object.prototype.hasOwnProperty.call(i, n) && (r = i[n].handle,
            r && t.element(r.elem).off(),
            delete i[n])
    }
    ;
    (n.jasmine || n.mocha) && (r = null,
    o = function() {
        return !!r
    }
    ,
    (n.beforeEach || n.setup)(function() {
        r = this
    }),
    (n.afterEach || n.teardown)(function() {
        var n = r.$injector;
        t.forEach(r.$modules, function(n) {
            n && n.$$hashKey && (n.$$hashKey = i)
        });
        r.$injector = null;
        r.$modules = null;
        r = null;
        n && (n.get("$rootElement").off(),
        n.get("$browser").pollFns.length = 0);
        t.mock.clearDataCache();
        t.forEach(t.element.fragments, function(n, i) {
            delete t.element.fragments[i]
        });
        e.$$lastInstance = null;
        t.forEach(t.callbacks, function(n, i) {
            delete t.callbacks[i]
        });
        t.callbacks.counter = 0
    }),
    n.module = t.mock.module = function() {
        function n() {
            if (r.$injector)
                throw new Error("Injector already created, can not register a module!");
            else {
                var n = r.$modules || (r.$modules = []);
                t.forEach(i, function(i) {
                    t.isObject(i) && !t.isArray(i) ? n.push(function(n) {
                        t.forEach(i, function(t, i) {
                            n.value(i, t)
                        })
                    }) : n.push(i)
                })
            }
        }
        var i = Array.prototype.slice.call(arguments, 0);
        return o() ? n() : n
    }
    ,
    s = function(n, t) {
        this.message = n.message;
        this.name = n.name;
        n.line && (this.line = n.line);
        n.sourceId && (this.sourceId = n.sourceId);
        n.stack && t && (this.stack = n.stack + "\n" + t.stack);
        n.stackArray && (this.stackArray = n.stackArray)
    }
    ,
    s.prototype.toString = Error.prototype.toString,
    n.inject = t.mock.inject = function() {
        function u() {
            var e = r.$modules || [], u, f, h;
            for (e.unshift("ngMock"),
            e.unshift("ng"),
            u = r.$injector,
            u || (u = r.$injector = t.injector(e)),
            f = 0,
            h = i.length; f < h; f++)
                try {
                    u.invoke(i[f] || t.noop, this)
                } catch (o) {
                    if (o.stack && n)
                        throw new s(o,n);
                    throw o;
                } finally {
                    n = null
                }
        }
        var i = Array.prototype.slice.call(arguments, 0)
          , n = new Error("Declaration Location");
        return o() ? u.call(r) : u
    }
    )
}
)(window, window.angular);
/**
 * @license AngularJS v1.2.22
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
(function(n, t, i) {
    "use strict";
    t.module("ngAnimate", ["ng"]).directive("ngAnimateChildren", function() {
        var n = "$$ngAnimateChildren";
        return function(i, r, u) {
            var f = u.ngAnimateChildren;
            t.isString(f) && f.length === 0 ? r.data(n, !0) : i.$watch(f, function(t) {
                r.data(n, !!t)
            })
        }
    }).factory("$$animateReflow", ["$$rAF", "$document", function(n, t) {
        var i = t[0].body;
        return function(t) {
            return n(function() {
                var n = i.offsetWidth + 1;
                t()
            })
        }
    }
    ]).config(["$provide", "$animateProvider", function(r, u) {
        function o(n) {
            for (var t, i = 0; i < n.length; i++)
                if (t = n[i],
                t.nodeType == p)
                    return t
        }
        function l(n) {
            return n && t.element(n)
        }
        function c(n) {
            return t.element(o(n))
        }
        function v(n, t) {
            return o(n) == o(t)
        }
        var s = t.noop
          , e = t.forEach
          , y = u.$$selectors
          , p = 1
          , f = "$$ngAnimateState"
          , w = "$$ngAnimateChildren"
          , a = "ng-animate"
          , h = {
            running: !0
        };
        r.decorator("$animate", ["$delegate", "$injector", "$sniffer", "$rootElement", "$$asyncCallback", "$rootScope", "$document", function(n, i, r, p, b, k) {
            function nt(n) {
                var t = n.data(f) || {};
                t.running = !0;
                n.data(f, t)
            }
            function ut(n) {
                var t, u, f;
                if (n) {
                    var e = []
                      , o = {}
                      , s = n.substr(1).split(".");
                    for ((r.transitions || r.animations) && e.push(i.get(y[""])),
                    t = 0; t < s.length; t++)
                        u = s[t],
                        f = y[u],
                        f && !o[u] && (e.push(i.get(f)),
                        o[u] = !0);
                    return e
                }
            }
            function ft(n, i, r) {
                function h(n, t) {
                    var i = n[t]
                      , r = n["before" + t.charAt(0).toUpperCase() + t.substr(1)];
                    if (i || r)
                        return t == "leave" && (r = i,
                        i = null),
                        g.push({
                            event: t,
                            fn: i
                        }),
                        d.push({
                            event: t,
                            fn: r
                        }),
                        !0
                }
                function p(t, i, u) {
                    function l(n) {
                        if (i) {
                            if ((i[n] || s)(),
                            ++c < h.length)
                                return;
                            i = null
                        }
                        u()
                    }
                    var h = [], c;
                    e(t, function(n) {
                        n.fn && h.push(n)
                    });
                    c = 0;
                    e(h, function(t, u) {
                        var e = function() {
                            l(u)
                        };
                        switch (t.event) {
                        case "setClass":
                            i.push(t.fn(n, f, o, e));
                            break;
                        case "addClass":
                            i.push(t.fn(n, f || r, e));
                            break;
                        case "removeClass":
                            i.push(t.fn(n, o || r, e));
                            break;
                        default:
                            i.push(t.fn(n, e))
                        }
                    });
                    i && i.length === 0 && u()
                }
                var w = n[0], u, b, f, o, k, c;
                if (w && (u = i == "setClass",
                b = u || i == "addClass" || i == "removeClass",
                t.isArray(r) && (f = r[0],
                o = r[1],
                r = f + " " + o),
                k = n.attr("class"),
                c = k + " " + r,
                rt(c))) {
                    var l = s
                      , a = []
                      , d = []
                      , v = s
                      , y = []
                      , g = []
                      , nt = (" " + c).replace(/\s+/g, ".");
                    return e(ut(nt), function(n) {
                        var t = h(n, i);
                        !t && u && (h(n, "addClass"),
                        h(n, "removeClass"))
                    }),
                    {
                        node: w,
                        event: i,
                        className: r,
                        isClassBased: b,
                        isSetClassOperation: u,
                        before: function(n) {
                            l = n;
                            p(d, a, function() {
                                l = s;
                                n()
                            })
                        },
                        after: function(n) {
                            v = n;
                            p(g, y, function() {
                                v = s;
                                n()
                            })
                        },
                        cancel: function() {
                            a && (e(a, function(n) {
                                (n || s)(!0)
                            }),
                            l(!0));
                            y && (e(y, function(n) {
                                (n || s)(!0)
                            }),
                            v(!0))
                        }
                    }
                }
            }
            function g(n, i, r, u, o, s, h) {
                function ut(t) {
                    var u = "$animate:" + t;
                    v && v[u] && v[u].length > 0 && b(function() {
                        r.triggerHandler(u, {
                            event: n,
                            className: i
                        })
                    })
                }
                function nt() {
                    ut("before")
                }
                function tt() {
                    ut("after")
                }
                function lt() {
                    ut("close");
                    h && b(function() {
                        h()
                    })
                }
                function y() {
                    y.hasBeenRun || (y.hasBeenRun = !0,
                    s())
                }
                function p() {
                    if (!p.hasBeenRun) {
                        p.hasBeenRun = !0;
                        var t = r.data(f);
                        t && (c && c.isClassBased ? d(r, i) : (b(function() {
                            var t = r.data(f) || {};
                            ct == t.index && d(r, i, n)
                        }),
                        r.data(f, t)));
                        lt()
                    }
                }
                var c = ft(r, n, i), v, w, k, st, ht, ct;
                if (!c) {
                    y();
                    nt();
                    tt();
                    p();
                    return
                }
                i = c.className;
                v = t.element._data(c.node);
                v = v && v.events;
                u || (u = o ? o.parent() : r.parent());
                var g = r.data(f) || {}, l = g.active || {}, it = g.totalActive || 0, rt = g.last, at;
                if (c.isClassBased && (at = g.running || g.disabled || rt && !rt.isClassBased),
                at || et(r, u)) {
                    y();
                    nt();
                    tt();
                    p();
                    return
                }
                if (w = !1,
                it > 0) {
                    if (k = [],
                    c.isClassBased)
                        rt.event == "setClass" ? (k.push(rt),
                        d(r, i)) : l[i] && (ht = l[i],
                        ht.event == n ? w = !0 : (k.push(ht),
                        d(r, i)));
                    else if (n == "leave" && l["ng-leave"])
                        w = !0;
                    else {
                        for (st in l)
                            k.push(l[st]),
                            d(r, st);
                        l = {};
                        it = 0
                    }
                    k.length > 0 && e(k, function(n) {
                        n.cancel()
                    })
                }
                if (!c.isClassBased || c.isSetClassOperation || w || (w = n == "addClass" == r.hasClass(i)),
                w) {
                    y();
                    nt();
                    tt();
                    lt();
                    return
                }
                if (n == "leave")
                    r.one("$destroy", function() {
                        var i = t.element(this), r = i.data(f), n;
                        r && (n = r.active["ng-leave"],
                        n && (n.cancel(),
                        d(i, "ng-leave")))
                    });
                r.addClass(a);
                ct = ot++;
                it++;
                l[i] = c;
                r.data(f, {
                    last: c,
                    active: l,
                    index: ct,
                    totalActive: it
                });
                nt();
                c.before(function(t) {
                    var u = r.data(f);
                    t = t || !u || !u.active[i] || c.isClassBased && u.active[i].event != n;
                    y();
                    t === !0 ? p() : (tt(),
                    c.after(p))
                })
            }
            function it(n) {
                var i = o(n), r;
                i && (r = t.isFunction(i.getElementsByClassName) ? i.getElementsByClassName(a) : i.querySelectorAll("." + a),
                e(r, function(n) {
                    n = t.element(n);
                    var i = n.data(f);
                    i && i.active && e(i.active, function(n) {
                        n.cancel()
                    })
                }))
            }
            function d(n, t) {
                if (v(n, p))
                    h.disabled || (h.running = !1,
                    h.structural = !1);
                else if (t) {
                    var i = n.data(f) || {}
                      , r = t === !0;
                    !r && i.active && i.active[t] && (i.totalActive--,
                    delete i.active[t]);
                    (r || !i.totalActive) && (n.removeClass(a),
                    n.removeData(f))
                }
            }
            function et(n, i) {
                var u, e, c, o, r, s;
                if (h.disabled)
                    return !0;
                if (v(n, p))
                    return h.running;
                do {
                    if (i.length === 0)
                        break;
                    if (o = v(i, p),
                    r = o ? h : i.data(f) || {},
                    r.disabled)
                        return !0;
                    o && (c = !0);
                    u !== !1 && (s = i.data(w),
                    t.isDefined(s) && (u = s));
                    e = e || r.running || r.last && !r.last.isClassBased
                } while (i = i.parent());return !c || !u && e
            }
            var ot = 0, tt, rt;
            return p.data(f, h),
            k.$$postDigest(function() {
                k.$$postDigest(function() {
                    h.running = !1
                })
            }),
            tt = u.classNameFilter(),
            rt = tt ? function(n) {
                return tt.test(n)
            }
            : function() {
                return !0
            }
            ,
            {
                enter: function(i, r, u, f) {
                    i = t.element(i);
                    r = l(r);
                    u = l(u);
                    nt(i);
                    n.enter(i, r, u);
                    k.$$postDigest(function() {
                        i = c(i);
                        g("enter", "ng-enter", i, r, u, s, f)
                    })
                },
                leave: function(i, r) {
                    i = t.element(i);
                    it(i);
                    nt(i);
                    k.$$postDigest(function() {
                        g("leave", "ng-leave", c(i), null, null, function() {
                            n.leave(i)
                        }, r)
                    })
                },
                move: function(i, r, u, f) {
                    i = t.element(i);
                    r = l(r);
                    u = l(u);
                    it(i);
                    nt(i);
                    n.move(i, r, u);
                    k.$$postDigest(function() {
                        i = c(i);
                        g("move", "ng-move", i, r, u, s, f)
                    })
                },
                addClass: function(i, r, u) {
                    i = t.element(i);
                    i = c(i);
                    g("addClass", r, i, null, null, function() {
                        n.addClass(i, r)
                    }, u)
                },
                removeClass: function(i, r, u) {
                    i = t.element(i);
                    i = c(i);
                    g("removeClass", r, i, null, null, function() {
                        n.removeClass(i, r)
                    }, u)
                },
                setClass: function(i, r, u, f) {
                    i = t.element(i);
                    i = c(i);
                    g("setClass", [r, u], i, null, null, function() {
                        n.setClass(i, r, u)
                    }, f)
                },
                enabled: function(n, t) {
                    switch (arguments.length) {
                    case 2:
                        if (n)
                            d(t);
                        else {
                            var i = t.data(f) || {};
                            i.disabled = !0;
                            t.data(f, i)
                        }
                        break;
                    case 1:
                        h.disabled = !n;
                        break;
                    default:
                        n = !h.disabled
                    }
                    return !!n
                }
            }
        }
        ]);
        u.register("", ["$window", "$sniffer", "$timeout", "$$animateReflow", function(r, u, f, h) {
            function b(n, t) {
                it && it();
                st.push(t);
                it = h(function() {
                    e(st, function(n) {
                        n()
                    });
                    st = [];
                    it = null;
                    w = {}
                })
            }
            function gt(n, i) {
                var u = o(n), r;
                (n = t.element(u),
                ht.push(n),
                r = Date.now() + i,
                r <= dt) || (f.cancel(kt),
                dt = r,
                kt = f(function() {
                    ni(ht);
                    ht = []
                }, i, !1))
            }
            function ni(n) {
                e(n, function(n) {
                    var t = n.data(y);
                    t && (t.closeAnimationFn || s)()
                })
            }
            function ct(n, t) {
                var i = t ? w[t] : null;
                if (!i) {
                    var u = 0, f = 0, o = 0, s = 0, h, c, l, y;
                    e(n, function(n) {
                        var t, i;
                        n.nodeType == p && (t = r.getComputedStyle(n) || {},
                        l = t[a + at],
                        u = Math.max(k(l), u),
                        y = t[a + ot],
                        h = t[a + vt],
                        f = Math.max(k(h), f),
                        c = t[v + vt],
                        s = Math.max(k(c), s),
                        i = k(t[v + at]),
                        i > 0 && (i *= parseInt(t[v + oi], 10) || 1),
                        o = Math.max(i, o))
                    });
                    i = {
                        total: 0,
                        transitionPropertyStyle: y,
                        transitionDurationStyle: l,
                        transitionDelayStyle: h,
                        transitionDelay: f,
                        transitionDuration: u,
                        animationDelayStyle: c,
                        animationDelay: s,
                        animationDuration: o
                    };
                    t && (w[t] = i)
                }
                return i
            }
            function k(n) {
                var i = 0
                  , r = t.isString(n) ? n.split(/\s*,\s*/) : [];
                return e(r, function(n) {
                    i = Math.max(parseFloat(n) || 0, i)
                }),
                i
            }
            function ti(n) {
                var i = n.parent()
                  , t = i.data(yt);
                return t || (i.data(yt, ++bt),
                t = bt),
                t + "-" + o(n).getAttribute("class")
            }
            function ii(n, t, i, r) {
                var h = ti(t), f = h + " " + i, c = w[f] ? ++w[f].total : 0, u = {}, l;
                if (c > 0) {
                    var e = i + "-stagger"
                      , a = h + " " + e
                      , v = !w[a];
                    v && t.addClass(e);
                    u = ct(t, a);
                    v && t.removeClass(e)
                }
                r = r || function(n) {
                    return n()
                }
                ;
                t.addClass(i);
                var p = t.data(y) || {}
                  , o = r(function() {
                    return ct(t, f)
                })
                  , b = o.transitionDuration
                  , k = o.animationDuration;
                return b === 0 && k === 0 ? (t.removeClass(i),
                !1) : (t.data(y, {
                    running: p.running || 0,
                    itemIndex: c,
                    stagger: u,
                    timings: o,
                    closeAnimationFn: s
                }),
                l = p.running > 0 || n == "setClass",
                b > 0 && ui(t, i, l),
                k > 0 && u.animationDelay > 0 && u.animationDuration === 0 && fi(t),
                !0)
            }
            function ri(n) {
                return n == "ng-enter" || n == "ng-move" || n == "ng-leave"
            }
            function ui(n, t, i) {
                ri(t) || !i ? o(n).style[a + ot] = "none" : n.addClass(pt)
            }
            function fi(n) {
                o(n).style[v] = "none 0s"
            }
            function d(n) {
                var t = a + ot
                  , i = o(n);
                i.style[t] && i.style[t].length > 0 && (i.style[t] = "");
                n.removeClass(pt)
            }
            function g(n) {
                var t = v
                  , i = o(n);
                i.style[t] && i.style[t].length > 0 && (i.style[t] = "")
            }
            function ei(n, t, i, r) {
                function b() {
                    var n, r;
                    t.off(it, k);
                    t.removeClass(a);
                    ut(t, i);
                    n = o(t);
                    for (r in s)
                        n.style.removeProperty(s[r])
                }
                function k(n) {
                    n.stopPropagation();
                    var t = n.originalEvent || n
                      , i = t.$manualTimeStamp || t.timeStamp || Date.now()
                      , u = parseFloat(t.elapsedTime.toFixed(si));
                    Math.max(i - ot, 0) >= rt && u >= nt && r()
                }
                var p = o(t), h = t.data(y), a, w, d, g;
                if (p.getAttribute("class").indexOf(i) == -1 || !h) {
                    r();
                    return
                }
                a = "";
                e(i.split(" "), function(n, t) {
                    a += (t > 0 ? " " : "") + n + "-active"
                });
                var f = h.stagger
                  , u = h.timings
                  , v = h.itemIndex
                  , nt = Math.max(u.transitionDuration, u.animationDuration)
                  , tt = Math.max(u.transitionDelay, u.animationDelay)
                  , rt = tt * wt
                  , ot = Date.now()
                  , it = et + " " + ft
                  , l = ""
                  , s = [];
                u.transitionDuration > 0 && (w = u.transitionPropertyStyle,
                w.indexOf("all") == -1 && (l += c + "transition-property: " + w + ";",
                l += c + "transition-duration: " + u.transitionDurationStyle + ";",
                s.push(c + "transition-property"),
                s.push(c + "transition-duration")));
                v > 0 && (f.transitionDelay > 0 && f.transitionDuration === 0 && (d = u.transitionDelayStyle,
                l += c + "transition-delay: " + lt(d, f.transitionDelay, v) + "; ",
                s.push(c + "transition-delay")),
                f.animationDelay > 0 && f.animationDuration === 0 && (l += c + "animation-delay: " + lt(u.animationDelayStyle, f.animationDelay, v) + "; ",
                s.push(c + "animation-delay")));
                s.length > 0 && (g = p.getAttribute("style") || "",
                p.setAttribute("style", g + "; " + l));
                t.on(it, k);
                t.addClass(a);
                h.closeAnimationFn = function() {
                    b();
                    r()
                }
                ;
                var st = v * (Math.max(f.animationDelay, f.transitionDelay) || 0)
                  , ht = (tt + nt) * hi
                  , ct = (st + ht) * wt;
                return h.running++,
                gt(t, ct),
                b
            }
            function lt(n, t, i) {
                var r = "";
                return e(n.split(","), function(n, u) {
                    r += (u > 0 ? "," : "") + (i * t + parseInt(n, 10)) + "s"
                }),
                r
            }
            function nt(n, t, i, r) {
                if (ii(n, t, i, r))
                    return function(n) {
                        n && ut(t, i)
                    }
            }
            function tt(n, t, i, r) {
                if (t.data(y))
                    return ei(n, t, i, r);
                ut(t, i);
                r()
            }
            function rt(n, t, i, r) {
                var f = nt(n, t, i), u;
                if (!f) {
                    r();
                    return
                }
                return u = f,
                b(t, function() {
                    d(t, i);
                    g(t);
                    u = tt(n, t, i, r)
                }),
                function(n) {
                    (u || s)(n)
                }
            }
            function ut(n, t) {
                n.removeClass(t);
                var i = n.data(y);
                i && (i.running && i.running--,
                i.running && i.running !== 0 || n.removeData(y))
            }
            function l(n, i) {
                var r = "";
                return n = t.isArray(n) ? n : n.split(/\s+/),
                e(n, function(n, t) {
                    n && n.length > 0 && (r += (t > 0 ? " " : "") + n + i)
                }),
                r
            }
            var c = "", a, ft, v, et;
            n.ontransitionend === i && n.onwebkittransitionend !== i ? (c = "-webkit-",
            a = "WebkitTransition",
            ft = "webkitTransitionEnd transitionend") : (a = "transition",
            ft = "transitionend");
            n.onanimationend === i && n.onwebkitanimationend !== i ? (c = "-webkit-",
            v = "WebkitAnimation",
            et = "webkitAnimationEnd animationend") : (v = "animation",
            et = "animationend");
            var at = "Duration", ot = "Property", vt = "Delay", oi = "IterationCount", yt = "$$ngAnimateKey", y = "$$ngAnimateCSS3Data", pt = "ng-animate-block-transitions", si = 3, hi = 1.5, wt = 1e3, w = {}, bt = 0, st = [], it, kt = null, dt = 0, ht = [];
            return {
                enter: function(n, t) {
                    return rt("enter", n, "ng-enter", t)
                },
                leave: function(n, t) {
                    return rt("leave", n, "ng-leave", t)
                },
                move: function(n, t) {
                    return rt("move", n, "ng-move", t)
                },
                beforeSetClass: function(n, t, i, r) {
                    var u = l(i, "-remove") + " " + l(t, "-add")
                      , f = nt("setClass", n, u, function(r) {
                        var f = n.attr("class"), u;
                        return n.removeClass(i),
                        n.addClass(t),
                        u = r(),
                        n.attr("class", f),
                        u
                    });
                    if (f)
                        return b(n, function() {
                            d(n, u);
                            g(n);
                            r()
                        }),
                        f;
                    r()
                },
                beforeAddClass: function(n, t, i) {
                    var r = nt("addClass", n, l(t, "-add"), function(i) {
                        n.addClass(t);
                        var r = i();
                        return n.removeClass(t),
                        r
                    });
                    if (r)
                        return b(n, function() {
                            d(n, t);
                            g(n);
                            i()
                        }),
                        r;
                    i()
                },
                setClass: function(n, t, i, r) {
                    i = l(i, "-remove");
                    t = l(t, "-add");
                    var u = i + " " + t;
                    return tt("setClass", n, u, r)
                },
                addClass: function(n, t, i) {
                    return tt("addClass", n, l(t, "-add"), i)
                },
                beforeRemoveClass: function(n, t, i) {
                    var r = nt("removeClass", n, l(t, "-remove"), function(i) {
                        var u = n.attr("class"), r;
                        return n.removeClass(t),
                        r = i(),
                        n.attr("class", u),
                        r
                    });
                    if (r)
                        return b(n, function() {
                            d(n, t);
                            g(n);
                            i()
                        }),
                        r;
                    i()
                },
                removeClass: function(n, t, i) {
                    return tt("removeClass", n, l(t, "-remove"), i)
                }
            }
        }
        ])
    }
    ])
}
)(window, window.angular),
function(n, t, i) {
    "use strict";
    function k(n) {
        var i = [];
        return o(i, t.noop).chars(n),
        i.join("")
    }
    function r(n) {
        var i = {}, t;
        for (n = n.split(","),
        t = 0; t < n.length; t++)
            i[n[t]] = !0;
        return i
    }
    function d(n, i) {
        function b(n, r, e, s) {
            if (r = t.lowercase(r),
            v[r])
                for (; u.last() && y[u.last()]; )
                    o("", u.last());
            a[r] && u.last() == r && o("", r);
            (s = l[r] || !!s) || u.push(r);
            var h = {};
            e.replace(nt, function(n, t, i, r, u) {
                h[t] = f(i || r || u || "")
            });
            i.start && i.start(r, h, s)
        }
        function o(n, r) {
            var f = 0, e;
            if (r = t.lowercase(r))
                for (f = u.length - 1; 0 <= f && u[f] != r; f--)
                    ;
            if (0 <= f) {
                for (e = u.length - 1; e >= f; e--)
                    i.end && i.end(u[e]);
                u.length = f
            }
        }
        var r, e, u = [], w = n;
        for (u.last = function() {
            return u[u.length - 1]
        }
        ; n; ) {
            if (e = !0,
            u.last() && p[u.last()] ? (n = n.replace(RegExp("(.*)<\\s*\\/\\s*" + u.last() + "[^>]*>", "i"), function(n, t) {
                return t = t.replace(rt, "$1").replace(ut, "$1"),
                i.chars && i.chars(f(t)),
                ""
            }),
            o("", u.last())) : (0 === n.indexOf("<!--") ? (r = n.indexOf("--", 4),
            0 <= r && n.lastIndexOf("-->", r) === r && (i.comment && i.comment(n.substring(4, r)),
            n = n.substring(r + 3),
            e = !1)) : c.test(n) ? (r = n.match(c)) && (n = n.replace(r[0], ""),
            e = !1) : it.test(n) ? (r = n.match(h)) && (n = n.substring(r[0].length),
            r[0].replace(h, o),
            e = !1) : tt.test(n) && (r = n.match(s)) && (n = n.substring(r[0].length),
            r[0].replace(s, b),
            e = !1),
            e && (r = n.indexOf("<"),
            e = 0 > r ? n : n.substring(0, r),
            n = 0 > r ? "" : n.substring(r),
            i.chars && i.chars(f(e)))),
            n == w)
                throw g("badparse", n);
            w = n
        }
        o()
    }
    function f(n) {
        var t, i;
        return n ? (t = st.exec(n),
        n = t[1],
        i = t[3],
        (t = t[2]) && (u.innerHTML = t.replace(/</g, "&lt;"),
        t = "textContent"in u ? u.textContent : u.innerText),
        n + t + i) : ""
    }
    function e(n) {
        return n.replace(/&/g, "&amp;").replace(ft, function(n) {
            var t = n.charCodeAt(0);
            return n = n.charCodeAt(1),
            "&#" + (1024 * (t - 55296) + (n - 56320) + 65536) + ";"
        }).replace(et, function(n) {
            return "&#" + n.charCodeAt(0) + ";"
        }).replace(/</g, "&lt;").replace(/>/g, "&gt;")
    }
    function o(n, i) {
        var u = !1
          , r = t.bind(n, n.push);
        return {
            start: function(n, f, o) {
                n = t.lowercase(n);
                !u && p[n] && (u = n);
                u || !0 !== w[n] || (r("<"),
                r(n),
                t.forEach(f, function(u, f) {
                    var o = t.lowercase(f)
                      , s = "img" === n && "src" === o || "background" === o;
                    !0 === ot[o] && (!0 !== b[o] || i(u, s)) && (r(" "),
                    r(f),
                    r('="'),
                    r(e(u)),
                    r('"'))
                }),
                r(o ? "/>" : ">"))
            },
            end: function(n) {
                n = t.lowercase(n);
                u || !0 !== w[n] || (r("<\/"),
                r(n),
                r(">"));
                n == u && (u = !1)
            },
            chars: function(n) {
                u || r(e(n))
            }
        }
    }
    var g = t.$$minErr("$sanitize")
      , s = /^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/
      , h = /^<\s*\/\s*([\w:-]+)[^>]*>/
      , nt = /([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g
      , tt = /^</
      , it = /^<\s*\//
      , rt = /\x3c!--(.*?)--\x3e/g
      , c = /<!DOCTYPE([^>]*?)>/i
      , ut = /<!\[CDATA\[(.*?)]]\x3e/g
      , ft = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g
      , et = /([^\#-~| |!])/g
      , l = r("area,br,col,hr,img,wbr");
    n = r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr");
    i = r("rp,rt");
    var a = t.extend({}, i, n)
      , v = t.extend({}, n, r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"))
      , y = t.extend({}, i, r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"))
      , p = r("script,style")
      , w = t.extend({}, l, v, y, a)
      , b = r("background,cite,href,longdesc,src,usemap")
      , ot = t.extend({}, b, r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"))
      , u = document.createElement("pre")
      , st = /^(\s*)([\s\S]*?)(\s*)$/;
    t.module("ngSanitize", []).provider("$sanitize", function() {
        this.$get = ["$$sanitizeUri", function(n) {
            return function(t) {
                var i = [];
                return d(t, o(i, function(t, i) {
                    return !/^unsafe/.test(n(t, i))
                })),
                i.join("")
            }
        }
        ]
    });
    t.module("ngSanitize").filter("linky", ["$sanitize", function(n) {
        var i = /((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/
          , r = /^mailto:/;
        return function(u, f) {
            function c(n) {
                n && e.push(k(n))
            }
            function a(n, i) {
                e.push("<a ");
                t.isDefined(f) && (e.push('target="'),
                e.push(f),
                e.push('" '));
                e.push('href="');
                e.push(n);
                e.push('">');
                c(i);
                e.push("<\/a>")
            }
            if (!u)
                return u;
            for (var o, s = u, e = [], h, l; o = s.match(i); )
                h = o[0],
                o[2] == o[3] && (h = "mailto:" + h),
                l = o.index,
                c(s.substr(0, l)),
                a(h, o[0].replace(r, "")),
                s = s.substring(l + o[0].length);
            return c(s),
            n(e.join(""))
        }
    }
    ])
}(window, window.angular),
function(n, t) {
    "use strict";
    function r(n, t, r) {
        i.directive(n, ["$parse", "$swipe", function(i, u) {
            var f = 75
              , e = .3
              , o = 30;
            return function(s, h, c) {
                function v(n) {
                    if (!l)
                        return !1;
                    var i = Math.abs(n.y - l.y);
                    return n = (n.x - l.x) * t,
                    a && i < f && 0 < n && n > o && i / n < e
                }
                var y = i(c[n]), l, a;
                u.bind(h, {
                    start: function(n) {
                        l = n;
                        a = !0
                    },
                    cancel: function() {
                        a = !1
                    },
                    end: function(n, t) {
                        v(n) && s.$apply(function() {
                            h.triggerHandler(r);
                            y(s, {
                                $event: t
                            })
                        })
                    }
                })
            }
        }
        ])
    }
    var i = t.module("ngTouch", []);
    i.factory("$swipe", [function() {
        function n(n) {
            var t = n.touches && n.touches.length ? n.touches : [n];
            return n = n.changedTouches && n.changedTouches[0] || n.originalEvent && n.originalEvent.changedTouches && n.originalEvent.changedTouches[0] || t[0].originalEvent || t[0],
            {
                x: n.clientX,
                y: n.clientY
            }
        }
        return {
            bind: function(t, i) {
                var u, f, e, o, r = !1;
                t.on("touchstart mousedown", function(t) {
                    e = n(t);
                    r = !0;
                    f = u = 0;
                    o = e;
                    i.start && i.start(e, t)
                });
                t.on("touchcancel", function(n) {
                    r = !1;
                    i.cancel && i.cancel(n)
                });
                t.on("touchmove mousemove", function(t) {
                    if (r && e) {
                        var s = n(t);
                        u += Math.abs(s.x - o.x);
                        f += Math.abs(s.y - o.y);
                        o = s;
                        10 > u && 10 > f || (f > u ? (r = !1,
                        i.cancel && i.cancel(t)) : (t.preventDefault(),
                        i.move && i.move(s, t)))
                    }
                });
                t.on("touchend mouseup", function(t) {
                    r && (r = !1,
                    i.end && i.end(n(t), t))
                })
            }
        }
    }
    ]);
    i.config(["$provide", function(n) {
        n.decorator("ngClickDirective", ["$delegate", function(n) {
            return n.shift(),
            n
        }
        ])
    }
    ]);
    i.directive("ngClick", ["$parse", "$timeout", "$rootElement", function(n, i, r) {
        function o(n, t, i) {
            for (var r = 0; r < n.length; r += 2)
                if (Math.abs(n[r] - t) < h && Math.abs(n[r + 1] - i) < h)
                    return n.splice(r, r + 2),
                    !0;
            return !1
        }
        function l(n) {
            if (!(Date.now() - c > s)) {
                var t = n.touches && n.touches.length ? n.touches : [n]
                  , i = t[0].clientX
                  , t = t[0].clientY;
                1 > i && 1 > t || f && f[0] === i && f[1] === t || (f && (f = null),
                "label" === n.target.tagName.toLowerCase() && (f = [i, t]),
                o(u, i, t) || (n.stopPropagation(),
                n.preventDefault(),
                n.target && n.target.blur()))
            }
        }
        function a(n) {
            n = n.touches && n.touches.length ? n.touches : [n];
            var t = n[0].clientX
              , r = n[0].clientY;
            u.push(t, r);
            i(function() {
                for (var n = 0; n < u.length; n += 2)
                    if (u[n] == t && u[n + 1] == r) {
                        u.splice(n, n + 2);
                        break
                    }
            }, s, !1)
        }
        var s = 2500, h = 25, e = "ng-click-active", c, u, f;
        return function(i, f, s) {
            function v() {
                y = !1;
                f.removeClass(e)
            }
            var k = n(s.ngClick), y = !1, h, p, w, b;
            f.on("touchstart", function(n) {
                y = !0;
                h = n.target ? n.target : n.srcElement;
                3 == h.nodeType && (h = h.parentNode);
                f.addClass(e);
                p = Date.now();
                n = n.touches && n.touches.length ? n.touches : [n];
                n = n[0].originalEvent || n[0];
                w = n.clientX;
                b = n.clientY
            });
            f.on("touchmove", function() {
                v()
            });
            f.on("touchcancel", function() {
                v()
            });
            f.on("touchend", function(n) {
                var k = Date.now() - p
                  , i = n.changedTouches && n.changedTouches.length ? n.changedTouches : n.touches && n.touches.length ? n.touches : [n]
                  , e = i[0].originalEvent || i[0]
                  , i = e.clientX
                  , e = e.clientY
                  , d = Math.sqrt(Math.pow(i - w, 2) + Math.pow(e - b, 2));
                y && 750 > k && 12 > d && (u || (r[0].addEventListener("click", l, !0),
                r[0].addEventListener("touchstart", a, !0),
                u = []),
                c = Date.now(),
                o(u, i, e),
                h && h.blur(),
                t.isDefined(s.disabled) && !1 !== s.disabled || f.triggerHandler("click", [n]));
                v()
            });
            f.onclick = function() {}
            ;
            f.on("click", function(n, t) {
                i.$apply(function() {
                    k(i, {
                        $event: t || n
                    })
                })
            });
            f.on("mousedown", function() {
                f.addClass(e)
            });
            f.on("mousemove mouseup", function() {
                f.removeClass(e)
            })
        }
    }
    ]);
    r("ngSwipeLeft", -1, "swipeleft");
    r("ngSwipeRight", 1, "swiperight")
}(window, window.angular);
angular.module("ui.bootstrap", ["ui.bootstrap.tpls", "ui.bootstrap.transition", "ui.bootstrap.collapse", "ui.bootstrap.accordion", "ui.bootstrap.alert", "ui.bootstrap.bindHtml", "ui.bootstrap.buttons", "ui.bootstrap.carousel", "ui.bootstrap.dateparser", "ui.bootstrap.position", "ui.bootstrap.datepicker", "ui.bootstrap.dropdown", "ui.bootstrap.modal", "ui.bootstrap.pagination", "ui.bootstrap.tooltip", "ui.bootstrap.popover", "ui.bootstrap.progressbar", "ui.bootstrap.rating", "ui.bootstrap.tabs", "ui.bootstrap.timepicker", "ui.bootstrap.typeahead"]);
angular.module("ui.bootstrap.tpls", ["template/accordion/accordion-group.html", "template/accordion/accordion.html", "template/alert/alert.html", "template/carousel/carousel.html", "template/carousel/slide.html", "template/datepicker/datepicker.html", "template/datepicker/day.html", "template/datepicker/month.html", "template/datepicker/popup.html", "template/datepicker/year.html", "template/modal/backdrop.html", "template/modal/window.html", "template/pagination/pager.html", "template/pagination/pagination.html", "template/tooltip/tooltip-html-unsafe-popup.html", "template/tooltip/tooltip-popup.html", "template/popover/popover.html", "template/progressbar/bar.html", "template/progressbar/progress.html", "template/progressbar/progressbar.html", "template/rating/rating.html", "template/tabs/tab.html", "template/tabs/tabset.html", "template/timepicker/timepicker.html", "template/typeahead/typeahead-match.html", "template/typeahead/typeahead-popup.html"]);
angular.module("ui.bootstrap.transition", []).factory("$transition", ["$q", "$timeout", "$rootScope", function(n, t, i) {
    function u(n) {
        for (var t in n)
            if (f.style[t] !== undefined)
                return n[t]
    }
    var r = function(u, f, e) {
        e = e || {};
        var s = n.defer()
          , o = r[e.animation ? "animationEndEventName" : "transitionEndEventName"]
          , h = function() {
            i.$apply(function() {
                u.unbind(o, h);
                s.resolve(u)
            })
        };
        return o && u.bind(o, h),
        t(function() {
            angular.isString(f) ? u.addClass(f) : angular.isFunction(f) ? f(u) : angular.isObject(f) && u.css(f);
            o || s.resolve(u)
        }),
        s.promise.cancel = function() {
            o && u.unbind(o, h);
            s.reject("Transition cancelled")
        }
        ,
        s.promise
    }
      , f = document.createElement("trans");
    return r.transitionEndEventName = u({
        WebkitTransition: "webkitTransitionEnd",
        MozTransition: "transitionend",
        OTransition: "oTransitionEnd",
        transition: "transitionend"
    }),
    r.animationEndEventName = u({
        WebkitTransition: "webkitAnimationEnd",
        MozTransition: "animationend",
        OTransition: "oAnimationEnd",
        transition: "animationend"
    }),
    r
}
]);
angular.module("ui.bootstrap.collapse", ["ui.bootstrap.transition"]).directive("collapse", ["$transition", function(n) {
    return {
        link: function(t, i, r) {
            function e(t) {
                function f() {
                    u === r && (u = undefined)
                }
                var r = n(i, t);
                return u && u.cancel(),
                u = r,
                r.then(f, f),
                r
            }
            function h() {
                f ? (f = !1,
                o()) : (i.removeClass("collapse").addClass("collapsing"),
                e({
                    height: i[0].scrollHeight + "px"
                }).then(o))
            }
            function o() {
                i.removeClass("collapsing");
                i.addClass("collapse in");
                i.css({
                    height: "auto"
                })
            }
            function c() {
                if (f)
                    f = !1,
                    s(),
                    i.css({
                        height: 0
                    });
                else {
                    i.css({
                        height: i[0].scrollHeight + "px"
                    });
                    var n = i[0].offsetWidth;
                    i.removeClass("collapse in").addClass("collapsing");
                    e({
                        height: 0
                    }).then(s)
                }
            }
            function s() {
                i.removeClass("collapsing");
                i.addClass("collapse")
            }
            var f = !0, u;
            t.$watch(r.collapse, function(n) {
                n ? c() : h()
            })
        }
    }
}
]);
angular.module("ui.bootstrap.accordion", ["ui.bootstrap.collapse"]).constant("accordionConfig", {
    closeOthers: !0
}).controller("AccordionController", ["$scope", "$attrs", "accordionConfig", function(n, t, i) {
    this.groups = [];
    this.closeOthers = function(r) {
        var u = angular.isDefined(t.closeOthers) ? n.$eval(t.closeOthers) : i.closeOthers;
        u && angular.forEach(this.groups, function(n) {
            n !== r && (n.isOpen = !1)
        })
    }
    ;
    this.addGroup = function(n) {
        var t = this;
        this.groups.push(n);
        n.$on("$destroy", function() {
            t.removeGroup(n)
        })
    }
    ;
    this.removeGroup = function(n) {
        var t = this.groups.indexOf(n);
        t !== -1 && this.groups.splice(t, 1)
    }
}
]).directive("accordion", function() {
    return {
        restrict: "EA",
        controller: "AccordionController",
        transclude: !0,
        replace: !1,
        templateUrl: "template/accordion/accordion.html"
    }
}).directive("accordionGroup", function() {
    return {
        require: "^accordion",
        restrict: "EA",
        transclude: !0,
        replace: !0,
        templateUrl: "template/accordion/accordion-group.html",
        scope: {
            heading: "@",
            isOpen: "=?",
            isDisabled: "=?"
        },
        controller: function() {
            this.setHeading = function(n) {
                this.heading = n
            }
        },
        link: function(n, t, i, r) {
            r.addGroup(n);
            n.$watch("isOpen", function(t) {
                t && r.closeOthers(n)
            });
            n.toggleOpen = function() {
                n.isDisabled || (n.isOpen = !n.isOpen)
            }
        }
    }
}).directive("accordionHeading", function() {
    return {
        restrict: "EA",
        transclude: !0,
        template: "",
        replace: !0,
        require: "^accordionGroup",
        link: function(n, t, i, r, u) {
            r.setHeading(u(n, function() {}))
        }
    }
}).directive("accordionTransclude", function() {
    return {
        require: "^accordionGroup",
        link: function(n, t, i, r) {
            n.$watch(function() {
                return r[i.accordionTransclude]
            }, function(n) {
                n && (t.html(""),
                t.append(n))
            })
        }
    }
});
angular.module("ui.bootstrap.alert", []).controller("AlertController", ["$scope", "$attrs", function(n, t) {
    n.closeable = "close"in t
}
]).directive("alert", function() {
    return {
        restrict: "EA",
        controller: "AlertController",
        templateUrl: "template/alert/alert.html",
        transclude: !0,
        replace: !0,
        scope: {
            type: "@",
            close: "&"
        }
    }
});
angular.module("ui.bootstrap.bindHtml", []).directive("bindHtmlUnsafe", function() {
    return function(n, t, i) {
        t.addClass("ng-binding").data("$binding", i.bindHtmlUnsafe);
        n.$watch(i.bindHtmlUnsafe, function(n) {
            t.html(n || "")
        })
    }
});
angular.module("ui.bootstrap.buttons", []).constant("buttonConfig", {
    activeClass: "active",
    toggleEvent: "click"
}).controller("ButtonsController", ["buttonConfig", function(n) {
    this.activeClass = n.activeClass || "active";
    this.toggleEvent = n.toggleEvent || "click"
}
]).directive("btnRadio", function() {
    return {
        require: ["btnRadio", "ngModel"],
        controller: "ButtonsController",
        link: function(n, t, i, r) {
            var f = r[0]
              , u = r[1];
            u.$render = function() {
                t.toggleClass(f.activeClass, angular.equals(u.$modelValue, n.$eval(i.btnRadio)))
            }
            ;
            t.bind(f.toggleEvent, function() {
                var r = t.hasClass(f.activeClass);
                (!r || angular.isDefined(i.uncheckable)) && n.$apply(function() {
                    u.$setViewValue(r ? null : n.$eval(i.btnRadio));
                    u.$render()
                })
            })
        }
    }
}).directive("btnCheckbox", function() {
    return {
        require: ["btnCheckbox", "ngModel"],
        controller: "ButtonsController",
        link: function(n, t, i, r) {
            function e() {
                return o(i.btnCheckboxTrue, !0)
            }
            function s() {
                return o(i.btnCheckboxFalse, !1)
            }
            function o(t, i) {
                var r = n.$eval(t);
                return angular.isDefined(r) ? r : i
            }
            var f = r[0]
              , u = r[1];
            u.$render = function() {
                t.toggleClass(f.activeClass, angular.equals(u.$modelValue, e()))
            }
            ;
            t.bind(f.toggleEvent, function() {
                n.$apply(function() {
                    u.$setViewValue(t.hasClass(f.activeClass) ? s() : e());
                    u.$render()
                })
            })
        }
    }
});
angular.module("ui.bootstrap.carousel", ["ui.bootstrap.transition"]).controller("CarouselController", ["$scope", "$timeout", "$transition", function(n, t, i) {
    function e() {
        h();
        var i = +n.interval;
        !isNaN(i) && i >= 0 && (o = t(l, i))
    }
    function h() {
        o && (t.cancel(o),
        o = null)
    }
    function l() {
        s ? (n.next(),
        e()) : n.pause()
    }
    var r = this, u = r.slides = n.slides = [], f = -1, o, s, c;
    r.currentSlide = null;
    c = !1;
    r.select = n.select = function(o, s) {
        function l() {
            if (!c) {
                if (r.currentSlide && angular.isString(s) && !n.noTransition && o.$element) {
                    o.$element.addClass(s);
                    var t = o.$element[0].offsetWidth;
                    angular.forEach(u, function(n) {
                        angular.extend(n, {
                            direction: "",
                            entering: !1,
                            leaving: !1,
                            active: !1
                        })
                    });
                    angular.extend(o, {
                        direction: s,
                        active: !0,
                        entering: !0
                    });
                    angular.extend(r.currentSlide || {}, {
                        direction: s,
                        leaving: !0
                    });
                    n.$currentTransition = i(o.$element, {}),
                    function(t, i) {
                        n.$currentTransition.then(function() {
                            h(t, i)
                        }, function() {
                            h(t, i)
                        })
                    }(o, r.currentSlide)
                } else
                    h(o, r.currentSlide);
                r.currentSlide = o;
                f = a;
                e()
            }
        }
        function h(t, i) {
            angular.extend(t, {
                direction: "",
                active: !0,
                leaving: !1,
                entering: !1
            });
            angular.extend(i || {}, {
                direction: "",
                active: !1,
                leaving: !1,
                entering: !1
            });
            n.$currentTransition = null
        }
        var a = u.indexOf(o);
        s === undefined && (s = a > f ? "next" : "prev");
        o && o !== r.currentSlide && (n.$currentTransition ? (n.$currentTransition.cancel(),
        t(l)) : l())
    }
    ;
    n.$on("$destroy", function() {
        c = !0
    });
    r.indexOfSlide = function(n) {
        return u.indexOf(n)
    }
    ;
    n.next = function() {
        var t = (f + 1) % u.length;
        if (!n.$currentTransition)
            return r.select(u[t], "next")
    }
    ;
    n.prev = function() {
        var t = f - 1 < 0 ? u.length - 1 : f - 1;
        if (!n.$currentTransition)
            return r.select(u[t], "prev")
    }
    ;
    n.isActive = function(n) {
        return r.currentSlide === n
    }
    ;
    n.$watch("interval", e);
    n.$on("$destroy", h);
    n.play = function() {
        s || (s = !0,
        e())
    }
    ;
    n.pause = function() {
        n.noPause || (s = !1,
        h())
    }
    ;
    r.addSlide = function(t, i) {
        t.$element = i;
        u.push(t);
        u.length === 1 || t.active ? (r.select(u[u.length - 1]),
        u.length == 1 && n.play()) : t.active = !1
    }
    ;
    r.removeSlide = function(n) {
        var t = u.indexOf(n);
        u.splice(t, 1);
        u.length > 0 && n.active ? t >= u.length ? r.select(u[t - 1]) : r.select(u[t]) : f > t && f--
    }
}
]).directive("carousel", [function() {
    return {
        restrict: "EA",
        transclude: !0,
        replace: !0,
        controller: "CarouselController",
        require: "carousel",
        templateUrl: "template/carousel/carousel.html",
        scope: {
            interval: "=",
            noTransition: "=",
            noPause: "="
        }
    }
}
]).directive("slide", function() {
    return {
        require: "^carousel",
        restrict: "EA",
        transclude: !0,
        replace: !0,
        templateUrl: "template/carousel/slide.html",
        scope: {
            active: "=?"
        },
        link: function(n, t, i, r) {
            r.addSlide(n, t);
            n.$on("$destroy", function() {
                r.removeSlide(n)
            });
            n.$watch("active", function(t) {
                t && r.select(n)
            })
        }
    }
});
angular.module("ui.bootstrap.dateparser", []).service("dateParser", ["$locale", "orderByFilter", function(n, t) {
    function i(n, t, i) {
        return t === 1 && i > 28 ? i === 29 && (n % 4 == 0 && n % 100 != 0 || n % 400 == 0) : t === 3 || t === 5 || t === 8 || t === 10 ? i < 31 : !0
    }
    this.parsers = {};
    var r = {
        yyyy: {
            regex: "\\d{4}",
            apply: function(n) {
                this.year = +n
            }
        },
        yy: {
            regex: "\\d{2}",
            apply: function(n) {
                this.year = +n + 2e3
            }
        },
        y: {
            regex: "\\d{1,4}",
            apply: function(n) {
                this.year = +n
            }
        },
        MMMM: {
            regex: n.DATETIME_FORMATS.MONTH.join("|"),
            apply: function(t) {
                this.month = n.DATETIME_FORMATS.MONTH.indexOf(t)
            }
        },
        MMM: {
            regex: n.DATETIME_FORMATS.SHORTMONTH.join("|"),
            apply: function(t) {
                this.month = n.DATETIME_FORMATS.SHORTMONTH.indexOf(t)
            }
        },
        MM: {
            regex: "0[1-9]|1[0-2]",
            apply: function(n) {
                this.month = n - 1
            }
        },
        M: {
            regex: "[1-9]|1[0-2]",
            apply: function(n) {
                this.month = n - 1
            }
        },
        dd: {
            regex: "[0-2][0-9]{1}|3[0-1]{1}",
            apply: function(n) {
                this.date = +n
            }
        },
        d: {
            regex: "[1-2]?[0-9]{1}|3[0-1]{1}",
            apply: function(n) {
                this.date = +n
            }
        },
        EEEE: {
            regex: n.DATETIME_FORMATS.DAY.join("|")
        },
        EEE: {
            regex: n.DATETIME_FORMATS.SHORTDAY.join("|")
        }
    };
    this.createParser = function(n) {
        var u = []
          , i = n.split("");
        return angular.forEach(r, function(t, r) {
            var f = n.indexOf(r), e, o;
            if (f > -1) {
                for (n = n.split(""),
                i[f] = "(" + t.regex + ")",
                n[f] = "$",
                e = f + 1,
                o = f + r.length; e < o; e++)
                    i[e] = "",
                    n[e] = "$";
                n = n.join("");
                u.push({
                    index: f,
                    apply: t.apply
                })
            }
        }),
        {
            regex: new RegExp("^" + i.join("") + "$"),
            map: t(u, "index")
        }
    }
    ;
    this.parse = function(t, r) {
        var u, s, f, h, o;
        if (!angular.isString(t))
            return t;
        r = n.DATETIME_FORMATS[r] || r;
        this.parsers[r] || (this.parsers[r] = this.createParser(r));
        var c = this.parsers[r]
          , l = c.regex
          , a = c.map
          , e = t.match(l);
        if (e && e.length) {
            for (u = {
                year: 1900,
                month: 0,
                date: 1,
                hours: 0
            },
            f = 1,
            h = e.length; f < h; f++)
                o = a[f - 1],
                o.apply && o.apply.call(u, e[f]);
            return i(u.year, u.month, u.date) && (s = new Date(u.year,u.month,u.date,u.hours)),
            s
        }
    }
}
]);
angular.module("ui.bootstrap.position", []).factory("$position", ["$document", "$window", function(n, t) {
    function i(n, i) {
        return n.currentStyle ? n.currentStyle[i] : t.getComputedStyle ? t.getComputedStyle(n)[i] : n.style[i]
    }
    function r(n) {
        return (i(n, "position") || "static") === "static"
    }
    var u = function(t) {
        for (var u = n[0], i = t.offsetParent || u; i && i !== u && r(i); )
            i = i.offsetParent;
        return i || u
    };
    return {
        position: function(t) {
            var e = this.offset(t), r = {
                top: 0,
                left: 0
            }, i = u(t[0]), f;
            return i != n[0] && (r = this.offset(angular.element(i)),
            r.top += i.clientTop - i.scrollTop,
            r.left += i.clientLeft - i.scrollLeft),
            f = t[0].getBoundingClientRect(),
            {
                width: f.width || t.prop("offsetWidth"),
                height: f.height || t.prop("offsetHeight"),
                top: e.top - r.top,
                left: e.left - r.left
            }
        },
        offset: function(i) {
            var r = i[0].getBoundingClientRect();
            return {
                width: r.width || i.prop("offsetWidth"),
                height: r.height || i.prop("offsetHeight"),
                top: r.top + (t.pageYOffset || n[0].documentElement.scrollTop),
                left: r.left + (t.pageXOffset || n[0].documentElement.scrollLeft)
            }
        },
        positionElements: function(n, t, i, r) {
            var a = i.split("-"), h = a[0], e = a[1] || "center", u, c, l, f, o, s;
            u = r ? this.offset(n) : this.position(n);
            c = t.prop("offsetWidth");
            l = t.prop("offsetHeight");
            o = {
                center: function() {
                    return u.left + u.width / 2 - c / 2
                },
                left: function() {
                    return u.left
                },
                right: function() {
                    return u.left + u.width
                }
            };
            s = {
                center: function() {
                    return u.top + u.height / 2 - l / 2
                },
                top: function() {
                    return u.top
                },
                bottom: function() {
                    return u.top + u.height
                }
            };
            switch (h) {
            case "right":
                f = {
                    top: s[e](),
                    left: o[h]()
                };
                break;
            case "left":
                f = {
                    top: s[e](),
                    left: u.left - c
                };
                break;
            case "bottom":
                f = {
                    top: s[h](),
                    left: o[e]()
                };
                break;
            default:
                f = {
                    top: u.top - l,
                    left: o[e]()
                }
            }
            return f
        }
    }
}
]);
angular.module("ui.bootstrap.datepicker", ["ui.bootstrap.dateparser", "ui.bootstrap.position"]).constant("datepickerConfig", {
    formatDay: "dd",
    formatMonth: "MMMM",
    formatYear: "yyyy",
    formatDayHeader: "EEE",
    formatDayTitle: "MMMM yyyy",
    formatMonthTitle: "yyyy",
    datepickerMode: "day",
    minMode: "day",
    maxMode: "year",
    showWeeks: !0,
    startingDay: 0,
    yearRange: 20,
    minDate: null,
    maxDate: null
}).controller("DatepickerController", ["$scope", "$attrs", "$parse", "$interpolate", "$timeout", "$log", "dateFilter", "datepickerConfig", function(n, t, i, r, u, f, e, o) {
    var s = this, h = {
        $setViewValue: angular.noop
    }, c;
    this.modes = ["day", "month", "year"];
    angular.forEach(["formatDay", "formatMonth", "formatYear", "formatDayHeader", "formatDayTitle", "formatMonthTitle", "minMode", "maxMode", "showWeeks", "startingDay", "yearRange"], function(i, u) {
        s[i] = angular.isDefined(t[i]) ? u < 8 ? r(t[i])(n.$parent) : n.$parent.$eval(t[i]) : o[i]
    });
    angular.forEach(["minDate", "maxDate"], function(r) {
        t[r] ? n.$parent.$watch(i(t[r]), function(n) {
            s[r] = n ? new Date(n) : null;
            s.refreshView()
        }) : s[r] = o[r] ? new Date(o[r]) : null
    });
    n.datepickerMode = n.datepickerMode || o.datepickerMode;
    n.uniqueId = "datepicker-" + n.$id + "-" + Math.floor(Math.random() * 1e4);
    this.activeDate = angular.isDefined(t.initDate) ? n.$parent.$eval(t.initDate) : new Date;
    n.isActive = function(t) {
        return s.compare(t.date, s.activeDate) === 0 ? (n.activeDateId = t.uid,
        !0) : !1
    }
    ;
    this.init = function(n) {
        h = n;
        h.$render = function() {
            s.render()
        }
    }
    ;
    this.render = function() {
        if (h.$modelValue) {
            var n = new Date(h.$modelValue)
              , t = !isNaN(n);
            t ? this.activeDate = n : f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.');
            h.$setValidity("date", t)
        }
        this.refreshView()
    }
    ;
    this.refreshView = function() {
        if (this.element) {
            this._refreshView();
            var n = h.$modelValue ? new Date(h.$modelValue) : null;
            h.$setValidity("date-disabled", !n || this.element && !this.isDisabled(n))
        }
    }
    ;
    this.createDateObject = function(n, t) {
        var i = h.$modelValue ? new Date(h.$modelValue) : null;
        return {
            date: n,
            label: e(n, t),
            selected: i && this.compare(n, i) === 0,
            disabled: this.isDisabled(n),
            current: this.compare(n, new Date) === 0
        }
    }
    ;
    this.isDisabled = function(i) {
        return this.minDate && this.compare(i, this.minDate) < 0 || this.maxDate && this.compare(i, this.maxDate) > 0 || t.dateDisabled && n.dateDisabled({
            date: i,
            mode: n.datepickerMode
        })
    }
    ;
    this.split = function(n, t) {
        for (var i = []; n.length > 0; )
            i.push(n.splice(0, t));
        return i
    }
    ;
    n.select = function(t) {
        if (n.datepickerMode === s.minMode) {
            var i = h.$modelValue ? new Date(h.$modelValue) : new Date(0,0,0,0,0,0,0);
            i.setFullYear(t.getFullYear(), t.getMonth(), t.getDate());
            h.$setViewValue(i);
            h.$render()
        } else
            s.activeDate = t,
            n.datepickerMode = s.modes[s.modes.indexOf(n.datepickerMode) - 1]
    }
    ;
    n.move = function(n) {
        var t = s.activeDate.getFullYear() + n * (s.step.years || 0)
          , i = s.activeDate.getMonth() + n * (s.step.months || 0);
        s.activeDate.setFullYear(t, i, 1);
        s.refreshView()
    }
    ;
    n.toggleMode = function(t) {
        (t = t || 1,
        (n.datepickerMode !== s.maxMode || t !== 1) && (n.datepickerMode !== s.minMode || t !== -1)) && (n.datepickerMode = s.modes[s.modes.indexOf(n.datepickerMode) + t])
    }
    ;
    n.keys = {
        13: "enter",
        32: "space",
        33: "pageup",
        34: "pagedown",
        35: "end",
        36: "home",
        37: "left",
        38: "up",
        39: "right",
        40: "down"
    };
    c = function() {
        u(function() {
            s.element[0].focus()
        }, 0, !1)
    }
    ;
    n.$on("datepicker.focus", c);
    n.keydown = function(t) {
        var i = n.keys[t.which];
        if (i && !t.shiftKey && !t.altKey)
            if (t.preventDefault(),
            t.stopPropagation(),
            i === "enter" || i === "space") {
                if (s.isDisabled(s.activeDate))
                    return;
                n.select(s.activeDate);
                c()
            } else
                t.ctrlKey && (i === "up" || i === "down") ? (n.toggleMode(i === "up" ? 1 : -1),
                c()) : (s.handleKeyDown(i, t),
                s.refreshView())
    }
}
]).directive("datepicker", function() {
    return {
        restrict: "EA",
        replace: !0,
        templateUrl: "template/datepicker/datepicker.html",
        scope: {
            datepickerMode: "=?",
            dateDisabled: "&"
        },
        require: ["datepicker", "?^ngModel"],
        controller: "DatepickerController",
        link: function(n, t, i, r) {
            var f = r[0]
              , u = r[1];
            u && f.init(u)
        }
    }
}).directive("daypicker", ["dateFilter", function(n) {
    return {
        restrict: "EA",
        replace: !0,
        templateUrl: "template/datepicker/day.html",
        require: "^datepicker",
        link: function(t, i, r, u) {
            function f(n, t) {
                return t === 1 && n % 4 == 0 && (n % 100 != 0 || n % 400 == 0) ? 29 : s[t]
            }
            function e(n, t) {
                var r = new Array(t)
                  , i = new Date(n)
                  , u = 0;
                for (i.setHours(12); u < t; )
                    r[u++] = new Date(i),
                    i.setDate(i.getDate() + 1);
                return r
            }
            function o(n) {
                var t = new Date(n), i;
                return t.setDate(t.getDate() + 4 - (t.getDay() || 7)),
                i = t.getTime(),
                t.setMonth(0),
                t.setDate(1),
                Math.floor(Math.round((i - t) / 864e5) / 7) + 1
            }
            t.showWeeks = u.showWeeks;
            u.step = {
                months: 1
            };
            u.element = i;
            var s = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            u._refreshView = function() {
                var p = u.activeDate.getFullYear(), h = u.activeDate.getMonth(), c = new Date(p,h,1), s = u.startingDay - c.getDay(), l = s > 0 ? 7 - s : -s, a = new Date(c), i, r, f, v, y;
                for (l > 0 && a.setDate(-l + 1),
                i = e(a, 42),
                r = 0; r < 42; r++)
                    i[r] = angular.extend(u.createDateObject(i[r], u.formatDay), {
                        secondary: i[r].getMonth() !== h,
                        uid: t.uniqueId + "-" + r
                    });
                for (t.labels = new Array(7),
                f = 0; f < 7; f++)
                    t.labels[f] = {
                        abbr: n(i[f].date, u.formatDayHeader),
                        full: n(i[f].date, "EEEE")
                    };
                if (t.title = n(u.activeDate, u.formatDayTitle),
                t.rows = u.split(i, 7),
                t.showWeeks)
                    for (t.weekNumbers = [],
                    v = o(t.rows[0][0].date),
                    y = t.rows.length; t.weekNumbers.push(v++) < y; )
                        ;
            }
            ;
            u.compare = function(n, t) {
                return new Date(n.getFullYear(),n.getMonth(),n.getDate()) - new Date(t.getFullYear(),t.getMonth(),t.getDate())
            }
            ;
            u.handleKeyDown = function(n) {
                var t = u.activeDate.getDate(), i;
                n === "left" ? t = t - 1 : n === "up" ? t = t - 7 : n === "right" ? t = t + 1 : n === "down" ? t = t + 7 : n === "pageup" || n === "pagedown" ? (i = u.activeDate.getMonth() + (n === "pageup" ? -1 : 1),
                u.activeDate.setMonth(i, 1),
                t = Math.min(f(u.activeDate.getFullYear(), u.activeDate.getMonth()), t)) : n === "home" ? t = 1 : n === "end" && (t = f(u.activeDate.getFullYear(), u.activeDate.getMonth()));
                u.activeDate.setDate(t)
            }
            ;
            u.refreshView()
        }
    }
}
]).directive("monthpicker", ["dateFilter", function(n) {
    return {
        restrict: "EA",
        replace: !0,
        templateUrl: "template/datepicker/month.html",
        require: "^datepicker",
        link: function(t, i, r, u) {
            u.step = {
                years: 1
            };
            u.element = i;
            u._refreshView = function() {
                for (var r = new Array(12), f = u.activeDate.getFullYear(), i = 0; i < 12; i++)
                    r[i] = angular.extend(u.createDateObject(new Date(f,i,1), u.formatMonth), {
                        uid: t.uniqueId + "-" + i
                    });
                t.title = n(u.activeDate, u.formatMonthTitle);
                t.rows = u.split(r, 3)
            }
            ;
            u.compare = function(n, t) {
                return new Date(n.getFullYear(),n.getMonth()) - new Date(t.getFullYear(),t.getMonth())
            }
            ;
            u.handleKeyDown = function(n) {
                var t = u.activeDate.getMonth(), i;
                n === "left" ? t = t - 1 : n === "up" ? t = t - 3 : n === "right" ? t = t + 1 : n === "down" ? t = t + 3 : n === "pageup" || n === "pagedown" ? (i = u.activeDate.getFullYear() + (n === "pageup" ? -1 : 1),
                u.activeDate.setFullYear(i)) : n === "home" ? t = 0 : n === "end" && (t = 11);
                u.activeDate.setMonth(t)
            }
            ;
            u.refreshView()
        }
    }
}
]).directive("yearpicker", ["dateFilter", function() {
    return {
        restrict: "EA",
        replace: !0,
        templateUrl: "template/datepicker/year.html",
        require: "^datepicker",
        link: function(n, t, i, r) {
            function f(n) {
                return parseInt((n - 1) / u, 10) * u + 1
            }
            var u = r.yearRange;
            r.step = {
                years: u
            };
            r.element = t;
            r._refreshView = function() {
                for (var i = new Array(u), t = 0, e = f(r.activeDate.getFullYear()); t < u; t++)
                    i[t] = angular.extend(r.createDateObject(new Date(e + t,0,1), r.formatYear), {
                        uid: n.uniqueId + "-" + t
                    });
                n.title = [i[0].label, i[u - 1].label].join(" - ");
                n.rows = r.split(i, 5)
            }
            ;
            r.compare = function(n, t) {
                return n.getFullYear() - t.getFullYear()
            }
            ;
            r.handleKeyDown = function(n) {
                var t = r.activeDate.getFullYear();
                n === "left" ? t = t - 1 : n === "up" ? t = t - 5 : n === "right" ? t = t + 1 : n === "down" ? t = t + 5 : n === "pageup" || n === "pagedown" ? t += (n === "pageup" ? -1 : 1) * r.step.years : n === "home" ? t = f(r.activeDate.getFullYear()) : n === "end" && (t = f(r.activeDate.getFullYear()) + u - 1);
                r.activeDate.setFullYear(t)
            }
            ;
            r.refreshView()
        }
    }
}
]).constant("datepickerPopupConfig", {
    datepickerPopup: "yyyy-MM-dd",
    currentText: "Today",
    clearText: "Clear",
    closeText: "Done",
    closeOnDateSelection: !0,
    appendToBody: !1,
    showButtonBar: !0
}).directive("datepickerPopup", ["$compile", "$parse", "$document", "$position", "dateFilter", "dateParser", "datepickerPopupConfig", function(n, t, i, r, u, f, e) {
    return {
        restrict: "EA",
        require: "ngModel",
        scope: {
            isOpen: "=?",
            currentText: "@",
            clearText: "@",
            closeText: "@",
            dateDisabled: "&"
        },
        link: function(o, s, h, c) {
            function b(n) {
                return n.replace(/([A-Z])/g, function(n) {
                    return "-" + n.toLowerCase()
                })
            }
            function k(n) {
                if (n) {
                    if (angular.isDate(n) && !isNaN(n))
                        return c.$setValidity("date", !0),
                        n;
                    if (angular.isString(n)) {
                        var t = f.parse(n, p) || new Date(n);
                        return isNaN(t) ? (c.$setValidity("date", !1),
                        undefined) : (c.$setValidity("date", !0),
                        t)
                    }
                    return c.$setValidity("date", !1),
                    undefined
                }
                return c.$setValidity("date", !0),
                null
            }
            var p, g = angular.isDefined(h.closeOnDateSelection) ? o.$parent.$eval(h.closeOnDateSelection) : e.closeOnDateSelection, d = angular.isDefined(h.datepickerAppendToBody) ? o.$parent.$eval(h.datepickerAppendToBody) : e.appendToBody, l, a, v, w, y;
            o.showButtonBar = angular.isDefined(h.showButtonBar) ? o.$parent.$eval(h.showButtonBar) : e.showButtonBar;
            o.getText = function(n) {
                return o[n + "Text"] || e[n + "Text"]
            }
            ;
            h.$observe("datepickerPopup", function(n) {
                p = n || e.datepickerPopup;
                c.$render()
            });
            l = angular.element("<div datepicker-popup-wrap><div datepicker><\/div><\/div>");
            l.attr({
                "ng-model": "date",
                "ng-change": "dateSelection()"
            });
            a = angular.element(l.children()[0]);
            h.datepickerOptions && angular.forEach(o.$parent.$eval(h.datepickerOptions), function(n, t) {
                a.attr(b(t), n)
            });
            angular.forEach(["minDate", "maxDate"], function(n) {
                h[n] && (o.$parent.$watch(t(h[n]), function(t) {
                    o[n] = t
                }),
                a.attr(b(n), n))
            });
            h.dateDisabled && a.attr("date-disabled", "dateDisabled({ date: date, mode: mode })");
            c.$parsers.unshift(k);
            o.dateSelection = function(n) {
                angular.isDefined(n) && (o.date = n);
                c.$setViewValue(o.date);
                c.$render();
                g && (o.isOpen = !1,
                s[0].focus())
            }
            ;
            s.bind("input change keyup", function() {
                o.$apply(function() {
                    o.date = c.$modelValue
                })
            });
            c.$render = function() {
                var n = c.$viewValue ? u(c.$viewValue, p) : "";
                s.val(n);
                o.date = k(c.$modelValue)
            }
            ;
            v = function(n) {
                o.isOpen && n.target !== s[0] && o.$apply(function() {
                    o.isOpen = !1
                })
            }
            ;
            w = function(n) {
                o.keydown(n)
            }
            ;
            s.bind("keydown", w);
            o.keydown = function(n) {
                n.which === 27 ? (n.preventDefault(),
                n.stopPropagation(),
                o.close()) : n.which !== 40 || o.isOpen || (o.isOpen = !0)
            }
            ;
            o.$watch("isOpen", function(n) {
                n ? (o.$broadcast("datepicker.focus"),
                o.position = d ? r.offset(s) : r.position(s),
                o.position.top = o.position.top + s.prop("offsetHeight"),
                i.bind("click", v)) : i.unbind("click", v)
            });
            o.select = function(n) {
                if (n === "today") {
                    var t = new Date;
                    angular.isDate(c.$modelValue) ? (n = new Date(c.$modelValue),
                    n.setFullYear(t.getFullYear(), t.getMonth(), t.getDate())) : n = new Date(t.setHours(0, 0, 0, 0))
                }
                o.dateSelection(n)
            }
            ;
            o.close = function() {
                o.isOpen = !1;
                s[0].focus()
            }
            ;
            y = n(l)(o);
            d ? i.find("body").append(y) : s.after(y);
            o.$on("$destroy", function() {
                y.remove();
                s.unbind("keydown", w);
                i.unbind("click", v)
            })
        }
    }
}
]).directive("datepickerPopupWrap", function() {
    return {
        restrict: "EA",
        replace: !0,
        transclude: !0,
        templateUrl: "template/datepicker/popup.html",
        link: function(n, t) {
            t.bind("click", function(n) {
                n.preventDefault();
                n.stopPropagation()
            })
        }
    }
});
angular.module("ui.bootstrap.dropdown", []).constant("dropdownConfig", {
    openClass: "open"
}).service("dropdownService", ["$document", function(n) {
    var t = null, i, r;
    this.open = function(u) {
        t || (n.bind("click", i),
        n.bind("keydown", r));
        t && t !== u && (t.isOpen = !1);
        t = u
    }
    ;
    this.close = function(u) {
        t === u && (t = null,
        n.unbind("click", i),
        n.unbind("keydown", r))
    }
    ;
    i = function(n) {
        n && n.isDefaultPrevented() || t.$apply(function() {
            t.isOpen = !1
        })
    }
    ;
    r = function(n) {
        n.which === 27 && (t.focusToggleElement(),
        i())
    }
}
]).controller("DropdownController", ["$scope", "$attrs", "$parse", "dropdownConfig", "dropdownService", "$animate", function(n, t, i, r, u, f) {
    var o = this, e = n.$new(), c = r.openClass, s, h = angular.noop, l = t.onToggle ? i(t.onToggle) : angular.noop;
    this.init = function(r) {
        o.$element = r;
        t.isOpen && (s = i(t.isOpen),
        h = s.assign,
        n.$watch(s, function(n) {
            e.isOpen = !!n
        }))
    }
    ;
    this.toggle = function(n) {
        return e.isOpen = arguments.length ? !!n : !e.isOpen
    }
    ;
    this.isOpen = function() {
        return e.isOpen
    }
    ;
    e.focusToggleElement = function() {
        o.toggleElement && o.toggleElement[0].focus()
    }
    ;
    e.$watch("isOpen", function(t, i) {
        f[t ? "addClass" : "removeClass"](o.$element, c);
        t ? (e.focusToggleElement(),
        u.open(e)) : u.close(e);
        h(n, t);
        angular.isDefined(t) && t !== i && l(n, {
            open: !!t
        })
    });
    n.$on("$locationChangeSuccess", function() {
        e.isOpen = !1
    });
    n.$on("$destroy", function() {
        e.$destroy()
    })
}
]).directive("dropdown", function() {
    return {
        restrict: "CA",
        controller: "DropdownController",
        link: function(n, t, i, r) {
            r.init(t)
        }
    }
}).directive("dropdownToggle", function() {
    return {
        restrict: "CA",
        require: "?^dropdown",
        link: function(n, t, i, r) {
            if (r) {
                r.toggleElement = t;
                var u = function(u) {
                    u.preventDefault();
                    t.hasClass("disabled") || i.disabled || n.$apply(function() {
                        r.toggle()
                    })
                };
                t.bind("click", u);
                t.attr({
                    "aria-haspopup": !0,
                    "aria-expanded": !1
                });
                n.$watch(r.isOpen, function(n) {
                    t.attr("aria-expanded", !!n)
                });
                n.$on("$destroy", function() {
                    t.unbind("click", u)
                })
            }
        }
    }
});
angular.module("ui.bootstrap.modal", ["ui.bootstrap.transition"]).factory("$$stackedMap", function() {
    return {
        createNew: function() {
            var n = [];
            return {
                add: function(t, i) {
                    n.push({
                        key: t,
                        value: i
                    })
                },
                get: function(t) {
                    for (var i = 0; i < n.length; i++)
                        if (t == n[i].key)
                            return n[i]
                },
                keys: function() {
                    for (var i = [], t = 0; t < n.length; t++)
                        i.push(n[t].key);
                    return i
                },
                top: function() {
                    return n[n.length - 1]
                },
                remove: function(t) {
                    for (var r = -1, i = 0; i < n.length; i++)
                        if (t == n[i].key) {
                            r = i;
                            break
                        }
                    return n.splice(r, 1)[0]
                },
                removeTop: function() {
                    return n.splice(n.length - 1, 1)[0]
                },
                length: function() {
                    return n.length
                }
            }
        }
    }
}).directive("modalBackdrop", ["$timeout", function(n) {
    return {
        restrict: "EA",
        replace: !0,
        templateUrl: "template/modal/backdrop.html",
        link: function(t) {
            t.animate = !1;
            n(function() {
                t.animate = !0
            })
        }
    }
}
]).directive("modalWindow", ["$modalStack", "$timeout", function(n, t) {
    return {
        restrict: "EA",
        scope: {
            index: "@",
            animate: "="
        },
        replace: !0,
        transclude: !0,
        templateUrl: function(n, t) {
            return t.templateUrl || "template/modal/window.html"
        },
        link: function(i, r, u) {
            r.addClass(u.windowClass || "");
            i.size = u.size;
            t(function() {
                i.animate = !0;
                r[0].focus()
            });
            i.close = function(t) {
                var i = n.getTop();
                i && i.value.backdrop && i.value.backdrop != "static" && t.target === t.currentTarget && (t.preventDefault(),
                t.stopPropagation(),
                n.dismiss(i.key, "backdrop click"))
            }
        }
    }
}
]).factory("$modalStack", ["$transition", "$timeout", "$document", "$compile", "$rootScope", "$$stackedMap", function(n, t, i, r, u, f) {
    function c() {
        for (var t = -1, i = e.keys(), n = 0; n < i.length; n++)
            e.get(i[n]).value.backdrop && (t = n);
        return t
    }
    function l(n) {
        var r = i.find("body").eq(0)
          , t = e.get(n).value;
        e.remove(n);
        a(t.modalDomEl, t.modalScope, 300, function() {
            t.modalScope.$destroy();
            r.toggleClass(v, e.length() > 0);
            y()
        })
    }
    function y() {
        if (h && c() == -1) {
            var n = o;
            a(h, o, 150, function() {
                n.$destroy();
                n = null
            });
            h = undefined;
            o = undefined
        }
    }
    function a(i, r, u, f) {
        function e() {
            e.done || (e.done = !0,
            i.remove(),
            f && f())
        }
        var o, s;
        r.animate = !1;
        o = n.transitionEndEventName;
        o ? (s = t(e, u),
        i.bind(o, function() {
            t.cancel(s);
            e();
            r.$apply()
        })) : t(e, 0)
    }
    var v = "modal-open", h, o, e = f.createNew(), s = {};
    return u.$watch(c, function(n) {
        o && (o.index = n)
    }),
    i.bind("keydown", function(n) {
        var t;
        n.which === 27 && (t = e.top(),
        t && t.value.keyboard && (n.preventDefault(),
        u.$apply(function() {
            s.dismiss(t.key, "escape key press")
        })))
    }),
    s.open = function(n, t) {
        var f, s, l, a;
        e.add(n, {
            deferred: t.deferred,
            modalScope: t.scope,
            backdrop: t.backdrop,
            keyboard: t.keyboard
        });
        f = i.find("body").eq(0);
        s = c();
        s >= 0 && !h && (o = u.$new(!0),
        o.index = s,
        h = r("<div modal-backdrop><\/div>")(o),
        f.append(h));
        l = angular.element("<div modal-window><\/div>");
        l.attr({
            "template-url": t.windowTemplateUrl,
            "window-class": t.windowClass,
            size: t.size,
            index: e.length() - 1,
            animate: "animate"
        }).html(t.content);
        a = r(l)(t.scope);
        e.top().value.modalDomEl = a;
        f.append(a);
        f.addClass(v)
    }
    ,
    s.close = function(n, t) {
        var i = e.get(n).value;
        i && (i.deferred.resolve(t),
        l(n))
    }
    ,
    s.dismiss = function(n, t) {
        var i = e.get(n).value;
        i && (i.deferred.reject(t),
        l(n))
    }
    ,
    s.dismissAll = function(n) {
        for (var t = this.getTop(); t; )
            this.dismiss(t.key, n),
            t = this.getTop()
    }
    ,
    s.getTop = function() {
        return e.top()
    }
    ,
    s
}
]).provider("$modal", function() {
    var n = {
        options: {
            backdrop: !0,
            keyboard: !0
        },
        $get: ["$injector", "$rootScope", "$q", "$http", "$templateCache", "$controller", "$modalStack", function(t, i, r, u, f, e, o) {
            function h(n) {
                return n.template ? r.when(n.template) : u.get(n.templateUrl, {
                    cache: f
                }).then(function(n) {
                    return n.data
                })
            }
            function c(n) {
                var i = [];
                return angular.forEach(n, function(n) {
                    (angular.isFunction(n) || angular.isArray(n)) && i.push(r.when(t.invoke(n)))
                }),
                i
            }
            var s = {};
            return s.open = function(t) {
                var f = r.defer(), s = r.defer(), u = {
                    result: f.promise,
                    opened: s.promise,
                    close: function(n) {
                        o.close(u, n)
                    },
                    dismiss: function(n) {
                        o.dismiss(u, n)
                    }
                }, l;
                if (t = angular.extend({}, n.options, t),
                t.resolve = t.resolve || {},
                !t.template && !t.templateUrl)
                    throw new Error("One of template or templateUrl options is required.");
                return l = r.all([h(t)].concat(c(t.resolve))),
                l.then(function(n) {
                    var s = (t.scope || i).$new(), c, r, h;
                    s.$close = u.close;
                    s.$dismiss = u.dismiss;
                    r = {};
                    h = 1;
                    t.controller && (r.$scope = s,
                    r.$modalInstance = u,
                    angular.forEach(t.resolve, function(t, i) {
                        r[i] = n[h++]
                    }),
                    c = e(t.controller, r));
                    o.open(u, {
                        scope: s,
                        deferred: f,
                        content: n[0],
                        backdrop: t.backdrop,
                        keyboard: t.keyboard,
                        windowClass: t.windowClass,
                        windowTemplateUrl: t.windowTemplateUrl,
                        size: t.size
                    })
                }, function(n) {
                    f.reject(n)
                }),
                l.then(function() {
                    s.resolve(!0)
                }, function() {
                    s.reject(!1)
                }),
                u
            }
            ,
            s
        }
        ]
    };
    return n
});
angular.module("ui.bootstrap.pagination", []).controller("PaginationController", ["$scope", "$attrs", "$parse", function(n, t, i) {
    var u = this
      , r = {
        $setViewValue: angular.noop
    }
      , f = t.numPages ? i(t.numPages).assign : angular.noop;
    this.init = function(f, e) {
        r = f;
        this.config = e;
        r.$render = function() {
            u.render()
        }
        ;
        t.itemsPerPage ? n.$parent.$watch(i(t.itemsPerPage), function(t) {
            u.itemsPerPage = parseInt(t, 10);
            n.totalPages = u.calculateTotalPages()
        }) : this.itemsPerPage = e.itemsPerPage
    }
    ;
    this.calculateTotalPages = function() {
        var t = this.itemsPerPage < 1 ? 1 : Math.ceil(n.totalItems / this.itemsPerPage);
        return Math.max(t || 0, 1)
    }
    ;
    this.render = function() {
        n.page = parseInt(r.$viewValue, 10) || 1
    }
    ;
    n.selectPage = function(t) {
        n.page !== t && t > 0 && t <= n.totalPages && (r.$setViewValue(t),
        r.$render())
    }
    ;
    n.getText = function(t) {
        return n[t + "Text"] || u.config[t + "Text"]
    }
    ;
    n.noPrevious = function() {
        return n.page === 1
    }
    ;
    n.noNext = function() {
        return n.page === n.totalPages
    }
    ;
    n.$watch("totalItems", function() {
        n.totalPages = u.calculateTotalPages()
    });
    n.$watch("totalPages", function(t) {
        f(n.$parent, t);
        n.page > t ? n.selectPage(t) : r.$render()
    })
}
]).constant("paginationConfig", {
    itemsPerPage: 10,
    boundaryLinks: !1,
    directionLinks: !0,
    firstText: "First",
    previousText: "Previous",
    nextText: "Next",
    lastText: "Last",
    rotate: !0
}).directive("pagination", ["$parse", "paginationConfig", function(n, t) {
    return {
        restrict: "EA",
        scope: {
            totalItems: "=",
            firstText: "@",
            previousText: "@",
            nextText: "@",
            lastText: "@"
        },
        require: ["pagination", "?ngModel"],
        controller: "PaginationController",
        templateUrl: "template/pagination/pagination.html",
        replace: !0,
        link: function(i, r, u, f) {
            function s(n, t, i) {
                return {
                    number: n,
                    text: t,
                    active: i
                }
            }
            function a(n, t) {
                var f = [], i = 1, r = t, o = angular.isDefined(e) && e < t, u, c, l, a;
                for (o && (h ? (i = Math.max(n - Math.floor(e / 2), 1),
                r = i + e - 1,
                r > t && (r = t,
                i = r - e + 1)) : (i = (Math.ceil(n / e) - 1) * e + 1,
                r = Math.min(i + e - 1, t))),
                u = i; u <= r; u++)
                    c = s(u, u, u === n),
                    f.push(c);
                return o && !h && (i > 1 && (l = s(i - 1, "...", !1),
                f.unshift(l)),
                r < t && (a = s(r + 1, "...", !1),
                f.push(a))),
                f
            }
            var o = f[0], c = f[1], e, h, l;
            c && (e = angular.isDefined(u.maxSize) ? i.$parent.$eval(u.maxSize) : t.maxSize,
            h = angular.isDefined(u.rotate) ? i.$parent.$eval(u.rotate) : t.rotate,
            i.boundaryLinks = angular.isDefined(u.boundaryLinks) ? i.$parent.$eval(u.boundaryLinks) : t.boundaryLinks,
            i.directionLinks = angular.isDefined(u.directionLinks) ? i.$parent.$eval(u.directionLinks) : t.directionLinks,
            o.init(c, t),
            u.maxSize && i.$parent.$watch(n(u.maxSize), function(n) {
                e = parseInt(n, 10);
                o.render()
            }),
            l = o.render,
            o.render = function() {
                l();
                i.page > 0 && i.page <= i.totalPages && (i.pages = a(i.page, i.totalPages))
            }
            )
        }
    }
}
]).constant("pagerConfig", {
    itemsPerPage: 10,
    previousText: " Previous",
    nextText: "Next ",
    align: !0
}).directive("pager", ["pagerConfig", function(n) {
    return {
        restrict: "EA",
        scope: {
            totalItems: "=",
            previousText: "@",
            nextText: "@"
        },
        require: ["pager", "?ngModel"],
        controller: "PaginationController",
        templateUrl: "template/pagination/pager.html",
        replace: !0,
        link: function(t, i, r, u) {
            var e = u[0]
              , f = u[1];
            f && (t.align = angular.isDefined(r.align) ? t.$parent.$eval(r.align) : n.align,
            e.init(f, n))
        }
    }
}
]);
angular.module("ui.bootstrap.tooltip", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"]).provider("$tooltip", function() {
    function i(n) {
        var t = "-";
        return n.replace(/[A-Z]/g, function(n, i) {
            return (i ? t : "") + n.toLowerCase()
        })
    }
    var r = {
        placement: "top",
        animation: !0,
        popupDelay: 0
    }
      , n = {
        mouseenter: "mouseleave",
        click: "click",
        focus: "blur"
    }
      , t = {};
    this.options = function(n) {
        angular.extend(t, n)
    }
    ;
    this.setTriggers = function(t) {
        angular.extend(n, t)
    }
    ;
    this.$get = ["$window", "$compile", "$timeout", "$parse", "$document", "$position", "$interpolate", function(u, f, e, o, s, h, c) {
        return function(u, l, a) {
            function w(t) {
                var i = t || v.trigger || a
                  , r = n[i] || i;
                return {
                    show: i,
                    hide: r
                }
            }
            var v = angular.extend({}, r, t)
              , b = i(u)
              , y = c.startSymbol()
              , p = c.endSymbol()
              , k = "<div " + b + '-popup title="' + y + "tt_title" + p + '" content="' + y + "tt_content" + p + '" placement="' + y + "tt_placement" + p + '" animation="tt_animation" is-open="tt_isOpen"><\/div>';
            return {
                restrict: "EA",
                scope: !0,
                compile: function() {
                    var n = f(k);
                    return function(t, i, r) {
                        function ut() {
                            t.tt_isOpen ? d() : k()
                        }
                        function k() {
                            (!et || t.$eval(r[l + "Enable"])) && (t.tt_popupDelay ? y || (y = e(it, t.tt_popupDelay, !1),
                            y.then(function(n) {
                                n()
                            })) : it()())
                        }
                        function d() {
                            t.$apply(function() {
                                g()
                            })
                        }
                        function it() {
                            return (y = null,
                            a && (e.cancel(a),
                            a = null),
                            !t.tt_content) ? angular.noop : (ft(),
                            f.css({
                                top: 0,
                                left: 0,
                                display: "block"
                            }),
                            p ? s.find("body").append(f) : i.after(f),
                            rt(),
                            t.tt_isOpen = !0,
                            t.$digest(),
                            rt)
                        }
                        function g() {
                            t.tt_isOpen = !1;
                            e.cancel(y);
                            y = null;
                            t.tt_animation ? a || (a = e(b, 500)) : b()
                        }
                        function ft() {
                            f && b();
                            f = n(t, function() {});
                            t.$digest()
                        }
                        function b() {
                            a = null;
                            f && (f.remove(),
                            f = null)
                        }
                        var f, a, y, p = angular.isDefined(v.appendToBody) ? v.appendToBody : !1, c = w(undefined), et = angular.isDefined(r[l + "Enable"]), rt = function() {
                            var n = h.positionElements(i, f, t.tt_placement, p);
                            n.top += "px";
                            n.left += "px";
                            f.css(n)
                        }, nt, tt;
                        t.tt_isOpen = !1;
                        r.$observe(u, function(n) {
                            t.tt_content = n;
                            !n && t.tt_isOpen && g()
                        });
                        r.$observe(l + "Title", function(n) {
                            t.tt_title = n
                        });
                        r.$observe(l + "Placement", function(n) {
                            t.tt_placement = angular.isDefined(n) ? n : v.placement
                        });
                        r.$observe(l + "PopupDelay", function(n) {
                            var i = parseInt(n, 10);
                            t.tt_popupDelay = isNaN(i) ? v.popupDelay : i
                        });
                        nt = function() {
                            i.unbind(c.show, k);
                            i.unbind(c.hide, d)
                        }
                        ;
                        r.$observe(l + "Trigger", function(n) {
                            nt();
                            c = w(n);
                            c.show === c.hide ? i.bind(c.show, ut) : (i.bind(c.show, k),
                            i.bind(c.hide, d))
                        });
                        tt = t.$eval(r[l + "Animation"]);
                        t.tt_animation = angular.isDefined(tt) ? !!tt : v.animation;
                        r.$observe(l + "AppendToBody", function(n) {
                            p = angular.isDefined(n) ? o(n)(t) : p
                        });
                        p && t.$on("$locationChangeSuccess", function() {
                            t.tt_isOpen && g()
                        });
                        t.$on("$destroy", function() {
                            e.cancel(a);
                            e.cancel(y);
                            nt();
                            b()
                        })
                    }
                }
            }
        }
    }
    ]
}).directive("tooltipPopup", function() {
    return {
        restrict: "EA",
        replace: !0,
        scope: {
            content: "@",
            placement: "@",
            animation: "&",
            isOpen: "&"
        },
        templateUrl: "template/tooltip/tooltip-popup.html"
    }
}).directive("tooltip", ["$tooltip", function(n) {
    return n("tooltip", "tooltip", "mouseenter")
}
]).directive("tooltipHtmlUnsafePopup", function() {
    return {
        restrict: "EA",
        replace: !0,
        scope: {
            content: "@",
            placement: "@",
            animation: "&",
            isOpen: "&"
        },
        templateUrl: "template/tooltip/tooltip-html-unsafe-popup.html"
    }
}).directive("tooltipHtmlUnsafe", ["$tooltip", function(n) {
    return n("tooltipHtmlUnsafe", "tooltip", "mouseenter")
}
]);
angular.module("ui.bootstrap.popover", ["ui.bootstrap.tooltip"]).directive("popoverPopup", function() {
    return {
        restrict: "EA",
        replace: !0,
        scope: {
            title: "@",
            content: "@",
            placement: "@",
            animation: "&",
            isOpen: "&"
        },
        templateUrl: "template/popover/popover.html"
    }
}).directive("popover", ["$tooltip", function(n) {
    return n("popover", "popover", "click")
}
]);
angular.module("ui.bootstrap.progressbar", []).constant("progressConfig", {
    animate: !0,
    max: 100
}).controller("ProgressController", ["$scope", "$attrs", "progressConfig", function(n, t, i) {
    var r = this
      , u = angular.isDefined(t.animate) ? n.$parent.$eval(t.animate) : i.animate;
    this.bars = [];
    n.max = angular.isDefined(t.max) ? n.$parent.$eval(t.max) : i.max;
    this.addBar = function(t, i) {
        u || i.css({
            transition: "none"
        });
        this.bars.push(t);
        t.$watch("value", function(i) {
            t.percent = +(100 * i / n.max).toFixed(2)
        });
        t.$on("$destroy", function() {
            i = null;
            r.removeBar(t)
        })
    }
    ;
    this.removeBar = function(n) {
        this.bars.splice(this.bars.indexOf(n), 1)
    }
}
]).directive("progress", function() {
    return {
        restrict: "EA",
        replace: !0,
        transclude: !0,
        controller: "ProgressController",
        require: "progress",
        scope: {},
        templateUrl: "template/progressbar/progress.html"
    }
}).directive("bar", function() {
    return {
        restrict: "EA",
        replace: !0,
        transclude: !0,
        require: "^progress",
        scope: {
            value: "=",
            type: "@"
        },
        templateUrl: "template/progressbar/bar.html",
        link: function(n, t, i, r) {
            r.addBar(n, t)
        }
    }
}).directive("progressbar", function() {
    return {
        restrict: "EA",
        replace: !0,
        transclude: !0,
        controller: "ProgressController",
        scope: {
            value: "=",
            type: "@"
        },
        templateUrl: "template/progressbar/progressbar.html",
        link: function(n, t, i, r) {
            r.addBar(n, angular.element(t.children()[0]))
        }
    }
});
angular.module("ui.bootstrap.rating", []).constant("ratingConfig", {
    max: 5,
    stateOn: null,
    stateOff: null
}).controller("RatingController", ["$scope", "$attrs", "ratingConfig", function(n, t, i) {
    var r = {
        $setViewValue: angular.noop
    };
    this.init = function(u) {
        r = u;
        r.$render = this.render;
        this.stateOn = angular.isDefined(t.stateOn) ? n.$parent.$eval(t.stateOn) : i.stateOn;
        this.stateOff = angular.isDefined(t.stateOff) ? n.$parent.$eval(t.stateOff) : i.stateOff;
        var f = angular.isDefined(t.ratingStates) ? n.$parent.$eval(t.ratingStates) : new Array(angular.isDefined(t.max) ? n.$parent.$eval(t.max) : i.max);
        n.range = this.buildTemplateObjects(f)
    }
    ;
    this.buildTemplateObjects = function(n) {
        for (var t = 0, i = n.length; t < i; t++)
            n[t] = angular.extend({
                index: t
            }, {
                stateOn: this.stateOn,
                stateOff: this.stateOff
            }, n[t]);
        return n
    }
    ;
    n.rate = function(t) {
        !n.readonly && t >= 0 && t <= n.range.length && (r.$setViewValue(t),
        r.$render())
    }
    ;
    n.enter = function(t) {
        n.readonly || (n.value = t);
        n.onHover({
            value: t
        })
    }
    ;
    n.reset = function() {
        n.value = r.$viewValue;
        n.onLeave()
    }
    ;
    n.onKeydown = function(t) {
        /(37|38|39|40)/.test(t.which) && (t.preventDefault(),
        t.stopPropagation(),
        n.rate(n.value + (t.which === 38 || t.which === 39 ? 1 : -1)))
    }
    ;
    this.render = function() {
        n.value = r.$viewValue
    }
}
]).directive("rating", function() {
    return {
        restrict: "EA",
        require: ["rating", "ngModel"],
        scope: {
            readonly: "=?",
            onHover: "&",
            onLeave: "&"
        },
        controller: "RatingController",
        templateUrl: "template/rating/rating.html",
        replace: !0,
        link: function(n, t, i, r) {
            var f = r[0]
              , u = r[1];
            u && f.init(u)
        }
    }
});
angular.module("ui.bootstrap.tabs", []).controller("TabsetController", ["$scope", function(n) {
    var i = this
      , t = i.tabs = n.tabs = [];
    i.select = function(n) {
        angular.forEach(t, function(t) {
            t.active && t !== n && (t.active = !1,
            t.onDeselect())
        });
        n.active = !0;
        n.onSelect()
    }
    ;
    i.addTab = function(n) {
        t.push(n);
        t.length === 1 ? n.active = !0 : n.active && i.select(n)
    }
    ;
    i.removeTab = function(n) {
        var r = t.indexOf(n), u;
        n.active && t.length > 1 && (u = r == t.length - 1 ? r - 1 : r + 1,
        i.select(t[u]));
        t.splice(r, 1)
    }
}
]).directive("tabset", function() {
    return {
        restrict: "EA",
        transclude: !0,
        replace: !0,
        scope: {
            type: "@"
        },
        controller: "TabsetController",
        templateUrl: "template/tabs/tabset.html",
        link: function(n, t, i) {
            n.vertical = angular.isDefined(i.vertical) ? n.$parent.$eval(i.vertical) : !1;
            n.justified = angular.isDefined(i.justified) ? n.$parent.$eval(i.justified) : !1
        }
    }
}).directive("tab", ["$parse", function(n) {
    return {
        require: "^tabset",
        restrict: "EA",
        replace: !0,
        templateUrl: "template/tabs/tab.html",
        transclude: !0,
        scope: {
            active: "=?",
            heading: "@",
            onSelect: "&select",
            onDeselect: "&deselect"
        },
        controller: function() {},
        compile: function(t, i, r) {
            return function(t, i, u, f) {
                t.$watch("active", function(n) {
                    n && f.select(t)
                });
                t.disabled = !1;
                u.disabled && t.$parent.$watch(n(u.disabled), function(n) {
                    t.disabled = !!n
                });
                t.select = function() {
                    t.disabled || (t.active = !0)
                }
                ;
                f.addTab(t);
                t.$on("$destroy", function() {
                    f.removeTab(t)
                });
                t.$transcludeFn = r
            }
        }
    }
}
]).directive("tabHeadingTransclude", [function() {
    return {
        restrict: "A",
        require: "^tab",
        link: function(n, t) {
            n.$watch("headingElement", function(n) {
                n && (t.html(""),
                t.append(n))
            })
        }
    }
}
]).directive("tabContentTransclude", function() {
    function n(n) {
        return n.tagName && (n.hasAttribute("tab-heading") || n.hasAttribute("data-tab-heading") || n.tagName.toLowerCase() === "tab-heading" || n.tagName.toLowerCase() === "data-tab-heading")
    }
    return {
        restrict: "A",
        require: "^tabset",
        link: function(t, i, r) {
            var u = t.$eval(r.tabContentTransclude);
            u.$transcludeFn(u.$parent, function(t) {
                angular.forEach(t, function(t) {
                    n(t) ? u.headingElement = t : i.append(t)
                })
            })
        }
    }
});
angular.module("ui.bootstrap.timepicker", []).constant("timepickerConfig", {
    hourStep: 1,
    minuteStep: 1,
    showMeridian: !0,
    meridians: null,
    readonlyInput: !1,
    mousewheel: !0
}).controller("TimepickerController", ["$scope", "$attrs", "$parse", "$log", "$locale", "timepickerConfig", function(n, t, i, r, u, f) {
    function p() {
        var t = parseInt(n.hours, 10)
          , i = n.showMeridian ? t > 0 && t < 13 : t >= 0 && t < 24;
        return i ? (n.showMeridian && (t === 12 && (t = 0),
        n.meridian === y[1] && (t = t + 12)),
        t) : undefined
    }
    function w() {
        var t = parseInt(n.minutes, 10);
        return t >= 0 && t < 60 ? t : undefined
    }
    function h(n) {
        return angular.isDefined(n) && n.toString().length < 2 ? "0" + n : n
    }
    function c(n) {
        b();
        o.$setViewValue(new Date(e));
        v(n)
    }
    function b() {
        o.$setValidity("time", !0);
        n.invalidHours = !1;
        n.invalidMinutes = !1
    }
    function v(t) {
        var i = e.getHours()
          , r = e.getMinutes();
        n.showMeridian && (i = i === 0 || i === 12 ? 12 : i % 12);
        n.hours = t === "h" ? i : h(i);
        n.minutes = t === "m" ? r : h(r);
        n.meridian = e.getHours() < 12 ? y[0] : y[1]
    }
    function s(n) {
        var t = new Date(e.getTime() + n * 6e4);
        e.setHours(t.getHours(), t.getMinutes());
        c()
    }
    var e = new Date, o = {
        $setViewValue: angular.noop
    }, y = angular.isDefined(t.meridians) ? n.$parent.$eval(t.meridians) : f.meridians || u.DATETIME_FORMATS.AMPMS, l, a;
    this.init = function(i, r) {
        o = i;
        o.$render = this.render;
        var u = r.eq(0)
          , e = r.eq(1)
          , s = angular.isDefined(t.mousewheel) ? n.$parent.$eval(t.mousewheel) : f.mousewheel;
        s && this.setupMousewheelEvents(u, e);
        n.readonlyInput = angular.isDefined(t.readonlyInput) ? n.$parent.$eval(t.readonlyInput) : f.readonlyInput;
        this.setupInputEvents(u, e)
    }
    ;
    l = f.hourStep;
    t.hourStep && n.$parent.$watch(i(t.hourStep), function(n) {
        l = parseInt(n, 10)
    });
    a = f.minuteStep;
    t.minuteStep && n.$parent.$watch(i(t.minuteStep), function(n) {
        a = parseInt(n, 10)
    });
    n.showMeridian = f.showMeridian;
    t.showMeridian && n.$parent.$watch(i(t.showMeridian), function(t) {
        if (n.showMeridian = !!t,
        o.$error.time) {
            var i = p()
              , r = w();
            angular.isDefined(i) && angular.isDefined(r) && (e.setHours(i),
            c())
        } else
            v()
    });
    this.setupMousewheelEvents = function(t, i) {
        var r = function(n) {
            n.originalEvent && (n = n.originalEvent);
            var t = n.wheelDelta ? n.wheelDelta : -n.deltaY;
            return n.detail || t > 0
        };
        t.bind("mousewheel wheel", function(t) {
            n.$apply(r(t) ? n.incrementHours() : n.decrementHours());
            t.preventDefault()
        });
        i.bind("mousewheel wheel", function(t) {
            n.$apply(r(t) ? n.incrementMinutes() : n.decrementMinutes());
            t.preventDefault()
        })
    }
    ;
    this.setupInputEvents = function(t, i) {
        if (n.readonlyInput) {
            n.updateHours = angular.noop;
            n.updateMinutes = angular.noop;
            return
        }
        var r = function(t, i) {
            o.$setViewValue(null);
            o.$setValidity("time", !1);
            angular.isDefined(t) && (n.invalidHours = t);
            angular.isDefined(i) && (n.invalidMinutes = i)
        };
        n.updateHours = function() {
            var n = p();
            angular.isDefined(n) ? (e.setHours(n),
            c("h")) : r(!0)
        }
        ;
        t.bind("blur", function() {
            !n.invalidHours && n.hours < 10 && n.$apply(function() {
                n.hours = h(n.hours)
            })
        });
        n.updateMinutes = function() {
            var n = w();
            angular.isDefined(n) ? (e.setMinutes(n),
            c("m")) : r(undefined, !0)
        }
        ;
        i.bind("blur", function() {
            !n.invalidMinutes && n.minutes < 10 && n.$apply(function() {
                n.minutes = h(n.minutes)
            })
        })
    }
    ;
    this.render = function() {
        var n = o.$modelValue ? new Date(o.$modelValue) : null;
        isNaN(n) ? (o.$setValidity("time", !1),
        r.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')) : (n && (e = n),
        b(),
        v())
    }
    ;
    n.incrementHours = function() {
        s(l * 60)
    }
    ;
    n.decrementHours = function() {
        s(-l * 60)
    }
    ;
    n.incrementMinutes = function() {
        s(a)
    }
    ;
    n.decrementMinutes = function() {
        s(-a)
    }
    ;
    n.toggleMeridian = function() {
        s(720 * (e.getHours() < 12 ? 1 : -1))
    }
}
]).directive("timepicker", function() {
    return {
        restrict: "EA",
        require: ["timepicker", "?^ngModel"],
        controller: "TimepickerController",
        replace: !0,
        scope: {},
        templateUrl: "template/timepicker/timepicker.html",
        link: function(n, t, i, r) {
            var f = r[0]
              , u = r[1];
            u && f.init(u, t.find("input"))
        }
    }
});
angular.module("ui.bootstrap.typeahead", ["ui.bootstrap.position", "ui.bootstrap.bindHtml"]).factory("typeaheadParser", ["$parse", function(n) {
    var t = /^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;
    return {
        parse: function(i) {
            var r = i.match(t);
            if (!r)
                throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "' + i + '".');
            return {
                itemName: r[3],
                source: n(r[4]),
                viewMapper: n(r[2] || r[1]),
                modelMapper: n(r[1])
            }
        }
    }
}
]).directive("typeahead", ["$compile", "$parse", "$q", "$timeout", "$document", "$position", "typeaheadParser", function(n, t, i, r, u, f, e) {
    var o = [9, 13, 27, 38, 40];
    return {
        require: "ngModel",
        link: function(s, h, c, l) {
            var et = s.$eval(c.typeaheadMinLength) || 1, rt = s.$eval(c.typeaheadWaitMs) || 0, ot = s.$eval(c.typeaheadEditable) !== !1, p = t(c.typeaheadLoading).assign || angular.noop, st = t(c.typeaheadOnSelect), ut = c.typeaheadInputFormatter ? t(c.typeaheadInputFormatter) : undefined, ft = c.typeaheadAppendToBody ? s.$eval(c.typeaheadAppendToBody) : !1, ht = t(c.ngModel).assign, v = e.parse(c.typeahead), k, a = s.$new(), w, b, y, d, g, nt, tt, it;
            s.$on("$destroy", function() {
                a.$destroy()
            });
            w = "typeahead-" + a.$id + "-" + Math.floor(Math.random() * 1e4);
            h.attr({
                "aria-autocomplete": "list",
                "aria-expanded": !1,
                "aria-owns": w
            });
            b = angular.element("<div typeahead-popup><\/div>");
            b.attr({
                id: w,
                matches: "matches",
                active: "activeIdx",
                select: "select(activeIdx)",
                query: "query",
                position: "position"
            });
            angular.isDefined(c.typeaheadTemplateUrl) && b.attr("template-url", c.typeaheadTemplateUrl);
            y = function() {
                a.matches = [];
                a.activeIdx = -1;
                h.attr("aria-expanded", !1)
            }
            ;
            d = function(n) {
                return w + "-option-" + n
            }
            ;
            a.$watch("activeIdx", function(n) {
                n < 0 ? h.removeAttr("aria-activedescendant") : h.attr("aria-activedescendant", d(n))
            });
            g = function(n) {
                var t = {
                    $viewValue: n
                };
                p(s, !0);
                i.when(v.source(s, t)).then(function(i) {
                    var u = n === l.$viewValue, r;
                    if (u && k)
                        if (i.length > 0) {
                            for (a.activeIdx = 0,
                            a.matches.length = 0,
                            r = 0; r < i.length; r++)
                                t[v.itemName] = i[r],
                                a.matches.push({
                                    id: d(r),
                                    label: v.viewMapper(a, t),
                                    model: i[r]
                                });
                            a.query = n;
                            a.position = ft ? f.offset(h) : f.position(h);
                            a.position.top = a.position.top + h.prop("offsetHeight");
                            h.attr("aria-expanded", !0)
                        } else
                            y();
                    u && p(s, !1)
                }, function() {
                    y();
                    p(s, !1)
                })
            }
            ;
            y();
            a.query = undefined;
            l.$parsers.unshift(function(n) {
                return k = !0,
                n && n.length >= et ? rt > 0 ? (nt && r.cancel(nt),
                nt = r(function() {
                    g(n)
                }, rt)) : g(n) : (p(s, !1),
                y()),
                ot ? n : n ? (l.$setValidity("editable", !1),
                undefined) : (l.$setValidity("editable", !0),
                n)
            });
            l.$formatters.push(function(n) {
                var i, r, t = {};
                return ut ? (t.$model = n,
                ut(s, t)) : (t[v.itemName] = n,
                i = v.viewMapper(s, t),
                t[v.itemName] = undefined,
                r = v.viewMapper(s, t),
                i !== r ? i : n)
            });
            a.select = function(n) {
                var t = {}, i, u;
                t[v.itemName] = u = a.matches[n].model;
                i = v.modelMapper(s, t);
                ht(s, i);
                l.$setValidity("editable", !0);
                st(s, {
                    $item: u,
                    $model: i,
                    $label: v.viewMapper(s, t)
                });
                y();
                r(function() {
                    h[0].focus()
                }, 0, !1)
            }
            ;
            h.bind("keydown", function(n) {
                a.matches.length !== 0 && o.indexOf(n.which) !== -1 && (n.preventDefault(),
                n.which === 40 ? (a.activeIdx = (a.activeIdx + 1) % a.matches.length,
                a.$digest()) : n.which === 38 ? (a.activeIdx = (a.activeIdx ? a.activeIdx : a.matches.length) - 1,
                a.$digest()) : n.which === 13 || n.which === 9 ? a.$apply(function() {
                    a.select(a.activeIdx)
                }) : n.which === 27 && (n.stopPropagation(),
                y(),
                a.$digest()))
            });
            h.bind("blur", function() {
                k = !1
            });
            tt = function(n) {
                h[0] !== n.target && (y(),
                a.$digest())
            }
            ;
            u.bind("click", tt);
            s.$on("$destroy", function() {
                u.unbind("click", tt)
            });
            it = n(b)(a);
            ft ? u.find("body").append(it) : h.after(it)
        }
    }
}
]).directive("typeaheadPopup", function() {
    return {
        restrict: "EA",
        scope: {
            matches: "=",
            query: "=",
            active: "=",
            position: "=",
            select: "&"
        },
        replace: !0,
        templateUrl: "template/typeahead/typeahead-popup.html",
        link: function(n, t, i) {
            n.templateUrl = i.templateUrl;
            n.isOpen = function() {
                return n.matches.length > 0
            }
            ;
            n.isActive = function(t) {
                return n.active == t
            }
            ;
            n.selectActive = function(t) {
                n.active = t
            }
            ;
            n.selectMatch = function(t) {
                n.select({
                    activeIdx: t
                })
            }
        }
    }
}).directive("typeaheadMatch", ["$http", "$templateCache", "$compile", "$parse", function(n, t, i, r) {
    return {
        restrict: "EA",
        scope: {
            index: "=",
            match: "=",
            query: "="
        },
        link: function(u, f, e) {
            var o = r(e.templateUrl)(u.$parent) || "template/typeahead/typeahead-match.html";
            n.get(o, {
                cache: t
            }).success(function(n) {
                f.replaceWith(i(n.trim())(u))
            })
        }
    }
}
]).filter("typeaheadHighlight", function() {
    function n(n) {
        return n.replace(/([.?*+^$[\]\\(){}|-])/g, "\\$1")
    }
    return function(t, i) {
        return i ? ("" + t).replace(new RegExp(n(i),"gi"), "<strong>$&<\/strong>") : t
    }
});
angular.module("template/accordion/accordion-group.html", []).run(["$templateCache", function(n) {
    n.put("template/accordion/accordion-group.html", '<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}<\/span><\/a>\n    <\/h4>\n  <\/div>\n  <div class="panel-collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude><\/div>\n  <\/div>\n<\/div>')
}
]);
angular.module("template/accordion/accordion.html", []).run(["$templateCache", function(n) {
    n.put("template/accordion/accordion.html", '<div class="panel-group" ng-transclude><\/div>')
}
]);
angular.module("template/alert/alert.html", []).run(["$templateCache", function(n) {
    n.put("template/alert/alert.html", '<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;<\/span>\n        <span class="sr-only">Close<\/span>\n    <\/button>\n    <div ng-transclude><\/div>\n<\/div>\n')
}
]);
angular.module("template/carousel/carousel.html", []).run(["$templateCache", function(n) {
    n.put("template/carousel/carousel.html", '<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"><\/li>\n    <\/ol>\n    <div class="carousel-inner" ng-transclude><\/div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"><\/span><\/a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"><\/span><\/a>\n<\/div>\n')
}
]);
angular.module("template/carousel/slide.html", []).run(["$templateCache", function(n) {
    n.put("template/carousel/slide.html", "<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude><\/div>\n")
}
]);
angular.module("template/datepicker/datepicker.html", []).run(["$templateCache", function(n) {
    n.put("template/datepicker/datepicker.html", '<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"><\/daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"><\/monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"><\/yearpicker>\n<\/div>')
}
]);
angular.module("template/datepicker/day.html", []).run(["$templateCache", function(n) {
    n.put("template/datepicker/day.html", '<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"><\/i><\/button><\/th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}<\/strong><\/button><\/th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"><\/i><\/button><\/th>\n    <\/tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"><\/th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}<\/small><\/th>\n    <\/tr>\n  <\/thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}<\/em><\/td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}<\/span><\/button>\n      <\/td>\n    <\/tr>\n  <\/tbody>\n<\/table>\n')
}
]);
angular.module("template/datepicker/month.html", []).run(["$templateCache", function(n) {
    n.put("template/datepicker/month.html", '<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"><\/i><\/button><\/th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}<\/strong><\/button><\/th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"><\/i><\/button><\/th>\n    <\/tr>\n  <\/thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}<\/span><\/button>\n      <\/td>\n    <\/tr>\n  <\/tbody>\n<\/table>\n')
}
]);
angular.module("template/datepicker/popup.html", []).run(["$templateCache", function(n) {
    n.put("template/datepicker/popup.html", '<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude><\/li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}<\/button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}<\/button>\n\t\t<\/span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}<\/button>\n\t<\/li>\n<\/ul>\n')
}
]);
angular.module("template/datepicker/year.html", []).run(["$templateCache", function(n) {
    n.put("template/datepicker/year.html", '<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"><\/i><\/button><\/th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}<\/strong><\/button><\/th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"><\/i><\/button><\/th>\n    <\/tr>\n  <\/thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}<\/span><\/button>\n      <\/td>\n    <\/tr>\n  <\/tbody>\n<\/table>\n')
}
]);
angular.module("template/modal/backdrop.html", []).run(["$templateCache", function(n) {
    n.put("template/modal/backdrop.html", '<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n><\/div>\n')
}
]);
angular.module("template/modal/window.html", []).run(["$templateCache", function(n) {
    n.put("template/modal/window.html", '<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" ng-transclude><\/div><\/div>\n<\/div>')
}
]);
angular.module("template/pagination/pager.html", []).run(["$templateCache", function(n) {
    n.put("template/pagination/pager.html", '<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}<\/a><\/li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}<\/a><\/li>\n<\/ul>')
}
]);
angular.module("template/pagination/pagination.html", []).run(["$templateCache", function(n) {
    n.put("template/pagination/pagination.html", '<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}<\/a><\/li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}<\/a><\/li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}<\/a><\/li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}<\/a><\/li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}<\/a><\/li>\n<\/ul>')
}
]);
angular.module("template/tooltip/tooltip-html-unsafe-popup.html", []).run(["$templateCache", function(n) {
    n.put("template/tooltip/tooltip-html-unsafe-popup.html", '<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"><\/div>\n  <div class="tooltip-inner" bind-html-unsafe="content"><\/div>\n<\/div>\n')
}
]);
angular.module("template/tooltip/tooltip-popup.html", []).run(["$templateCache", function(n) {
    n.put("template/tooltip/tooltip-popup.html", '<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"><\/div>\n  <div class="tooltip-inner" ng-bind="content"><\/div>\n<\/div>\n')
}
]);
angular.module("template/popover/popover.html", []).run(["$templateCache", function(n) {
    n.put("template/popover/popover.html", '<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"><\/div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"><\/h3>\n      <div class="popover-content" ng-bind="content"><\/div>\n  <\/div>\n<\/div>\n')
}
]);
angular.module("template/progressbar/bar.html", []).run(["$templateCache", function(n) {
    n.put("template/progressbar/bar.html", '<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude><\/div>')
}
]);
angular.module("template/progressbar/progress.html", []).run(["$templateCache", function(n) {
    n.put("template/progressbar/progress.html", '<div class="progress" ng-transclude><\/div>')
}
]);
angular.module("template/progressbar/progressbar.html", []).run(["$templateCache", function(n) {
    n.put("template/progressbar/progressbar.html", '<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude><\/div>\n<\/div>')
}
]);
angular.module("template/rating/rating.html", []).run(["$templateCache", function(n) {
    n.put("template/rating/rating.html", '<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})<\/span>\n    <\/i>\n<\/span>')
}
]);
angular.module("template/tabs/tab.html", []).run(["$templateCache", function(n) {
    n.put("template/tabs/tab.html", '<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}<\/a>\n<\/li>\n')
}
]);
angular.module("template/tabs/tabset-titles.html", []).run(["$templateCache", function(n) {
    n.put("template/tabs/tabset-titles.html", "<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n<\/ul>\n")
}
]);
angular.module("template/tabs/tabset.html", []).run(["$templateCache", function(n) {
    n.put("template/tabs/tabset.html", '\n<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude><\/ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    <\/div>\n  <\/div>\n<\/div>\n')
}
]);
angular.module("template/timepicker/timepicker.html", []).run(["$templateCache", function(n) {
    n.put("template/timepicker/timepicker.html", '<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"><\/span><\/a><\/td>\n\t\t\t<td>&nbsp;<\/td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"><\/span><\/a><\/td>\n\t\t\t<td ng-show="showMeridian"><\/td>\n\t\t<\/tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t<\/td>\n\t\t\t<td>:<\/td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t<\/td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}<\/button><\/td>\n\t\t<\/tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"><\/span><\/a><\/td>\n\t\t\t<td>&nbsp;<\/td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"><\/span><\/a><\/td>\n\t\t\t<td ng-show="showMeridian"><\/td>\n\t\t<\/tr>\n\t<\/tbody>\n<\/table>\n')
}
]);
angular.module("template/typeahead/typeahead-match.html", []).run(["$templateCache", function(n) {
    n.put("template/typeahead/typeahead-match.html", '<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"><\/a>')
}
]);
angular.module("template/typeahead/typeahead-popup.html", []).run(["$templateCache", function(n) {
    n.put("template/typeahead/typeahead-popup.html", '<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"><\/div>\n    <\/li>\n<\/ul>')
}
]);
angular.module("ui.sortable", []).value("uiSortableConfig", {}).directive("uiSortable", ["uiSortableConfig", "$timeout", "$log", function(n, t, i) {
    return {
        require: "?ngModel",
        link: function(r, u, f, e) {
            function c(n, t) {
                return t && typeof t == "function" ? function(i, r) {
                    n(i, r);
                    t(i, r)
                }
                : n
            }
            function a(n, t) {
                var i = n.sortable("option", "helper");
                return i === "clone" || typeof i == "function" && t.item.sortable.isCustomHelperUsed()
            }
            var o, h = {}, s = {
                receive: null,
                remove: null,
                start: null,
                stop: null,
                update: null
            }, l = {
                helper: null
            };
            if (angular.extend(h, n, r.$eval(f.uiSortable)),
            !angular.element.fn || !angular.element.fn.jquery) {
                i.error("ui.sortable: jQuery should be included before AngularJS!");
                return
            }
            e ? (r.$watch(f.ngModel + ".length", function() {
                t(function() {
                    !u.data("ui-sortable") || u.sortable("refresh")
                })
            }),
            s.start = function(n, t) {
                t.item.sortable = {
                    index: t.item.index(),
                    cancel: function() {
                        t.item.sortable._isCanceled = !0
                    },
                    isCanceled: function() {
                        return t.item.sortable._isCanceled
                    },
                    isCustomHelperUsed: function() {
                        return !!t.item.sortable._isCustomHelperUsed
                    },
                    _isCanceled: !1,
                    _isCustomHelperUsed: t.item.sortable._isCustomHelperUsed
                }
            }
            ,
            s.activate = function() {
                var n, t, i;
                o = u.contents();
                n = u.sortable("option", "placeholder");
                n && n.element && typeof n.element == "function" && (t = n.element(),
                t = angular.element(t),
                i = u.find('[class="' + t.attr("class") + '"]'),
                o = o.not(i))
            }
            ,
            s.update = function(n, t) {
                t.item.sortable.received || (t.item.sortable.dropindex = t.item.index(),
                t.item.sortable.droptarget = t.item.parent(),
                u.sortable("cancel"));
                a(u, t) && !t.item.sortable.received && u.sortable("option", "appendTo") === "parent" && (o = o.not(o.last()));
                o.appendTo(u);
                t.item.sortable.received && (o = null);
                t.item.sortable.received && !t.item.sortable.isCanceled() && r.$apply(function() {
                    e.$modelValue.splice(t.item.sortable.dropindex, 0, t.item.sortable.moved)
                })
            }
            ,
            s.stop = function(n, t) {
                !t.item.sortable.received && "dropindex"in t.item.sortable && !t.item.sortable.isCanceled() ? r.$apply(function() {
                    e.$modelValue.splice(t.item.sortable.dropindex, 0, e.$modelValue.splice(t.item.sortable.index, 1)[0])
                }) : "dropindex"in t.item.sortable && !t.item.sortable.isCanceled() || a(u, t) || o.appendTo(u);
                o = null
            }
            ,
            s.receive = function(n, t) {
                t.item.sortable.received = !0
            }
            ,
            s.remove = function(n, t) {
                "dropindex"in t.item.sortable || (u.sortable("cancel"),
                t.item.sortable.cancel());
                t.item.sortable.isCanceled() || r.$apply(function() {
                    t.item.sortable.moved = e.$modelValue.splice(t.item.sortable.index, 1)[0]
                })
            }
            ,
            l.helper = function(n) {
                return n && typeof n == "function" ? function(t, i) {
                    var r = n(t, i);
                    return i.sortable._isCustomHelperUsed = i !== r,
                    r
                }
                : n
            }
            ,
            r.$watch(f.uiSortable, function(n) {
                !u.data("ui-sortable") || angular.forEach(n, function(n, t) {
                    s[t] ? (t === "stop" && (n = c(n, function() {
                        r.$apply()
                    })),
                    n = c(s[t], n)) : l[t] && (n = l[t](n));
                    u.sortable("option", t, n)
                })
            }, !0),
            angular.forEach(s, function(n, t) {
                h[t] = c(n, h[t])
            })) : i.info("ui.sortable: ngModel not provided!", u);
            u.sortable(h)
        }
    }
}
]);
!function(n) {
    var t = "oninput"in document.createElement("input") ? "input" : "keydown";
    n.fn.autoGrowInput = function(i) {
        var r = n.extend({
            maxWidth: 500,
            minWidth: 20,
            comfortZone: 0
        }, i);
        return this.each(function() {
            var u = n(this)
              , f = " "
              , s = i && "comfortZone"in i ? r.comfortZone : parseInt(u.css("fontSize"))
              , e = n("<span/>").css({
                position: "absolute",
                top: -9999,
                left: -9999,
                width: "auto",
                fontSize: u.css("fontSize"),
                fontFamily: u.css("fontFamily"),
                fontWeight: u.css("fontWeight"),
                letterSpacing: u.css("letterSpacing"),
                textTransform: u.css("textTransform"),
                whiteSpace: "nowrap",
                ariaHidden: !0
            }).appendTo("body")
              , o = function(n) {
                if (f !== (f = u.val()) || "autogrow" === n.type) {
                    f || (f = u.attr("placeholder") || "");
                    e.html(f.replace(/&/g, "&amp;").replace(/\s/g, "&nbsp;").replace(/</g, "&lt;").replace(/>/g, "&gt;"));
                    var t = e.width() + s
                      , i = "function" == typeof r.maxWidth ? r.maxWidth() : r.maxWidth;
                    t > i ? t = i : t < r.minWidth && (t = r.minWidth);
                    t != u.width() && u.width(t)
                }
            };
            u.on(t + ".autogrow autogrow", o);
            o()
        }),
        this
    }
}(jQuery);
CryptoJS = CryptoJS || function(n, t) {
    var u = {}, f = u.lib = {}, o = function() {}, i = f.Base = {
        extend: function(n) {
            o.prototype = this;
            var t = new o;
            return n && t.mixIn(n),
            t.hasOwnProperty("init") || (t.init = function() {
                t.$super.init.apply(this, arguments)
            }
            ),
            t.init.prototype = t,
            t.$super = this,
            t
        },
        create: function() {
            var n = this.extend();
            return n.init.apply(n, arguments),
            n
        },
        init: function() {},
        mixIn: function(n) {
            for (var t in n)
                n.hasOwnProperty(t) && (this[t] = n[t]);
            n.hasOwnProperty("toString") && (this.toString = n.toString)
        },
        clone: function() {
            return this.init.prototype.extend(this)
        }
    }, r = f.WordArray = i.extend({
        init: function(n, i) {
            n = this.words = n || [];
            this.sigBytes = i != t ? i : 4 * n.length
        },
        toString: function(n) {
            return (n || l).stringify(this)
        },
        concat: function(n) {
            var i = this.words, r = n.words, u = this.sigBytes, t;
            if (n = n.sigBytes,
            this.clamp(),
            u % 4)
                for (t = 0; t < n; t++)
                    i[u + t >>> 2] |= (r[t >>> 2] >>> 24 - 8 * (t % 4) & 255) << 24 - 8 * ((u + t) % 4);
            else if (65535 < r.length)
                for (t = 0; t < n; t += 4)
                    i[u + t >>> 2] = r[t >>> 2];
            else
                i.push.apply(i, r);
            return this.sigBytes += n,
            this
        },
        clamp: function() {
            var i = this.words
              , t = this.sigBytes;
            i[t >>> 2] &= 4294967295 << 32 - 8 * (t % 4);
            i.length = n.ceil(t / 4)
        },
        clone: function() {
            var n = i.clone.call(this);
            return n.words = this.words.slice(0),
            n
        },
        random: function(t) {
            for (var i = [], u = 0; u < t; u += 4)
                i.push(4294967296 * n.random() | 0);
            return new r.init(i,t)
        }
    }), e = u.enc = {}, l = e.Hex = {
        stringify: function(n) {
            var u = n.words, i, t, r;
            for (n = n.sigBytes,
            i = [],
            t = 0; t < n; t++)
                r = u[t >>> 2] >>> 24 - 8 * (t % 4) & 255,
                i.push((r >>> 4).toString(16)),
                i.push((r & 15).toString(16));
            return i.join("")
        },
        parse: function(n) {
            for (var i = n.length, u = [], t = 0; t < i; t += 2)
                u[t >>> 3] |= parseInt(n.substr(t, 2), 16) << 24 - 4 * (t % 8);
            return new r.init(u,i / 2)
        }
    }, s = e.Latin1 = {
        stringify: function(n) {
            var r = n.words, i, t;
            for (n = n.sigBytes,
            i = [],
            t = 0; t < n; t++)
                i.push(String.fromCharCode(r[t >>> 2] >>> 24 - 8 * (t % 4) & 255));
            return i.join("")
        },
        parse: function(n) {
            for (var i = n.length, u = [], t = 0; t < i; t++)
                u[t >>> 2] |= (n.charCodeAt(t) & 255) << 24 - 8 * (t % 4);
            return new r.init(u,i)
        }
    }, a = e.Utf8 = {
        stringify: function(n) {
            try {
                return decodeURIComponent(escape(s.stringify(n)))
            } catch (t) {
                throw Error("Malformed UTF-8 data");
            }
        },
        parse: function(n) {
            return s.parse(unescape(encodeURIComponent(n)))
        }
    }, h = f.BufferedBlockAlgorithm = i.extend({
        reset: function() {
            this._data = new r.init;
            this._nDataBytes = 0
        },
        _append: function(n) {
            "string" == typeof n && (n = a.parse(n));
            this._data.concat(n);
            this._nDataBytes += n.sigBytes
        },
        _process: function(t) {
            var f = this._data, s = f.words, u = f.sigBytes, e = this.blockSize, o = u / (4 * e), o = t ? n.ceil(o) : n.max((o | 0) - this._minBufferSize, 0), i;
            if (t = o * e,
            u = n.min(4 * t, u),
            t) {
                for (i = 0; i < t; i += e)
                    this._doProcessBlock(s, i);
                i = s.splice(0, t);
                f.sigBytes -= u
            }
            return new r.init(i,u)
        },
        clone: function() {
            var n = i.clone.call(this);
            return n._data = this._data.clone(),
            n
        },
        _minBufferSize: 0
    }), c;
    return f.Hasher = h.extend({
        cfg: i.extend(),
        init: function(n) {
            this.cfg = this.cfg.extend(n);
            this.reset()
        },
        reset: function() {
            h.reset.call(this);
            this._doReset()
        },
        update: function(n) {
            return this._append(n),
            this._process(),
            this
        },
        finalize: function(n) {
            return n && this._append(n),
            this._doFinalize()
        },
        blockSize: 16,
        _createHelper: function(n) {
            return function(t, i) {
                return new n.init(i).finalize(t)
            }
        },
        _createHmacHelper: function(n) {
            return function(t, i) {
                return new c.HMAC.init(n,i).finalize(t)
            }
        }
    }),
    c = u.algo = {},
    u
}(Math),
function() {
    var n = CryptoJS
      , t = n.lib.WordArray;
    n.enc.Base64 = {
        stringify: function(n) {
            var i = n.words, u = n.sigBytes, f = this._map, t, e, r;
            for (n.clamp(),
            n = [],
            t = 0; t < u; t += 3)
                for (e = (i[t >>> 2] >>> 24 - 8 * (t % 4) & 255) << 16 | (i[t + 1 >>> 2] >>> 24 - 8 * ((t + 1) % 4) & 255) << 8 | i[t + 2 >>> 2] >>> 24 - 8 * ((t + 2) % 4) & 255,
                r = 0; 4 > r && t + .75 * r < u; r++)
                    n.push(f.charAt(e >>> 6 * (3 - r) & 63));
            if (i = f.charAt(64))
                for (; n.length % 4; )
                    n.push(i);
            return n.join("")
        },
        parse: function(n) {
            var e = n.length, f = this._map, i = f.charAt(64), o, s;
            i && (i = n.indexOf(i),
            -1 != i && (e = i));
            for (var i = [], u = 0, r = 0; r < e; r++)
                r % 4 && (o = f.indexOf(n.charAt(r - 1)) << 2 * (r % 4),
                s = f.indexOf(n.charAt(r)) >>> 6 - 2 * (r % 4),
                i[u >>> 2] |= (o | s) << 24 - 8 * (u % 4),
                u++);
            return t.create(i, u)
        },
        _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
    }
}(),
function(n) {
    function i(n, t, i, r, u, f, e) {
        return n = n + (t & i | ~t & r) + u + e,
        (n << f | n >>> 32 - f) + t
    }
    function r(n, t, i, r, u, f, e) {
        return n = n + (t & r | i & ~r) + u + e,
        (n << f | n >>> 32 - f) + t
    }
    function u(n, t, i, r, u, f, e) {
        return n = n + (t ^ i ^ r) + u + e,
        (n << f | n >>> 32 - f) + t
    }
    function f(n, t, i, r, u, f, e) {
        return n = n + (i ^ (t | ~r)) + u + e,
        (n << f | n >>> 32 - f) + t
    }
    for (var o = CryptoJS, e = o.lib, c = e.WordArray, s = e.Hasher, e = o.algo, t = [], h = 0; 64 > h; h++)
        t[h] = 4294967296 * n.abs(n.sin(h + 1)) | 0;
    e = e.MD5 = s.extend({
        _doReset: function() {
            this._hash = new c.init([1732584193, 4023233417, 2562383102, 271733878])
        },
        _doProcessBlock: function(n, e) {
            for (var v, a, l = 0; 16 > l; l++)
                v = e + l,
                a = n[v],
                n[v] = (a << 8 | a >>> 24) & 16711935 | (a << 24 | a >>> 8) & 4278255360;
            var l = this._hash.words
              , v = n[e + 0]
              , a = n[e + 1]
              , y = n[e + 2]
              , p = n[e + 3]
              , w = n[e + 4]
              , b = n[e + 5]
              , k = n[e + 6]
              , d = n[e + 7]
              , g = n[e + 8]
              , nt = n[e + 9]
              , tt = n[e + 10]
              , it = n[e + 11]
              , rt = n[e + 12]
              , ut = n[e + 13]
              , ft = n[e + 14]
              , et = n[e + 15]
              , o = l[0]
              , s = l[1]
              , h = l[2]
              , c = l[3]
              , o = i(o, s, h, c, v, 7, t[0])
              , c = i(c, o, s, h, a, 12, t[1])
              , h = i(h, c, o, s, y, 17, t[2])
              , s = i(s, h, c, o, p, 22, t[3])
              , o = i(o, s, h, c, w, 7, t[4])
              , c = i(c, o, s, h, b, 12, t[5])
              , h = i(h, c, o, s, k, 17, t[6])
              , s = i(s, h, c, o, d, 22, t[7])
              , o = i(o, s, h, c, g, 7, t[8])
              , c = i(c, o, s, h, nt, 12, t[9])
              , h = i(h, c, o, s, tt, 17, t[10])
              , s = i(s, h, c, o, it, 22, t[11])
              , o = i(o, s, h, c, rt, 7, t[12])
              , c = i(c, o, s, h, ut, 12, t[13])
              , h = i(h, c, o, s, ft, 17, t[14])
              , s = i(s, h, c, o, et, 22, t[15])
              , o = r(o, s, h, c, a, 5, t[16])
              , c = r(c, o, s, h, k, 9, t[17])
              , h = r(h, c, o, s, it, 14, t[18])
              , s = r(s, h, c, o, v, 20, t[19])
              , o = r(o, s, h, c, b, 5, t[20])
              , c = r(c, o, s, h, tt, 9, t[21])
              , h = r(h, c, o, s, et, 14, t[22])
              , s = r(s, h, c, o, w, 20, t[23])
              , o = r(o, s, h, c, nt, 5, t[24])
              , c = r(c, o, s, h, ft, 9, t[25])
              , h = r(h, c, o, s, p, 14, t[26])
              , s = r(s, h, c, o, g, 20, t[27])
              , o = r(o, s, h, c, ut, 5, t[28])
              , c = r(c, o, s, h, y, 9, t[29])
              , h = r(h, c, o, s, d, 14, t[30])
              , s = r(s, h, c, o, rt, 20, t[31])
              , o = u(o, s, h, c, b, 4, t[32])
              , c = u(c, o, s, h, g, 11, t[33])
              , h = u(h, c, o, s, it, 16, t[34])
              , s = u(s, h, c, o, ft, 23, t[35])
              , o = u(o, s, h, c, a, 4, t[36])
              , c = u(c, o, s, h, w, 11, t[37])
              , h = u(h, c, o, s, d, 16, t[38])
              , s = u(s, h, c, o, tt, 23, t[39])
              , o = u(o, s, h, c, ut, 4, t[40])
              , c = u(c, o, s, h, v, 11, t[41])
              , h = u(h, c, o, s, p, 16, t[42])
              , s = u(s, h, c, o, k, 23, t[43])
              , o = u(o, s, h, c, nt, 4, t[44])
              , c = u(c, o, s, h, rt, 11, t[45])
              , h = u(h, c, o, s, et, 16, t[46])
              , s = u(s, h, c, o, y, 23, t[47])
              , o = f(o, s, h, c, v, 6, t[48])
              , c = f(c, o, s, h, d, 10, t[49])
              , h = f(h, c, o, s, ft, 15, t[50])
              , s = f(s, h, c, o, b, 21, t[51])
              , o = f(o, s, h, c, rt, 6, t[52])
              , c = f(c, o, s, h, p, 10, t[53])
              , h = f(h, c, o, s, tt, 15, t[54])
              , s = f(s, h, c, o, a, 21, t[55])
              , o = f(o, s, h, c, g, 6, t[56])
              , c = f(c, o, s, h, et, 10, t[57])
              , h = f(h, c, o, s, k, 15, t[58])
              , s = f(s, h, c, o, ut, 21, t[59])
              , o = f(o, s, h, c, w, 6, t[60])
              , c = f(c, o, s, h, it, 10, t[61])
              , h = f(h, c, o, s, y, 15, t[62])
              , s = f(s, h, c, o, nt, 21, t[63]);
            l[0] = l[0] + o | 0;
            l[1] = l[1] + s | 0;
            l[2] = l[2] + h | 0;
            l[3] = l[3] + c | 0
        },
        _doFinalize: function() {
            var u = this._data, r = u.words, t = 8 * this._nDataBytes, i = 8 * u.sigBytes, f;
            for (r[i >>> 5] |= 128 << 24 - i % 32,
            f = n.floor(t / 4294967296),
            r[(i + 64 >>> 9 << 4) + 15] = (f << 8 | f >>> 24) & 16711935 | (f << 24 | f >>> 8) & 4278255360,
            r[(i + 64 >>> 9 << 4) + 14] = (t << 8 | t >>> 24) & 16711935 | (t << 24 | t >>> 8) & 4278255360,
            u.sigBytes = 4 * (r.length + 1),
            this._process(),
            u = this._hash,
            r = u.words,
            t = 0; 4 > t; t++)
                i = r[t],
                r[t] = (i << 8 | i >>> 24) & 16711935 | (i << 24 | i >>> 8) & 4278255360;
            return u
        },
        clone: function() {
            var n = s.clone.call(this);
            return n._hash = this._hash.clone(),
            n
        }
    });
    o.MD5 = s._createHelper(e);
    o.HmacMD5 = s._createHmacHelper(e)
}(Math),
function() {
    var t = CryptoJS
      , n = t.lib
      , i = n.Base
      , r = n.WordArray
      , n = t.algo
      , u = n.EvpKDF = i.extend({
        cfg: i.extend({
            keySize: 4,
            hasher: n.MD5,
            iterations: 1
        }),
        init: function(n) {
            this.cfg = this.cfg.extend(n)
        },
        compute: function(n, t) {
            for (var i, o, f = this.cfg, u = f.hasher.create(), e = r.create(), h = e.words, s = f.keySize, f = f.iterations; h.length < s; ) {
                for (i && u.update(i),
                i = u.update(n).finalize(t),
                u.reset(),
                o = 1; o < f; o++)
                    i = u.finalize(i),
                    u.reset();
                e.concat(i)
            }
            return e.sigBytes = 4 * s,
            e
        }
    });
    t.EvpKDF = function(n, t, i) {
        return u.create(i).compute(n, t)
    }
}();
CryptoJS.lib.Cipher || function(n) {
    var i = CryptoJS
      , t = i.lib
      , f = t.Base
      , e = t.WordArray
      , c = t.BufferedBlockAlgorithm
      , l = i.enc.Base64
      , y = i.algo.EvpKDF
      , o = t.Cipher = c.extend({
        cfg: f.extend(),
        createEncryptor: function(n, t) {
            return this.create(this._ENC_XFORM_MODE, n, t)
        },
        createDecryptor: function(n, t) {
            return this.create(this._DEC_XFORM_MODE, n, t)
        },
        init: function(n, t, i) {
            this.cfg = this.cfg.extend(i);
            this._xformMode = n;
            this._key = t;
            this.reset()
        },
        reset: function() {
            c.reset.call(this);
            this._doReset()
        },
        process: function(n) {
            return this._append(n),
            this._process()
        },
        finalize: function(n) {
            return n && this._append(n),
            this._doFinalize()
        },
        keySize: 4,
        ivSize: 4,
        _ENC_XFORM_MODE: 1,
        _DEC_XFORM_MODE: 2,
        _createHelper: function(n) {
            return {
                encrypt: function(t, i, r) {
                    return ("string" == typeof i ? v : u).encrypt(n, t, i, r)
                },
                decrypt: function(t, i, r) {
                    return ("string" == typeof i ? v : u).decrypt(n, t, i, r)
                }
            }
        }
    });
    t.StreamCipher = o.extend({
        _doFinalize: function() {
            return this._process(!0)
        },
        blockSize: 1
    });
    var s = i.mode = {}
      , a = function(t, i, r) {
        var f = this._iv, u;
        for (f ? this._iv = n : f = this._prevBlock,
        u = 0; u < r; u++)
            t[i + u] ^= f[u]
    }
      , r = (t.BlockCipherMode = f.extend({
        createEncryptor: function(n, t) {
            return this.Encryptor.create(n, t)
        },
        createDecryptor: function(n, t) {
            return this.Decryptor.create(n, t)
        },
        init: function(n, t) {
            this._cipher = n;
            this._iv = t
        }
    })).extend();
    r.Encryptor = r.extend({
        processBlock: function(n, t) {
            var i = this._cipher
              , r = i.blockSize;
            a.call(this, n, t, r);
            i.encryptBlock(n, t);
            this._prevBlock = n.slice(t, t + r)
        }
    });
    r.Decryptor = r.extend({
        processBlock: function(n, t) {
            var i = this._cipher
              , r = i.blockSize
              , u = n.slice(t, t + r);
            i.decryptBlock(n, t);
            a.call(this, n, t, r);
            this._prevBlock = u
        }
    });
    s = s.CBC = r;
    r = (i.pad = {}).Pkcs7 = {
        pad: function(n, t) {
            for (var i = 4 * t, i = i - n.sigBytes % i, f = i << 24 | i << 16 | i << 8 | i, r = [], u = 0; u < i; u += 4)
                r.push(f);
            i = e.create(r, i);
            n.concat(i)
        },
        unpad: function(n) {
            n.sigBytes -= n.words[n.sigBytes - 1 >>> 2] & 255
        }
    };
    t.BlockCipher = o.extend({
        cfg: o.cfg.extend({
            mode: s,
            padding: r
        }),
        reset: function() {
            var t;
            o.reset.call(this);
            var n = this.cfg
              , i = n.iv
              , n = n.mode;
            this._xformMode == this._ENC_XFORM_MODE ? t = n.createEncryptor : (t = n.createDecryptor,
            this._minBufferSize = 1);
            this._mode = t.call(n, this, i && i.words)
        },
        _doProcessBlock: function(n, t) {
            this._mode.processBlock(n, t)
        },
        _doFinalize: function() {
            var t = this.cfg.padding, n;
            return this._xformMode == this._ENC_XFORM_MODE ? (t.pad(this._data, this.blockSize),
            n = this._process(!0)) : (n = this._process(!0),
            t.unpad(n)),
            n
        },
        blockSize: 4
    });
    var h = t.CipherParams = f.extend({
        init: function(n) {
            this.mixIn(n)
        },
        toString: function(n) {
            return (n || this.formatter).stringify(this)
        }
    })
      , s = (i.format = {}).OpenSSL = {
        stringify: function(n) {
            var t = n.ciphertext;
            return n = n.salt,
            (n ? e.create([1398893684, 1701076831]).concat(n).concat(t) : t).toString(l)
        },
        parse: function(n) {
            var t, i;
            return n = l.parse(n),
            t = n.words,
            1398893684 == t[0] && 1701076831 == t[1] && (i = e.create(t.slice(2, 4)),
            t.splice(0, 4),
            n.sigBytes -= 16),
            h.create({
                ciphertext: n,
                salt: i
            })
        }
    }
      , u = t.SerializableCipher = f.extend({
        cfg: f.extend({
            format: s
        }),
        encrypt: function(n, t, i, r) {
            r = this.cfg.extend(r);
            var u = n.createEncryptor(i, r);
            return t = u.finalize(t),
            u = u.cfg,
            h.create({
                ciphertext: t,
                key: i,
                iv: u.iv,
                algorithm: n,
                mode: u.mode,
                padding: u.padding,
                blockSize: n.blockSize,
                formatter: r.format
            })
        },
        decrypt: function(n, t, i, r) {
            return r = this.cfg.extend(r),
            t = this._parse(t, r.format),
            n.createDecryptor(i, r).finalize(t.ciphertext)
        },
        _parse: function(n, t) {
            return "string" == typeof n ? t.parse(n, this) : n
        }
    })
      , i = (i.kdf = {}).OpenSSL = {
        execute: function(n, t, i, r) {
            return r || (r = e.random(8)),
            n = y.create({
                keySize: t + i
            }).compute(n, r),
            i = e.create(n.words.slice(t), 4 * i),
            n.sigBytes = 4 * t,
            h.create({
                key: n,
                iv: i,
                salt: r
            })
        }
    }
      , v = t.PasswordBasedCipher = u.extend({
        cfg: u.cfg.extend({
            kdf: i
        }),
        encrypt: function(n, t, i, r) {
            return r = this.cfg.extend(r),
            i = r.kdf.execute(i, n.keySize, n.ivSize),
            r.iv = i.iv,
            n = u.encrypt.call(this, n, t, i.key, r),
            n.mixIn(i),
            n
        },
        decrypt: function(n, t, i, r) {
            return r = this.cfg.extend(r),
            t = this._parse(t, r.format),
            i = r.kdf.execute(i, n.keySize, n.ivSize, t.salt),
            r.iv = i.iv,
            u.decrypt.call(this, n, t, i.key, r)
        }
    })
}(),
function() {
    for (var i, tt, s = CryptoJS, y = s.lib.BlockCipher, h = s.algo, t = [], p = [], w = [], b = [], k = [], d = [], c = [], l = [], a = [], v = [], u = [], f = 0; 256 > f; f++)
        u[f] = 128 > f ? f << 1 : f << 1 ^ 283;
    for (var r = 0, e = 0, f = 0; 256 > f; f++) {
        i = e ^ e << 1 ^ e << 2 ^ e << 3 ^ e << 4;
        i = i >>> 8 ^ i & 255 ^ 99;
        t[r] = i;
        p[i] = r;
        var o = u[r]
          , g = u[o]
          , nt = u[g]
          , n = 257 * u[i] ^ 16843008 * i;
        w[r] = n << 24 | n >>> 8;
        b[r] = n << 16 | n >>> 16;
        k[r] = n << 8 | n >>> 24;
        d[r] = n;
        n = 16843009 * nt ^ 65537 * g ^ 257 * o ^ 16843008 * r;
        c[i] = n << 24 | n >>> 8;
        l[i] = n << 16 | n >>> 16;
        a[i] = n << 8 | n >>> 24;
        v[i] = n;
        r ? (r = o ^ u[u[u[nt ^ o]]],
        e ^= u[u[e]]) : r = e = 1
    }
    tt = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
    h = h.AES = y.extend({
        _doReset: function() {
            for (var n, f = this._key, e = f.words, r = f.sigBytes / 4, f = 4 * ((this._nRounds = r + 6) + 1), u = this._keySchedule = [], i = 0; i < f; i++)
                i < r ? u[i] = e[i] : (n = u[i - 1],
                i % r ? 6 < r && 4 == i % r && (n = t[n >>> 24] << 24 | t[n >>> 16 & 255] << 16 | t[n >>> 8 & 255] << 8 | t[n & 255]) : (n = n << 8 | n >>> 24,
                n = t[n >>> 24] << 24 | t[n >>> 16 & 255] << 16 | t[n >>> 8 & 255] << 8 | t[n & 255],
                n ^= tt[i / r | 0] << 24),
                u[i] = u[i - r] ^ n);
            for (e = this._invKeySchedule = [],
            r = 0; r < f; r++)
                i = f - r,
                n = r % 4 ? u[i] : u[i - 4],
                e[r] = 4 > r || 4 >= i ? n : c[t[n >>> 24]] ^ l[t[n >>> 16 & 255]] ^ a[t[n >>> 8 & 255]] ^ v[t[n & 255]]
        },
        encryptBlock: function(n, i) {
            this._doCryptBlock(n, i, this._keySchedule, w, b, k, d, t)
        },
        decryptBlock: function(n, t) {
            var i = n[t + 1];
            n[t + 1] = n[t + 3];
            n[t + 3] = i;
            this._doCryptBlock(n, t, this._invKeySchedule, c, l, a, v, p);
            i = n[t + 1];
            n[t + 1] = n[t + 3];
            n[t + 3] = i
        },
        _doCryptBlock: function(n, t, i, r, u, f, e, o) {
            for (var b = this._nRounds, h = n[t] ^ i[0], c = n[t + 1] ^ i[1], l = n[t + 2] ^ i[2], s = n[t + 3] ^ i[3], a = 4, w = 1; w < b; w++)
                var v = r[h >>> 24] ^ u[c >>> 16 & 255] ^ f[l >>> 8 & 255] ^ e[s & 255] ^ i[a++]
                  , y = r[c >>> 24] ^ u[l >>> 16 & 255] ^ f[s >>> 8 & 255] ^ e[h & 255] ^ i[a++]
                  , p = r[l >>> 24] ^ u[s >>> 16 & 255] ^ f[h >>> 8 & 255] ^ e[c & 255] ^ i[a++]
                  , s = r[s >>> 24] ^ u[h >>> 16 & 255] ^ f[c >>> 8 & 255] ^ e[l & 255] ^ i[a++]
                  , h = v
                  , c = y
                  , l = p;
            v = (o[h >>> 24] << 24 | o[c >>> 16 & 255] << 16 | o[l >>> 8 & 255] << 8 | o[s & 255]) ^ i[a++];
            y = (o[c >>> 24] << 24 | o[l >>> 16 & 255] << 16 | o[s >>> 8 & 255] << 8 | o[h & 255]) ^ i[a++];
            p = (o[l >>> 24] << 24 | o[s >>> 16 & 255] << 16 | o[h >>> 8 & 255] << 8 | o[c & 255]) ^ i[a++];
            s = (o[s >>> 24] << 24 | o[h >>> 16 & 255] << 16 | o[c >>> 8 & 255] << 8 | o[l & 255]) ^ i[a++];
            n[t] = v;
            n[t + 1] = y;
            n[t + 2] = p;
            n[t + 3] = s
        },
        keySize: 8
    });
    s.AES = y._createHelper(h)
}();
angular.module("swiftassessMobile", ["ui.router", "ngTouch", "swiftassessMobile.login", "swiftassessMobile.navigation", "swiftassessMobile.viewer", "swiftassessMobile.services", "swiftassessMobile.results", "swiftassessMobile.MultipleChoice", "swiftassessMobile.MultipleSelect", "swiftassessMobile.TrueOrFalse", "swiftassessMobile.ShortAnswer", "swiftassessMobile.ReOrder", "swiftassessMobile.FillInTheBlanks", "swiftassessMobile.FillFromList", "swiftassessMobile.Hotspot", "swiftassessMobile.Matching", "swiftassessMobile.DragAndDrop", "swiftassessMobile.DragToBlank", "swiftassessMobile.Essay", "swiftassessMobile.Handwriting", "swiftassessMobile.Rating"]).config(["$stateProvider", "$urlRouterProvider", "$sceProvider", "$httpProvider", function(n, t, i) {
    t.otherwise("/");
    i.enabled(!1)
}
]).run(function() {}).controller("AppCtrl", ["$scope", "$location", "$state", "User", "LS", function(n, t, i, r, u) {
    n.throbber = !0;
    n.$on("$stateChangeSuccess", function(t, i) {
        angular.isDefined(i.data.pageTitle) && (n.pageTitle = i.data.pageTitle + " | SwiftAssess")
    });
    for (var f in localStorage)
        u.syncOffline(localStorage[f], f);
    localStorage.lang || (localStorage.lang = "en");
    n.lang = localStorage.lang;
    n.dir = localStorage.lang != "ar" ? "ltr" : "rtl"
}
]).directive("focus", ["$timeout", function(n) {
    return {
        scope: {
            trigger: "@focus"
        },
        link: function(t, i) {
            t.$watch("trigger", function(t) {
                t === "true" && n(function() {
                    i[0].focus()
                })
            })
        }
    }
}
]).directive("ngEnter", function() {
    return function(n, t, i) {
        t.bind("keydown keypress", function(t) {
            t.which === 13 && (n.$apply(function() {
                n.$eval(i.ngEnter, {
                    event: t
                })
            }),
            t.preventDefault())
        })
    }
}).directive("ngTap", function() {
    return function(n, t, i) {
        var r;
        r = !1;
        t.bind("touchstart", function() {
            t.addClass("active");
            r = !0
        });
        t.bind("touchmove", function() {
            t.removeClass("active");
            r = !1
        });
        t.bind("touchend", function() {
            t.removeClass("active");
            r && n.$apply(i.ngTap, t)
        })
    }
});
isSynced = !0;
waitSync = !0;
notificationH2 = "14px";
notificationTime = "9px";
notificationRightInner = "14px";
toastBoxInfoWrapperH2 = "60px";
MagnifyBool = window.localStorage.getItem("MagnifyBool");
(MagnifyBool == undefined || MagnifyBool == null) && SetMagnifyBool(!1);
ZoomFactor = window.localStorage.getItem("ZoomFactor");
(ZoomFactor == undefined || ZoomFactor == null) && SetZoomFactor(2);
theme = window.localStorage.getItem("theme");
(theme == undefined || theme == null) && Settheme("light");
globalFontFamily = window.localStorage.getItem("globalFontFamily");
(globalFontFamily == undefined || globalFontFamily == null) && SetglobalFontFamily('"Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif');
lineHeight = window.localStorage.getItem("lineHeight");
(lineHeight == undefined || lineHeight == null) && SetlineHeight("1.5");
letterSpacing = window.localStorage.getItem("letterSpacing");
(letterSpacing == undefined || letterSpacing == null) && SetletterSpacing("normal");
wordSpacing = window.localStorage.getItem("wordSpacing");
(wordSpacing == undefined || wordSpacing == null) && SetwordSpacing("normal");
titleFontSize = window.localStorage.getItem("titleFontSize");
(titleFontSize == undefined || titleFontSize == null) && SettitleFontSize(22);
document.addEventListener("deviceready", function() {}, !1);
angular.module("swiftassessMobile.services", []).factory("User", function() {
    function t(t) {
        n = t
    }
    function i() {
        return n
    }
    var n = {};
    return {
        set: t,
        get: i,
        result: {}
    }
}).factory("Config", ["User", function() {
    function n() {
        return savedData
    }
    var t = undefined;
    return savedData = {
        localResources: {
            en: {
                OnlineMode: "Online Mode",
                ACUMode: "ACU Mode",
                IPHost: "IP Address/Host name of the ACU",
                offlineLogin: "Offline Login",
                ChangeLang: "Change Language",
                questions: "questions",
                Required: "Required",
                DropCompleted: "Previous results were dropped because there is already a complete submission",
                DropExamClosed: "Previous results were dropped because the exam has been closed",
                DropPaper: "Previous results were dropped because this student was marked as Paper",
                DropSession: "Previous results were dropped because there is another active session",
                StartTimeDidNotCome: "The exam session has not started yet",
                PrvsResSynced: "Previous Results have been synced successfully",
                ExamFinishedMessage: "You have successfully completed your exam!",
                Done: "Done",
                ExamAlreadyTaken: "You have already taken this exam previously",
                PracticeEnded: "Your practice time has ended",
                ExamTimeEnded: "Exam time has ended",
                NotAssigned: "You are not assigned on this exam",
                SolveAllQtns: "You have to solve all questions before submitting the exam",
                QtnsNotSeenLater: "Some questions are not seen in a later Section",
                QtnsNotSeenNext: "Some questions are not seen in the next Section",
                QtnsNotSeenCur: "Some questions are not seen in this Section",
                QtnsNotSeenPrev: "There are some questions that are not seen in a previous Section",
                ConfirmLeaveSec: "If you leave this section, you can't go back to it. Confirm?",
                SolveAllQsInSec: "You have to solve all questions before proceeding to the next section",
                MarkForReview: "Mark for Review",
                ToggleCalc: "Show/Hide Calculator",
                InvertColors: "Invert Colors",
                IncreaseFont: "Increase Font Size",
                DecreaseFont: "Decrease Font Size",
                ToggleMedia: "Toggle Media",
                ToggleDesc: "Toggle Description",
                question: "question",
                Backtrack: "Backtrack",
                Calculator: "Calculator",
                Section: "Section",
                ReqAllQs: "All Questions have to be solved",
                ReqQbyQ: "Solve Each Question to Proceed",
                BackTrackNotAllowed: "Only Move Forward",
                BackTrackAllowed: "Free Navigation",
                NotAllowed: "Not Allowed",
                Allowed: "Allowed",
                ExamEndDatePassed: "End Date has already passed",
                ACUExamKey: "Exam Key",
                ACUMarkedPaper: "Access denied since this student is marked as Paper",
                ACUExamAlreadyComplete: "You have completed this session previously",
                ACUActiveSessionExists: "There is already an active session. Kindly inform your supervisor to take the necessary action",
                ACUKeyInvalid: "Key is invalid. Used key is: ",
                qtnsNotVisited: "You cannot submit until you have seen all questions",
                username: "Username",
                password: "Password",
                login: "Login",
                copyright: "Copyright &copy; GamaLearn",
                Exams: "Exams",
                Practices: "Practices",
                Surveys: "Surveys",
                CacheSync: "Sync Results",
                Help: "Help",
                Refresh: "Refresh",
                Logout: "Logout",
                New: "New",
                Resume: "Resume",
                No: "No",
                Available: "Available",
                Duration: "Duration",
                TimeElapsed: "Time Elapsed",
                Questions: "Questions",
                QuestionsRemaining: "Questions Remaining",
                TotalMarks: "Total Marks",
                Start: "Start",
                Marks: "Marks",
                Submit: "Submit",
                Save: "Save",
                Clear: "Clear",
                mfr: "Mark For Review",
                TimeSpent: "Time Spent",
                Score: "Score",
                Result: "Result",
                QuestionTitle: "Question Title",
                Mark: "Mark",
                TotalMarks: "Total Marks",
                Passed: "Passed",
                Failed: "Failed",
                passwordRequired: "Password Required",
                enterPassword: "Please enter assessment password",
                OK: "OK",
                Cancel: "Cancel",
                Success: "Success",
                Warning: "Warning",
                Information: "Information",
                Error: "Oops!",
                submissionComplete: "You have successfully submitted your assessment.",
                submitconfirm_errorreport: "You have successfully submitted your assessment.<br><br> There was an issue retrieving your results. Login to your web account to view results.",
                submitconfirm_manual: "You have successfully submitted your assessment. Results will be available after grading is completed.",
                error_submit: "The assessment wasn't submitted successfully.<br><br> Your results will be synced to the server whenever connectivity is available.",
                retake_assessment: "Would you like to take the assessment again?",
                error_submit_cache: "Invalid operation. No data cache available for submission",
                questionOrder: "",
                popHelpTitle: "",
                questionSubmit_Fail: "",
                qAnswerIsNotCorrect: "",
                confirmSubmit: "",
                exitNoResume: "",
                exitNoResume: "",
                exitResume: "",
                confirmClear: "Are you sure about clearing your answer?",
                confirmnext_backtrack: "When you move to the next question, you will no longer be able to view this question or change its answer. Continue?",
                timeWarning: "Please note that you have <b>@1 minutes left<\/b>. Try to finish all your questions and submit before the time is up",
                qTimeIsUp: "",
                questionSubmit_Success: "Question was saved successfully",
                qAttemptsIsUp: "You have used all the attempts available for this question",
                offlineSubmission: "",
                default_SubmitConfirm: "You are about to submit your assessment. If you proceed, you will not be able to change any answers and your scores will be saved permanently. Proceed?",
                markReview_SubmitConfirm: "You have some questions that are marked for review,  are you sure about submitting your assessment? \n\nIf you proceed, you will not be able to change any answers and your scores will be saved permanently. Proceed?",
                unsolved_SubmitConfirm: "You have some unanswered questions left, are you sure about submitting your assessment? \n\nIf you proceed, you will not be able to change any answers and your scores will be saved permanently. Proceed?",
                validate_Matching: "You have to match at least one item with an answer",
                validate_ShortAnswer: "The answer box cannot be empty",
                validate_ShortAnswer_Numeric: "The answer box cannot be empty or contain letters. Only numbers are allowed",
                validate_TrueOrFalse: "You have to select an answer first",
                validate_HandWriting: "You have to write an answer first",
                validate_Essay: "The answer box cannot be empty",
                validate_FIB: "You have to fill at least one blank",
                validate_FFL: "You have to select at least one answer",
                error_loadexam: "The assessment couldn't be loaded at this time. Please try again in a few moments.",
                logout_confirm: "Are you sure you want to logout?",
                nonetwork: "No network connection available. Make sure you are connected and try again",
                wrong_password: "Wrong password.",
                wrong_login: "Invalid Username or Password",
                invalid_license: "Your license is either invalid or expired. For more information, contact your Account Administrator",
                trial_expired: "The trial period for this account has expired. Login is not allowed",
                access_denied: "Access is not allowed to this assessment",
                surveyRequiredSubmit: "Some questions are required to be answered before submitting this survey.",
                qRequired: "This question is required",
                name: "Name",
                email: "Email",
                enterSurveyDetails: "Please Enter the details required below to start the survey.",
                surveyDetailsRequired: "Details Required",
                surveySubmitSuccess: "Survey submitted successfully",
                surveyConfirmSubmit: "You are about to submit your survey. Proceed?",
                surveyFinishMessage_Head: "You have completed this survey.",
                FinishMessage_Desc: "<b>Thank you for your feedback<\/b>",
                survey_disabled_Mobile: "This survey is not available via mobile.",
                survey_disabled_Private: "Please login to view this survey.",
                survey_disabled_Expired: "This survey is no longer available.",
                confirmRedo: "Would you like to retake the assessment?",
                back: "Back",
                startSurvey: "Start Survey",
                True: "True",
                False: "False",
                Answer: "Answer",
                Settings: "Settings",
                Feedback: "Feedback",
                accessibility: "Accessibility Settings",
                resetPref: "Reset",
                titleSize: "Title Size",
                incSpac: "Increase Spacing",
                font: "Font",
                "default": "Default",
                theme: "Theme",
                prevQuestion: "Previous Question",
                nextQuestion: "Next Question",
                ClickToView: "Click to view/edit the question",
                SaveAttempts: "Save Attempts",
                ToggleDesc: "Toggle Description",
                ViewQns: "Toggle Questions",
                MagnifyImageHeader: "Magnify Images",
                DiscoveryInstruction: "Enter your SwiftAssess URL"
            },
            ar: {
                OnlineMode: " ",
                ACUMode: "ACU ",
                IPHost: " IP  ACU",
                offlineLogin: "   ",
                ChangeLang: " ",
                questions: "",
                Required: "",
                DropCompleted: "         ",
                DropExamClosed: "         ",
                DropPaper: "          ",
                DropSession: "          ",
                StartTimeDidNotCome: "     ",
                PrvsResSynced: "     ",
                ExamFinishedMessage: "   ",
                Done: "",
                ExamAlreadyTaken: "     ",
                PracticeEnded: "   ",
                ExamTimeEnded: "   ",
                NotAssigned: "    ",
                SolveAllQtns: "        ",
                QtnsNotSeenLater: "       ",
                QtnsNotSeenNext: "       ",
                QtnsNotSeenCur: "       ",
                QtnsNotSeenPrev: "         ",
                ConfirmLeaveSec: "         ",
                SolveAllQsInSec: "        ",
                MarkForReview: "  ",
                ToggleCalc: "/  ",
                InvertColors: "  ",
                IncreaseFont: "  ",
                DecreaseFont: "  ",
                ToggleMedia: "/   ",
                ToggleDesc: "/  ",
                question: "",
                Backtrack: " ",
                Calculator: " ",
                Section: "",
                ReqAllQs: "   ",
                ReqQbyQ: "     ",
                BackTrackNotAllowed: "   ",
                BackTrackAllowed: "   ",
                NotAllowed: " ",
                Allowed: "",
                ExamEndDatePassed: "      ",
                ACUExamKey: "  ",
                ACUMarkedPaper: "        ",
                ACUExamAlreadyComplete: "     ",
                ACUActiveSessionExists: "      ",
                ACUKeyInvalid: "   .   : ",
                qtnsNotVisited: "         ",
                username: " ",
                password: " ",
                login: " ",
                copyright: "   &copy; ",
                Exams: "",
                Practices: "",
                Surveys: "",
                CacheSync: " ",
                Help: "",
                Refresh: "",
                Logout: "",
                New: "",
                Resume: "",
                No: " ",
                Available: "",
                Duration: "",
                TimeElapsed: " ",
                Questions: "",
                QuestionsRemaining: " ",
                TotalMarks: " ",
                Start: "",
                Marks: "",
                Submit: "",
                Save: "",
                Clear: "",
                mfr: " ",
                TimeSpent: " ",
                Score: "",
                Result: "",
                QuestionTitle: " ",
                Mark: "",
                TotalMarks: " ",
                Passed: "",
                Failed: "",
                passwordRequired: "  ",
                enterPassword: "    ",
                OK: "",
                Cancel: "",
                Success: " ",
                Warning: "",
                Information: "",
                Error: "",
                submissionComplete: "   .",
                submitconfirm_errorreport: "   .<br><br>              .",
                submitconfirm_manual: "   .       .",
                error_submit: "    .<br><br>         .",
                retake_assessment: "    ",
                error_submit_cache: "  .      ",
                questionOrder: "",
                popHelpTitle: "",
                questionSubmit_Fail: "",
                qAnswerIsNotCorrect: "",
                confirmSubmit: "",
                exitNoResume: "",
                exitNoResume: "",
                exitResume: "",
                confirmClear: "     ",
                confirmnext_backtrack: "              . ",
                timeWarning: "      <b>@1 <\/b>.         .",
                qTimeIsUp: "",
                questionSubmit_Success: "   ",
                qAttemptsIsUp: "      ",
                offlineSubmission: "",
                default_SubmitConfirm: "      .                . ",
                markReview_SubmitConfirm: "               \n\n                . ",
                unsolved_SubmitConfirm: "            \n\n               . ",
                validate_Matching: "          ",
                validate_ShortAnswer: "      ",
                validate_ShortAnswer_Numeric: "     .  ",
                validate_TrueOrFalse: "   .",
                validate_HandWriting: "    .",
                validate_Essay: "     .",
                validate_FIB: "      .",
                validate_FFL: "     .",
                error_loadexam: "      .       .",
                logout_confirm: "      ",
                nonetwork: "    .       .",
                wrong_password: "  .",
                wrong_login: "      ",
                invalid_license: "        .         ",
                trial_expired: "    .     ",
                access_denied: "     ",
                surveyRequiredSubmit: "       .",
                qRequired: "  ",
                name: "",
                email: " ",
                enterSurveyDetails: "      .",
                surveyDetailsRequired: " ",
                surveySubmitSuccess: "  ",
                surveyConfirmSubmit: "      . ",
                surveyFinishMessage_Head: "   .",
                FinishMessage_Desc: "<b> <\/b>",
                survey_disabled_Mobile: "      .",
                survey_disabled_Private: "     .",
                survey_disabled_Expired: "    .",
                confirmRedo: "    ",
                back: "",
                startSurvey: " ",
                True: "",
                False: "",
                Answer: "",
                Settings: "",
                Feedback: "Feedback",
                accessibility: " ",
                resetPref: " ",
                titleSize: " ",
                incSpac: " ",
                font: " ",
                "default": "",
                theme: " ",
                prevQuestion: " ",
                nextQuestion: " ",
                ClickToView: " / ",
                SaveAttempts: " ",
                ToggleDesc: "/  ",
                ViewQns: " ",
                MagnifyImageHeader: " ",
                DiscoveryInstruction: "  SwiftAssess  :"
            }
        },
        channel: "",
        res_Uri: "https://exam.seu.edu.sa/",
        api: "https://sapi.seu.edu.sa/"
    },
    {
        get: n
    }
}
]).factory("LS", ["User", "Config", "$http", function(n, t, i) {
    function e(t) {
        var i, f, u, e;
        if (r() != undefined) {
            for (i = r(),
            i = JSON.parse(i.toString()),
            f = -1,
            u = 0; u < i.answers.length; ++u)
                if (e = i.answers[u].qid,
                e == t) {
                    f = u;
                    break
                }
            f != -1 && (i.answers.splice(f, 1),
            localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] = JSON.stringify(i))
        }
    }
    function o(t, i, u, f, e, o, s, h, c, l, a, v, y, p, w, b, k, d) {
        var g, nt, tt, it, rt;
        if (r() != undefined) {
            for (g = r(),
            g = JSON.parse(g.toString()),
            nt = -1,
            tt = 0; tt < g.answers.length; ++tt)
                if (it = g.answers[tt].qid,
                rt = g.answers[tt].sid,
                it == i && rt == w) {
                    nt = tt;
                    break
                }
            nt != -1 ? (g.answers[nt].pass = f,
            g.answers[nt].marks = e,
            g.answers[nt].qPoints = o,
            g.answers[nt].answerTime = (new Date).toUTCString(),
            g.answers[nt].attempts = s,
            g.answers[nt].answer = c != undefined ? c : undefined,
            g.answers[nt].answerID = l != undefined ? l : undefined,
            g.answers[nt].simDetails = a != undefined ? a : [],
            g.answers[nt].dndDetails = v != undefined ? v : [],
            g.answers[nt].canvasFinalAnswer = y != undefined ? y : undefined,
            g.answers[nt].IsPartial = p != undefined ? p : !0) : g.answers.push({
                qtype: t,
                qid: i,
                sid: w,
                spoints: b,
                sorder: k,
                resultId: u,
                pass: f,
                marks: e,
                qPoints: o,
                answerTime: (new Date).toUTCString(),
                attempts: s,
                order: h,
                answer: c != undefined ? c : undefined,
                answerID: l != undefined ? l : undefined,
                simDetails: a != undefined ? a : [],
                dndDetails: v != undefined ? v : [],
                canvasFinalAnswer: y != undefined ? y : undefined,
                IsPartial: p != undefined ? p : !0,
                SectionID: d
            });
            localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] = JSON.stringify(g)
        } else
            g = n.get().sid ? {
                uname: n.get().user,
                name: n.get().name,
                email: n.get().email,
                route: n.get().host,
                srvy: n.get().sid,
                rID: n.get().resultID,
                submitted: !1,
                timeSpent: 0,
                answers: [{
                    qtype: t,
                    qid: i,
                    resultId: u,
                    pass: f,
                    marks: e,
                    answerTime: (new Date).toUTCString(),
                    attempts: s,
                    order: h,
                    answer: c != undefined ? c : undefined,
                    answerID: l != undefined ? l : undefined,
                    simDetails: a != undefined ? a : [],
                    dndDetails: v != undefined ? v : [],
                    canvasFinalAnswer: y != undefined ? y : undefined,
                    IsPartial: p != undefined ? p : !0
                }]
            } : {
                uname: n.get().user,
                route: n.get().host,
                asmnt: n.get().eid,
                rID: n.get().resultID,
                submitted: !1,
                timeSpent: 0,
                answers: [{
                    qtype: t,
                    qid: i,
                    sid: w,
                    spoints: b,
                    sorder: k,
                    resultId: u,
                    pass: f,
                    marks: e,
                    answerTime: (new Date).toUTCString(),
                    attempts: s,
                    order: h,
                    answer: c != undefined ? c : undefined,
                    answerID: l != undefined ? l : undefined,
                    simDetails: a != undefined ? a : [],
                    dndDetails: v != undefined ? v : [],
                    canvasFinalAnswer: y != undefined ? y : "",
                    IsPartial: p != undefined ? p : !0
                }]
            },
            localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] = JSON.stringify(g)
    }
    function s(i) {
        var r;
        r = n.get().sid ? {
            uname: n.get().user,
            route: n.get().host,
            name: n.get().name,
            email: n.get().email,
            srvy: n.get().sid,
            rID: n.get().resultID,
            ACUEnabled: t.get().channel == "ACU" || t.get().channel == "AppACU" ? !0 : !1,
            ACUHost: t.get().channel == "ACU" ? window.location.host : null,
            submitted: !1,
            timeSpent: 0,
            answers: [],
            endDate: null,
            startDate: i
        } : {
            uname: n.get().user,
            route: n.get().preview != undefined ? host != undefined ? host : window.location.host.split(".")[0] : n.get().host == undefined ? null : n.get().host,
            asmnt: n.get().eid,
            rID: n.get().resultID,
            ACUEnabled: t.get().channel == "ACU" || t.get().channel == "AppACU" ? !0 : !1,
            ACUHost: t.get().channel == "ACU" ? window.location.host : null,
            adhoc_score: n.get().adhoc_score != undefined ? n.get().adhoc_score : null,
            adhoc_questions_count: n.get().adhoc_questions_count != undefined ? n.get().adhoc_questions_count : null,
            submitted: !1,
            timeSpent: 0,
            answers: [],
            endDate: null,
            session: n.get().session,
            pwd: n.get().pass,
            startDate: i
        };
        localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] = JSON.stringify(r)
    }
    function h(t, i) {
        if (r() != undefined) {
            var u = r();
            u = JSON.parse(u.toString());
            u.submitted = t;
            u.endDate = (new Date).toUTCString();
            u.caller = i;
            localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] = JSON.stringify(u)
        }
    }
    function c(t, i, u) {
        if (r() != undefined) {
            var f = r();
            f = JSON.parse(f.toString());
            i ? f.questionsTimers = u : f.timeSpent = t;
            localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] = JSON.stringify(f)
        }
    }
    function r() {
        return exam != undefined ? localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid] : undefined
    }
    function f() {
        exam != undefined && delete localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid]
    }
    function u(n) {
        isSynced = n
    }
    function l(r, f) {
        var o, s, e;
        if (f.indexOf("sa-CacheObj") > -1)
            if (JSON.parse(localStorage[f].toString()).srvy == undefined)
                if (JSON.parse(localStorage[f].toString()).rID != null && JSON.parse(localStorage[f].toString()).uname != "")
                    if (o = localStorage[f].toString(),
                    t.get().channel == "ACU" || t.get().channel == "AppACU")
                        s = HttpScheme + "://" + localStorage.ACUhost + "/_Hub/Cache/Submit",
                        i({
                            method: "POST",
                            url: s,
                            data: {
                                jsonData: o
                            },
                            headers: {
                                "Content-Type": "application/json"
                            }
                        }).success(function(i) {
                            i = JSON.parse(i);
                            delete localStorage[f];
                            i == "1" ? (delete localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid],
                            n.set({
                                user: n.get().user,
                                GoToRes: !0
                            })) : i == "2" ? toast("info", t.get().localResources[localStorage.lang].PrvsResSynced, t.get().localResources[localStorage.lang].Information) : (i == "-1" ? toast("warning", t.get().localResources[localStorage.lang].DropSession, t.get().localResources[localStorage.lang].Warning) : i == "-2" ? toast("warning", t.get().localResources[localStorage.lang].DropPaper, t.get().localResources[localStorage.lang].Warning) : i == "-3" ? toast("warning", t.get().localResources[localStorage.lang].DropExamClosed, t.get().localResources[localStorage.lang].Warning) : i == "-4" && toast("warning", t.get().localResources[localStorage.lang].DropCompleted, t.get().localResources[localStorage.lang].Warning),
                            delete localStorage["sa-CacheObj:" + n.get().user + "_" + n.get().eid],
                            n.set({
                                user: n.get().user,
                                GoToRes: !1
                            }));
                            u(!1)
                        }).error(function() {
                            toast("warning", t.get().localResources[localStorage.lang].error_submit, t.get().localResources[localStorage.lang].Warning);
                            u(!0)
                        });
                    else {
                        localStorage.sa_host != undefined && localStorage.sa_host != null && localStorage.sa_host != "" && (e = JSON.parse(localStorage.sa_host),
                        t.get().res_Uri = e.res_URI,
                        t.get().api = e.API,
                        host = e.HOST);
                        t.get().channel == "AppACU" && localStorage.ACUhost == undefined && (t.get().channel = "App");
                        var s = t.get().api + "Assessments/Submit/Offline"
                          , h = CryptoJS.enc.Utf8.parse("7061737323313233")
                          , c = CryptoJS.enc.Utf8.parse("7061737323313233");
                        o = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(o), h, {
                            keySize: 16,
                            iv: c,
                            mode: CryptoJS.mode.CBC,
                            padding: CryptoJS.pad.Pkcs7
                        }).toString();
                        i({
                            method: "POST",
                            url: s,
                            data: {
                                jsonData: o
                            },
                            headers: {
                                "Content-Type": "application/json"
                            }
                        }).success(function() {
                            delete localStorage[f];
                            toast("info", "Previous Results have been synced successfully.", t.get().localResources[localStorage.lang].Information);
                            u(!1)
                        }).error(function() {
                            toast("warning", t.get().localResources[localStorage.lang].error_submit, t.get().localResources[localStorage.lang].Warning);
                            u(!0)
                        })
                    }
                else
                    delete localStorage[f];
            else
                localStorage.sa_host != undefined && localStorage.sa_host != null && localStorage.sa_host != "" && t.get().channel != "ACU" && t.get().channel != "AppACU" && (e = JSON.parse(localStorage.sa_host),
                t.get().res_Uri = e.res_URI,
                t.get().api = e.API,
                host = e.HOST),
                i({
                    method: "POST",
                    url: t.get().api + "Surveys/Submit/Offline",
                    data: JSON.stringify({
                        jsonData: localStorage[f].toString()
                    }),
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).success(function() {
                    delete localStorage[f];
                    toast("info", "Previous Results have been synced successfully.", t.get().localResources[localStorage.lang].Information);
                    u(!1)
                }).error(function() {
                    return toast("warning", t.get().localResources[localStorage.lang].error_submit, t.get().localResources[localStorage.lang].Warning),
                    !0
                })
    }
    function a() {
        var n = !1;
        return navigator.onLine && (n = !0),
        n
    }
    function v() {
        f();
        n.set({
            user: n.get().user,
            host: n.get().host
        })
    }
    return {
        clearQLS: e,
        setLS: o,
        setLSDefault: s,
        setLSStatus: h,
        setLSTimer: c,
        getLS: r,
        clrLS: f,
        syncOffline: l,
        checkConnection: a,
        reset: v
    }
}
]);
angular.module("swiftassessMobile.login", ["ui.router", "swiftassessMobile.services"]).config(["$stateProvider", function(n) {
    n.state("login", {
        url: "/login",
        views: {
            main: {
                controller: "LoginCtrl",
                templateUrl: "app/login/login.tpl.html"
            }
        },
        data: {
            pageTitle: "Login"
        }
    })
}
]).controller("LoginCtrl", ["$scope", "User", "Config", "$state", "$stateParams", "$http", "$modal", function(n, t, i, r, u, f, e) {
    function h() {
        i.get().channel == "AppACU" ? ($("#btnACUMode").css("background-color", "#5ba5cb"),
        $("footer").css("background-color", "#285d7d"),
        $("#btnLang").css("background-color", "rgb(61,76,89)"),
        $("#backgroundApp").css("background", "linear-gradient(rgba(0,0,0,0.2),rgba(0,0,0,0.3)),white")) : i.get().channel == "ACU" || ($("#btnACUMode").css("background-color", "#285d7d"),
        $("footer").css("background-color", "#5ba5cb"),
        $("#btnLang").css("background-color", "#3983b1"),
        $("#backgroundApp").css("background", "linear-gradient(rgba(0,0,0,0.1),rgba(0,0,0,0.2)),white"))
    }
    var o, s;
    n.channel = i.get().channel;
    n.resources = i.get().localResources[localStorage.lang];
    h();
    getParameterByName("sso") != undefined && getParameterByName("sso") == !0 && getParameterByName("uname") && eid != undefined ? (t.set({
        user: getParameterByName("uname"),
        host: host != undefined ? host : getParameterByName("host"),
        eid: eid
    }),
    r.go("navigation"),
    localStorage.user = JSON.stringify(t.get())) : getParameterByName("uname") != undefined && getParameterByName("eid") != undefined && getParameterByName("uname") != "" && getParameterByName("eid") != "" ? r.go("viewer") : typeof offLoad == "undefined" && getParameterByName("preview") != "yes" && (getParameterByName("sid") == "" || t.get().wrongSurvey) ? t.get().user != undefined || localStorage.user != undefined ? (i.get().channel != "ACU" ? (o = JSON.parse(localStorage.user),
    delete o.eid,
    eid && (o.eid = eid),
    t.set(o)) : t.set(JSON.parse(localStorage.user)),
    r.go("navigation")) : (localStorage.sa_host != undefined && localStorage.sa_host != null && localStorage.sa_host != "" && i.get().channel != "ACU" && i.get().channel != "AppACU" && (s = JSON.parse(localStorage.sa_host),
    i.get().res_Uri = s.res_URI,
    i.get().api = s.API,
    host = s.HOST),
    n.resources = i.get().localResources[localStorage.lang],
    n.$parent.throbber = !1,
    n.Username = "",
    n.Password = "",
    n.ACUExamKey = "",
    n.changableHost = host != undefined,
    n.login = function() {
        if (i.get().channel != "ACU" && i.get().channel != "AppACU") {
            if (n.Username == "" || n.Password == "")
                return;
            n.$parent.throbber = !0;
            var u = CryptoJS.enc.Utf8.parse("7061737323313233")
              , e = CryptoJS.enc.Utf8.parse("7061737323313233")
              , o = JSON.parse(localStorage.sa_host).HOST
              , s = JSON.stringify({
                un: n.Username,
                pwd: n.Password,
                host: o
            })
              , h = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(s), u, {
                keySize: 16,
                iv: e,
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            });
            f({
                method: "POST",
                url: i.get().api + "V2.0/users/auth",
                data: {
                    jsonData: h.toString()
                },
                headers: {
                    "Content-Type": "application/json"
                }
            }).success(function(i) {
                i = JSON.parse(i);
                i == "-1" ? (n.$parent.throbber = !1,
                toast("warning", n.resources.wrong_login, n.resources.Warning)) : i == "-2" ? (n.$parent.throbber = !1,
                toast("warning", n.resources.invalid_license, n.resources.Warning)) : i == "-3" ? (n.$parent.throbber = !1,
                toast("warning", n.resources.trial_Expired, n.resources.Warning)) : ($("input").blur(),
                window.scrollTo(1, 1),
                setTimeout(function() {
                    window.scrollTo(0, 0);
                    t.set({
                        user: i.split("|")[0],
                        host: i.split("|")[1]
                    });
                    localStorage.user = JSON.stringify(t.get());
                    eid == undefined ? r.go("navigation") : (r.go("navigation"),
                    t.set({
                        user: i.split("|")[0],
                        host: i.split("|")[1],
                        eid: eid
                    }),
                    localStorage.user = JSON.stringify(t.get()))
                }, 10))
            }).error(function() {
                n.$parent.throbber = !1;
                toast("warning", n.resources.nonetwork, n.resources.Warning)
            })
        } else {
            if (n.ACUExamKey == "")
                return;
            localStorage.ACUhost = window.location.host;
            i.get().channel == "AppACU" && (localStorage.ACUhost = n.IPAddress);
            n.$parent.throbber = !0;
            f({
                method: "POST",
                url: HttpScheme + "://" + localStorage.ACUhost + "/_hub/User/Auth",
                data: {
                    jsonData: JSON.stringify({
                        pwd: n.ACUExamKey
                    })
                },
                headers: {
                    "Content-Type": "application/json"
                }
            }).success(function(i) {
                connected = !0;
                n.$parent.throbber = !1;
                i = JSON.parse(i);
                i == "-1" || i == "-3" ? toast("warning", n.resources.ACUKeyInvalid + n.ACUExamKey, n.resources.Warning) : i == "-2" ? toast("warning", n.resources.ACUActiveSessionExists, n.resources.Warning) : i == "-4" ? toast("warning", n.resources.ACUExamAlreadyComplete, n.resources.Warning) : i == "-5" ? toast("warning", n.resources.ACUMarkedPaper, n.resources.Warning) : i == "-6" ? toast("warning", n.resources.ExamTimeEnded, n.resources.Warning) : (i = JSON.parse(i),
                $("input").blur(),
                window.scrollTo(1, 1),
                setTimeout(function() {
                    window.scrollTo(0, 0);
                    t.set({
                        user: i.un,
                        full: i.fullName,
                        pass: i.pwd,
                        session: i.session,
                        eid: i.eid,
                        host: i.host != undefined ? i.host : null
                    });
                    localStorage.user = JSON.stringify(t.get());
                    localStorage.tempAsmntInfo = i.payload;
                    r.go("navigation")
                }, 10))
            }).error(function() {
                n.$parent.throbber = !1;
                toast("warning", n.resources.nonetwork, n.resources.Warning)
            })
        }
    }
    ) : ((getParameterByName("locale") != "" || getParameterByName("lang") != null && getParameterByName("lang") != undefined) && (localStorage.lang = getParameterByName("lang") != null && getParameterByName("lang") != undefined ? getParameterByName("lang") : getParameterByName("locale") != null && getParameterByName("locale") != undefined ? getParameterByName("locale") : "en",
    n.$parent.lang = localStorage.lang,
    n.$parent.dir = localStorage.lang != "ar" ? "ltr" : "rtl",
    r.transitionTo(r.current, u, {
        reload: !0,
        inherit: !1,
        notify: !0
    })),
    r.go("viewer"));
    n.changeLang = function() {
        localStorage.lang = localStorage.lang == "en" ? "ar" : "en";
        n.$parent.lang = localStorage.lang;
        n.$parent.dir = localStorage.lang != "ar" ? "ltr" : "rtl";
        r.transitionTo(r.current, u, {
            reload: !0,
            inherit: !1,
            notify: !0
        })
    }
    ;
    n.openHost = function() {
        var n = e.open({
            templateUrl: "settingsModal.html",
            controller: HostModalCtrl,
            backdrop: "static",
            resolve: {
                url: function() {
                    return i.get().res_Uri
                }
            }
        });
        n.result.then(function() {}, function() {})
    }
    ;
    n.exitSecureBrowser = function() {
        document.location = "SBXCMD:rldbxb=1"
    }
    ;
    n.toggleACUMode = function() {
        i.get().channel = i.get().channel == "App" ? "AppACU" : "App";
        n.channel = i.get().channel;
        h()
    }
}
]);
HostModalCtrl = ["$scope", "$modalInstance", "Config", "url", "$http", function(n, t, i, r, u) {
    function f(r, u) {
        r.res_URI = u;
        localStorage.sa_host = JSON.stringify(r);
        i.get().res_Uri = u;
        i.get().api = r.API;
        t.close(!0);
        toast("info", "You are now connected to " + u, n.resources.Feedback, 0)
    }
    function e() {
        t.close(!0);
        toast("warning", "There is an issue connecting to the specified domain. Please contact an administrator.", n.resources.Warning)
    }
    n.resources = i.get().localResources[localStorage.lang];
    n.url = r != null && r != undefined && r != "" ? r.replace("http://", ".").replace("https://", ".") : "";
    n.host = {
        text: localStorage != null && localStorage != undefined && localStorage.sa_host != null & localStorage.sa_host != undefined && localStorage.sa_host != "" && localStorage.sa_host != window.location.host && angular.fromJson(localStorage.sa_host).res_URI != null && angular.fromJson(localStorage.sa_host).res_URI != undefined && angular.fromJson(localStorage.sa_host).res_URI != "" ? angular.fromJson(localStorage.sa_host).res_URI.replace("http://", "").replace("https://", "") : localStorage.sa_host != window.location.host ? "" : window.location.host
    };
    n.ok = function() {
        var i, t;
        n.host.text == "localhost:8242" ? (n.host.text = "http://192.168.1.4/",
        i = {
            data: {
                API: "http://192.168.1.4:2234/",
                HOST: ""
            },
            status: 200,
            config: {
                method: "GET",
                transformRequest: [null],
                transformResponse: [null],
                url: "http://localhost:8242/app/discovery",
                headers: {
                    Accept: "application/json, text/plain, */*"
                }
            },
            statusText: "OK"
        },
        f(i.data, n.host.text)) : (t = n.host.text.replace("http://", "").replace("https://", "").replace("/login", ""),
        t = "https://" + t + "/app/discovery",
        u({
            method: "GET",
            url: t
        }).then(function(t) {
            t.data != null && t.data != undefined && t.data.API != null && t.data.API != undefined & t.data.API != "" ? f(t.data, n.host.text) : e(t)
        }, function(n) {
            e(n)
        }))
    }
    ;
    n.cancel = function() {
        t.dismiss("cancel")
    }
}
];
angular.module("swiftassessMobile.navigation", ["ui.router", "swiftassessMobile.services", "ui.bootstrap", "ngSanitize"]).config(["$stateProvider", function(n) {
    n.state("navigation", {
        url: "/",
        views: {
            main: {
                controller: "NavigationCtrl",
                templateUrl: "app/navigation/navigation.tpl.html"
            }
        },
        data: {
            pageTitle: "Navigation "
        }
    })
}
]).controller("NavigationCtrl", ["$scope", "User", "Config", "$state", "$modal", "$http", "LS", function(n, t, i, r, u, f, e) {
    if (getParameterByName("sso") != undefined && getParameterByName("sso") == !0 && getParameterByName("uname") && eid != undefined && (t.set({
        user: getParameterByName("uname"),
        host: host != undefined ? host : getParameterByName("host"),
        eid: eid
    }),
    localStorage.user = JSON.stringify(t.get())),
    t.get().user == undefined && localStorage.user == undefined)
        r.go("login");
    else {
        if (t.get().user == undefined && t.set(JSON.parse(localStorage.user)),
        localStorage.sa_host != undefined && localStorage.sa_host != null && localStorage.sa_host != "" && i.get().channel != "ACU" && i.get().channel != "AppACU") {
            var o = JSON.parse(localStorage.sa_host);
            i.get().res_Uri = o.res_URI;
            i.get().api = o.API;
            host = o.HOST
        }
        n.resources = i.get().localResources[localStorage.lang];
        n.user = t.get().user;
        n.host = t.get().host;
        n.eid = t.get().eid;
        n.api = i.get().api;
        n.resumed = !1;
        n.dynamicPopover = t.get().full != undefined ? t.get().full : t.get().user;
        n.dynamicPopoverTitle = t.get().full != undefined ? t.get().full : t.get().user;
        n.key = CryptoJS.enc.Utf8.parse("7061737323313233");
        n.iv = CryptoJS.enc.Utf8.parse("7061737323313233");
        n.checkPending = function() {
            for (var n in localStorage)
                if (n.indexOf("sa-CacheObj") > -1)
                    return !0;
            return !1
        }
        ;
        n.pendingSync = n.checkPending();
        n.nav = "Exams";
        n.choice = 1;
        n.ExamIndex = 0;
        n.choose = function(t) {
            var r, i;
            if (n.nav = t,
            n.items = n.allItems[t],
            n.currentList = t,
            n.eid) {
                for (r = !1,
                i = 0; i < n.allItems[t].length; i++)
                    n.allItems[t][i].ID == n.eid && (n.displayAssessmentInfo(i),
                    r = !0);
                r || n.displayAssessmentInfo(-1)
            } else
                n.displayAssessmentInfo(0)
        }
        ;
        n.currentTime = Date.now();
        n.parseInt = function(n) {
            return parseInt(n)
        }
        ;
        n.items = [];
        n.currentList = "Exams";
        n.displayAssessmentInfo = function(t) {
            n.pendingSync ? $(".card").hide() : $(".card").show();
            t == -1 && (n.currentItem = {},
            n.selectedIndex = t,
            n.items = []);
            n.items.length != 0 && (n.currentItem = n.items[t],
            n.selectedIndex = t,
            setTimeout(function() {
                $(".item-description").readmore("destroy");
                $(".item-description").readmore({
                    maxHeight: 200
                })
            }, 10))
        }
        ;
        n.displayAssessmentInfo(0);
        n.showD = function() {
            var t = document.createElement("input");
            t.setAttribute("value", " ");
            document.body.appendChild(t);
            t.select();
            document.execCommand("copy");
            document.body.removeChild(t);
            (i.get().channel == "App" || i.get().channel == "AppACU" && localStorage.ACUhost != undefined) && n.currentItem.IsSecure == !0 ? Platform == "Android" ? (LockTask.startLockTask(),
            h()) : Platform == "IOS" ? window.check("", function(t) {
                t ? h() : (init_AppLock(),
                toast("warning", "Please enable Lock in your app in order to take the exam.", n.resources.Warning))
            }) : h() : (i.get().channel == "AppACU" && localStorage.ACUhost == undefined && (i.get().channel = "App",
            n.channel = i.get().channel),
            h())
        }
        ;
        n.logout = function(u) {
            (u || confirm(n.resources.logout_confirm)) && ((i.get().channel == "ACU" || i.get().channel == "AppACU") && localStorage.ACUhost != undefined ? (delete localStorage.tempAsmntInfo,
            f({
                method: "POST",
                url: HttpScheme + "://" + localStorage.ACUhost + "/_hub/User/Logout",
                data: {
                    jsonData: JSON.stringify({
                        un: t.get().user,
                        pwd: t.get().pass,
                        eid: t.get().eid,
                        session: t.get().session
                    })
                },
                headers: {
                    "Content-Type": "application/json"
                }
            }).success(function(n) {
                connected = !0;
                n && (t.set({}),
                delete localStorage.user,
                r.go("login"),
                document.location = "SBXCMD:rldbxb=1",
                (i.get().channel == "App" || i.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && dismiss_AppLock()))
            }).error(function() {
                n.$parent.throbber = !1;
                toast("warning", n.resources.nonetwork, n.resources.Warning)
            })) : (i.get().channel == "AppACU" && localStorage.ACUhost == undefined && (i.get().channel = "App",
            n.channel = i.get().channel),
            t.set({}),
            delete localStorage.user,
            r.go("login"),
            i.get().channel == "App" || i.get().channel == "AppACU" ? Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && dismiss_AppLock() : document.location = "SBXCMD:rldbxb=1"))
        }
        ;
        n.$watch(function() {
            return isSynced
        }, function(t) {
            (t == "false" || t == !1) && (n.pendingSync = isSynced,
            n.reload())
        });
        n.sync = function() {
            n.$parent.throbber = !0;
            for (var t in localStorage)
                e.syncOffline(localStorage[t], t);
            n.reload()
        }
        ;
        n.reload = function() {
            var e, o;
            if ((i.get().channel == "ACU" || i.get().channel == "AppACU") && localStorage.ACUhost != undefined)
                t.get().GoToRes == "true" ? (t.set({}),
                delete localStorage.user,
                toast("info", n.resources.PrvsResSynced, n.resources.Information),
                r.go("results")) : t.get().GoToRes == "false" ? (t.set({}),
                delete localStorage.user,
                r.go("login")) : localStorage.tempAsmntInfo == undefined ? f({
                    method: "POST",
                    url: HttpScheme + "://" + localStorage.ACUhost + "/_hub/Assessments/Status",
                    data: {
                        jsonData: JSON.stringify({
                            un: t.get().user,
                            pwd: t.get().pass,
                            eid: t.get().eid,
                            session: t.get().session
                        })
                    },
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).success(function(i) {
                    connected = !0;
                    var u = JSON.parse(i);
                    u == "0" ? (delete localStorage.user,
                    t.set({}),
                    n.$parent.throbber = !1,
                    toast("success", n.resources.submitconfirm_manual, n.resources.Success),
                    r.go("results")) : (c(u),
                    localStorage.tempAsmntInfo = u)
                }).error(function() {
                    n.$parent.throbber = !1;
                    toast("warning", n.resources.nonetwork, n.resources.Warning)
                }) : c(localStorage.tempAsmntInfo);
            else {
                i.get().channel == "AppACU" && localStorage.ACUhost == undefined && (i.get().channel = "App",
                n.channel = i.get().channel);
                n.$parent.throbber = !0;
                var u = !1
                  , e = JSON.stringify({
                    un: t.get().user,
                    route: t.get().host,
                    channel: i.get().channel
                })
                  , o = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(e), n.key, {
                    keySize: 16,
                    iv: n.iv,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });
                f({
                    method: "POST",
                    url: i.get().api + "V2.0/Assessments/me",
                    data: {
                        jsonData: o.toString()
                    },
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).success(function(t) {
                    u ? n.$parent.throbber = !1 : u = !u;
                    var i = JSON.parse(JSON.parse(t));
                    n.allItems != undefined && (i.Surveys = n.allItems.Surveys);
                    n.allItems = n.pendingSync ? [] : i;
                    n.items = n.allItems[n.nav];
                    n.items && n.items.length > 0 && n.choose(n.nav);
                    n.allItems.isUrgent = {};
                    n.allItems.isUrgent.Exams = s(n.allItems.Exams);
                    n.allItems.isUrgent.Practices = s(n.allItems.Practices);
                    n.allItems.isUrgent.Surveys = s(n.allItems.Surveys);
                    n.eid && ($.grep(n.allItems.Exams, function(t) {
                        return n.eid == t.ID
                    }).length != 0 ? n.eidType = "Exams" : $.grep(n.allItems.Practices, function(t) {
                        return n.eid == t.ID
                    }).length != 0 ? n.eidType = "Practices" : $.grep(n.allItems.Surveys, function(t) {
                        return n.eid == t.ID
                    }).length != 0 && (n.eidType = "Surveys"),
                    n.eidType && n.choose(n.eidType))
                }).error(function() {
                    n.$parent.throbber = !1;
                    toast("warning", n.resources.nonetwork, n.resources.Warning)
                });
                e = JSON.stringify({
                    un: t.get().user,
                    route: t.get().host
                });
                o = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(e), n.key, {
                    keySize: 16,
                    iv: n.iv,
                    mode: CryptoJS.mode.CBC,
                    padding: CryptoJS.pad.Pkcs7
                });
                f({
                    method: "POST",
                    url: i.get().api + "V2.0/Surveys/me",
                    data: {
                        jsonData: o.toString()
                    },
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).success(function(t) {
                    u ? n.$parent.throbber = !1 : u = !u;
                    var i = JSON.parse(JSON.parse(t));
                    n.allItems != undefined && (i.Exams = n.allItems.Exams,
                    i.Practices = n.allItems.Practices);
                    n.allItems = i;
                    n.items = n.allItems[n.nav];
                    n.items && n.items.length > 0 && n.choose(n.nav);
                    n.allItems.isUrgent = {};
                    n.allItems.isUrgent.Exams = s(n.allItems.Exams);
                    n.allItems.isUrgent.Practices = s(n.allItems.Practices);
                    n.allItems.isUrgent.Surveys = s(n.allItems.Surveys);
                    n.eid && ($.grep(n.allItems.Exams, function(t) {
                        return n.eid == t.ID
                    }).length != 0 ? n.eidType = "Exams" : $.grep(n.allItems.Practices, function(t) {
                        return n.eid == t.ID
                    }).length != 0 ? n.eidType = "Practices" : $.grep(n.allItems.Surveys, function(t) {
                        return n.eid == t.ID
                    }).length != 0 && (n.eidType = "Surveys"),
                    n.eidType && n.choose(n.eidType))
                }).error(function() {
                    n.$parent.throbber = !1;
                    toast("warning", n.resources.nonetwork, n.resources.Warning)
                })
            }
        }
        ;
        n.reload();
        function s(t) {
            if (t == undefined || t == null)
                return !1;
            for (var i = 0; i < t.length; i++)
                if (t[i].EndDate - n.currentTime < 864e5 && !t[i].IsSecure && t[i].EndDate != 0)
                    return !0;
            return !1
        }
        function c(t) {
            var i = JSON.parse(t);
            n.allItems = {
                Exams: [],
                Practices: [],
                Surveys: []
            };
            n.pendingSync ? n.allItems = [] : n.allItems.Exams.push(i);
            n.items = n.allItems[n.nav];
            n.items && n.items.length > 0 && n.choose(n.nav);
            n.allItems.isUrgent = {};
            n.allItems.isUrgent.Exams = s(n.allItems.Exams);
            n.eidType = "Exams";
            n.choose(n.eidType);
            n.$parent.throbber = !1
        }
        function l() {
            f({
                method: "POST",
                url: HttpScheme + "://" + localStorage.ACUhost + "/_hub/Examinee/Start",
                data: {
                    jsonData: JSON.stringify({
                        un: t.get().user,
                        pwd: t.get().pass,
                        eid: t.get().eid,
                        session: t.get().session,
                        resumed: n.resumed
                    })
                },
                headers: {
                    "Content-Type": "application/json"
                }
            }).success(function(t) {
                t = JSON.parse(t);
                t == "0" ? r.go("viewer") : t == "-3" ? toast("warning", n.resources.StartTimeDidNotCome, n.resources.Warning) : (t == "-2" ? toast("warning", n.resources.ACUKeyInvalid, n.resources.Warning) : t == "-1" && toast("warning", n.resources.ExamTimeEnded, n.resources.Warning),
                n.logout(!0))
            }).error(function() {
                n.$parent.throbber = !1;
                toast("warning", n.resources.nonetwork, n.resources.Warning)
            })
        }
        function h() {
            var e, f;
            n.currentItem.Password != null && n.currentItem.Password != "" && n.currentItem.Password != undefined ? (e = u.open({
                templateUrl: "myModalContent.html",
                controller: ModalInstanceCtrl,
                backdrop: "static",
                windowClass: "passwordModal",
                resolve: {
                    eid: function() {
                        return n.currentItem.ID
                    },
                    isPassword: function() {
                        return n.nav == "Surveys" ? !0 : undefined
                    },
                    isAnonymous: function() {
                        return undefined
                    },
                    surveyInfo: function() {
                        return {}
                    },
                    password: function() {
                        return n.currentItem.Password
                    }
                }
            }),
            e.result.then(function() {
                var u = t.get();
                n.nav == "Surveys" ? (u.sid = n.currentItem.ID,
                u.name = "",
                u.email = "",
                u.private = !0) : u.eid = n.currentItem.ID;
                (i.get().channel == "ACU" || i.get().channel == "AppACU") && localStorage.ACUhost != undefined ? l() : (i.get().channel == "AppACU" && localStorage.ACUhost == undefined && (i.get().channel = "App",
                n.channel = i.get().channel),
                t.set(u),
                $("input").blur(),
                window.scrollTo(1, 1),
                setTimeout(function() {
                    window.scrollTo(0, 0);
                    r.go("viewer")
                }, 10))
            }, function() {})) : (f = t.get(),
            n.nav == "Surveys" ? (f.sid = n.currentItem.ID,
            f.name = "",
            f.email = "",
            f.private = !0) : f.eid = n.currentItem.ID,
            (i.get().channel == "ACU" || i.get().channel == "AppACU") && localStorage.ACUhost != undefined ? l() : (i.get().channel == "AppACU" && localStorage.ACUhost == undefined && (i.get().channel = "App",
            n.channel = i.get().channel),
            t.set(f),
            r.go("viewer")))
        }
    }
}
]);
ModalInstanceCtrl = ["$scope", "$modalInstance", "$http", "Config", "User", "$state", "eid", "isAnonymous", "isPassword", "surveyInfo", "password", function(n, t, i, r, u, f, e, o, s, h, c) {
    n.resources = r.get().localResources[localStorage.lang];
    n.password = {
        text: ""
    };
    n.name = {
        text: ""
    };
    n.email = {
        text: ""
    };
    n.isSurvey = o == !1 || s;
    n.isPassword = s;
    n.isAnonymous = o;
    n.surveyInfo = h;
    n.surveyInfo != {} && setTimeout(function() {
        $("#surveyDesc").readmore({
            maxHeight: 200
        })
    }, 10);
    n.ok = function() {
        var i;
        (n.password.text != "" || n.isSurvey && !s) && (o != !1 || n.name.text != "" && n.email.text != "" && n.email.text != undefined) && (n.active = !0,
        n.isSurvey ? s ? n.password.text == c ? (o == !1 && (i = u.get(),
        i.name = n.name.text,
        i.email = n.email.text,
        u.set(i)),
        t.close(!0)) : (n.active = !1,
        toast("warning", n.resources.wrong_password, n.resources.Warning)) : (o == !1 && (i = u.get(),
        i.name = n.name.text,
        i.email = n.email.text,
        u.set(i)),
        t.close(!0)) : n.password.text == c ? t.close(!0) : (n.active = !1,
        toast("warning", n.resources.wrong_password, n.resources.Warning)))
    }
    ;
    n.cancel = function() {
        t.dismiss("cancel")
    }
}
];
angular.module("swiftassessMobile.viewer", ["ui.router", "ngAnimate", "swiftassessMobile.services", "ui.bootstrap", "ngSanitize"]).config(["$stateProvider", function(n) {
    n.state("viewer", {
        url: "/viewer",
        views: {
            main: {
                controller: "ViewerCtrl",
                templateUrl: "app/viewer/viewer.tpl.html"
            }
        },
        data: {
            pageTitle: "Viewer"
        }
    })
}
]).controller("ViewerCtrl", ["$scope", "User", "$state", "$modal", "Config", "$http", "LS", "$timeout", function(n, t, i, r, u, f, e, o) {
    var s, a, p, b, c, v, k, d;
    if (n.$on("$locationChangeStart", function(n) {
        n.preventDefault()
    }),
    host = getParameterByName("host") != undefined && getParameterByName("host") != "" ? getParameterByName("host") : host,
    getParameterByName("ai_sessionID") != undefined && getParameterByName("ai_sessionID") != null && (localStorage.ai_sessionID = getParameterByName("ai_sessionID")),
    getParameterByName("uname") != undefined && getParameterByName("eid") != undefined && getParameterByName("uname") != "" && getParameterByName("eid") != "" && (s = getParameterByName("mode") != undefined && getParameterByName("mode") == "adhoc",
    t.set({
        user: getParameterByName("uname"),
        host: host,
        eid: parseInt(getParameterByName("eid")),
        adhoc_score: s ? getParameterByName("percentage") : null,
        adhoc_questions_count: s ? getParameterByName("count") : null
    })),
    getParameterByName("preview") == "yes" && (s = getParameterByName("mode") != undefined && getParameterByName("mode") == "adhoc",
    getParameterByName("eid") != undefined && getParameterByName("eid") != null && getParameterByName("eid") != "" ? t.set({
        user: "m_prev",
        host: host,
        eid: parseInt(getParameterByName("eid")),
        preview: !0,
        adhoc_score: s ? getParameterByName("percentage") : null,
        adhoc_questions_count: s ? getParameterByName("count") : null
    }) : getParameterByName("qid") != undefined && getParameterByName("qid") != null && getParameterByName("qid") != "" ? (t.set({
        user: "m_prev",
        host: host,
        eid: null,
        qid: parseInt(getParameterByName("qid")),
        preview: !0,
        adhoc_score: s ? getParameterByName("percentage") : null,
        adhoc_questions_count: s ? getParameterByName("count") : null
    }),
    n.$parent.dir = localStorage.lang != "ar" ? "ltr" : "rtl") : t.set({
        user: "m_prev",
        host: host,
        eid: null,
        preview: !0,
        adhoc_score: s ? getParameterByName("percentage") : null,
        adhoc_questions_count: s ? getParameterByName("count") : null
    })),
    getParameterByName("sid") != "" && t.set({
        user: getParameterByName("uname") && getParameterByName("uname") != "" ? getParameterByName("uname") : "",
        host: host != undefined && host != "" ? host : localStorage.sa_host != undefined && localStorage.sa_host != "" ? JSON.parse(localStorage.sa_host).HOST : window.location.host.split(".")[0],
        sid: parseInt(getParameterByName("sid")),
        name: "",
        email: ""
    }),
    typeof offLoad != "undefined" && t.set({
        user: "",
        host: host,
        offline: !0
    }),
    t.get().user == undefined)
        i.go("login");
    else {
        n.resources = u.get().localResources[localStorage.lang];
        localStorage.sa_host != undefined && localStorage.sa_host != null && localStorage.sa_host != "" && u.get().channel != "ACU" && u.get().channel != "AppACU" && (a = JSON.parse(localStorage.sa_host),
        u.get().res_Uri = a.res_URI,
        u.get().api = a.API,
        host = a.HOST);
        n.qDescInline = !0;
        n.res_Uri = u.get().res_Uri;
        n.examTime = 0;
        n.sectIndex = 0;
        n.firstTimeError = !0;
        n.newTimer = !1;
        n.examActive = !0;
        n.caller = "";
        n.now = Date.now();
        n.user = t.get().user;
        n.preview = t.get().preview;
        n.host = t.get().host;
        n.api = u.get().api;
        n.doneCount = 0;
        n.inlineMedia = !0;
        n.isAdhoc = getParameterByName("mode") != undefined && getParameterByName("mode") == "adhoc";
        n.key = CryptoJS.enc.Utf8.parse("7061737323313233");
        n.iv = CryptoJS.enc.Utf8.parse("7061737323313233");
        n.timerPerQs = [];
        n.SectionTimer = [];
        n.sectionEndTime = [];
        n.TimerReset = !1;
        n.isQuestionPreview = !1;
        var w, h = document.getElementById("calc"), l = document.getElementById("pref"), y = document.getElementById("Menu");
        n.toggleCalc = function() {
            l || (l = document.getElementById("pref"));
            $(l).hasClass("core-opened") && n.toggleTextPreferencesPane();
            h || (h = document.getElementById("calc"));
            $(h).toggleClass("core-opened");
            h.style.display = $(h).hasClass("core-opened") ? "block" : "none";
            $(y).removeClass("core-opened")
        }
        ;
        n.magnify = function(t) {
            function e(t) {
                if (MagnifyBool.toString() == "true") {
                    var c, e, h;
                    t.preventDefault();
                    c = s(t);
                    e = c.x;
                    h = c.y;
                    e > i.width - u / n.zoom && (e = i.width - u / n.zoom);
                    e < u / n.zoom && (e = u / n.zoom);
                    h > i.height - f / n.zoom && (h = i.height - f / n.zoom);
                    h < f / n.zoom && (h = f / n.zoom);
                    r.style.left = e - u + parseInt(i.offsetLeft) + "px";
                    r.style.top = h - f + parseInt(i.offsetTop) + "px";
                    r.style.backgroundPosition = "-" + (e * n.zoom - u + o) + "px -" + (h * n.zoom - f + o) + "px"
                }
            }
            function s(n) {
                var u, t = 0, r = 0;
                return n = n || window.event,
                u = i.getBoundingClientRect(),
                t = n.pageX - u.left,
                r = n.pageY - u.top,
                t = t - window.pageXOffset,
                r = r - window.pageYOffset,
                {
                    x: t,
                    y: r
                }
            }
            function h() {
                for (var n = document.getElementsByClassName("img-magnifier-glass"); n[0]; )
                    n[0].parentElement.removeChild(n[0])
            }
            if (MagnifyBool.toString() == "true") {
                var i, r, u, f, o;
                i = t.currentTarget;
                r = document.createElement("DIV");
                r.setAttribute("class", "img-magnifier-glass");
                i.parentElement.insertBefore(r, i);
                r.onmouseleave = h;
                r.style.backgroundImage = "url('" + i.src + "')";
                r.style.backgroundRepeat = "no-repeat";
                r.style.backgroundSize = i.width * n.zoom + "px " + i.height * n.zoom + "px";
                o = 3;
                u = r.offsetWidth / 2;
                f = r.offsetHeight / 2;
                r.addEventListener("mousemove", e);
                i.addEventListener("mousemove", e);
                r.addEventListener("touchmove", e);
                i.addEventListener("touchmove", e)
            }
        }
        ;
        n.toggleTextPreferencesPane = function() {
            h || (h = document.getElementById("calc"));
            $(h).hasClass("core-opened") && n.toggleCalc();
            l || (l = document.getElementById("pref"));
            $(l).toggleClass("core-opened");
            $(l).hasClass("core-opened") ? (l.style.display = "block",
            $('[data-toggle="dropdown"]').parent().removeClass("open"),
            $('[data-toggle="dropdown"]').attr("aria-expanded", !1)) : l.style.display = "none"
        }
        ;
        n.toggleMedia = function() {
            n.inlineMedia = !n.inlineMedia
        }
        ;
        n.toggleMenu = function() {
            $(y).toggleClass("core-opened");
            $(h).removeClass("core-opened")
        }
        ;
        n.closeMenus = function() {
            $(y).removeClass("core-opened")
        }
        ;
        n.toggleSectDesc = function() {}
        ;
        n.dismiss_AppLock = function() {
            window.exit("", function(n) {
                console.log(n)
            })
        }
        ;
        n.questions = [];
        n.direction = "left";
        n.currentIndex = 0;
        n.setCurrentQuestionID = function(t, i) {
            var r = n.isSurvey ? n.questions.map(function(n) {
                return n.QuestionID
            }) : n.questions.map(function(n) {
                return n.QuestionID + "-" + n.ScenarioID
            });
            r = n.isSurvey ? r.indexOf(t) : r.indexOf(t + "-" + i);
            n.setCurrentQuestionIndex(r)
        }
        ;
        n.setCurrentQuestionIndex = function(i) {
            $("#question-" + n.questions[n.currentIndex].QuestionID + " input").blur();
            window.scrollTo(1, 1);
            o(function() {
                var s, r, h, c, v, l, a, f, e;
                if (window.scrollTo(0, 0),
                n.saveQ(!0),
                n.reqQbyQ && !n.questions[n.currentIndex].done && (n.isSections ? n.SectionTimer[n.sectIndex] != "00:00" : !0)) {
                    alert(n.resources.qRequired);
                    return
                }
                if (s = Date.now(),
                (s - n.now) / 1e3 > 10 && (s = n.now + 1e3),
                n.backtrack == "0")
                    if (n.isSections) {
                        var y = n.sections.map(function(t, r) {
                            if (t.SectionID == n.questions[i].SectionID)
                                return r
                        }).filter(isFinite)
                          , p = n.sections.map(function(t, i) {
                            if (t.SectionID == n.questions[n.currentIndex].SectionID)
                                return i
                        }).filter(isFinite)
                          , w = n.sections.map(function(t, r) {
                            if (i > 0 && t.SectionID == n.questions[i - 1].SectionID)
                                return r
                        }).filter(isFinite);
                        if (n.reqAllQ && !n.sections[n.sectIndex].BackTrack && n.SectionTimer[n.sectIndex] != "00:00" && !n.questions[n.currentIndex].done) {
                            alert(n.resources.qRequired);
                            return
                        }
                        if (p[0] < y[0] && n.SectionTimer[n.sectIndex] != "00:00") {
                            for (r = 0; r < n.sectTimerPerQs[n.sectIndex].Questions.length; r++)
                                if (n.sectTimerPerQs[n.sectIndex].Questions[r].time == 0) {
                                    n.submit("none");
                                    return
                                }
                            if (n.reqAllQ)
                                for (r = 0; r < n.questions.length; r++)
                                    if (!n.questions[r].done && n.questions[r].SectionID == n.questions[n.currentIndex].SectionID) {
                                        alert(n.resources.SolveAllQsInSec);
                                        n.setCurrentQuestionIndex(r);
                                        return
                                    }
                            if (!window.confirm(n.resources.ConfirmLeaveSec))
                                return
                        }
                    } else if (n.questions[n.currentIndex].isRequired && !n.questions[n.currentIndex].done) {
                        alert(n.resources.qRequired);
                        return
                    }
                if (n.isSections && !n.sections[n.sectIndex].BackTrack && n.SectionTimer[n.sectIndex] != "00:00" && n.questions[n.currentIndex].isRequired && !n.questions[n.currentIndex].done) {
                    alert(n.resources.qRequired);
                    return
                }
                if (n.direction = i > n.currentIndex ? "left" : "right",
                n.currentIndex = i,
                $(".RecordedAudio").attr("src") != undefined && $(".RecordedAudio").attr("src") != null)
                    for (r = 0; $(".RecordedAudio").get(r); )
                        $(".RecordedAudio").get(r).pause(),
                        r++;
                for (h = 0; $(".qmediaVideo").get(h); )
                    $(".qmediaVideo").get(h).pause(),
                    h++;
                for (c = 0; $(".qmediaAudio").get(c); )
                    $(".qmediaAudio").get(c).pause(),
                    c++;
                n.isSections && (v = n.sections.map(function(t, i) {
                    if (t.SectionID == n.questions[n.currentIndex].SectionID)
                        return i
                }).filter(isFinite),
                n.sectIndex != v[0] && (n.sectIndex = v[0],
                n.sectTimerPerQs[n.sectIndex].Visited = !0,
                n.sectionEndTime[n.sectIndex] == null && (n.sectionEndTime[n.sectIndex] = s + parseFloat(n.sections[n.sectIndex].Duration) * 6e4),
                n.sections[n.sectIndex].Duration != null && n.sections[n.sectIndex].Duration != "" && n.SectionTimer[n.sectIndex] != "00:00" && (n.newTimer = !0,
                n.$apply(),
                o(function() {
                    n.newTimer = !1;
                    o(function() {
                        n.sectTimer()
                    }, 1)
                }, 10))));
                u.get().channel == "AppACU" && localStorage.ACUhost == undefined && (u.get().channel = "App",
                n.channel = u.get().channel);
                u.get().channel == "ACU" || u.get().channel == "AppACU" ? n.questions[n.currentIndex].QuestionMediaID != null && n.questions[n.currentIndex].QuestionMediaID != undefined && (n.questions[n.currentIndex].QuestionMediaPath = HttpScheme + "://" + localStorage.ACUhost + "/" + n.questions[n.currentIndex].QuestionMediaPath.replace(HttpScheme + "://" + localStorage.ACUhost + "/", "")) : n.questions[n.currentIndex].QuestionMediaID != null && n.questions[n.currentIndex].QuestionMediaID != undefined && (n.questions[n.currentIndex].QuestionMediaPath = u.get().api + "media/" + n.questions[n.currentIndex].QuestionMediaID + "?host=" + (t.get().preview != undefined ? host != undefined ? host : window.location.host.split(".")[0] : t.get().host));
                it();
                $("#questionsContainer").removeClass("openDesc");
                $("#toggleDescBar").attr("icon", "description");
                n.recountDone();
                !n.questions[n.currentIndex].endTime && n.questions[n.currentIndex].QuestionTime && (n.questions[n.currentIndex].endTime = s + n.questions[n.currentIndex].QuestionTime * 6e4);
                n.questions[n.currentIndex].QuestionTime && (n.newTimer = !0,
                n.$apply(),
                o(function() {
                    n.newTimer = !1;
                    o(function() {
                        n.timer(!0)
                    }, 1)
                }, 10));
                n.isSections ? n.sectQList[n.sectIndex][n.CurrentDisplayIndex].questions && (!n.sectQList[n.sectIndex][n.CurrentDisplayIndex].endTime && n.sectQList[n.sectIndex][n.CurrentDisplayIndex].QuestionTime && (n.sectQList[n.sectIndex][n.CurrentDisplayIndex].endTime = s + n.sectQList[n.sectIndex][n.CurrentDisplayIndex].QuestionTime * 6e4),
                n.sectQList[n.sectIndex][n.CurrentDisplayIndex].QuestionTime && (n.newTimer = !0,
                n.$apply(),
                o(function() {
                    n.newTimer = !1;
                    o(function() {
                        n.stimer(!0)
                    }, 1)
                }, 10))) : n.qList[n.CurrentDisplayIndex].questions && (!n.qList[n.CurrentDisplayIndex].endTime && n.qList[n.CurrentDisplayIndex].QuestionTime && (n.qList[n.CurrentDisplayIndex].endTime = s + n.qList[n.CurrentDisplayIndex].QuestionTime * 6e4),
                n.qList[n.CurrentDisplayIndex].QuestionTime && (n.newTimer = !0,
                n.$apply(),
                o(function() {
                    n.newTimer = !1;
                    o(function() {
                        n.stimer(!0)
                    }, 1)
                }, 10)));
                n.$broadcast(n.questions[n.currentIndex].QuestionID + "-resize");
                n.clearMFR();
                !n.qDescInline && n.questions[n.currentIndex].QuestionDesc || n.questions[n.currentIndex].scenario.QuestionDesc != null ? $("#questionsContainer").hasClass("openDesc") || n.toggleQuestionDesc() : ($("#questionsContainer .question").css({
                    width: "calc(100% - 18px)",
                    margin: "0"
                }),
                $("#questionsContainer .scenarioContainer").css({
                    width: "calc(100% - 18px)",
                    margin: "0"
                }),
                $("#questionsContainer .questionDisable").css({
                    padding: "0"
                }));
                n.questions[n.currentIndex].QuestionMediaID != null && n.inlineMedia && (n.inlineMedia = !1,
                setTimeout(function() {
                    n.toggleMedia()
                }, 5));
                l = "qmediaVideo-" + n.questions[n.currentIndex].order;
                a = "qmediaAudio-" + n.questions[n.currentIndex].order;
                n.questions[n.currentIndex].ScenarioID != null && (l = l + "-" + n.questions[n.currentIndex].scenario.order,
                a = a + "-" + n.questions[n.currentIndex].scenario.order);
                f = document.getElementById(l);
                e = document.getElementById(a);
                n.questions[n.currentIndex].eventsAttached == undefined && (f != null && (console.log(f),
                n.questions[n.currentIndex].DisableSeekFromJson && (n.questions[n.currentIndex].supposedCurrentTime = 0,
                f.addEventListener("timeupdate", function() {
                    f.seeking || (n.questions[n.currentIndex].supposedCurrentTime = f.currentTime)
                }),
                f.addEventListener("seeking", function() {
                    var t = f.currentTime - n.questions[n.currentIndex].supposedCurrentTime;
                    Math.abs(t) > .01 && (console.log("Seeking is disabled"),
                    f.currentTime = n.questions[n.currentIndex].supposedCurrentTime)
                })),
                f.onplay = function() {
                    var t = "qmediaVideo-" + n.questions[n.currentIndex].order + "-" + n.questions[n.currentIndex].scenario.order
                      , i = f.id;
                    t != i ? f.pause() : n.questions[n.currentIndex].PlaybackAttemptsRemaining == 0 && (f.pause(),
                    console.log("No attempts remaining"))
                }
                ,
                f.addEventListener("ended", function() {
                    console.log("in video ended");
                    n.questions[n.currentIndex].supposedCurrentTime = 0;
                    n.questions[n.currentIndex].PlaybackAttemptsRemaining != null && (n.questions[n.currentIndex].PlaybackAttemptsRemaining--,
                    console.log(n.questions[n.currentIndex].PlaybackAttemptsRemaining + " attempts remaining"))
                }),
                n.questions[n.currentIndex].eventsAttached = !0),
                e != null && (console.log(e),
                n.questions[n.currentIndex].DisableSeekFromJson && (n.questions[n.currentIndex].supposedCurrentTime = 0,
                e.addEventListener("timeupdate", function() {
                    e.seeking || (n.questions[n.currentIndex].supposedCurrentTime = e.currentTime)
                }),
                e.addEventListener("seeking", function() {
                    var t = e.currentTime - n.questions[n.currentIndex].supposedCurrentTime;
                    Math.abs(t) > .01 && (console.log("Seeking is disabled"),
                    e.currentTime = n.questions[n.currentIndex].supposedCurrentTime)
                })),
                e.onplay = function() {
                    var t = "qmediaAudio-" + n.questions[n.currentIndex].order + "-" + n.questions[n.currentIndex].scenario.order
                      , i = e.id;
                    t != i ? e.pause() : n.questions[n.currentIndex].PlaybackAttemptsRemaining == 0 && (e.pause(),
                    console.log("No attempts remaining"))
                }
                ,
                e.addEventListener("ended", function() {
                    n.questions[n.currentIndex].supposedCurrentTime = 0;
                    n.questions[n.currentIndex].PlaybackAttemptsRemaining != null && (n.questions[n.currentIndex].PlaybackAttemptsRemaining--,
                    console.log(n.questions[n.currentIndex].PlaybackAttemptsRemaining + " attempts remaining"))
                }),
                n.questions[n.currentIndex].eventsAttached = !0))
            }, 10)
        }
        ;
        function it() {
            var t = null;
            t = n.isSections ? n.sectQList[n.sectIndex].map(function(n) {
                return n.QuestionID
            }) : n.qList.map(function(n) {
                return n.QuestionID
            });
            n.CurrentDisplayIndex = n.questions[n.currentIndex].ScenarioID == null ? t.indexOf(n.questions[n.currentIndex].QuestionID) : t.indexOf(n.questions[n.currentIndex].ScenarioID)
        }
        function ft(t) {
            var i;
            return n.questions[t].ScenarioID == null || n.questions[t].ScenarioID == undefined ? (i = null,
            i = n.isSections ? n.sectQList[n.sectIndex].map(function(n) {
                return n.QuestionID
            }) : n.qList.map(function(n) {
                return n.QuestionID
            }),
            i.indexOf(n.questions[t].QuestionID)) : (i = null,
            i = n.isSections ? $.grep(n.sectQList[n.sectIndex], function(i) {
                return i.QuestionID == n.questions[t].ScenarioID
            })[0].questions.map(function(n) {
                return n.QuestionID
            }) : $.grep(n.qList, function(i) {
                return i.QuestionID == n.questions[t].ScenarioID
            })[0].questions.map(function(n) {
                return n.QuestionID
            }),
            i.indexOf(n.questions[t].QuestionID))
        }
        function et(t) {
            if (t.ScenarioID == null)
                return {
                    QuestionID: null,
                    QuestionPoints: 0,
                    order: 0,
                    QuestionDesc: null
                };
            var i = $.grep(n.scenarios, function(n) {
                return n.QuestionID == t.ScenarioID
            })[0];
            return i.order = n.isSections ? n.sectQList[n.sectIndex].map(function(n) {
                return n.QuestionID
            }).indexOf(t.ScenarioID) : n.qList.map(function(n) {
                return n.QuestionID
            }).indexOf(t.ScenarioID),
            i
        }
        n.getScenarioZIndex = function(t) {
            return n.questions.length - n.questions.map(function(n) {
                return n.ScenarioID
            }).indexOf(t) + 1
        }
        ;
        n.getScenarioHeight = function(n) {
            return $("#scenario-" + n).outerHeight() + "px"
        }
        ;
        n.isCurrentQuestionID = function(t, i) {
            var r = n.questions.map(function(n) {
                return n.QuestionID + "-" + n.ScenarioID
            });
            return r = r.indexOf(t + "-" + i),
            n.isCurrentQuestionIndex(r)
        }
        ;
        n.isCurrentQuestionIndex = function(t) {
            return n.currentIndex === t
        }
        ;
        n.isDarkTheme = function() {
            return theme == "dark"
        }
        ;
        n.isLightTheme = function() {
            return theme == "light"
        }
        ;
        n.getClearBtnFontSize = function() {
            return n.clearBtnFontSize
        }
        ;
        n.getFontFamily = function() {
            return globalFontFamily
        }
        ;
        n.getLineHeight = function() {
            return lineHeight
        }
        ;
        n.getLetterSpacing = function() {
            return letterSpacing
        }
        ;
        n.getWordSpacing = function() {
            return wordSpacing
        }
        ;
        n.clearBtnFontSize = "16px";
        n.titleFontSize = titleFontSize;
        n.lineHeightIsNotDefault = lineHeight != "1.5";
        n.initMagnify = MagnifyBool.toString() == "true";
        n.zoom = ZoomFactor;
        n.zoomScaleValue = ZoomFactor == 1.5 ? 1 : ZoomFactor == 2 ? 2 : ZoomFactor == 4 ? 3 : 4;
        n.MaxPlaybacksFromJson = 2;
        n.DisableSeekFromJson = !0;
        n.DisablePauseFromJson = !0;
        n.AutoPlayFromJson = !0;
        n.PlaybackAttemptsRemaining = n.MaxPlaybacksFromJson;
        function nt() {
            var i = null, r = [], f = 1, u = n.questions[0].SectionID, t;
            for (n.sectQList = [],
            n.sectTimerPerQs = [],
            t = 0; t < n.questions.length; t++)
                n.isSections && n.questions[t].SectionID != u && (i != null && n.questions[t].ScenarioID != i.QuestionID && (r.push(i),
                i = null),
                u = n.questions[t].SectionID,
                f++,
                n.sectQList.push(r),
                r = [],
                n.sectTimerPerQs.push({
                    Questions: n.timerPerQs,
                    TimeLeft: -1,
                    SectionID: n.questions[t - 1].SectionID,
                    Visited: !1
                }),
                n.timerPerQs = []),
                n.questions[t].ScenarioID == null || n.questions[t].ScenarioID == undefined ? (i != null && (r.push(i),
                i = null),
                n.questions[t].order = r.length,
                r.push(n.questions[t]),
                n.questions[t].scenario = {
                    QuestionID: null,
                    QuestionPoints: 0,
                    order: 0
                }) : (n.questions[t].scenario = $.grep(n.scenarios, function(i) {
                    return i.QuestionID == n.questions[t].ScenarioID
                })[0],
                i != null && n.questions[t].ScenarioID != i.QuestionID && (r.push(i),
                i = null),
                i == null && (i = n.questions[t].scenario,
                i.questions = []),
                n.questions[t].scenario.order = r.length,
                i.questions.push(n.questions[t]),
                n.questions[t].order = i.questions.length),
                n.timerPerQs.push({
                    QID: n.questions[t].QuestionID,
                    time: 0,
                    QMarks: n.questions[t].QuestionPoints
                }),
                n.questions[t].MaxPlaybacksFromJson = null,
                n.questions[t].DisableSeekFromJson = !1,
                n.questions[t].DisablePauseFromJson = !1,
                n.questions[t].AutoPlayFromJson = !1,
                n.questions[t].PlaybackAttemptsRemaining = n.questions[t].MaxPlaybacksFromJson;
            i != null && (r.push(i),
            i = null);
            n.isSections ? (n.sectQList.push(r),
            r = [],
            n.sectTimerPerQs.push({
                Questions: n.timerPerQs,
                TimeLeft: -1,
                SectionID: n.questions[n.questions.length - 1].SectionID,
                Visited: !1
            }),
            n.timerPerQs = [],
            n.sectTimerPerQs[0].Visited = !0) : n.qList = r;
            w = setInterval(ut, 1e3)
        }
        function rt(i) {
            var r = Date.now(), h, f, u;
            (r - n.now) / 1e3 > 10 && (r = n.now + 1e3);
            n.$parent.throbber = !1;
            h = t.get();
            exam = JSON.parse(i);
            h.resultID = exam.resultID;
            t.set(h);
            n.name = s ? getParameterByName("session_title") != null && getParameterByName("session_title") != "" ? getParameterByName("session_title") : "Quiz" : exam.asmntName;
            n.questions = (exam.shuffleQtns == undefined || exam.shuffleQtns == "1") && (exam.IsLOFT == "0" || exam.IsLOFT == undefined) ? g(exam.Questions, exam.Scenarios, !1) : tt(exam.Questions, exam.Scenarios);
            n.scenarios = exam.Scenarios;
            n.sections = exam.Sections;
            n.allowCalc = exam.AllowCalculator;
            n.isSections = exam.Sections != null && exam.Sections.length > 0 ? !0 : !1;
            n.backtrack = exam.backtrack;
            exam.isRequired != "0" && (n.isSections || n.backtrack != "0" || exam.isRequired != "1") ? exam.isRequired == "1" ? (n.reqQbyQ = !1,
            n.reqAllQ = !0) : (n.reqQbyQ = !1,
            n.reqAllQ = !1) : (n.reqQbyQ = !0,
            n.reqAllQ = !1);
            n.isManual = exam.isManual;
            n.isPractice = exam.isPractice;
            n.showReport = exam.showReport;
            n.QuestionSet = exam.QuestionSet;
            n.timeLimit = exam.timeLimit != undefined && exam.timeLimit != null && exam.timeElapsed != -1 && exam.timeElapsed != undefined ? parseFloat(exam.timeLimit) - parseFloat(exam.timeElapsed) / 60 : exam.timeLimit != undefined && exam.timeLimit != null ? exam.timeLimit : "";
            exam.TimeCutOff != undefined && exam.TimeCutOff != null && exam.TimeCutOff == !0 && n.timeLimit * 60 > exam.CutOff && (n.timeLimit = exam.CutOff / 60);
            exam.timeLimit = n.timeLimit;
            n.timeWarning = exam.timeWarning;
            n.promptMsg = exam.promptMsg;
            n.qualifiedMsg = exam.qualifiedMsg;
            n.qualifyingPercent = exam.qualifyingPercent;
            n.unqualifiedMsg = exam.unqualifiedMsg;
            n.dir = exam.dir == "rtl" || exam.dir == "ltr" ? exam.dir : "ltr";
            localStorage.lang = exam.dir == "rtl" ? "ar" : localStorage.lang;
            $("body").attr("dir", n.dir);
            nt();
            exam.IsSecure;
            n.timeLimit == "" ? n.isSections ? (n.sections[n.sectIndex].Duration != null && n.sections[n.sectIndex].Duration != "" && (n.sectionEndTime[n.sectIndex] = r + parseFloat(n.sections[n.sectIndex].Duration) * 6e4,
            n.newTimer = !0,
            n.$apply(),
            o(function() {
                n.newTimer = !1;
                o(function() {
                    n.sectTimer()
                }, 1)
            }, 10)),
            n.backtrack == "0" && (n.examStartTime = r,
            f = setInterval(function() {
                e.setLSTimer(Math.floor((Date.now() - n.examStartTime) / 1e3), !1, null);
                n.examActive == !1 && clearInterval(f)
            }, 1e3))) : (n.examTimeText = "No Limit",
            n.examStartTime = r,
            f = setInterval(function() {
                e.setLSTimer(Math.floor((Date.now() - n.examStartTime) / 1e3), !1, null);
                n.examActive == !1 && clearInterval(f)
            }, 1e3)) : n.examEndTime = r + parseFloat(n.timeLimit) * 6e4;
            !n.questions[0].endTime && n.questions[0].QuestionTime && (n.questions[0].endTime = r + n.questions[0].QuestionTime * 6e4);
            n.toggleQuestionInfo();
            exam.getSolvedQtns != !1 && exam.resCache != undefined ? (u = exam.resCache,
            u.session = t.get().session,
            localStorage["sa-CacheObj:" + t.get().user + "_" + t.get().eid] = JSON.stringify(u),
            o(function() {
                var l, t, r, f, h, c, a, e, s, i, o;
                if (n.isSections)
                    n.sectTimerPerQs = u.questionsTimers;
                else
                    for (t = 0; t < n.questions.length; t++)
                        l = u.questionsTimers.map(function(i) {
                            if (i.QID == n.questions[t].QuestionID)
                                return i.time
                        }).filter(function(n) {
                            return n !== undefined
                        }),
                        n.timerPerQs[t].time = l[0];
                for (n.PrevAnswers = u.answers,
                t = 0; t < n.PrevAnswers.length; t++) {
                    r = n.questions.map(function(i, r) {
                        if (i.QuestionID == n.PrevAnswers[t].qid)
                            return r
                    }).filter(isFinite);
                    n.questions[r[0]].done = !0;
                    switch (n.PrevAnswers[t].qtype) {
                    case "MultipleChoice":
                        $("multiple-choice #check-" + (n.PrevAnswers[t].sid == null ? "" : n.PrevAnswers[t].sid) + "-" + n.PrevAnswers[t].qid + "-" + n.PrevAnswers[t].answerID).attr("checked", !0);
                        break;
                    case "MultipleSelect":
                        if (f = JSON.parse(n.PrevAnswers[t].answer),
                        f.length > 0)
                            for (i = 0; i < f.length; i++)
                                $("multiple-select #check-" + (n.PrevAnswers[t].sid == null ? "" : n.PrevAnswers[t].sid) + "-" + n.PrevAnswers[t].qid + "-" + f[i].choiceID).attr("checked", !0);
                        break;
                    case "TrueOrFalse":
                        $("true-or-false #check-" + (n.PrevAnswers[t].sid == null ? "" : n.PrevAnswers[t].sid) + "-" + n.PrevAnswers[t].qid + "-" + n.PrevAnswers[t].answer).attr("checked", !0);
                        break;
                    case "ShortAnswer":
                        $("short-answer #sa-" + n.PrevAnswers[t].qid).val(n.PrevAnswers[t].answer);
                        break;
                    case "ReOrder":
                        for (h = JSON.parse(n.PrevAnswers[t].answer).items,
                        c = [],
                        i = 0; i < h.length; i++)
                            a = n.questions[r[0]].ReorderItems.map(function(n) {
                                if (n.ItemID == h[i])
                                    return n
                            }).filter(function(n) {
                                return n !== undefined
                            }),
                            c.push(a[0]);
                        n.questions[r[0]].ReorderItems = c;
                        break;
                    case "FillInTheBlanks":
                        for (e = JSON.parse(n.PrevAnswers[t].answer).blanks,
                        i = 0; i < e.length; i++)
                            o = $("fill-in-blanks #sa-" + n.PrevAnswers[t].qid + " [data-value='" + e[i].BoxID + "']"),
                            o[0].value = e[i].Answer;
                        break;
                    case "FillFromList":
                        for ($("fill-from-list #sa-" + n.PrevAnswers[t].qid + " select").each(function(t) {
                            $(this).attr("data-value", n.questions[r[0]].BoxIDs[t])
                        }),
                        s = JSON.parse(n.PrevAnswers[t].answer).items,
                        i = 0; i < s.length; i++)
                            o = $("fill-from-list #sa-" + n.PrevAnswers[t].qid + " [data-value='" + s[i].BoxID + "']"),
                            o[0].value = s[i].AnswerID;
                        break;
                    case "Hotspot":
                        n.questions[r[0]].options.answers = n.PrevAnswers[t].answer;
                        break;
                    case "Matching":
                        n.questions[r[0]].answer = n.PrevAnswers[t].dndDetails;
                        break;
                    case "DragAndDrop":
                        n.questions[r[0]].options.answers = n.PrevAnswers[t].answer;
                        break;
                    case "Essay":
                        n.questions[r[0]].answer = n.PrevAnswers[t].answer;
                        break;
                    case "HandWriting":
                        n.questions[r[0]].options.answer = n.PrevAnswers[t].answer
                    }
                }
            }, 30)) : e.setLSDefault(exam.startDate)
        }
        function ut() {
            n.fixIndexforTimer = 0;
            for (var t = 0; t < n.sectIndex; t++)
                n.fixIndexforTimer += n.sectTimerPerQs[t].Questions.length;
            n.currentIndex != 0 || n.TimerReset || (n.isSections ? n.sectTimerPerQs[n.sectIndex].Questions[n.currentIndex - n.fixIndexforTimer].time = 0 : n.timerPerQs[n.currentIndex].time = 0,
            n.TimerReset = !0);
            n.isSections ? (n.sectTimerPerQs[n.sectIndex].Questions[n.currentIndex - n.fixIndexforTimer].time++,
            e.setLSTimer(null, !0, n.sectTimerPerQs)) : (n.timerPerQs[n.currentIndex].time++,
            e.setLSTimer(null, !0, n.timerPerQs))
        }
        n.nextQuestion = function() {
            n.isCurrentQuestionIndex(n.questions.length - 1) || n.setCurrentQuestionIndex(n.currentIndex + 1)
        }
        ;
        n.prevQuestion = function() {
            n.isCurrentQuestionIndex(0) || n.setCurrentQuestionIndex(n.currentIndex - 1)
        }
        ;
        function ot() {
            setTimeout(function() {
                n.qDescInline && n.questions[n.currentIndex].QuestionDesc && ($(".qDesc").readmore("destroy"),
                $(".qDesc").readmore({
                    maxHeight: 200
                }))
            }, 10)
        }
        n.DecreaseZoom = function() {
            var t = document.getElementById("slider-zoom").value - 1;
            t < 1 && (t = 1);
            t >= 1 && (document.getElementById("slider-zoom").value = t,
            n.ChangeZoom())
        }
        ;
        n.IncreaseZoom = function() {
            var t = parseInt(document.getElementById("slider-zoom").value) + 1;
            t > 4 && (t = 4);
            t <= 4 && (document.getElementById("slider-zoom").value = t,
            n.ChangeZoom())
        }
        ;
        n.DecreaseFont = function() {
            var t = parseInt(document.getElementById("slider").value) - 2;
            t == 15 && (t = 16);
            t >= 16 && (document.getElementById("slider").value = t,
            n.ChangeFont())
        }
        ;
        n.ChangeFontByVal = function(t) {
            var r = 22, i = r + t, u, e, f, o, s;
            $(".qTitle") != undefined && $(".qTitle") != null && $(".qTitle").css("font-size") != undefined && $(".qTitle").css("font-size") != null && (r = parseInt($(".qTitle").css("font-size").substring(0, $(".qTitle").css("font-size").indexOf("px"))),
            i = r + t);
            i <= 40 && i >= 16 && (SettitleFontSize(i),
            $(".qTitle").css("font-size", titleFontSize + "px"),
            $(".paper-tooltip") != undefined && $(".paper-tooltip") != null && $(".paper-tooltip").css("font-size", i - 2 + "px"),
            $("#tooltip") != undefined && $("#tooltip") != null && $("#tooltip").css("font-size", i - 2 + "px"),
            $(".qDesc") != undefined && $(".qDesc") != null && $(".qDesc").css("font-size") != undefined && $(".qDesc").css("font-size") != null && (r = parseInt($(".qDesc").css("font-size").substring(0, $(".qDesc").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".qDesc").css("font-size", i + "px")),
            $(".qSideDesc") != undefined && $(".qSideDesc") != null && $(".qSideDesc").css("font-size") != undefined && $(".qSideDesc").css("font-size") != null && (r = parseInt($(".qSideDesc").css("font-size").substring(0, $(".qSideDesc").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".qSideDesc").css("font-size", i + "px")),
            $(".qParagraph") != undefined && $(".qParagraph") != null && $(".qParagraph").css("font-size") != undefined && $(".qParagraph").css("font-size") != null && (r = parseInt($(".qParagraph").css("font-size").substring(0, $(".qParagraph").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".qParagraph").css("font-size", i + "px")),
            $(".scenarioDesc") != undefined && $(".scenarioDesc") != null && $(".scenarioDesc").css("font-size") != undefined && $(".scenarioDesc").css("font-size") != null && (r = parseInt($(".scenarioDesc").css("font-size").substring(0, $(".scenarioDesc").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".scenarioDesc").css("font-size", i + "px")),
            $(".radioChoice") != undefined && $(".radioChoice") != null && $(".radioChoice").css("font-size") != undefined && $(".radioChoice").css("font-size") != null && (r = parseInt($(".radioChoice").css("font-size").substring(0, $(".radioChoice").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".radioChoice").css("font-size", i + "px")),
            $(".radioChoice span") != undefined && $(".radioChoice span") != null && $(".radioChoice span").css("font-size") != undefined && $(".radioChoice span").css("font-size") != null && (r = parseInt($(".radioChoice span").css("font-size").substring(0, $(".radioChoice span").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".radioChoice span").css("font-size", i + "px")),
            $(".dnd-item") != undefined && $(".dnd-item") != null && $(".dnd-item").css("font-size") != undefined && $(".dnd-item").css("font-size") != null && (r = parseInt($(".dnd-item").css("font-size").substring(0, $(".dnd-item").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".dnd-item").css("font-size", i + "px")),
            $(".AnswerSection") != undefined && $(".AnswerSection") != null && $(".AnswerSection").css("font-size") != undefined && $(".AnswerSection").css("font-size") != null && (r = parseInt($(".AnswerSection").css("font-size").substring(0, $(".AnswerSection").css("font-size").indexOf("px"))),
            i = r + t,
            $(".AnswerSection").css("font-size", i + "px")),
            $(".QuestionSection") != undefined && $(".QuestionSection") != null && $(".QuestionSection").css("font-size") != undefined && $(".QuestionSection").css("font-size") != null && (r = parseInt($(".QuestionSection").css("font-size").substring(0, $(".QuestionSection").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".QuestionSection").css("font-size", i + "px"),
            $(".target-box").css("min-height", i + "px")),
            $(".reorder-item") != undefined && $(".reorder-item") != null && $(".reorder-item").css("font-size") != undefined && $(".reorder-item").css("font-size") != null && (r = parseInt($(".reorder-item").css("font-size").substring(0, $(".reorder-item").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".reorder-item").css("font-size", i + "px")),
            $(".scenarioTitle") != undefined && $(".scenarioTitle") != null && $(".scenarioTitle").css("font-size") != undefined && $(".scenarioTitle").css("font-size") != null && (r = parseInt($(".scenarioTitle").css("font-size").substring(0, $(".scenarioTitle").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".scenarioTitle").css("font-size", i + "px")),
            $(".scenarioInfo") != undefined && $(".scenarioInfo") != null && $(".scenarioInfo").css("font-size") != undefined && $(".scenarioInfo").css("font-size") != null && (r = parseInt($(".scenarioInfo").css("font-size").substring(0, $(".scenarioInfo").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".scenarioInfo").css("font-size", i + "px")),
            $(".toolbar") != undefined && $(".toolbar") != null && $(".toolbar").css("font-size") != undefined && $(".toolbar").css("font-size") != null && (r = parseInt($(".toolbar").css("font-size").substring(0, $(".toolbar").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".toolbar").css("font-size", i + "px")),
            $("#progressBar") != undefined && $("#progressBar") != null && $("#progressBar").css("font-size") != undefined && $("#progressBar").css("font-size") != null && (r = parseInt($("#progressBar").css("font-size").substring(0, $("#progressBar").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $("#progressBar").css("font-size", i + "px")),
            $("#questionsList") != undefined && $("#questionsList") != null && $("#questionsList").css("font-size") != undefined && $("#questionsList").css("font-size") != null && (r = parseInt($("#questionsList").css("font-size").substring(0, $("#questionsList").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $("#questionsList").css("font-size", i + "px")),
            $("#username") != undefined && $("#username") != null && $("#username").css("font-size") != undefined && $("#username").css("font-size") != null && (r = parseInt($("#username").css("font-size").substring(0, $("#username").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $("#username").css("font-size", i + "px")),
            $(".MathCount") != undefined && $(".MathCount") != null && $(".MathCount").css("font-size") != undefined && $(".MathCount").css("font-size") != null && (r = parseInt($(".MathCount").css("font-size").substring(0, $(".MathCount").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".MathCount").css("font-size", i + "px")),
            $(".keyBtn") != undefined && $(".keyBtn") != null && $(".keyBtn").css("font-size") != undefined && $(".keyBtn").css("font-size") != null && (r = parseInt($(".keyBtn").css("font-size").substring(0, $(".keyBtn").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".keyBtn").css("font-size", i + "px")),
            $(".numberBtn") != undefined && $(".numberBtn") != null && $(".numberBtn").css("font-size") != undefined && $(".numberBtn").css("font-size") != null && (r = parseInt($(".numberBtn").css("font-size").substring(0, $(".numberBtn").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".numberBtn").css("font-size", i + "px")),
            $("#extentedKeyboard>div>button") != undefined && $("#extentedKeyboard>div>button") != null && $("#extentedKeyboard>div>button").css("font-size") != undefined && $("#extentedKeyboard>div>button").css("font-size") != null && (r = parseInt($("#extentedKeyboard>div>button").css("font-size").substring(0, $("#extentedKeyboard>div>button").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $("#extentedKeyboard>div>button").css("font-size", i + "px")),
            $(".qmarks") != undefined && $(".qmarks") != null && $(".qmarks").css("font-size") != undefined && $(".qmarks").css("font-size") != null && (r = parseInt($(".qmarks").css("font-size").substring(0, $(".qmarks").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".qmarks").css("font-size", i + "px")),
            $(".wordCount") != undefined && $(".wordCount") != null && $(".wordCount").css("font-size") != undefined && $(".wordCount").css("font-size") != null && (r = parseInt($(".wordCount").css("font-size").substring(0, $(".wordCount").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".wordCount").css("font-size", i + "px")),
            $(".text-pref-headers") != undefined && $(".text-pref-headers") != null && $(".text-pref-headers").css("font-size") != undefined && $(".text-pref-headers").css("font-size") != null && (r = parseInt($(".text-pref-headers").css("font-size").substring(0, $(".text-pref-headers").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".text-pref-headers").css("font-size", i + "px")),
            $(".mq-root-block") != undefined && $(".mq-root-block") != null && $(".mq-root-block").css("font-size") != undefined && $(".mq-root-block").css("font-size") != null && (r = parseInt($(".mq-root-block").css("font-size").substring(0, $(".mq-root-block").css("font-size").indexOf("px"))),
            i = r + t,
            i < 24 ? i = 24 : i > 48 && (i = 48),
            $(".mq-root-block").css("font-size", i + "px")),
            $(".DNDListItem>div>div>p") != undefined && $(".DNDListItem>div>div>p") != null && $(".DNDListItem>div>div>p").css("font-size") != undefined && $(".DNDListItem>div>div>p").css("font-size") != null && (r = parseInt($(".DNDListItem>div>div>p").css("font-size").substring(0, $(".DNDListItem>div>div>p").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".DNDListItem>div>div>p").css("font-size", i + "px")),
            $(".short-answer-block") != undefined && $(".short-answer-block") != null && $(".short-answer-block").css("font-size") != undefined && $(".short-answer-block").css("font-size") != null && (r = parseInt($(".short-answer-block").css("font-size").substring(0, $(".short-answer-block").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".short-answer-block").css("font-size", i + "px")),
            $(".fontFamilyOption") != undefined && $(".fontFamilyOption") != null && $(".fontFamilyOption").css("font-size") != undefined && $(".fontFamilyOption").css("font-size") && (r = parseInt($(".fontFamilyOption").css("font-size").substring(0, $(".fontFamilyOption").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".fontFamilyOption").css("font-size", i + "px")),
            $(".SectionTitle") != undefined && $(".SectionTitle") != null && $(".SectionTitle").css("font-size") != undefined && $(".SectionTitle").css("font-size") && (r = parseInt($(".SectionTitle").css("font-size").substring(0, $(".SectionTitle").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".SectionTitle").css("font-size", i + "px")),
            $(".SectionScenarioTitle") != undefined && $(".SectionScenarioTitle") != null && $(".SectionScenarioTitle").css("font-size") != undefined && $(".SectionScenarioTitle").css("font-size") && (r = parseInt($(".SectionScenarioTitle").css("font-size").substring(0, $(".SectionScenarioTitle").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".SectionScenarioTitle").css("font-size", i + "px")),
            $(".attempts-badge") != undefined && $(".attempts-badge") != null && $(".attempts-badge").css("font-size") != undefined && $(".attempts-badge").css("font-size") && (r = parseInt($(".attempts-badge").css("font-size").substring(0, $(".attempts-badge").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".attempts-badge").css("font-size", i + "px")),
            $(".RTCTimer") != undefined && $(".RTCTimer") != null && $(".RTCTimer").css("font-size") != undefined && $(".RTCTimer").css("font-size") && (r = parseInt($(".RTCTimer").css("font-size").substring(0, $(".RTCTimer").css("font-size").indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            $(".RTCTimer").css("font-size", i + "px"),
            u = 40 - i,
            u < 0 && (u = 0),
            $(".RTCTimer").css("margin-top", u + "px")),
            $("div.tab button>.label") != undefined && $("div.tab button>.label") != null && $("div.tab button>.label").css("font-size") != undefined && $("div.tab button>.label").css("font-size") && (r = parseInt($("div.tab button>.label").css("font-size").substring(0, $("div.tab button>.label").css("font-size").indexOf("px"))),
            i = r + t,
            i < 8 ? i = 8 : i > 32 && (i = 32),
            $("div.tab button>.label").css("font-size", i + "px")),
            e = window.innerWidth - 200,
            $(".paper-tooltip-0").css("max-width", e + "px"),
            notificationH2 != undefined && notificationH2 != null && (r = parseInt(notificationH2.substring(0, notificationH2.indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            notificationH2 = i + "px",
            $(".notification h2") != undefined && $(".notification h2").css("font-size", notificationH2)),
            f = parseInt($("footer").css("height").substring(0, $("footer").css("height").indexOf("px"))) - 30,
            $("#questionsContainer .question").css("bottom", f + "px"),
            o = "calc(100% - " + (parseInt(f) + parseInt(30) + parseInt(100)) + "px)",
            s = "calc(100% - " + parseInt(f) + "px)",
            $("#AccessibilityContent").css("height", o),
            $("#DescriptionsPane").css("height", s),
            notificationTime != undefined && notificationTime != null && (r = parseInt(notificationTime.substring(0, notificationTime.indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            notificationTime = i + "px",
            $(".notification .time") != undefined && $(".notification .time").css("font-size", notificationTime)),
            notificationRightInner != undefined && notificationRightInner != null && (r = parseInt(notificationRightInner.substring(0, notificationRightInner.indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            notificationRightInner = i + "px",
            $(".notification .right .inner") != undefined && $(".notification .right .inner").css("font-size", notificationRightInner)),
            toastBoxInfoWrapperH2 != undefined && toastBoxInfoWrapperH2 != null && (r = parseInt(toastBoxInfoWrapperH2.substring(0, toastBoxInfoWrapperH2.indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            toastBoxInfoWrapperH2 = i + "px",
            $("#toastBox.info > .wrapper h2") != undefined && $("#toastBox.info > .wrapper h2").css("font-size", toastBoxInfoWrapperH2)),
            n.clearBtnFontSize != undefined && n.clearBtnFontSize != null && (r = parseInt(n.clearBtnFontSize.substring(0, n.clearBtnFontSize.indexOf("px"))),
            i = r + t,
            i < 12 ? i = 12 : i > 40 && (i = 40),
            n.clearBtnFontSize = i + "px"),
            $(".qParagraph input").autoGrowInput({
                minWidth: 50,
                maxWidth: 700
            }));
            n.questions != undefined && n.questions != null && n.questions.size > n.currentIndex && n.questions[n.currentIndex] != undefined && n.questions[n.currentIndex] != null && n.$broadcast(n.questions[n.currentIndex].QuestionID + "-resize")
        }
        ;
        n.IncreaseFont = function() {
            var t = parseInt(document.getElementById("slider").value) + 2;
            t == 41 && (t = 40);
            t <= 40 && (document.getElementById("slider").value = t,
            n.ChangeFont())
        }
        ;
        n.changeLang = function() {
            if (localStorage.lang = localStorage.lang == "en" ? "ar" : "en",
            n.$parent.lang = localStorage.lang,
            n.resources = u.get().localResources[localStorage.lang],
            n.isQuestionPreview && (n.$parent.dir = localStorage.lang != "ar" ? "ltr" : "rtl",
            $("#questionsContainer").hasClass("openDesc"))) {
                $("#toggleDescBar").attr("icon", $("#toggleDescBar").attr("icon") != "description" ? "arrow-" + (n.dir == "ltr" ? "back" : "forward") : "description");
                var t = n.questions[n.currentIndex].scenario.Width != undefined ? n.questions[n.currentIndex].scenario.Width : 40;
                $("#qDescBar").css("width", t + "%");
                localStorage.lang != "ar" ? ($("#questionsContainer.openDesc .question").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 0 0 " + t + "%"
                }),
                $("#questionsContainer.openDesc .scenarioContainer").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 0 0 " + t + "%"
                }),
                $("#questionsContainer.openDesc .questionDisable").css({
                    padding: "0 0 0 " + t + "%"
                })) : ($("#questionsContainer.openDesc .question").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 " + t + "% 0 0"
                }),
                $("#questionsContainer.openDesc .scenarioContainer").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 " + t + "% 0 0"
                }),
                $("#questionsContainer.openDesc .questionDisable").css({
                    padding: "0 " + t + "% 0 0"
                }))
            }
            n.getAccessibilityContentHeight = function() {
                return "100%"
            }
            ;
            switch (localStorage.lang) {
            case "en":
                toast("info", "Language is English", n.resources.Information);
                break;
            case "ar":
                toast("info", "   ", n.resources.Information)
            }
        }
        ;
        n.FontSelectionChanged = function() {
            for (var t = document.getElementsByName("Font"), n = 0, i = t.length; n < i; n++)
                if (t[n].checked)
                    break;
            switch (n) {
            case 0:
                SetglobalFontFamily('"Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif');
                break;
            case 1:
                SetglobalFontFamily("Calibri, sans-serif");
                break;
            case 2:
                SetglobalFontFamily("Sitka, serif");
                break;
            case 3:
                SetglobalFontFamily('"Comic Sans MS", "Comic Sans", Chalkboard, ChalkboardSE-Regular, sans-serif');
                break;
            default:
                SetglobalFontFamily('"Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif')
            }
        }
        ;
        n.ChangeFont = function() {
            var t = document.getElementById("slider").value, i, r;
            document.getElementById("SliderLabel").textContent = t;
            i = titleFontSize;
            r = t - i;
            SettitleFontSize(t);
            n.ChangeFontByVal(r)
        }
        ;
        n.ChangeZoom = function() {
            n.zoomScaleValue = document.getElementById("slider-zoom").value;
            n.zoom = n.zoomScaleValue == 1 ? 1.5 : n.zoomScaleValue == 2 ? 2 : n.zoomScaleValue == 3 ? 4 : 8;
            document.getElementById("SliderLabel-zoom").textContent = n.zoom;
            SetZoomFactor(n.zoom)
        }
        ;
        n.InitializeSettings = function() {
            var r, t, i;
            n.titleFontSize != 18 && (document.getElementById("slider").value = n.titleFontSize,
            n.ChangeFontByVal(n.titleFontSize - 18));
            r = n.titleFontSize;
            document.getElementById("slider-zoom").value = n.zoomScaleValue;
            t = 0;
            switch (globalFontFamily) {
            case '"Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif':
                t = 0;
                break;
            case "Calibri, sans-serif":
                t = 1;
                break;
            case "Sitka, serif":
                t = 2;
                break;
            case '"Comic Sans MS", "Comic Sans", Chalkboard, ChalkboardSE-Regular, sans-serif':
                t = 3;
                break;
            default:
                t = 0
            }
            i = document.getElementsByName("Font");
            i[t].checked = !0
        }
        ;
        n.ChangeSpacing = function() {
            var t = document.getElementById("spacing-switch").checked;
            t == !0 ? (n.lineHeightIsNotDefault = !0,
            SetlineHeight("2.5"),
            SetletterSpacing("0.2em"),
            SetwordSpacing("0.2em")) : (n.lineHeightIsNotDefault = !1,
            SetlineHeight("1.5"),
            SetletterSpacing("normal"),
            SetwordSpacing("normal"));
            $(".qParagraph input").autoGrowInput({
                minWidth: 50,
                maxWidth: 700
            })
        }
        ;
        n.ChangeMagnify = function() {
            n.initMagnify = !n.initMagnify;
            var t = document.getElementById("magnify-switch").checked;
            n.initMagnify = t;
            SetMagnifyBool(t)
        }
        ;
        n.ResetPref = function() {
            var t, i, r;
            document.getElementById("SliderLabel").textContent = 22;
            t = titleFontSize;
            i = 22 - t;
            SettitleFontSize(22);
            n.ChangeFontByVal(i);
            document.getElementById("slider").value = 22;
            n.lineHeightIsNotDefault = !1;
            n.zoom = 2;
            n.zoomScaleValue = 2;
            document.getElementById("SliderLabel-zoom").textContent = n.zoomScaleValue;
            SetZoomFactor(n.zoom);
            document.getElementById("slider-zoom").value = 2;
            n.initMagnify = !1;
            SetlineHeight("1.5");
            SetletterSpacing("normal");
            SetwordSpacing("normal");
            SetMagnifyBool(!1);
            SetglobalFontFamily('"Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif');
            r = document.getElementsByName("Font");
            r[0].checked = !0;
            Settheme("light")
        }
        ;
        n.setThemeLight = function() {
            Settheme("light")
        }
        ;
        n.setThemeDark = function() {
            Settheme("dark")
        }
        ;
        n.ToggleColorScheme = function() {
            theme == "dark" ? Settheme("light") : Settheme("dark")
        }
        ;
        n.toggleQuestionInfo = function() {
            $("#questionsContainer").toggleClass("openInfo").removeClass("openDesc");
            $("#toggleDescBar").attr("icon", "description");
            $("#questionsContainer").hasClass("openDesc") || ($("#questionsContainer .question").css({
                width: "calc(100% - 18px)",
                margin: "0"
            }),
            $("#questionsContainer .scenarioContainer").css({
                width: "calc(100% - 18px)",
                margin: "0"
            }),
            $("#questionsContainer .questionDisable").css({
                padding: "0"
            }));
            n.$broadcast(n.questions[n.currentIndex].QuestionID + "-resize")
        }
        ;
        n.toggleMFR = function() {
            var t = document.getElementById("MFR");
            n.questions[n.currentIndex].marked ? (n.questions[n.currentIndex].marked = !1,
            t.icon = "turned-in-not") : (n.questions[n.currentIndex].marked = !0,
            t.icon = "turned-in")
        }
        ;
        n.clearMFR = function() {
            var t = document.getElementById("MFR");
            n.questions[n.currentIndex].marked ? t.icon = "turned-in" : n.questions[n.currentIndex].marked || (t.icon = "turned-in-not")
        }
        ;
        $("#globalSettings > ul li paper-icon-button").click(function(n) {
            n.stopPropagation()
        });
        n.toggleQuestionDesc = function() {
            if ($("#questionsContainer").removeClass("openInfo").toggleClass("openDesc"),
            $("#toggleDescBar").attr("icon", $("#toggleDescBar").attr("icon") == "description" ? "arrow-" + (n.dir == "ltr" ? "back" : "forward") : "description"),
            $("#questionsContainer").hasClass("openDesc")) {
                var t = n.questions[n.currentIndex].scenario.Width != undefined ? n.questions[n.currentIndex].scenario.Width : 40;
                $("#qDescBar").css("width", t + "%");
                $("#questionsContainer.openDesc .question").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 0 0 " + t + "%"
                });
                $("#questionsContainer.openDesc .scenarioContainer").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 0 0 " + t + "%"
                });
                $("#questionsContainer.openDesc .questionDisable").css({
                    padding: "0 0 0 " + t + "%"
                });
                $("[dir=rtl] #questionsContainer.openDesc .question").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 " + t + "% 0 0"
                });
                $("[dir=rtl] #questionsContainer.openDesc .scenarioContainer").css({
                    width: "calc(" + (100 - t) + "% - 20px)",
                    margin: "0 " + t + "% 0 0"
                });
                $("[dir=rtl] #questionsContainer.openDesc .questionDisable").css({
                    padding: "0 " + t + "% 0 0"
                })
            } else
                $("#questionsContainer .question").css({
                    width: "calc(100% - 18px)",
                    margin: "0"
                }),
                $("#questionsContainer .scenarioContainer").css({
                    width: "calc(100% - 18px)",
                    margin: "0"
                }),
                $("#questionsContainer .questionDisable").css({
                    padding: "0"
                });
            n.$broadcast(n.questions[n.currentIndex].QuestionID + "-resize")
        }
        ;
        n.toggleDescMode = function() {
            $("#questionsContainer").hasClass("openDesc") && ($("#toggleDescBar").attr("icon", $("#toggleDescBar").attr("icon") == "description" ? "arrow-" + (n.dir == "ltr" ? "back" : "forward") : "description"),
            $("#questionsContainer .question").css({
                width: "calc(100% - 18px)",
                margin: "0"
            }),
            $("#questionsContainer .scenarioContainer").css({
                width: "calc(100% - 18px)",
                margin: "0"
            }),
            $("#questionsContainer .questionDisable").css({
                padding: "0"
            }));
            (n.questions[n.currentIndex].scenario.QuestionDesc == null || n.questions[n.currentIndex].scenario.QuestionDesc == undefined) && $("#questionsContainer").removeClass("openDesc");
            n.qDescInline = !n.qDescInline
        }
        ;
        n.GetDescriptionHeight = function() {
            var i = n.questions[n.currentIndex].scenario.QuestionMediaType != ""
              , r = n.questions[n.currentIndex].scenario.QuestionDesc != null
              , u = !n.qDescInline && n.questions[n.currentIndex].QuestionDesc
              , t = 0;
            return (r || u) && (t = i ? 50 : 100,
            r && u && (t = i ? 34 : 50)),
            t + "%"
        }
        ;
        n.GetMediaHeight = function() {
            var u = n.questions[n.currentIndex].scenario.QuestionMediaType != ""
              , i = n.questions[n.currentIndex].scenario.QuestionDesc != null
              , r = !n.qDescInline && n.questions[n.currentIndex].QuestionDesc
              , t = 100;
            return u ? (i || r) && (t = 50,
            i && r && (t = 32)) : t = 0,
            t + "%"
        }
        ;
        n.openQMedia = function() {
            var f = r.open({
                templateUrl: "qmediaModal.html",
                controller: QMediaModalInstanceCtrl,
                windowClass: "qmediaModal " + (n.questions[n.currentIndex].QuestionMediaType.toLowerCase().indexOf("image") != -1 ? "" : "small"),
                resolve: {
                    type: function() {
                        return n.questions[n.currentIndex].QuestionMediaType
                    },
                    src: function() {
                        return (u.get().channel == "ACU" || u.get().channel == "AppACU") && localStorage.ACUhost != undefined ? n.questions[n.currentIndex].QuestionMediaPath : u.get().api + "media/" + n.questions[n.currentIndex].QuestionMediaID + "?host=" + (t.get().preview != undefined ? host != undefined ? host : window.location.host.split(".")[0] : t.get().host)
                    },
                    acuhost: function() {
                        return t.get().ACUHost
                    }
                }
            });
            f.result.then(function(t) {
                n.password = t;
                i.go("viewer")
            }, function() {})
        }
        ;
        n.GetScenarioMediaImg = function(n) {
            return (u.get().channel == "ACU" || u.get().channel == "AppACU") && localStorage.ACUhost != undefined ? HttpScheme + "://" + localStorage.ACUhost + "/" + n.QuestionMediaPath : u.get().api + "media/" + n.QuestionMediaID + "?host=" + (t.get().preview != undefined ? host != undefined ? host : window.location.host.split(".")[0] : t.get().host)
        }
        ;
        n.openSMedia = function(u) {
            var f = r.open({
                templateUrl: "qmediaModal.html",
                controller: QMediaModalInstanceCtrl,
                windowClass: "qmediaModal " + (u.QuestionMediaType.toLowerCase().indexOf("image") != -1 ? "" : "small"),
                resolve: {
                    type: function() {
                        return u.QuestionMediaType
                    },
                    src: function() {
                        return n.GetScenarioMediaImg(u)
                    },
                    acuhost: function() {
                        return t.get().ACUHost
                    }
                }
            });
            f.result.then(function(t) {
                n.password = t;
                i.go("viewer")
            }, function() {})
        }
        ;
        n.submit = function(t) {
            var u, i, r, e, f;
            if (n.caller = t,
            n.saveQ(!0),
            !n.isSections && n.examTime <= 0 && n.examTimeText != "No Limit" || n.isSections && !n.examActive) {
                n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save", !0);
                return
            }
            if (n.isSections) {
                for (u = -1,
                i = 0; i < n.sectTimerPerQs.length; i++)
                    for (r = 0; r < n.sectTimerPerQs[i].Questions.length; r++)
                        if (u++,
                        n.sectTimerPerQs[i].Questions[r].time == 0) {
                            if (i < n.sectIndex && n.backtrack == "1" && n.sections[i].BackTrack) {
                                alert(n.resources.QtnsNotSeenLater);
                                n.setCurrentQuestionIndex(u);
                                return
                            }
                            if (i == n.sectIndex && n.sections[n.sectIndex].BackTrack) {
                                alert(n.resources.QtnsNotSeenCur);
                                n.setCurrentQuestionIndex(u);
                                return
                            }
                            if (i == n.sectIndex + 1) {
                                alert(n.resources.QtnsNotSeenNext);
                                return
                            }
                            if (i > n.sectIndex) {
                                alert(n.resources.QtnsNotSeenPrev);
                                return
                            }
                        }
            } else
                for (i = 0,
                n.backtrack == "0" && (i = n.currentIndex),
                i; i < n.timerPerQs.length; i++)
                    if (n.timerPerQs[i].time == 0) {
                        alert(n.resources.qtnsNotVisited);
                        n.setCurrentQuestionIndex(i);
                        return
                    }
            if (n.reqAllQ || n.reqQbyQ)
                if (n.isSections) {
                    for (i = 0,
                    r = 0,
                    n.backtrack == "0" && (i = n.sectIndex),
                    i; i < n.sectTimerPerQs.length; i++)
                        for (r = 0,
                        n.sections[i].BackTrack || (e = n.sectTimerPerQs[i].Questions.map(function(t, i) {
                            if (t.QuestionID == n.questions[n.currentIndex].QuestionID)
                                return i
                        }).filter(isFinite),
                        r = e[0]),
                        r; r < n.sectTimerPerQs[i].Questions.length; r++)
                            if (f = n.questions.map(function(t, u) {
                                if (t.QuestionID == n.sectTimerPerQs[i].Questions[r].QID)
                                    return u
                            }).filter(isFinite),
                            !n.questions[f[0]].done) {
                                alert(n.resources.SolveAllQtns);
                                n.setCurrentQuestionIndex(f[0]);
                                return
                            }
                } else
                    for (i = 0,
                    n.backtrack == "0" && (i = n.currentIndex),
                    i; i < n.questions.length; i++)
                        if (!n.questions[i].done) {
                            alert(n.resources.SolveAllQtns);
                            n.setCurrentQuestionIndex(i);
                            return
                        }
            var s = $.grep(n.questions, function(n) {
                return !n.done
            }).length > 0
              , o = $.grep(n.questions, function(n) {
                return n.marked
            }).length > 0
              , h = $.grep(n.questions, function(n) {
                return !n.done && n.isRequired
            }).length > 0;
            if (h) {
                alert(n.resources.surveyRequiredSubmit);
                return
            }
            s && n.backtrack != "0" && !n.isSections ? window.confirm(n.resources.unsolved_SubmitConfirm) && (o ? window.confirm(n.resources.markReview_SubmitConfirm) && n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save", !0) : n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save", !0)) : o ? window.confirm(n.resources.markReview_SubmitConfirm) && n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save", !0) : n.isSurvey ? (window.confirm(n.resources.surveyConfirmSubmit),
            n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save", !0)) : window.confirm(n.resources.default_SubmitConfirm) && n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save", !0)
        }
        ;
        n.$on("submit", function() {
            var l = Date.now(), b, r, o, k, c, h;
            if ((l - n.now) / 1e3 > 10 && (l = n.now + 1e3),
            e.setLSStatus(!0, n.caller),
            e.getLS() != undefined)
                if (n.examActive = !1,
                n.$parent.throbber = !0,
                t.get().offline == !0) {
                    var a = JSON.parse(e.getLS())
                      , g = offLoad.asmnt
                      , nt = a.timeSpent
                      , tt = a.submitted
                      , it = a.route
                      , v = 0
                      , y = !1
                      , d = a.answers
                      , p = [];
                    $(d).each(function(n, t) {
                        var u = offLoad.Questions, i = "", r;
                        $(u).each(function(n, r) {
                            t.qid == r.QuestionID && (i = r.QuestionText)
                        });
                        r = {
                            Title: "<b>" + (n + 1) + " -<\/b> " + i,
                            Result: t.pass,
                            QMarks: t.qPoints,
                            Marks: t.marks
                        };
                        p.push(r);
                        v += t.marks
                    });
                    clearInterval(w);
                    b = offLoad.percent / 100 * offLoad.score;
                    y = v > b == !0;
                    r = {};
                    r.Examinee = "";
                    r.Assessment = offLoad.asmntName;
                    r.Result = y;
                    r.Score = parseInt(v.toFixed(2));
                    r.TotalScore = offLoad.score;
                    r.FootPrint_ObtainedMarks = !0;
                    r.FootPrint_TimeSpent = !0;
                    r.FootPrint_Result = !0;
                    r.FootPrint_QuestionsResult = !0;
                    r.FootPrint_QuestionTotalMarks = !0;
                    r.FootPrint_QObtainedMarks = !0;
                    r.FootPrint_QuestionText = !0;
                    r.Questions = p;
                    toast("success", n.resources.submissionComplete, n.resources.Success);
                    t.result = r;
                    t.result.promptMsg = n.promptMsg;
                    t.result.qualifiedMsg = n.qualifiedMsg;
                    t.result.qualifyingPercent = n.qualifyingPercent;
                    t.result.unqualifiedMsg = s ? getParameterByName("session_feedback") : n.unqualifiedMsg;
                    t.result.timeSpent = Math.floor((parseFloat(n.timeLimit) * 6e4 - (n.examEndTime - l)) / 1e3);
                    h = t.get();
                    eid == undefined && delete h.eid;
                    t.set(h);
                    e.clrLS();
                    i.go("results");
                    n.$parent.throbber = !1
                } else
                    (u.get().channel == "ACU" || u.get().channel == "AppACU") && localStorage.ACUhost != undefined ? (c = e.getLS(),
                    o = f({
                        method: "POST",
                        url: HttpScheme + "://" + localStorage.ACUhost + "/_Hub/Cache/Submit",
                        data: {
                            jsonData: c
                        },
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }).success(function(r) {
                        (u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock());
                        r = JSON.parse(r);
                        e.clrLS();
                        t.set({});
                        delete localStorage.user;
                        n.$parent.throbber = !1;
                        n.examActive = !1;
                        r == "1" ? (toast("success", n.resources.submitconfirm_manual, n.resources.Success),
                        i.go("results")) : (r == "-1" ? toast("warning", n.resources.DropSession, n.resources.Warning) : r == "-2" ? toast("warning", n.resources.DropPaper, n.resources.Warning) : r == "-3" ? toast("warning", n.resources.DropExamClosed, n.resources.Warning) : r == "-4" && toast("warning", n.resources.DropCompleted, n.resources.Warning),
                        i.go("login"))
                    }).error(function() {
                        (u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock());
                        n.$parent.throbber = !1;
                        toast("warning", n.resources.error_submit, n.resources.Warning);
                        i.go("navigation")
                    })) : e.checkConnection() ? (u.get().channel == "AppACU" && localStorage.ACUhost == undefined && (u.get().channel = "App",
                    n.channel = u.get().channel),
                    k = u.get().api + "Assessments/Submit/Offline",
                    t.get().sid == undefined ? t.get().preview ? getParameterByName("mode") != undefined && getParameterByName("mode") == "adhoc" ? (o = f({
                        method: "POST",
                        url: u.get().api + "Assessments/Submit/Adhoc/Preview",
                        data: JSON.stringify({
                            jsonData: e.getLS().toString()
                        }),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }),
                    o.success(function(r) {
                        e.clrLS();
                        getParameterByName("callback_domain") != undefined && top.postMessage(JSON.parse(JSON.parse(r)), getParameterByName("callback_domain"));
                        r = JSON.parse(JSON.parse(r));
                        toast("success", n.resources.submissionComplete, n.resources.Success);
                        t.result = r;
                        t.result.promptMsg = n.promptMsg;
                        t.result.qualifiedMsg = n.qualifiedMsg;
                        t.result.qualifyingPercent = n.qualifyingPercent;
                        t.result.unqualifiedMsg = n.unqualifiedMsg;
                        t.result.timeSpent = Math.floor((parseFloat(n.timeLimit) * 6e4 - (n.examEndTime - l)) / 1e3);
                        var f = t.get();
                        eid == undefined && delete f.eid;
                        t.set(f);
                        (u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock());
                        i.go("results")
                    }).error(function() {
                        toast("warning", n.resources.submitconfirm_errorreport, n.resources.Warning);
                        n.$parent.throbber = !1;
                        var r = t.get();
                        eid == undefined && delete r.eid;
                        t.set(r);
                        i.go("navigation")
                    })) : (o = getParameterByName("qid") != undefined && getParameterByName("qid") != null && getParameterByName("qid") != "" ? f({
                        method: "POST",
                        url: u.get().api + "Questions/Submit/Offline/Preview",
                        data: JSON.stringify({
                            jsonData: e.getLS().toString()
                        }),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }) : f({
                        method: "POST",
                        url: u.get().api + "Assessments/Submit/Offline/Preview",
                        data: {
                            jsonData: e.getLS().toString()
                        },
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }),
                    o.success(function(r) {
                        e.clrLS();
                        r = JSON.parse(JSON.parse(r));
                        toast("success", n.resources.submissionComplete, n.resources.Success);
                        t.result = r;
                        t.result.promptMsg = n.promptMsg;
                        t.result.qualifiedMsg = n.qualifiedMsg;
                        t.result.qualifyingPercent = n.qualifyingPercent;
                        t.result.unqualifiedMsg = n.unqualifiedMsg;
                        var f = t.get();
                        eid == undefined && delete f.eid;
                        t.set(f);
                        i.go("results");
                        (u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock())
                    }).error(function() {
                        toast("warning", n.resources.submitconfirm_errorreport, n.resources.Warning);
                        n.$parent.throbber = !1;
                        var r = t.get();
                        eid == undefined && delete r.eid;
                        t.set(r);
                        i.go("navigation")
                    })) : (c = e.getLS().toString(),
                    c = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(c), n.key, {
                        keySize: 16,
                        iv: n.iv,
                        mode: CryptoJS.mode.CBC,
                        padding: CryptoJS.pad.Pkcs7
                    }).toString(),
                    o = f({
                        method: "POST",
                        url: k,
                        data: JSON.stringify({
                            jsonData: c
                        }),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    })) : o = f({
                        method: "POST",
                        url: u.get().api + "Surveys/Submit/Offline",
                        data: JSON.stringify({
                            jsonData: e.getLS().toString()
                        }),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }),
                    t.get().preview || o.success(function() {
                        if ((u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock()),
                        t.get().sid != undefined) {
                            toast("success", n.resources.surveySubmitSuccess, n.resources.Success);
                            n.surveyDone = !0;
                            n.RedirectURL != null && setTimeout(function() {
                                window.location = n.RedirectURL
                            }, n.RedirectTimeout);
                            n.$parent.throbber = !1;
                            e.clrLS();
                            return
                        }
                        if (n.isManual == "0" && u.get().channel != "ACU")
                            f.get(u.get().api + "Assessments/Results/Get?result=" + t.get().resultID + "&qids=" + JSON.stringify(n.QuestionSet) + "&route=" + t.get().host).success(function(r) {
                                var f;
                                e.clrLS();
                                r = JSON.parse(JSON.parse(r));
                                toast("success", n.resources.submissionComplete, n.resources.Success);
                                t.result = r;
                                t.result.RemoteIDCheck = exam.RemoteIDCheck;
                                t.result.isSecure = n.isSecure;
                                t.result.promptMsg = n.promptMsg;
                                t.result.qualifiedMsg = n.qualifiedMsg;
                                t.result.qualifyingPercent = n.qualifyingPercent;
                                t.result.unqualifiedMsg = n.unqualifiedMsg;
                                t.result.timeSpent = Math.floor((parseFloat(n.timeLimit) * 6e4 - (n.examEndTime - l)) / 1e3);
                                n.showReport == "1" || getParameterByName("uname") != undefined && getParameterByName("eid") != undefined && getParameterByName("uname") != "" && getParameterByName("eid") != "" ? (exam.RemoteIDCheck == 1 || localStorage.ai_sessionID != null && localStorage.ai_sessionID != undefined,
                                f = t.get(),
                                eid == undefined && delete f.eid,
                                t.set(f),
                                i.go("results")) : (eid ? n.isPractice == "0" ? i.go("login") : confirm(n.resources.retake_assessment) ? i.transitionTo(i.current, $stateParams, {
                                    reload: !0,
                                    inherit: !1,
                                    notify: !0
                                }) : i.go("login") : (f = t.get(),
                                delete f.eid,
                                t.set(f),
                                i.go("navigation")),
                                (u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock()),
                                u.get().channel != "Widget" && (exam.RemoteIDCheck == 1 || localStorage.ai_sessionID != null && localStorage.ai_sessionID != undefined ? i.go("results") : n.isSecure ? document.location = "SBXCMD:rldbxb=1" : window.location.href = document.location.origin + "/Dashboard.aspx"))
                            }).error(function() {
                                toast("warning", n.resources.submitconfirm_errorreport, n.resources.Warning);
                                n.$parent.throbber = !1;
                                var r = t.get();
                                eid == undefined && delete r.eid;
                                t.set(r);
                                i.go("navigation")
                            });
                        else if (e.reset(),
                        toast("success", n.resources.submitconfirm_manual, n.resources.Success),
                        n.examActive = !1,
                        getParameterByName("uname") != undefined && getParameterByName("eid") != undefined && getParameterByName("uname") != "" && getParameterByName("eid") != "")
                            u.get().channel != "Widget" && (exam.RemoteIDCheck == 1 || localStorage.ai_sessionID != null && localStorage.ai_sessionID != undefined ? i.go("results") : n.isSecure ? document.location = "SBXCMD:rldbxb=1" : window.location.href = document.location.origin + "/Dashboard.aspx");
                        else if (eid)
                            n.isPractice == "0" ? (t.set({}),
                            delete localStorage.user,
                            i.go("login")) : confirm(n.resources.retake_assessment) ? i.transitionTo(i.current, $stateParams, {
                                reload: !0,
                                inherit: !1,
                                notify: !0
                            }) : (t.set({}),
                            delete localStorage.user,
                            i.go("login"));
                        else {
                            var r = t.get();
                            delete r.eid;
                            t.set(r);
                            i.go("navigation")
                        }
                    }).error(function() {
                        if ((u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock()),
                        n.$parent.throbber = !1,
                        toast("warning", n.resources.error_submit, n.resources.Warning),
                        eid)
                            n.isPractice == "0" ? (t.set({}),
                            delete localStorage.user,
                            i.go("login")) : confirm(n.resources.retake_assessment) ? i.transitionTo(i.current, $stateParams, {
                                reload: !0,
                                inherit: !1,
                                notify: !0
                            }) : (t.set({}),
                            delete localStorage.user,
                            i.go("login"));
                        else {
                            var r = t.get();
                            delete r.eid;
                            t.set(r);
                            i.go("navigation")
                        }
                    })) : (n.$parent.throbber = !1,
                    toast("warning", n.resources.error_submit, n.resources.Warning),
                    eid ? n.isPractice == "0" ? (t.set({}),
                    i.go("login")) : confirm(n.resources.retake_assessment) ? i.transitionTo(i.current, $stateParams, {
                        reload: !0,
                        inherit: !1,
                        notify: !0
                    }) : (t.set({}),
                    i.go("login")) : (h = t.get(),
                    delete h.eid,
                    t.set(h),
                    i.go("navigation")));
            else
                toast("error", n.resources.error_submit_cache, n.resources.Error)
        });
        n.sectTimer = function() {
            var i = Date.now(), t;
            for ((i - n.now) / 1e3 > 10 && (i = n.now + 500),
            t = 0; t < n.sections.length; t++)
                n.sections[t].Duration != "" && n.sections[t].Duration != null && n.SectionTimer[t] != "00:00" && n.sectionEndTime[t] != null && (n.sectionTime = Math.floor((n.sectionEndTime[t] - i) / 1e3),
                n.SectionTimer[t] = Math.floor(n.sectionTime / 60) + ":" + (n.sectionTime % 60 < 10 ? "0" : "") + n.sectionTime % 60,
                n.sectTimerPerQs[t].TimeLeft = n.sectionTime,
                n.$apply(),
                n.sectionTime <= 0 && (n.SectionTimer[t] = "00:00"));
            if (n.sections[n.sectIndex].Duration != "" && n.sections[n.sectIndex].Duration != null && (n.sectionTime = Math.floor((n.sectionEndTime[n.sectIndex] - i) / 1e3),
            n.sectionTime <= 0))
                if (n.SectionTimer[n.sectIndex] = "00:00",
                n.sectIndex == n.sections.length - 1)
                    n.examActive = !1,
                    n.submit("Auto");
                else
                    for (t = 0; t < n.questions.length; t++)
                        if (n.questions[t].SectionID == n.sections[n.sectIndex + 1].SectionID) {
                            n.setCurrentQuestionIndex(t);
                            $(h).removeClass("core-opened");
                            $(h).hide();
                            break
                        }
            n.examActive && o(n.sectTimer, 1e3);
            n.timeWarning && n.sectionTime <= parseInt(n.timeWarning) * 60 && (toast("warning", n.resources.timeWarning.replace("@1", n.timeWarning), n.resources.Warning),
            n.timeWarning = undefined)
        }
        ;
        n.timer = function(t) {
            var f = Date.now(), i, u, r;
            n.now = (f - n.now) / 1e3 > 5 ? n.now + 1e3 : f;
            n.questions[n.currentIndex].endTime && t ? $("#qTimer").val(Math.floor((n.questions[n.currentIndex].endTime - (n.questions[n.currentIndex].QuestionAttempts == null || n.questions[n.currentIndex].QuestionAttempts > 0 ? n.now : n.questions[n.currentIndex].stopTime)) / 1e3)).knob({
                max: n.questions[n.currentIndex].QuestionTime * 60,
                format: function(n) {
                    return Math.floor(n / 60) + ":" + (n % 60 < 10 ? "0" : "") + n % 60
                },
                draw: function() {
                    var t, i, r, u, f;
                    if (this.$.data("skin") == "tron")
                        return this.cursorExt = .3,
                        t = this.arc(this.cv),
                        r = 1,
                        this.g.lineWidth = this.lineWidth,
                        this.o.displayPrevious && (i = this.arc(this.v),
                        this.g.beginPath(),
                        this.g.strokeStyle = this.pColor,
                        this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, i.s, i.e, i.d),
                        this.g.stroke()),
                        this.g.beginPath(),
                        u = n.isDarkTheme() ? this.o.fgColorDark : this.o.fgColorLight,
                        f = n.isDarkTheme() ? this.fgColorDark : this.fgColorLight,
                        this.g.strokeStyle = r ? u : f,
                        this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, t.s, t.e, t.d),
                        this.g.stroke(),
                        this.g.lineWidth = 2,
                        this.g.beginPath(),
                        this.g.strokeStyle = n.isDarkTheme() ? this.o.fgColorDark : this.o.fgColorLight,
                        this.g.arc(this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, !1),
                        this.g.stroke(),
                        !1
                },
                fgColorLight: "#fff",
                inputColorLight: "#fff",
                fgColorDark: "#24475b",
                inputColorDark: "#24475b"
            }).trigger("change") : n.questions[n.currentIndex].endTime && (n.questions[n.currentIndex].QuestionAttempts == null || n.questions[n.currentIndex].QuestionAttempts > 0) && ($("#qTimer").val(Math.floor((n.questions[n.currentIndex].endTime - n.now) / 1e3)).trigger("change"),
            (n.questions[n.currentIndex].endTime - n.now < 100 || n.questions[n.currentIndex].QuestionAttempts == 0) && (i = "#question-" + n.questions[n.currentIndex].order,
            n.questions[n.currentIndex].ScenarioID != null && (i = i + "-" + n.questions[n.currentIndex].scenario.order),
            i = i + " .questionDisable",
            u = $(i),
            r = $(u).parent().parent()[0],
            $(u).height(($(r).scrollHeight > $(r).height() ? $(r).scrollHeight : $(r).height()) + 300).width("100%"),
            n.questions[n.currentIndex].done == undefined && n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save")));
            t || (n.timeLimit != "" && (n.examTime = Math.floor((n.examEndTime - n.now) / 1e3),
            n.examTimeText = Math.floor(n.examTime / 60) + ":" + (n.examTime % 60 < 10 ? "0" : "") + n.examTime % 60,
            n.$apply(),
            e.setLSTimer(Math.floor((parseFloat(n.timeLimit) * 6e4 - (n.examEndTime - n.now)) / 1e3), !1, null),
            n.examTime <= 0 && (n.examActive = !1,
            n.submit("Auto"))),
            n.examActive && o(n.timer, 1e3),
            n.timeWarning && n.examTime <= parseInt(n.timeWarning) * 60 && (toast("warning", n.resources.timeWarning.replace("@1", n.timeWarning), n.resources.Warning),
            n.timeWarning = undefined))
        }
        ;
        n.stimer = function() {
            var h = Date.now(), s, f, r, u, e, t, i;
            if (n.now = (h - n.now) / 1e3 > 5 ? n.now + 1e3 : h,
            n.isSections) {
                if (n.sectQList[n.sectIndex][n.CurrentDisplayIndex].endTime) {
                    if (n.sectQList[n.sectIndex][n.CurrentDisplayIndex].endTime - n.now < 100) {
                        for (s = n.questions.map(function(n) {
                            return n.QuestionID
                        }),
                        f = 0; f < n.sectQList[n.sectIndex][n.CurrentDisplayIndex].questions.length; f++)
                            r = s.indexOf(n.sectQList[n.sectIndex][n.CurrentDisplayIndex].questions[f].QuestionID),
                            u = "#question-" + n.questions[r].order,
                            n.questions[r].ScenarioID != null && (u = u + "-" + n.questions[r].scenario.order),
                            u = u + " .questionDisable",
                            e = $(u),
                            t = $(e).parent().parent()[0],
                            $(e).height(($(t).scrollHeight > $(t).height() ? $(t).scrollHeight : $(t).height()) + 300).width($(t).scrollWidth > $(t).width() ? $(t).scrollWidth : $(t).width() + 300),
                            n.questions[r].done == undefined && n.$broadcast(n.questions[r].QuestionID + "-save");
                        i = 0;
                        n.sectQList[n.sectIndex][n.CurrentDisplayIndex].QuestionDisplayTime = Math.floor(i / 60) + ":" + (i % 60 < 10 ? "0" : "") + i % 60
                    } else
                        i = Math.floor((n.sectQList[n.sectIndex][n.CurrentDisplayIndex].endTime - n.now) / 1e3),
                        n.sectQList[n.sectIndex][n.CurrentDisplayIndex].QuestionDisplayTime = Math.floor(i / 60) + ":" + (i % 60 < 10 ? "0" : "") + i % 60;
                    n.examActive && o(n.stimer, 1e3)
                }
            } else if (n.qList[n.CurrentDisplayIndex].endTime) {
                if (n.qList[n.CurrentDisplayIndex].endTime - n.now < 100) {
                    for (s = n.questions.map(function(n) {
                        return n.QuestionID
                    }),
                    f = 0; f < n.qList[n.CurrentDisplayIndex].questions.length; f++)
                        r = s.indexOf(n.qList[n.CurrentDisplayIndex].questions[f].QuestionID),
                        u = "#question-" + n.questions[r].order,
                        n.questions[r].ScenarioID != null && (u = u + "-" + n.questions[r].scenario.order),
                        u = u + " .questionDisable",
                        e = $(u),
                        t = $(e).parent().parent()[0],
                        $(e).height(($(t).scrollHeight > $(t).height() ? $(t).scrollHeight : $(t).height()) + 300).width($(t).scrollWidth > $(t).width() ? $(t).scrollWidth : $(t).width() + 300),
                        n.questions[r].done == undefined && n.$broadcast(n.questions[r].QuestionID + "-save");
                    i = 0;
                    n.qList[n.CurrentDisplayIndex].QuestionDisplayTime = Math.floor(i / 60) + ":" + (i % 60 < 10 ? "0" : "") + i % 60
                } else
                    i = Math.floor((n.qList[n.CurrentDisplayIndex].endTime - n.now) / 1e3),
                    n.qList[n.CurrentDisplayIndex].QuestionDisplayTime = Math.floor(i / 60) + ":" + (i % 60 < 10 ? "0" : "") + i % 60;
                n.examActive && o(n.stimer, 1e3)
            }
        }
        ;
        n.clearQ = function() {
            window.confirm(n.resources.confirmClear) && (n.$broadcast(n.questions[n.currentIndex].QuestionID + "-clear"),
            e.clearQLS(n.questions[n.currentIndex].QuestionID),
            n.questions[n.currentIndex].done = !1,
            n.recountDone())
        }
        ;
        n.saveQ = function(t) {
            (n.questions[n.currentIndex].QuestionAttempts == null || n.questions[n.currentIndex].QuestionAttempts > 0 && !t) && (n.questions[n.currentIndex].endTime - n.now > 0 || n.questions[n.currentIndex].endTime == undefined) && (n.$broadcast(n.questions[n.currentIndex].QuestionID + "-save"),
            n.recountDone())
        }
        ;
        n.recountDone = function() {
            var t = $.grep(n.questions, function(n) {
                return n.done
            }).length;
            n.doneCount = Math.floor(t * 100 / n.questions.length)
        }
        ;
        n.$on("attemptsDone", function() {
            var t, r, i;
            n.questions[n.currentIndex].QuestionAttempts = 0;
            n.questions[n.currentIndex].stopTime = n.now;
            t = "#question-" + n.questions[n.currentIndex].order;
            n.questions[n.currentIndex].ScenarioID != null && (t = t + "-" + n.questions[n.currentIndex].scenario.order);
            t = t + " .questionDisable";
            r = $(t);
            i = $(r).parent().parent()[0];
            $(r).height(($(i).scrollHeight > $(i).height() ? $(i).scrollHeight : $(i).height()) + 300).width("100%");
            toast("info", n.resources.qAttemptsIsUp, n.resources.Information)
        });
        n.openInfo = function() {
            window.open(window.location.protocol + "//" + (n.host != undefined && n.host != "" ? n.host + "." : "") + n.res_Uri.replace("http://", "").replace("https://", "") + "Questions/Assessment?qid=" + n.questions[n.currentIndex].QuestionID)
        }
        ;
        function g(n, t, i) {
            for (var v, a, y, f, o, u = [], l = [], s = [], e = 0, r = 0; r < n.length; r++)
                if (n[r].QuestionType == "Matching" && n[r].QuestionShuffled === !0 ? (n[r].items.sort(function() {
                    return .5 - Math.random()
                }),
                n[r].answers.sort(function() {
                    return .5 - Math.random()
                })) : n[r].QuestionType == "ReOrder" && n[r].QuestionShuffled === !0 ? n[r].ReorderItems.sort(function() {
                    return .5 - Math.random()
                }) : (n[r].QuestionType == "MultipleChoice" || n[r].QuestionType == "MultipleSelect") && n[r].QuestionShuffled === !0 && n[r].Data.sort(function() {
                    return .5 - Math.random()
                }),
                i == !0 || n[r].ScenarioID == null)
                    u.push(n[r]),
                    n[r].QuestionFixedOrder === !0 && (l.push(e),
                    s.push(n[r].QuestionID)),
                    e++;
                else {
                    var h = []
                      , c = n[r].ScenarioID
                      , f = $.grep(t, function(n) {
                        return n.QuestionID == c
                    });
                    for (f[0].QuestionFixedOrder == !0 && (l.push(e),
                    s.push(c)); r < n.length && n[r].ScenarioID != null && n[r].ScenarioID == c; )
                        h.push(n[r]),
                        r++;
                    f[0].QuestionShuffled && (h = g(h, null, !0));
                    r--;
                    e++;
                    u.push({
                        Question: h,
                        QuestionID: c
                    })
                }
            for (u.sort(function() {
                return .5 - Math.random()
            }),
            v = n.length,
            n = [],
            e = 0,
            r = 0; n.length < v; r++)
                if (a = l.indexOf(e),
                a != -1) {
                    if (y = s[a],
                    f = $.grep(u, function(n) {
                        return n.QuestionID == y
                    }),
                    f.length == 1)
                        if (f[0].Question != null && f[0].Question.length > 0)
                            for (o = 0; o < f[0].Question.length; o++)
                                n.push(f[0].Question[o]);
                        else
                            n.push(f[0]);
                    e++;
                    r--
                } else if (!(r < u.length) || s.indexOf(u[r].QuestionID) == -1) {
                    if (u[r].Question != null && u[r].Question.length > 0)
                        for (o = 0; o < u[r].Question.length; o++)
                            n.push(u[r].Question[o]);
                    else
                        n.push(u[r]);
                    e++
                }
            return n
        }
        function tt(n, t) {
            for (var a, l, v, f, e, r = [], c = [], o = [], u = 0, i = 0; i < n.length; i++)
                if (n[i].QuestionType == "Matching" && n[i].QuestionShuffled == !0 ? (n[i].items.sort(function() {
                    return .5 - Math.random()
                }),
                n[i].answers.sort(function() {
                    return .5 - Math.random()
                })) : n[i].QuestionType == "ReOrder" && n[i].QuestionShuffled == !0 ? n[i].ReorderItems.sort(function() {
                    return .5 - Math.random()
                }) : (n[i].QuestionType == "MultipleChoice" || n[i].QuestionType == "MultipleSelect") && n[i].QuestionShuffled == !0 && n[i].Data.sort(function() {
                    return .5 - Math.random()
                }),
                n[i].ScenarioID == null)
                    r.push(n[i]),
                    c.push(u),
                    o.push(n[i].QuestionID),
                    u++;
                else {
                    var s = []
                      , h = n[i].ScenarioID
                      , f = $.grep(t, function(n) {
                        return n.QuestionID == h
                    });
                    for (c.push(u),
                    o.push(h); i < n.length && n[i].ScenarioID != null && n[i].ScenarioID == h; )
                        s.push(n[i]),
                        i++;
                    f[0].QuestionShuffled && (s = g(s, null, !0));
                    i--;
                    u++;
                    r.push({
                        Question: s,
                        QuestionID: h
                    })
                }
            for (a = n.length,
            n = [],
            u = 0,
            i = 0; n.length < a; i++)
                if (l = c.indexOf(u),
                l != -1) {
                    if (v = o[l],
                    f = $.grep(r, function(n) {
                        return n.QuestionID == v
                    }),
                    f.length == 1)
                        if (f[0].Question != null && f[0].Question.length > 0)
                            for (e = 0; e < f[0].Question.length; e++)
                                n.push(f[0].Question[e]);
                        else
                            n.push(f[0]);
                    u++;
                    i--
                } else if (!(i < r.length) || o.indexOf(r[i].QuestionID) == -1) {
                    if (r[i].Question != null && r[i].Question.length > 0)
                        for (e = 0; e < r[i].Question.length; e++)
                            n.push(r[i].Question[e]);
                    else
                        n.push(r[i]);
                    u++
                }
            return n
        }
        function st(t) {
            var r = n.now
              , i = null;
            do
                i = Date.now();
            while (i - r < t)
        }
        if (n.logout = function(r) {
            (r || confirm(n.resources.logout_confirm)) && ((u.get().channel == "ACU" || u.get().channel == "AppACU") && localStorage.ACUhost != undefined ? (delete localStorage.tempAsmntInfo,
            f({
                method: "POST",
                url: HttpScheme + "://" + localStorage.ACUhost + "/_hub/User/Logout",
                data: {
                    jsonData: JSON.stringify({
                        un: t.get().user,
                        pwd: t.get().pass,
                        eid: t.get().eid,
                        session: t.get().session
                    })
                },
                headers: {
                    "Content-Type": "application/json"
                }
            }).success(function(r) {
                connected = !0;
                r && (t.set({}),
                delete localStorage.user,
                i.go("login"),
                u.get().channel == "App" || u.get().channel == "AppACU" ? Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock() : document.location = "SBXCMD:rldbxb=1")
            }).error(function() {
                n.$parent.throbber = !1;
                toast("warning", n.resources.nonetwork, n.resources.Warning)
            })) : (u.get().channel == "AppACU" && localStorage.ACUhost == undefined && (u.get().channel = "App",
            n.channel = u.get().channel),
            t.set({}),
            delete localStorage.user,
            i.go("login"),
            u.get().channel == "App" || u.get().channel == "AppACU" ? Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock() : document.location = "SBXCMD:rldbxb=1"))
        }
        ,
        n.$parent.throbber = !0,
        t.get().offline == !0) {
            if (n.$parent.throbber = !1,
            exam = offLoad,
            p = t.get(),
            p.resultID = exam.resultID,
            t.set(p),
            n.name = exam.asmntName,
            n.questions = (exam.shuffleQtns == undefined || exam.shuffleQtns == "1") && (exam.IsLOFT == "0" || exam.IsLOFT == undefined) ? g(exam.Questions, exam.Scenarios, !1) : tt(exam.Questions, exam.Scenarios),
            n.scenarios = exam.Scenarios,
            n.sections = exam.Sections,
            n.allowCalc = exam.AllowCalculator,
            n.isSections = exam.Sections != null && exam.Sections.length > 0 ? !0 : !1,
            n.backtrack = exam.backtrack,
            exam.isRequired != "0" && (n.isSections || n.backtrack != "0" || exam.isRequired != "1") ? exam.isRequired == "1" ? (n.reqQbyQ = !1,
            n.reqAllQ = !0) : (n.reqQbyQ = !1,
            n.reqAllQ = !1) : (n.reqQbyQ = !0,
            n.reqAllQ = !1),
            n.isManual = exam.isManual,
            n.isPractice = exam.isPractice,
            n.showReport = exam.showReport,
            n.QuestionSet = exam.QuestionSet,
            n.timeLimit = exam.timeLimit,
            n.timeWarning = exam.timeWarning,
            n.promptMsg = exam.promptMsg,
            n.qualifiedMsg = exam.qualifiedMsg,
            n.qualifyingPercent = exam.qualifyingPercent,
            n.unqualifiedMsg = exam.unqualifiedMsg,
            n.dir = exam.dir == "rtl" || exam.dir == "ltr" ? exam.dir : "ltr",
            localStorage.lang = exam.dir == "rtl" ? "ar" : localStorage.lang,
            $("body").attr("dir", n.dir),
            nt(),
            exam.IsSecure,
            n.timeLimit == "")
                if (n.isSections) {
                    for (c = 0; c < n.sections.length; c++)
                        if (n.sections[c].Duration != null || n.sections[c].BackTrack != null && n.sections[c].BackTrack == !1) {
                            n.backtrack = "0";
                            break
                        }
                    n.sections[n.sectIndex].Duration != null && n.sections[n.sectIndex].Duration != "" && (n.sectionEndTime[n.sectIndex] = n.now + parseFloat(n.sections[n.sectIndex].Duration) * 6e4,
                    n.newTimer = !0,
                    n.$apply(),
                    o(function() {
                        n.newTimer = !1;
                        o(function() {
                            n.sectTimer()
                        }, 1)
                    }, 10))
                } else
                    n.examTimeText = "No Limit",
                    n.examStartTime = n.now,
                    b = setInterval(function() {
                        e.setLSTimer(Math.floor((n.now - n.examStartTime) / 1e3), !1, null);
                        n.examActive == !1 && clearInterval(b)
                    }, 1e3);
            else {
                if (n.isSections)
                    for (c = 0; c < n.sections.length; c++)
                        if (n.sections[c].Duration != null || n.sections[c].BackTrack != null && n.sections[c].BackTrack == !1) {
                            n.backtrack = "0";
                            break
                        }
                n.examEndTime = n.now + parseFloat(n.timeLimit) * 6e4
            }
            !n.questions[0].endTime && n.questions[0].QuestionTime && (n.questions[0].endTime = n.now + n.questions[0].QuestionTime * 6e4);
            e.setLSDefault(null)
        } else
            t.get().sid == undefined ? u.get().channel != undefined && (u.get().channel == "ACU" || u.get().channel == "AppACU") && localStorage.ACUhost != undefined ? (delete localStorage.tempAsmntInfo,
            f({
                method: "POST",
                url: HttpScheme + "://" + localStorage.ACUhost + "/_hub/Examinee/Get",
                data: {
                    jsonData: JSON.stringify({
                        un: t.get().user,
                        eid: t.get().eid
                    })
                },
                headers: {
                    "Content-Type": "application/json"
                }
            }).success(function(t) {
                t = JSON.parse(t);
                t == "0" ? (toast("warning", n.resources.ACUExamAlreadyComplete, n.resources.Warning),
                n.logout(!0)) : t == "-1" ? (toast("warning", n.resources.NotAssigned, n.resources.Warning),
                n.logout(!0)) : t == "-2" ? (toast("warning", n.resources.ACUKeyInvalid, n.resources.Warning),
                n.logout(!0)) : rt(t)
            }).error(function() {
                n.$parent.throbber = !1;
                toast("warning", n.resources.nonetwork, n.resources.Warning)
            })) : (u.get().channel == "AppACU" && localStorage.ACUhost == undefined && (u.get().channel = "App",
            n.channel = u.get().channel),
            getParameterByName("mode") == "adhoc" ? v = f.get(u.get().api + "Adhoc/Session/Get?keywords=" + getParameterByName("keywords") + "&min=" + getParameterByName("min") + "&max=" + getParameterByName("max") + "&subject=" + getParameterByName("subject_code") + "&outcomes=" + getParameterByName("outcomes") + "&percent=" + getParameterByName("percentage") + "&calculator=" + getParameterByName("calculator") + "&session_feedback=" + getParameterByName("session_feedback") + "&timer=" + getParameterByName("timer") + "&host=" + getParameterByName("host") + "&channel=" + u.get().channel + "&prev=" + (t.get().preview != undefined ? !0 : !1)) : t.get().eid != null && t.get().eid != undefined ? (k = JSON.stringify({
                eid: t.get().eid,
                un: t.get().user,
                route: t.get().preview != undefined ? host != undefined ? host : window.location.host.split(".")[0] : t.get().host,
                channel: u.get().channel,
                prev: n.preview != undefined ? !0 : !1
            }),
            d = CryptoJS.AES.encrypt(CryptoJS.enc.Utf8.parse(k), n.key, {
                keySize: 16,
                iv: n.iv,
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7
            }),
            v = f({
                method: "POST",
                url: u.get().api + "V2.0/assessments/get",
                data: {
                    jsonData: d.toString()
                },
                headers: {
                    "Content-Type": "application/json"
                }
            })) : t.get().qid != null && t.get().qid != undefined && (n.isQuestionPreview = !0,
            v = f.get(u.get().api + "questions/get?qid=" + t.get().qid + "&route=" + (t.get().preview != undefined ? host != undefined ? host : window.location.host.split(".")[0] : t.get().host) + "&channel=" + u.get().channel + "&prev=" + (t.get().preview != undefined ? !0 : !1))),
            v.success(function(r) {
                var u, h, c, f;
                n.$parent.throbber = !1;
                u = JSON.parse(r);
                n.$parent.throbber = !1;
                u == -2 || u == "-2" ? (toast("warning", n.resources.NotAssigned, n.resources.Warning),
                i.go("results")) : u == -3 || u == "-3" ? (toast("warning", n.resources.ExamTimeEnded, n.resources.Warning),
                i.go("results")) : u == -4 || u == "-4" ? (toast("warning", n.resources.PracticeEnded, n.resources.Warning),
                i.go("results")) : u != -1 || u != "-1" ? (exam = JSON.parse(u),
                h = t.get(),
                h.resultID = exam.resultID,
                getParameterByName("mode") == "adhoc" && (h.adhoc_questions_count = exam.Questions.length),
                t.set(h),
                n.name = s ? getParameterByName("session_title") != null && getParameterByName("session_title") != "" ? getParameterByName("session_title") : "Quiz" : exam.asmntName,
                n.questions = (exam.shuffleQtns == undefined || exam.shuffleQtns == "1") && (exam.IsLOFT == "0" || exam.IsLOFT == undefined) ? g(exam.Questions, exam.Scenarios, !1) : tt(exam.Questions, exam.Scenarios),
                n.scenarios = exam.Scenarios,
                n.sections = exam.Sections,
                n.allowCalc = exam.AllowCalculator,
                n.isSections = exam.Sections != null && exam.Sections.length > 0 ? !0 : !1,
                n.backtrack = exam.backtrack,
                exam.isRequired != "0" && (n.isSections || n.backtrack != "0" || exam.isRequired != "1") ? exam.isRequired == "1" ? (n.reqQbyQ = !1,
                n.reqAllQ = !0) : (n.reqQbyQ = !1,
                n.reqAllQ = !1) : (n.reqQbyQ = !0,
                n.reqAllQ = !1),
                n.isManual = exam.isManual,
                n.isPractice = exam.isPractice,
                n.showReport = exam.showReport,
                n.QuestionSet = exam.QuestionSet,
                n.timeLimit = exam.timeLimit,
                n.timeWarning = exam.timeWarning,
                n.promptMsg = exam.promptMsg,
                n.qualifiedMsg = exam.qualifiedMsg,
                n.qualifyingPercent = exam.qualifyingPercent,
                n.unqualifiedMsg = exam.unqualifiedMsg,
                n.isSecure = exam.IsSecure,
                n.isQuestionPreview || (n.dir = exam.dir == "rtl" || exam.dir == "ltr" ? exam.dir : "ltr",
                localStorage.lang = exam.dir == "rtl" ? "ar" : localStorage.lang,
                $("body").attr("dir", n.dir)),
                nt(),
                exam.IsSecure,
                n.timeLimit == "" ? n.isSections ? (n.sections[n.sectIndex].Duration != null && n.sections[n.sectIndex].Duration != "" && (n.sectionEndTime[n.sectIndex] = n.now + parseFloat(n.sections[n.sectIndex].Duration) * 6e4,
                n.newTimer = !0,
                n.$apply(),
                o(function() {
                    n.newTimer = !1;
                    o(function() {
                        n.sectTimer()
                    }, 1)
                }, 10)),
                n.backtrack == "0" && (n.examStartTime = n.now,
                c = setInterval(function() {
                    e.setLSTimer(Math.floor((Date.now() - n.examStartTime) / 1e3), !1, null);
                    n.examActive == !1 && clearInterval(c)
                }, 1e3))) : (n.examTimeText = "No Limit",
                n.examStartTime = n.now,
                c = setInterval(function() {
                    e.setLSTimer(Math.floor((Date.now() - n.examStartTime) / 1e3), !1, null);
                    n.examActive == !1 && clearInterval(c)
                }, 1e3)) : n.examEndTime = n.now + parseFloat(n.timeLimit) * 6e4,
                !n.questions[0].endTime && n.questions[0].QuestionTime && (n.questions[0].endTime = n.now + n.questions[0].QuestionTime * 6e4),
                n.toggleQuestionInfo(),
                exam.getSolvedQtns != !1 && exam.resCache != undefined ? (f = exam.resCache,
                f.session = t.get().session,
                localStorage["sa-CacheObj:" + t.get().user + "_" + t.get().eid] = JSON.stringify(f),
                o(function() {
                    var l, t, r, u, h, c, a, e, s, i, o;
                    if (n.isSections)
                        n.sectTimerPerQs = f.questionsTimers;
                    else
                        for (t = 0; t < n.questions.length; t++)
                            l = f.questionsTimers.map(function(i) {
                                if (i.QID == n.questions[t].QuestionID)
                                    return i.time
                            }).filter(function(n) {
                                return n !== undefined
                            }),
                            n.timerPerQs[t].time = l[0];
                    for (n.PrevAnswers = f.answers,
                    t = 0; t < n.PrevAnswers.length; t++) {
                        r = n.questions.map(function(i, r) {
                            if (i.QuestionID == n.PrevAnswers[t].qid)
                                return r
                        }).filter(isFinite);
                        n.questions[r[0]].done = !0;
                        switch (n.PrevAnswers[t].qtype) {
                        case "MultipleChoice":
                            $("multiple-choice #check-" + (n.PrevAnswers[t].sid == null ? "" : n.PrevAnswers[t].sid) + "-" + n.PrevAnswers[t].qid + "-" + n.PrevAnswers[t].answerID).attr("checked", !0);
                            break;
                        case "MultipleSelect":
                            if (u = JSON.parse(n.PrevAnswers[t].answer),
                            u.length > 0)
                                for (i = 0; i < u.length; i++)
                                    $("multiple-select #check-" + (n.PrevAnswers[t].sid == null ? "" : n.PrevAnswers[t].sid) + "-" + n.PrevAnswers[t].qid + "-" + u[i].choiceID).attr("checked", !0);
                            break;
                        case "TrueOrFalse":
                            $("true-or-false #check-" + (n.PrevAnswers[t].sid == null ? "" : n.PrevAnswers[t].sid) + "-" + n.PrevAnswers[t].qid + "-" + n.PrevAnswers[t].answer).attr("checked", !0);
                            break;
                        case "ShortAnswer":
                            $("short-answer #sa-" + n.PrevAnswers[t].qid).val(n.PrevAnswers[t].answer);
                            break;
                        case "ReOrder":
                            for (h = JSON.parse(n.PrevAnswers[t].answer).items,
                            c = [],
                            i = 0; i < h.length; i++)
                                a = n.questions[r[0]].ReorderItems.map(function(n) {
                                    if (n.ItemID == h[i])
                                        return n
                                }).filter(function(n) {
                                    return n !== undefined
                                }),
                                c.push(a[0]);
                            n.questions[r[0]].ReorderItems = c;
                            break;
                        case "FillInTheBlanks":
                            for (e = JSON.parse(n.PrevAnswers[t].answer).blanks,
                            i = 0; i < e.length; i++)
                                o = $("fill-in-blanks #sa-" + n.PrevAnswers[t].qid + " [data-value='" + e[i].BoxID + "']"),
                                o[0].value = e[i].Answer;
                            break;
                        case "FillFromList":
                            for ($("fill-from-list #sa-" + n.PrevAnswers[t].qid + " select").each(function(t) {
                                $(this).attr("data-value", n.questions[r[0]].BoxIDs[t])
                            }),
                            s = JSON.parse(n.PrevAnswers[t].answer).items,
                            i = 0; i < s.length; i++)
                                o = $("fill-from-list #sa-" + n.PrevAnswers[t].qid + " [data-value='" + s[i].BoxID + "']"),
                                o[0].value = s[i].AnswerID;
                            break;
                        case "Hotspot":
                            n.questions[r[0]].options.answers = n.PrevAnswers[t].answer;
                            break;
                        case "Matching":
                            n.questions[r[0]].answer = n.PrevAnswers[t].dndDetails;
                            break;
                        case "DragAndDrop":
                            n.questions[r[0]].options.answers = n.PrevAnswers[t].answer;
                            break;
                        case "Essay":
                            n.questions[r[0]].answer = n.PrevAnswers[t].answer;
                            break;
                        case "HandWriting":
                            n.questions[r[0]].options.answer = n.PrevAnswers[t].answer
                        }
                    }
                }, 500)) : e.setLSDefault(exam.startDate)) : (i.go("results"),
                toast("info", n.resources.ExamAlreadyTaken, n.resources.Information))
            }).error(function() {
                n.$parent.throbber = !1;
                toast("error", n.resources.error_loadexam, n.resources.Error)
            })) : (n.private = t.get().private,
            f.get(u.get().api + "surveys/get?sid=" + t.get().sid + "&un=" + t.get().user + "&route=" + t.get().host + "&channel=" + u.get().channel).success(function(u) {
                var f, o;
                if (n.$parent.throbber = !1,
                exam = u,
                exam.timeLimit = "",
                f = t.get(),
                f.resultID = exam.resultID,
                t.set(f),
                exam.Disabled != "") {
                    t.set({
                        wrongSurvey: !0
                    });
                    i.go("login");
                    toast("warning", n.resources["survey_disabled_" + exam.Disabled], n.resources.Warning);
                    return
                }
                n.isSurvey = !0;
                n.isAnonymous = exam.isAnonymous;
                n.isPassword = exam.isPassword;
                n.RedirectURL = exam.RedirectURL;
                n.RedirectTimeout = exam.RedirectTimeout * 1e3;
                n.FinishMessage_Head = exam.FinishMessage_Head == "" ? n.resources.surveyFinishMessage_Head : exam.FinishMessage_Head;
                n.FinishMessage_Desc = exam.FinishMessage_Desc == "" ? n.resources.FinishMessage_Desc : exam.FinishMessage_Desc;
                n.name = exam.srvyName;
                n.ProgressBar = exam.ProgressBar;
                n.questions = exam.Questions;
                n.allowCalc = !1;
                n.backtrack = exam.backtrack;
                n.isManual = !1;
                n.isPractice = !1;
                n.showReport = !1;
                n.QuestionSet = exam.QuestionSet;
                n.timeLimit = exam.timeLimit;
                n.timeWarning = exam.timeWarning;
                n.promptMsg = exam.promptMsg;
                n.qualifiedMsg = exam.qualifiedMsg;
                n.qualifyingPercent = exam.qualifyingPercent;
                n.unqualifiedMsg = exam.unqualifiedMsg;
                n.dir = exam.dir == "rtl" || exam.dir == "ltr" ? exam.dir : "ltr";
                localStorage.lang = exam.dir == "rtl" ? "ar" : localStorage.lang;
                $("body").attr("dir", n.dir);
                nt();
                (!exam.isAnonymous || exam.isPassword) && t.get().user == "" ? (o = r.open({
                    templateUrl: "myModalContent.html",
                    controller: ModalInstanceCtrl,
                    backdrop: "static",
                    size: "lg",
                    windowClass: "passwordModal",
                    resolve: {
                        eid: function() {
                            return t.get().sid
                        },
                        isAnonymous: function() {
                            return n.isAnonymous
                        },
                        isPassword: function() {
                            return n.isPassword
                        },
                        surveyInfo: function() {
                            return {
                                title: exam.srvyName,
                                desc: exam.srvyDesc
                            }
                        },
                        password: function() {
                            return exam.Password
                        }
                    }
                }),
                o.result.then(function() {
                    n.user = t.get().name ? t.get().name : "Anonymous";
                    e.setLSDefault(null)
                }, function() {})) : e.setLSDefault(null);
                n.timeLimit == "" ? n.examTimeText = "No Limit" : n.examEndTime = n.now + parseFloat(n.timeLimit) * 6e4;
                !n.questions[0].endTime && n.questions[0].QuestionTime && (n.questions[0].endTime = n.now + n.questions[0].QuestionTime * 6e4)
            }).error(function() {
                n.$parent.throbber = !1;
                toast("error", n.resources.error_loadexam, n.resources.Error)
            }));
        angular.element(function() {
            setTimeout(function() {
                n.InitializeSettings()
            }, 500)
        })
    }
}
]).animation(".question", function() {
    return {
        beforeAddClass: function(n, t, i) {
            var r = n.scope();
            t == "ng-hide" ? ($(n).transition({
                x: r.direction == "left" ? localStorage.lang == "en" ? "-100%" : "100%" : "0",
                queue: !1
            }, 500),
            setTimeout(function() {
                i()
            }, 500)) : i()
        },
        beforeRemoveClass: function(n, t, i) {
            var r = n.scope();
            t == "ng-hide" ? ($(n).css({
                x: r.direction == "left" ? "0" : localStorage.lang == "en" ? "-100%" : "100%"
            }),
            i()) : i()
        },
        removeClass: function(n, t, i) {
            var r = n.scope();
            t == "ng-hide" ? ($(n).transition({
                x: 0,
                queue: !1
            }, 500),
            i()) : i()
        }
    }
}).animation(".scenarioContainer", function() {
    return {
        beforeAddClass: function(n, t, i) {
            var r = n.scope();
            t == "ng-hide" ? ($(n).transition({
                x: r.direction == "left" ? localStorage.lang == "en" ? "-100%" : "100%" : "0",
                queue: !1
            }, 500),
            setTimeout(function() {
                i()
            }, 500)) : i()
        },
        beforeRemoveClass: function(n, t, i) {
            var r = n.scope();
            t == "ng-hide" ? ($(n).css({
                x: r.direction == "left" ? "0" : localStorage.lang == "en" ? "-100%" : "100%"
            }),
            i()) : i()
        },
        removeClass: function(n, t, i) {
            var r = n.scope();
            t == "ng-hide" ? ($(n).transition({
                x: 0,
                queue: !1
            }, 500),
            i()) : i()
        }
    }
}).directive("questionViewDirective", function() {
    return function(n) {
        n.$last && setTimeout(function() {
            n.timer(!0);
            n.timer();
            n.setCurrentQuestionIndex(0)
        }, 1)
    }
});
QMediaModalInstanceCtrl = ["$scope", "$modalInstance", "Config", "type", "src", "acuhost", function(n, t, i, r, u) {
    var h;
    if (n.type = r,
    n.src = u,
    n.style = {
        height: $(window).height() - 100 + "px",
        width: "100%"
    },
    n.close = function() {
        t.close()
    }
    ,
    n.isACU = (i.get().channel == "ACU" || i.get().channel == "AppACU") && localStorage.ACUhost != undefined,
    i.get().channel == "AppACU" && localStorage.ACUhost == undefined && (i.get().channel = "App",
    n.channel = i.get().channel),
    n.imagesrc = n.isACU ? n.src : i.get().res_Uri + "/mobile/app/viewer/imageMedia.html#" + n.src,
    n.isACU) {
        h = location.hash.replace(/#/, "");
        $("#qmediaImage").attr("src", h);
        var e = 0
          , o = 0
          , s = 0
          , f = 1;
        interact("#qmediaImageContainer").gesturable({
            onmove: function(n) {
                var t = document.getElementById("qmediaImage");
                e += n.da;
                f = f * (1 + n.ds);
                t.style.webkitTransform = t.style.transform = "translate(" + o + "px, " + s + "px) rotate(" + e + "deg) scale(" + f + ")"
            },
            onstart: function() {
                var n = document.getElementById("qmediaImage")
            },
            onend: function() {
                var n = document.getElementById("qmediaImage")
            }
        });
        interact("#qmediaImage").draggable({
            onmove: function(n) {
                o += n.dx;
                s += n.dy;
                n.target.style.webkitTransform = n.target.style.transform = "translate(" + o + "px, " + s + "px) rotate(" + e + "deg) scale(" + f + ")"
            }
        }).inertia(!0).restrict({
            drag: "parent",
            endOnly: !0
        })
    }
}
];
angular.module("swiftassessMobile.results", ["ui.router", "ngAnimate", "swiftassessMobile.services", "ui.bootstrap"]).config(["$stateProvider", function(n) {
    n.state("results", {
        url: "/results",
        views: {
            main: {
                controller: "ResultsCtrl",
                templateUrl: "app/results/results.tpl.html"
            }
        },
        data: {
            pageTitle: "Results"
        }
    })
}
]).controller("ResultsCtrl", ["$scope", "User", "$state", "$modal", "Config", "$http", function(n, t, i, r, u) {
    if (n.$on("$locationChangeStart", function(n) {
        n.preventDefault()
    }),
    t.get().user == undefined && u.get().channel != "ACU")
        i.go("login");
    else {
        if (n.showACUFin = !1,
        n.IsRemoteCheck = t.result.RemoteIDCheck,
        localStorage.ai_sessionID == null || localStorage.ai_sessionID == undefined || localStorage.ai_sessionID == "" || u.get().channel == "App" || u.get().channel == "AppACU" || (n.IsRemoteCheck = !0,
        setTimeout(function() {
            var n = "https://" + ai_examus + "/integration/simple/gamalearn/finish/" + localStorage.ai_sessionID + "/?redirectUrl=";
            n += t.result.isSecure ? "SBXCMD:rldbxb=1" : encodeURI(document.location.origin + "/Dashboard.aspx");
            window.parent.postMessage(["navigate", n], "https://student.uae.examus.net")
        }, 5e3)),
        exam && (n.Assessment = exam.asmntName),
        (u.get().channel == "ACU" || u.get().channel == "AppACU") && localStorage.ACUhost != undefined && (n.showACUFin = !0),
        u.get().channel == "AppACU" && localStorage.ACUhost == undefined && (u.get().channel = "App",
        n.channel = u.get().channel),
        !host) {
            var f = t.get();
            delete f.eid;
            t.set(f)
        }
        n.live = !1;
        getParameterByName("uname") != undefined && getParameterByName("eid") != undefined && getParameterByName("uname") != "" && getParameterByName("eid") != "" && (n.live = !0);
        n.offline = t.get().offline;
        n.resources = u.get().localResources[localStorage.lang];
        n.$parent.throbber = !1;
        n.Examinee = t.result.Examinee;
        n.Assessment = t.result.Assessment;
        n.Result = t.result.Result;
        n.Score = t.result.Score;
        n.TotalScore = t.result.TotalScore;
        n.IsRemoteCheck = t.result.RemoteIDCheck || n.IsRemoteCheck;
        n.footPrintFlags = n.footPrintFlags = {
            FootPrint_TotalMarks: t.result.FootPrint_TotalMarks,
            FootPrint_TimeSpent: t.result.FootPrint_TimeSpent,
            FootPrint_Result: t.result.FootPrint_Result,
            FootPrint_ObtainedMarks: t.result.IsAdhoc != undefined ? !1 : t.result.FootPrint_ObtainedMarks,
            FootPrint_QuestionsResult: t.result.FootPrint_QuestionsResult,
            FootPrint_QuestionTotalMarks: t.result.FootPrint_QuestionTotalMarks,
            FootPrint_QObtainedMarks: t.result.FootPrint_QObtainedMarks,
            FootPrint_QuestionText: t.result.FootPrint_QuestionText
        };
        n.Preview = t.get().preview != undefined ? !0 : !1;
        n.timeSpent = t.result.timeSpent;
        n.timeSpentText = (n.timeSpent / 60 < 1 ? "00" : n.timeSpent / 60 < 10 ? "0" + Math.floor(n.timeSpent / 60) : Math.floor(n.timeSpent / 60)) + ":" + (n.timeSpent % 60 < 10 ? "0" : "") + n.timeSpent % 60;
        n.Questions = t.result.Questions;
        n.showQMax = t.result.IsAdhoc != undefined ? !1 : !0;
        n.showQGrade = t.result.IsAdhoc != undefined ? !1 : !0;
        t.result.promptMsg == "1" && toast("info", t.result.Score >= t.result.qualifyingPercent ? t.result.qualifiedMsg : t.result.unqualifiedMsg, n.resources.Feedback, 0);
        n.Result == !0 ? (n.passorfail = "pass",
        n.showresult = "Passed") : (n.passorfail = "fail",
        n.showresult = "Failed");
        n.logout = function() {
            if ((u.get().channel == "App" || u.get().channel == "AppACU") && (Platform == "Android" ? LockTask.stopLockTask() : Platform == "IOS" && n.dismiss_AppLock()),
            n.live)
                u.get().channel == "App" || u.get().channel == "AppACU" || (t.result.isSecure ? document.location = "SBXCMD:rldbxb=1" : window.location.href = document.location.origin + "/Dashboard.aspx");
            else {
                if (u.get().channel != "ACU" && !confirm(n.resources.logout_confirm))
                    return;
                t.set({});
                delete localStorage.user;
                i.go("login");
                document.location = "SBXCMD:rldbxb=1"
            }
        }
        ;
        n.redo = function() {
            confirm(n.resources.confirmRedo) && i.go("viewer")
        }
    }
}
]);
angular.module("swiftassessMobile.MultipleChoice", ["swiftassessMobile.services"]).directive("multipleChoice", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t, i) {
            t.re = new RegExp("/_ajax","g");
            t.res_Uri = i.get().res_Uri;
            t.prefix = new RegExp("http://","g");
            t.prefix_s = new RegExp("https://","g");
            t.selection = "";
            t.toggleSelection = function(n) {
                $("#check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "-" + n).attr("checked", "checked");
                t.selection = n
            }
            ;
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) input[name='check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "']").attr("checked", !1);
                $(t.question.Data).each(function(n, i) {
                    if (t.selection == i.itemID && i.IsCorrect)
                    toast("success", "cleared", n.resources.Success);
                });
                t.selection = ""
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                    if (t.selection != "") {
                        t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                        t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                            index: t.index
                        }));
                        t.question.done = !0;
                        var u = !1
                          , f = 0;
                        $(t.question.Data).each(function(n, i) {
                            if (t.selection == i.itemID)
                                return i.IsCorrect && (f = t.question.QuestionPoints,
                                u = !0),
                                !1
                        });
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, u, f, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, null, t.selection, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                    }
                } else
                    t.$emit("attemptsDone", {
                        index: t.index
                    });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/mc/mc.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.MultipleSelect", ["swiftassessMobile.services"]).directive("multipleSelect", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t, i) {
            t.re = new RegExp("/_ajax","g");
            t.prefix = new RegExp("http://","g");
            t.prefix_s = new RegExp("https://","g");
            t.res_Uri = i.get().res_Uri;
            t.selection = [];
            t.toggleSelection = function(n) {
                var i = t.selection.map(function(n) {
                    return n.choiceID
                }).indexOf(n);
                i > -1 ? (t.selection.splice(i, 1),
                $("#check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "-" + n).removeAttr("checked")) : (t.selection.push({
                    choiceID: n
                }),
                $("#check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "-" + n).attr("checked", "checked"))
            }
            ;
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) input[name='check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "']").attr("checked", !1);
                t.selection = []
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? t.selection.length != 0 && (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.question.done = !0,
                t.marksGained = 0,
                t.passed = !1,
                $(t.selection).each(function(n, i) {
                    var r;
                    if ($(t.question.Data).each(function(n, t) {
                        if (t.itemID == i.choiceID)
                            return r = t,
                            !1
                    }),
                    r.IsCorrect)
                        t.question.IsPartial == !0 ? t.marksGained += r.PercentageWeight / 100 * t.question.QuestionPoints : t.passed = !0;
                    else if (t.question.IsPartial == !0)
                        t.marksGained -= r.PercentageWeight / 100 * t.question.QuestionPoints;
                    else
                        return t.passed = !1,
                        t.marksGained = 0,
                        !1
                }),
                t.marksGained = t.marksGained < 0 ? 0 : t.marksGained.toFixed(2),
                t.question.IsPartial || t.passed !== !0 ? t.question.IsPartial && t.marksGained / t.question.QuestionPoints >= t.question.PassingPercent && (t.passed = !0) : t.marksGained = t.question.QuestionPoints,
                n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, JSON.stringify(t.selection), null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)) : t.$emit("attemptsDone", {
                    index: t.index
                });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/ms/ms.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.Handwriting", ["swiftassessMobile.services"]).directive("handwriting", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t, i) {
            t.res_Uri = i.get().res_Uri;
            t.ACUHost = i.get().channel == "ACU" || i.get().channel == "AppACU" ? HttpScheme + "://" + localStorage.ACUhost : "";
            t.finalAnswer = {
                text: ""
            };
            $(".cPen").click(function() {
                $(".cPen").removeClass("active");
                $(this).addClass("active")
            });
            var r = function(i) {
                function a() {
                    s.length >= 5 && (s.shift(),
                    y.shift());
                    s.push(u.getImageData(0, 0, r.width, r.width));
                    y.push(r.height)
                }
                var r = document.getElementById(i.id), u = r.getContext("2d"), c, f;
                r.width = $(window).width() - 250;
                r.height = 350;
                $(r).parent().width(r.width);
                r.style.width = "";
                u.lineWidth = i.size || 6;
                u.lineCap = i.lineCap || "round";
                u.pX = undefined;
                u.pY = undefined;
                i.background != undefined && (i.background.url == "Stripe" || i.background.url == "Grid" ? r.style.background = "url('" + (t.ACUHost != "" ? t.ACUHost + "/Viewer/assets/images/" : t.res_Uri + "/App_Themes/Workspace/images/elements/forms/") + i.background.url + ".png') repeat" : (i.review || (i.background.url = i.background.url.indexOf("Secure/Downloads") != -1 ? t.res_Uri + i.background.url.replace(t.res_Uri, "") : t.ACUHost != "" ? t.ACUHost + "/" + i.background.url : t.res_Uri + "Questions/Artifacts/Canvas/" + i.background.url.replace(t.res_Uri, "").replace("Questions/Artifacts/Canvas/", "")),
                r.style.background = "url('" + i.background.url + "') no-repeat " + (i.background.position == "center" ? i.background.position + " top" : i.background.position),
                this.width > r.width && (r.style.backgroundSize = "100%"),
                i.minHeight = r.height));
                i.answer != undefined && (c = new Image,
                c.onload = function() {
                    r.height = c.height;
                    u.drawImage(c, 0, 0)
                }
                ,
                c.src = i.answer);
                var e = [, , ]
                  , o = $(r).offset()
                  , l = i.review ? "red" : "black"
                  , v = 0
                  , s = []
                  , y = []
                  , h = "pen"
                  , p = i.id.substring(i.id.indexOf("_") + 1);
                return f = {
                    empty: !0,
                    init: function() {
                        r.addEventListener("touchstart", f.preDraw, !1);
                        r.addEventListener("touchmove", f.draw, !1);
                        r.addEventListener("mousedown", f.mousePreDraw, !1);
                        r.addEventListener("mousemove", f.mouseDraw, !1);
                        r.addEventListener("mouseup", f.mouseEnd, !1);
                        r.addEventListener("mouseout", f.mouseEnd, !1)
                    },
                    preDraw: function(n) {
                        n.preventDefault();
                        f.empty = !1;
                        t.finalAnswer.text == "" && t.question.options.IsFinalAnswer && (f.empty = !0);
                        o = $(r).offset();
                        a();
                        $.each(n.touches, function(n, t) {
                            var i = t.identifier;
                            e[i] = {
                                x: this.pageX - o.left,
                                y: this.pageY - o.top,
                                color: l
                            }
                        });
                        n.preventDefault()
                    },
                    mousePreDraw: function(n) {
                        f.empty = !1;
                        t.finalAnswer.text == "" && t.question.options.IsFinalAnswer && (f.empty = !0);
                        o = $(r).offset();
                        a();
                        n.preventDefault();
                        v = 1;
                        e[1e3] = {
                            x: n.pageX - o.left,
                            y: n.pageY - o.top,
                            color: l
                        }
                    },
                    mouseDraw: function(n) {
                        if (v) {
                            var i = n.pageX - o.left - e[1e3].x
                              , r = n.pageY - o.top - e[1e3].y
                              , t = f.move(1e3, i, r);
                            e[1e3].x = t.x;
                            e[1e3].y = t.y
                        }
                        n.preventDefault()
                    },
                    mouseEnd: function() {
                        v = 0
                    },
                    draw: function(n) {
                        n.preventDefault();
                        var t = n;
                        $.each(n.touches, function(n, t) {
                            var i = t.identifier
                              , u = this.pageX - o.left - e[i].x
                              , s = this.pageY - o.top - e[i].y
                              , r = f.move(i, u, s);
                            e[i].x = r.x;
                            e[i].y = r.y
                        });
                        n.preventDefault()
                    },
                    move: function(n, t, r) {
                        return h == "pen" && (u.lineWidth = i.size),
                        u.strokeStyle = l,
                        u.fillStyle = l,
                        u.beginPath(),
                        u.moveTo(e[n].x, e[n].y),
                        u.lineTo(e[n].x + t, e[n].y + r),
                        u.stroke(),
                        u.arc(e[n].x, e[n].y, u.lineWidth / 2, 0, 2 * Math.PI, !1),
                        u.fill(),
                        u.closePath(),
                        {
                            x: e[n].x + t,
                            y: e[n].y + r
                        }
                    },
                    eraser: function() {
                        h = "eraser";
                        u.globalCompositeOperation = "destination-out";
                        u.lineWidth = 25
                    },
                    pen: function() {
                        h = "pen";
                        u.globalCompositeOperation = "source-over";
                        u.lineWidth = i.size
                    },
                    size: function(n) {
                        i.size = n;
                        u.lineWidth = i.size || 6
                    },
                    clear: function() {
                        f.empty = !0;
                        t.finalAnswer.text = "";
                        a();
                        u.clearRect(0, 0, r.width, r.width)
                    },
                    color: function(n) {
                        f.pen();
                        l = n
                    },
                    undo: function() {
                        s.length > 0 && (r.height = y.pop(),
                        u.putImageData(s.pop(), 0, 0),
                        u.lineWidth = i.size || 6,
                        h == "eraser" && f.eraser(undefined))
                    },
                    submit: function(f) {
                        var o, h, e;
                        u.save();
                        o = s[s.length - 1];
                        i.background == undefined ? (t.$parent.$parent.$parent.throbber = !1,
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, !1, t.question.QuestionPoints, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, r.toDataURL(), null, [{
                            width: o.width,
                            height: o.height
                        }], [], t.finalAnswer.text, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order),
                        f && t.$emit("submit")) : (h = u.getImageData(0, 0, r.width, r.width),
                        e = document.createElement("img"),
                        e.onload = function() {
                            if (u.globalCompositeOperation = "destination-over",
                            i.background.url == "Stripe" || i.background.url == "Grid") {
                                var s = u.createPattern(e, "repeat");
                                u.rect(0, 0, r.width, r.height);
                                u.fillStyle = s;
                                u.fill()
                            } else
                                i.background.position == undefined ? u.drawImage(e, 0, 0) : i.backgroundPosition == "center" ? u.drawImage(e, r.width / 2 - e.width / 2, r.height / 2 - e.height / 2) : this.width > r.width ? u.drawImage(e, 0, 0, e.width, e.height, 0, 0, r.width, r.width / e.width * e.height) : u.drawImage(e, i.background.position.substring(0, i.background.position.indexOf("px")), i.background.position.substring(parseInt(i.background.position.indexOf("px")) + 3, parseInt(i.background.position.indexOf("px", parseInt(i.background.position.indexOf("px")) + 3))));
                            u.globalCompositeOperation = "source-over";
                            t.$parent.$parent.$parent.throbber = !1;
                            n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, !1, 0, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, r.toDataURL(), null, [{
                                width: o.width,
                                height: o.height
                            }], [], t.finalAnswer.text, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID);
                            f && t.$emit("submit");
                            u.clearRect(0, 0, r.width, r.width);
                            u.putImageData(h, 0, 0);
                            u.restore()
                        }
                        ,
                        e.crossOrigin = "anonymous",
                        e.src = i.background.url == "Stripe" || i.background.url == "Grid" ? (t.ACUHost != "" ? t.ACUHost + "/Viewer/assets/images/" : t.res_Uri + "/App_Themes/Workspace/images/elements/forms/") + i.background.url + ".png" : i.background.url)
                    },
                    increaseHeight: function() {
                        a();
                        var n = u.getImageData(0, 0, r.width, r.width);
                        r.height = r.height + 50;
                        u.putImageData(n, 0, 0);
                        u.lineWidth = i.size || 6;
                        h == "eraser" && f.eraser(undefined)
                    },
                    decreaseHeight: function() {
                        if (a(),
                        r.height > (i.minHeight || 350)) {
                            var n = u.getImageData(0, 0, r.width, r.width);
                            r.height = r.height - 50;
                            u.putImageData(n, 0, 0);
                            u.lineWidth = i.size || 6;
                            h == "eraser" && f.eraser(undefined)
                        }
                    }
                },
                f.init(),
                f
            };
            setTimeout(function() {
                t.canvas = new r(t.question.options)
            }, 10);
            t.$on(t.question.QuestionID + "-clear", function() {
                t.canvas.clear()
            });
            t.$on(t.question.QuestionID + "-save", function(n, i) {
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? t.canvas.empty || (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.canvas.submit(i),
                t.question.done = !0,
                t.$parent.$parent.$parent.throbber = !0) : (t.$emit("attemptsDone", {
                    index: t.index
                }),
                i && (t.$parent.$parent.$parent.throbber = !0,
                t.$emit("submit")))
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.GetBlueColor = function() {
                return t.isDarkTheme() ? "#cde5f7 " : t.isLightTheme() ? "#0000FF" : void 0
            }
            ;
            t.GetGreenColor = function() {
                return t.isDarkTheme() ? "#8acc36" : t.isLightTheme() ? "#00FF00" : void 0
            }
        }
        ],
        templateUrl: "app/questions/handwriting/handwriting.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.DragAndDrop", ["swiftassessMobile.services"]).directive("dragAndDrop", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", "User", "$timeout", function(t, i, r, u) {
            t.ACUHost = i.get().channel == "ACU" || i.get().channel == "AppACU" ? HttpScheme + "://" + localStorage.ACUhost + "/" : "";
            t.res_Uri = i.get().res_Uri;
            var f = t.res_Uri
              , e = function(n) {
                var i, u, r;
                return n.image = t.ACUHost != "" ? t.ACUHost + n.image : t.res_Uri + n.image.replace(t.res_Uri, ""),
                r = {
                    container: undefined,
                    canvas: undefined,
                    maxWidth: undefined,
                    _clickState: undefined,
                    _deleteConfirmText: undefined,
                    DNDJSON: undefined,
                    currentID: undefined,
                    isPartial: undefined,
                    answers: undefined,
                    init: function(n) {
                        i = this;
                        i.maxWidth = n.maxWidth || 960;
                        i._deleteConfirmText = n.deleteConfirmText || "Delete Point";
                        i.container = n.id;
                        i.DNDJSON = n.json;
                        i.IsPartial = n.IsPartial;
                        i.answers = n.answers;
                        var t = document.createElement("img");
                        t.onload = function() {
                            if (i.canvas == undefined) {
                                i.canvas = new fabric.Canvas($(i.container).find("canvas")[0],{
                                    selection: !1
                                });
                                i.DNDJSON != undefined && (i.DNDJSON = i._reconfigureJSON(i.DNDJSON, n.answers != undefined && n.answers != ""),
                                i.canvas.loadFromDatalessJSON(i.DNDJSON));
                                $(i.container).find(".DNDList").on("mousedown", ".DNDListItem", function(n) {
                                    u = n.clientX + n.clientY
                                });
                                $(i.container).find(".DNDList").on("mouseup", ".DNDListItem > div > div > * ", function(n) {
                                    u == n.clientX + n.clientY && n.target.nodeName != "I" && ($(i.container).find(".DNDListItem").not($(n.target).parents(".DNDListItem")).removeClass("active"),
                                    $(n.target).parents(".DNDListItem").toggleClass("active"))
                                })
                            }
                            if (i.canvas.hoverCursor = "Default",
                            i.canvas.moveCursor = "Default",
                            $(i.container).find(".canvasContainer").css("background", "url('" + n.image + "') no-repeat 0 0"),
                            this.width > 940) {
                                var t = Math.floor((960 - Math.min(this.width, i.maxWidth)) / 2);
                                t = 17 - t
                            }
                            this.width > i.maxWidth ? ($(i.container).find("canvas").attr("height", this.height * (i.maxWidth / this.width) + "px"),
                            $(i.container).find("canvas").attr("width", i.maxWidth + "px"),
                            i.canvas.setDimensions({
                                height: this.height * (i.maxWidth / this.width),
                                width: i.maxWidth
                            }),
                            $(i.container).css("width", i.maxWidth + "px"),
                            $(i.container).find(".canvasContainer").css("background-size", "100%")) : ($(i.container).find("canvas").attr("height", this.height + "px"),
                            $(i.container).find("canvas").attr("width", this.width + "px"),
                            $(i.container).css("width", this.width + "px"),
                            i.canvas.setDimensions({
                                height: this.height,
                                width: this.width
                            }))
                        }
                        ;
                        t.src = n.image
                    },
                    deleteDraggable: function(n) {
                        window.confirm(i._deleteConfirmText) && $(n).parent().parent().parent().parent().remove()
                    },
                    clearDraggables: function() {
                        window.confirm(i._deleteConfirmText) && $(".DNDItem").remove()
                    },
                    _reconfigureJSON: function(n, t) {
                        var r = i.canvas.toDatalessJSON();
                        return r.objects = [],
                        n.constructor == "test".constructor && (n = JSON.parse(n)),
                        (n.items == undefined || n.items == null) && (n.items = n),
                        $.each(n.items, function(n, u) {
                            if (t)
                                $.each(i.answers.answers, function(n, t) {
                                    t.id == u.id && i.createDNDItem(u, f, t.x, t.y)
                                });
                            else
                                for (var n = 0; n < u.duplicates; n++)
                                    i.createDNDItem(u, f, "", "");
                            $.each(u.spots, function(n, t) {
                                t.hasControls = !1;
                                t.hasBorders = !1;
                                t.lockMovementX = !0;
                                t.lockMovementY = !0;
                                t.opacity = 0;
                                r.objects.push(t)
                            })
                        }),
                        r
                    },
                    createDNDItem: function(n, r, u, f) {
                        var h = '<div class="DNDListItem ' + (n.img != "" && n.img != undefined ? "" : "textItem") + '" ' + (u != "" && f != "" ? 'style="left:' + u + "px; top:" + f + 'px;margin:0 !important"' : "") + ' data-id="' + (n.id || i.currentID) + '"><div><div>', o = n.txt || "", s, e;
                        o = n.img != "" && n.img != undefined ? '<img src="' + (t.ACUHost != "" ? t.ACUHost : r) + n.img.replace(r, "") + '" />' : "<p>" + n.txt + "<\/p>";
                        s = '<\/div><div class="DNDAnchor"><i class="fa fa-caret-down"><\/i><\/div><\/div><\/div>';
                        e = $(h + o + s);
                        $(e).draggable({
                            containment: $(i.container).parents("[data-role=page]")
                        });
                        $(e).css("-ms-touch-action", "none");
                        $(i.container + " .DNDList").append(e)
                    },
                    submitAnswer: function() {
                        var n, r, t;
                        return i.canvas.calcOffset(),
                        n = {
                            answers: []
                        },
                        $.each($(i.container + " .DNDListItem"), function(t, r) {
                            var f = $(r).attr("data-id")
                              , u = {};
                            u.id = f;
                            u.x = $(r).offset().left - $(i.container + " .canvasContainer").offset().left;
                            u.y = $(r).offset().top - $(i.container + " .canvasContainer").offset().top + 6;
                            u.solved = !1;
                            n.answers.push(u)
                        }),
                        i.canvas.forEachObject(function(t) {
                            t.solved || $.each(n.answers, function(i, r) {
                                if (r.id == t.id && !n.answers[i].solved && t.containsPoint({
                                    x: r.x,
                                    y: r.y
                                }))
                                    return t.solved = !0,
                                    n.answers[i].solved = !0,
                                    !1
                            })
                        }),
                        i.canvas.forEachObject(function(n) {
                            n.solved = !1
                        }),
                        r = 100 / n.answers.length,
                        t = 0,
                        $.each(n.answers, function(n, i) {
                            i.solved && (t += r)
                        }),
                        {
                            answer: n,
                            grade: i.IsPartial == "true" ? t : t == 100 ? 100 : 0
                        }
                    }
                },
                r.init(n),
                r
            };
            u(function() {
                t.dnd = new e(t.question.options);
                t.$on(t.question.QuestionID + "-save", function(i, r) {
                    if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                        if (!t.dnd.empty) {
                            t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                            t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                                index: t.index
                            }));
                            t.question.done = !0;
                            var u = t.dnd.submitAnswer();
                            t.marksGained = u.grade / 100 * t.question.QuestionPoints;
                            t.passed = t.question.options.IsPartial == "true" ? t.marksGained / t.question.QuestionPoints < t.question.PassingPercent ? !1 : !0 : u.grade == 100 ? !0 : !1;
                            n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, u.answer, null, [], [], undefined, t.question.options.IsPartial == "true", t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                        }
                    } else
                        t.$emit("attemptsDone", {
                            index: t.index
                        });
                    r && t.$emit("submit")
                })
            }, 50)
        }
        ],
        templateUrl: "app/questions/dnd/dnd.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.DragToBlank", ["swiftassessMobile.services"]).directive("dragToBlank", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t) {
            function b() {
                var r, f, u, n, i;
                if ($("#QDTB_" + t.question.QuestionID + " #AnswerSection").html(""),
                t.question.IsShuffled == !0)
                    for (r = t.question.answers.length; 0 !== r; )
                        u = Math.floor(Math.random() * r),
                        r -= 1,
                        f = t.question.answers[r],
                        t.question.answers[r] = t.question.answers[u],
                        t.question.answers[u] = f;
                for (n = 0; n < t.question.answers.length; n++)
                    i = t.question.answers[n].id,
                    t.question.answers[n].IsImg == !0 ? $("#QDTB_" + t.question.QuestionID + " #AnswerSection").append("<img data-draggable='item' data-type='imgItem' draggable='true' aria-grabbed='false' tabindex='0'  data-answer='" + i + "' class='originalItem itemImage " + i + "' id='" + i + "' src='" + t.question.answers[n].Answer + "' data-counter='" + t.question.answers[n].count + "'>") : $("#QDTB_" + t.question.QuestionID + " #AnswerSection").append("<span data-draggable='item' id='" + i + "' draggable='true' aria-grabbed='false' data-answer='" + i + "' tabindex='0'  data-type='txtItem' class='originalItem txtItem " + i + "' data-counter='" + t.question.answers[n].count + "'>" + t.question.answers[n].Answer + "<\/span>")
            }
            function d(n) {
                if (i.owner) {
                    if (i.owner != n.parentNode)
                        return
                } else
                    i.owner = n.parentNode;
                n.setAttribute("aria-grabbed", "true");
                et();
                i.items.push(n)
            }
            function v() {
                if (i.items.length) {
                    i.owner = null;
                    for (var t = i.items.length, n = 0; n < t; n++)
                        i.items[n].setAttribute("aria-grabbed", "false");
                    i.items = [];
                    ot()
                }
            }
            function y(n) {
                return n.ctrlKey || n.metaKey || n.shiftKey
            }
            function rt() {
                for (var t = f.length, n = 0; n < t; n++)
                    f[n] != i.owner && f[n].getAttribute("aria-dropeffect") == "none" && (f[n].setAttribute("aria-dropeffect", "copy"),
                    f[n].setAttribute("tabindex", "0"));
                for (t = u.length,
                n = 0; n < t; n++)
                    u[n].parentNode != i.owner && u[n].getAttribute("aria-grabbed") && (u[n].removeAttribute("aria-grabbed"),
                    u[n].removeAttribute("tabindex"))
            }
            function a() {
                var t, n;
                if (i.items.length) {
                    for (t = f.length,
                    n = 0; n < t; n++)
                        f[n].getAttribute("aria-dropeffect") != "none" && (f[n].setAttribute("aria-dropeffect", "none"),
                        f[n].removeAttribute("tabindex"));
                    for (t = u.length,
                    n = 0; n < t; n++)
                        u[n].getAttribute("aria-grabbed") ? u[n].getAttribute("aria-grabbed") == "true" && u[n].setAttribute("tabindex", "0") : (u[n].setAttribute("aria-grabbed", "false"),
                        u[n].setAttribute("tabindex", "0"))
                }
            }
            function ut(n) {
                do
                    if (n.nodeType == 1 && n.getAttribute("aria-dropeffect"))
                        return n;
                while (n = n.parentNode);return null
            }
            function g() {
                var n = {
                    containers: []
                };
                return containerAtts = "",
                $("#QDTB_" + t.question.QuestionID + " #QuestionSection .target-box").each(function() {
                    var i = $(this).attr("id"), o = $(this).attr("data-counter"), s, f, r, u, e;
                    for (containerAtts = {},
                    s = $("#QDTB_" + t.question.QuestionID + " #QuestionSection .target-box").length,
                    n.containers.push(containerAtts),
                    containerAtts.id = i,
                    containerAtts.dataCounter = o,
                    containerAtts.answer = [],
                    f = $("#QDTB_" + t.question.QuestionID + " #QuestionSection #" + i + " .answer").length,
                    r = "",
                    j = 0; j < f; j++)
                        u = $("#QDTB_" + t.question.QuestionID + " #QuestionSection #" + i + " .answer").eq(j).attr("data-answer"),
                        e = $("#QDTB_" + t.question.QuestionID + " #QuestionSection #" + i + " ." + u).length,
                        nt(containerAtts.answer) == !1 && (r = {
                            dataAnswer: "" + u + "",
                            dup: "" + e + ""
                        },
                        containerAtts.answer.push(r)),
                        nt(containerAtts.answer) == !0 && containerAtts.answer.splice(-1, 1)
                }),
                n
            }
            function nt(n) {
                var t = Object.create(null);
                return n.some(function(n) {
                    return n.dataAnswer && (t[n.dataAnswer] || !(t[n.dataAnswer] = !0))
                })
            }
            function et() {
                $("#QDTB_" + t.question.QuestionID + " #QuestionSection .InsidePreview").css("border", "2px solid #3CC ")
            }
            function ot() {
                $("#QDTB_" + t.question.QuestionID + " #QuestionSection .InsidePreview").css("border", "2px dotted #888")
            }
            function tt(n) {
                var i = ""
                  , u = $(n).find(".answer").length;
                for (r = 0; r < u; r++)
                    i = $(n).find(".answer").eq(r).attr("data-answer"),
                    $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + i).css("opacity", "1.0"),
                    $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + i).css("cursor", "move"),
                    $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + i).attr("draggable", "true"),
                    $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + i).css("display", "")
            }
            for (var i, o, e, p, h = "", f = [], w = 0, s = !1, c = !1, l = "", u = document.querySelectorAll('[data-draggable="item"]'), it = u.length, r = 0; r < it; r++)
                u[r].setAttribute("draggable", "true"),
                u[r].setAttribute("aria-grabbed", "false"),
                u[r].setAttribute("tabindex", "0");
            f = document.querySelectorAll(".target-box");
            i = {
                items: [],
                owner: null,
                droptarget: null
            };
            $(".originalItem").removeAttr("style");
            $(document).ready(function() {
                setTimeout(function() {
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection .targetBoxes").addClass("target-box");
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection .targetBoxes").addClass("end");
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection .targetBoxes").addClass("begin");
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection div").css("clear", "both");
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection .target-box").removeClass("targetBoxes");
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection .target-box").unwrap();
                    $("#QDTB_" + t.question.QuestionID + " #QuestionSection div").prepend("<span class='begin'><\/span>");
                    $("span.begin").each(function() {
                        for (var t = $(), n = this.nextSibling; n; )
                            if ($(n).is("span.end"))
                                break;
                            else
                                t.push(n),
                                n = n.nextSibling
                    });
                    $("#QuestionSection .target-box").html("");
                    for (r in t.question.containers)
                        $("#QDTB_" + t.question.QuestionID + " #QuestionSection").find("#" + t.question.containers[r].id).attr("data-counter", "" + t.question.containers[r].count + ""),
                        $("#QDTB_" + t.question.QuestionID + " #QuestionSection").find("#" + t.question.containers[r].id).attr("aria-dropeffect", "none"),
                        $("#QDTB_" + t.question.QuestionID + " #QuestionSection").find("#" + t.question.containers[r].id).attr("data-draggable", "target");
                    b()
                }, 10)
            });
            o = {
                Android: function() {
                    return navigator.userAgent.match(/Android/i)
                },
                BlackBerry: function() {
                    return navigator.userAgent.match(/BlackBerry/i)
                },
                iOS: function() {
                    return navigator.userAgent.match(/iPhone|iPad|iPod/i)
                },
                Opera: function() {
                    return navigator.userAgent.match(/Opera Mini/i)
                },
                Windows: function() {
                    return navigator.userAgent.match(/IEMobile/i)
                },
                any: function() {
                    return o.Android() || o.BlackBerry() || o.iOS() || o.Opera() || o.Windows()
                }
            };
            h = o.any() ? "mobile" : "PC";
            h == "PC" ? e = ["mousedown", "dragstart", "dragenter", "dragleave", "dragover", "dragend"] : (h = "mobile") && (e = ["touchstart", "touchmove", "dragenter", "dragleave", "dragover", "dragend"]);
            document.addEventListener(e[0], function(n) {
                n.target.getAttribute("draggable") ? (a(),
                y(n) || n.target.getAttribute("aria-grabbed") != "false" || (v(),
                d(n.target))) : y(n) ? a() : (a(),
                v())
            }, !1);
            document.addEventListener(e[1], function(n) {
                if (h == "mobile") {
                    if (n.target.hasAttribute("draggable")) {
                        var t = event.targetTouches[0];
                        n.target.style.position = "absolute";
                        n.target.style.zIndex = "999";
                        n.target.style.left = t.pageX + "px";
                        n.target.style.top = t.pageY + "px"
                    }
                } else {
                    if (i.owner != n.target.parentNode) {
                        n.preventDefault();
                        return
                    }
                    y(n) && n.target.getAttribute("aria-grabbed") == "false" && d(n.target);
                    n.dataTransfer.setData("text", "");
                    rt()
                }
            }, !1);
            p = null;
            document.addEventListener(e[2], function(n) {
                p = n.target
            }, !1);
            document.addEventListener(e[3], function() {
                var n = ut(p);
                n == i.owner && (n = null);
                n != i.droptarget && (i.droptarget && (i.droptarget.className = i.droptarget.className.replace(/ dragover/g, "")),
                n && (n.className += " dragover"),
                i.droptarget = n)
            }, !1);
            document.addEventListener(e[4], function(n) {
                i.items.length && n.preventDefault()
            }, !1);
            document.addEventListener(e[5], function(n) {
                var y, r, p, f, h;
                if (i.droptarget) {
                    for (y = i.items.length,
                    r = 0; r < y; r++) {
                        var u = $("#QDTB_" + t.question.QuestionID + " #" + i.items[r].id).attr("data-answer")
                          , h = $("#QDTB_" + t.question.QuestionID + " ." + u).length - 1
                          , o = $("#QDTB_" + t.question.QuestionID + " #" + u).attr("data-counter");
                        s = h >= o && o != "-1" ? !0 : !1;
                        var e = $("#QDTB_" + t.question.QuestionID + " #QuestionSection #" + i.droptarget.id).attr("data-counter")
                          , b = $("#QDTB_" + t.question.QuestionID + " #QuestionSection #" + i.droptarget.id + " .answer").length
                          , k = b;
                        c = k >= e ? !0 : !1;
                        $(i.droptarget).hasClass("AnswerSection") ? $("#" + i.items[r].id).remove() : l == "AnswerSection" ? e == "-1" ? i.droptarget.appendChild(i.items[r]) : e > 1 ? c == !1 && i.droptarget.appendChild(i.items[r]) : e == "1" && (tt(i.droptarget),
                        i.droptarget.innerHTML = "",
                        i.droptarget.appendChild(i.items[r])) : l != "AnswerSection" && (p = document.getElementById(i.items[r].id),
                        f = p.cloneNode(!0),
                        f.className += " answer",
                        $(f).attr("id", "ans-" + w + ""),
                        $(f).attr("data-answer", "" + i.items[r].id + ""),
                        $(f).removeClass("originalItem"),
                        e == 1 ? s == !1 && (tt(i.droptarget),
                        i.droptarget.innerHTML = "",
                        i.droptarget.appendChild(f)) : e > 1 && c == !1 ? s == !1 && i.droptarget.appendChild(f) : e == "-1" && s == !1 && i.droptarget.appendChild(f),
                        w++,
                        $("span").attr("aria-grabbed", "false"),
                        $("img").attr("aria-grabbed", "false"));
                        h = $("." + u).length - 1;
                        h >= o && o != "-1" ? $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + u).css("display", "none") : ($("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + u).css("opacity", "1.0"),
                        $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + u).css("cursor", "move"),
                        $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + u).attr("draggable", "true"),
                        $("#QDTB_" + t.question.QuestionID + " #AnswerSection #" + u).css("display", ""))
                    }
                    n.preventDefault()
                }
                i.items.length && (a(),
                i.droptarget && (v(),
                i.droptarget.className = i.droptarget.className.replace(/ dragover/g, ""),
                i.droptarget = null));
                $(".target-box").has(".answer").css("min-width", "1%");
                $(".target-box:not(:has(>.answer))").css("min-width", "6%")
            }, !1);
            Array.prototype.compare = function(n) {
                if (this.length != n.length)
                    return !1;
                for (var t = 0; t < n.length; t++)
                    if (this[t].compare) {
                        if (!this[t].compare(n[t]))
                            return !1
                    } else if (this[t] !== n[t])
                        return !1;
                return !0
            }
            ;
            $("#doneBtn").click(function() {
                g()
            });
            $("#QDTB_" + t.question.QuestionID + " #AnswerSection").hover(function(n) {
                l = n.target.id
            });
            t.getCurrentContainer = function(n) {
                l = n.id
            }
            ;
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) #QDTB_" + t.question.QuestionID + " #QuestionSection .target-box").html("");
                b()
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? $(".question:not(.ng-hide) #QDTB_" + t.question.QuestionID + " #QuestionSection .answer").length != 0 && (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.question.done = !0,
                t.answer = g(),
                t.passed = !0,
                t.marksGained = 0,
                t.question.IsPartial || (t.passed = !1,
                t.marksGained = 0),
                n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, JSON.stringify(t.answer), null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)) : t.$emit("attemptsDone", {
                    index: t.index
                });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/dtb/dtb.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.Essay", ["swiftassessMobile.services"]).directive("essay", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", "$compile", function(t, i, r) {
            function l(n) {
                var i = t.mathField[f], r, u;
                if (i.write(n),
                i.reflow(),
                p(),
                r = (n.match(/{/g) || []).length,
                r > 0)
                    for (u = 0; u < r; u++)
                        i.keystroke("Left")
            }
            function k() {
                $(".static").each(function() {
                    c[o] = document.getElementsByClassName("static")[o];
                    a.StaticMath(c[o]);
                    o++
                });
                $(".static").find(".mq-sqrt-prefix").css("transform", " scale(1, 0.9434782608695652)");
                $(".static").find(".mq-empty").addClass("blurr")
            }
            function y() {
                for (var i = t.mathField.length, n = 0; n < i; n++)
                    $(t.mathFieldSpan[n]).removeClass("mq-focused")
            }
            function p() {
                t.mathField[f].focus();
                $(t.mathFieldSpan[f]).addClass("mq-focused")
            }
            var a = MathQuill.getInterface(2);
            t.QuillEditor;
            class w {
                constructor(n, t) {
                    this.quill = n;
                    this.options = t;
                    this.container = document.querySelector(t.container);
                    n.on("text-change", this.update.bind(this));
                    this.update()
                }
                calculate() {
                    let n = this.quill.getText();
                    return this.options.unit === "word" ? (n = n.trim(),
                    n.length > 0 ? n.split(/\s+/).length : 0) : n.length
                }
                update() {
                    var n = this.calculate()
                      , t = this.options.unit;
                    n !== 1 && (t += "s");
                    this.container.innerText = n + " " + t
                }
            }
            var b = ""
              , h = 0
              , v = 0
              , e = ""
              , f = 0;
            t.ans = [];
            t.mathFieldSpan = [];
            t.mathField = [];
            t.latexSpan = [];
            t.created = 0;
            var u = 0
              , s = !0
              , c = []
              , o = 0;
            t.enableTextMode = function() {
                $("#mathMode-" + t.question.QuestionID).hide();
                $("#Quilleditor-" + t.question.QuestionID).show();
                $("#counter-" + t.question.QuestionID).show();
                b = "essay-" + t.question.QuestionID;
                setTimeout(function() {
                    if (t.question.answer != undefined) {
                        var n = t.question.answer
                          , i = t.QuillEditor.clipboard.convert(n);
                        t.QuillEditor.setContents(i, "api")
                    } else
                        t.QuillEditor.history != null && t.QuillEditor.history.clear(),
                        t.QuillEditor.setContents([{
                            insert: "\n"
                        }])
                }, 1e3);
                t.counter = function() {
                    if ($("#essay-" + t.question.QuestionID).val() == "")
                        return 0;
                    var n = $("#essay-" + t.question.QuestionID).val();
                    return n.match(/\S+/g).length
                }
            }
            ;
            t.stopProp = function() {
                $(".AnswerSpan").on("click touchstart", function(n) {
                    n.stopPropagation()
                });
                $("#mathMode-" + t.question.QuestionID + " #overlay").on("click touchstart", function(n) {
                    n.stopPropagation()
                })
            }
            ;
            t.appendStep = function(n) {
                e = n != null && n != undefined ? n : "";
                t.created == 0 && ($("#mathEssay-" + t.question.QuestionID).append('<table id="tableFields"><\/table>'),
                $("#mathEssay-" + t.question.QuestionID + " #tableFields").append(r('<tr><td><span  class="AnswerSpan" onclick="angular.element(this).scope().showKeyBoard(this)" id="ansSpan' + u + '" data-index="' + u + '"><\/span><input id="latex' + u + '" name="latexStr" type="hidden" /><\/td><td id="removeSpan"><paper-icon-button class="paper-fab-0 addSpan" icon="add" role="button" onclick="angular.element(this).scope().getRowIndex(this)" ng-click="toggleTextPreferencesPane();" ng-class="{\'circle-buttons-dark\':isDarkTheme(), \'circle-buttons-light\':isLightTheme()}"><\/paper-icon-button><\/td><\/tr>')(t)));
                n != null && n != undefined && $("#mathEssay-" + t.question.QuestionID + " #latex" + u).text(e);
                t.created++;
                t.latexSpan.push($("#mathMode-" + t.question.QuestionID + " #latex" + u)[0]);
                t.ans[u] = $("#mathEssay-" + t.question.QuestionID + " #tableFields #ansSpan" + u);
                t.mathFieldSpan[u] = $('<span class="mq-editable-field mathFieldSpan" id="mathFieldSpan' + u + '" >' + e + "<\/span>");
                t.mathField[u] = a.MathField(t.mathFieldSpan[u][0], {
                    spaceBehavesLikeTab: !0,
                    handlers: {
                        edit: function() {
                            t.latexSpan[f].textContent = t.mathField[f].latex()
                        }
                    }
                });
                t.mathFieldSpan[u].appendTo(t.ans[u]);
                u++;
                t.stopProp();
                $(".addSpan").off("click touchstart")
            }
            ;
            t.createAlphaKeyBoard = function(n) {
                var f = 10, r = 0, e = ["q", "w", "e", "r", "t", "y", "u", "i", "o", "p", "a", "s", "d", "f", "g", "h", "j", "k", "l", "z", "x", "c", "v", " b", "n", "m", ","], i, u;
                for ($("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").html(""),
                i = 0; i < 3; i++) {
                    for ($("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").append("<div id='row" + i + "' class='alpha-row'><\/div>"),
                    u = 0; u < f; u++)
                        n == "lower" ? $("#mathMode-" + t.question.QuestionID + " #row" + i).append("<button type='button' class='alpha' onclick='angular.element(this).scope().alphaClicked(this)'>" + e[r] + "<\/button>") : n == "upper" && $("#mathMode-" + t.question.QuestionID + " #row" + i).append("<button type='button' class='alpha' onclick='angular.element(this).scope().alphaClicked(this)'>" + e[r].toUpperCase() + "<\/button>"),
                        r++;
                    f--;
                    $("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").append("<\/div>")
                }
                $("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").append("<div class='row' style='margin-left:25%;'><button type='button' class='alpha btn' id='shift' onclick='angular.element(this).scope().alphaClicked(this)'>  <\/button><button type='button' class='alpha' id='space' onclick='angular.element(this).scope().alphaClicked(this)'> <\/div> ")
            }
            ;
            t.enableMathMode = function() {
                var n, i;
                if ($("#mathMode-" + t.question.QuestionID).show(),
                $("#Quilleditor-" + t.question.QuestionID).hide(),
                $("#counter-" + t.question.QuestionID).hide(),
                t.question.options.EqType == "Basic" ? ($("#mathMode-" + t.question.QuestionID + " #generalTab").addClass("active"),
                $("#mathMode-" + t.question.QuestionID + " #general").show(),
                $("#mathMode-" + t.question.QuestionID + " #scientificTab").hide(),
                $("#mathMode-" + t.question.QuestionID + " #chemistryTab").hide()) : t.question.options.EqType == "Scientific" ? ($("#mathMode-" + t.question.QuestionID + " #generalTab").addClass("active"),
                $("#mathMode-" + t.question.QuestionID + " #general").show(),
                $("#mathMode-" + t.question.QuestionID + " #chemistryTab").hide()) : t.question.options.EqType == "Chemistry" && ($("#mathMode-" + t.question.QuestionID + " #chemistryTab").addClass("active"),
                $("#mathMode-" + t.question.QuestionID + " #chemistry").show(),
                $("#mathMode-" + t.question.QuestionID + " #generalTab").hide(),
                $("#mathMode-" + t.question.QuestionID + " #scientificTab").hide(),
                $("#mathMode-" + t.question.QuestionID + " #symbolsTab").hide()),
                t.created == 0)
                    if (t.question.answer != undefined)
                        for (n = JSON.parse(t.question.answer).answer,
                        t.appendStep(n[0].ans),
                        i = 1; i < n.length; i++)
                            $("#mathEssay-" + t.question.QuestionID + " #tableFields").append(r('<tr><td><span  class="AnswerSpan" onclick="angular.element(this).scope().showKeyBoard(this)"  id="ansSpan' + u + '" data-index="' + u + '"><\/span><input id="latex' + u + '" name="latexStr" type="hidden" /><\/td><td id="removeSpan"><paper-icon-button class="paper-fab-0 addSpan" icon="add" role="button" onclick="angular.element(this).scope().getRowIndex(this)" ng-click="toggleTextPreferencesPane();" ng-class="{\'circle-buttons-dark\':isDarkTheme(), \'circle-buttons-light\':isLightTheme()}"><\/paper-icon-button><paper-icon-button class="paper-fab-0 removeSpan" icon="remove" role="button"  data-index="' + u + '"onclick="angular.element(this).scope().getRowIndex(this)" ng-click="toggleTextPreferencesPane();" ng-class="{\'circle-buttons-dark\':isDarkTheme(), \'circle-buttons-light\':isLightTheme()}"><\/paper-icon-button><\/td><\/tr>')(t)),
                            t.appendStep(n[i].ans);
                    else
                        t.appendStep(null);
                t.stopProp();
                t.createAlphaKeyBoard("lower");
                k()
            }
            ;
            setTimeout(function() {
                if (t.question.QuestionID != undefined && t.question.QuestionID != null)
                    if (t.question.options != undefined && t.question.options.EquationMode == !0) {
                        t.enableMathMode();
                        $("#mathMode-" + t.question.QuestionID + " .numberBtn").on("click touchstart", function(n) {
                            n.stopPropagation();
                            n.preventDefault();
                            var i = t.mathField[f];
                            $(n.target).hasClass("nav") ? $(n.target).attr("data-mq-value") == "right" ? i.keystroke("Right") : $(n.target).attr("data-mq-value") == "left" ? i.keystroke("Left") : $(n.target).attr("data-mq-value") == "up" ? i.keystroke("Up") : $(n.target).attr("data-mq-value") == "down" ? i.keystroke("Down") : $(n.target).attr("data-mq-value") == "del" && i.keystroke("Backspace") : (e = $(this).text(),
                            l(e))
                        });
                        $("#mathMode-" + t.question.QuestionID + " .keyBtn").on("click touchstart", function(n) {
                            n.stopPropagation();
                            n.preventDefault();
                            e = $(n.target).closest(".keyBtn").attr("data-symbol-id");
                            l(e)
                        })
                    } else {
                        Quill.register("modules/counter", w);
                        t.QuillEditor = new Quill("#Quilleditor-" + t.question.QuestionID,{
                            modules: {
                                toolbar: [[{
                                    font: []
                                }], ["bold", "italic", "underline", "strike"], [{
                                    color: []
                                }, {
                                    background: []
                                }], [{
                                    align: []
                                }], [{
                                    size: ["small", !1, "large", "huge"]
                                }]],
                                counter: {
                                    container: "#counter-" + t.question.QuestionID,
                                    unit: "word"
                                }
                            },
                            theme: "snow"
                        });
                        t.QuillEditor.root.setAttribute("spellcheck", !1);
                        t.enableTextMode()
                    }
            }, 100);
            $(window).resize(function() {
                $("#mathMode-" + t.question.QuestionID + " #overlay").hide()
            });
            $(window).bind("click touchstart", function() {
                $(t.mathFieldSpan[f]).addClass("mq-focused");
                $("#mathMode-" + t.question.QuestionID + " #overlay").hide();
                y();
                $(".mq-cursor").remove()
            });
            t.changeMode = function(n, i) {
                $("#mathMode-" + t.question.QuestionID + " .tabcontent").hide();
                $("#mathMode-" + t.question.QuestionID + " .tablinks").removeClass("active");
                $("#mathMode-" + t.question.QuestionID + " #" + i).show();
                $("#mathMode-" + t.question.QuestionID + " #" + i).addClass("active");
                $("#mathMode-" + t.question.QuestionID + " .tablinks#" + i + "Tab").addClass("active");
                i == "chemistry" ? ($("#mathMode-" + t.question.QuestionID + " #mathFieldSpan" + f).addClass("mq-disable-italics"),
                $("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").show()) : ($("#mathMode-" + t.question.QuestionID + " #mathFieldSpan" + f).removeClass("mq-disable-italics"),
                $("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").hide())
            }
            ;
            t.showKeyBoard = function(n) {
                var i, r;
                y();
                f = $(n).attr("data-index");
                p();
                h = $(n).position();
                i = "#questionsContainer #question-" + t.question.order + "-" + t.question.scenario.order;
                v = $(n).outerHeight() + $(i).scrollTop();
                r = $("#mathMode-" + t.question.QuestionID + " .mq-root-block").outerWidth();
                $("#mathMode-" + t.question.QuestionID + " #overlay").css({
                    display: "block",
                    position: "absolute",
                    top: v + h.top + "px",
                    left: h.left + "px",
                    width: r + "px"
                }).show()
            }
            ;
            t.getRowIndex = function(n) {
                var e = $(n).closest("tr").index(), o = $(n).closest("tr"), i, f;
                $(n).hasClass("removeSpan") ? (i = $(n).attr("data-index"),
                $("#mathEssay-" + t.question.QuestionID + " #tableFields").find("tr").eq(e).remove(),
                t.ans[i] = "",
                t.mathField[i] = "",
                t.mathFieldSpan[i] = "",
                t.latexSpan[i] = "",
                t.latexSpan[i].textContent = "",
                t.created--) : $(n).hasClass("addSpan") && (t.question.options.NumSteps != undefined && t.question.options.NumSteps != "" && t.created >= t.question.options.NumSteps || (f = angular.element('<tr><td><span  class="AnswerSpan" onclick="angular.element(this).scope().showKeyBoard(this)"  id="ansSpan' + u + '" data-index="' + u + '"><\/span><input id="latex' + u + '" name="latexStr" type="hidden" /><\/td><td id="removeSpan"><paper-icon-button class="paper-fab-0 addSpan" icon="add" role="button" onclick="angular.element(this).scope().getRowIndex(this)" ng-click="toggleTextPreferencesPane();" ng-class="{\'circle-buttons-dark\':isDarkTheme(), \'circle-buttons-light\':isLightTheme()}"><\/paper-icon-button><paper-icon-button class="paper-fab-0 removeSpan" icon="remove" role="button" data-index="' + u + '" onclick="angular.element(this).scope().getRowIndex(this)" ng-click="toggleTextPreferencesPane();" ng-class="{\'circle-buttons-dark\':isDarkTheme(), \'circle-buttons-light\':isLightTheme()}"><\/paper-icon-button><\/td><\/tr>'),
                f.insertAfter(o),
                r(f)(t),
                t.appendStep(null)))
            }
            ;
            t.alphaClicked = function(n) {
                n.id == "shift" ? (s == !1 ? (switchmode = "lower",
                s = !0) : s == !0 && (switchmode = "upper",
                s = !1),
                $("#extentedKeyboard").html(" "),
                t.createAlphaKeyBoard(switchmode)) : n.id == "space" ? t.mathField[f].keystroke("Spacebar") : (e = $(n).text(),
                l(e))
            }
            ;
            t.toggleExtendedKB = function() {
                $("#mathMode-" + t.question.QuestionID + " #extentedKeyboard").toggle()
            }
            ;
            t.$on(t.question.QuestionID + "-clear", function() {
                if (t.question.options != undefined && t.question.options.EquationMode == !0)
                    t.ans = [],
                    t.mathField = [],
                    t.mathFieldSpan = [],
                    t.latexSpan = [],
                    f = 0,
                    o = 0,
                    t.created = 0,
                    u = 0,
                    c = [],
                    $("#mathEssay-" + t.question.QuestionID + " #tableFields").remove(),
                    t.appendStep(null);
                else {
                    var n = t.QuillEditor.clipboard.convert("");
                    t.QuillEditor.setContents(n, "silent");
                    $("#counter-" + t.question.QuestionID)[0].innerText = "0 words"
                }
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                var e, f, u;
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? (t.question.options != undefined && t.question.options.EquationMode == !0 ? (e = $(i.target).closest(".fields").attr("id"),
                f = [],
                $("#mathEssay-" + t.question.QuestionID).find('input[name="latexStr"]').each(function() {
                    $(this).text() != "" && f.push({
                        ans: $(this).text()
                    })
                }),
                t.answer = f.length > 0 ? JSON.stringify({
                    answer: f
                }) : "") : $("#Quilleditor-" + t.question.QuestionID) && (u = "",
                t.QuillEditor != null ? (u = t.QuillEditor.root.innerHTML,
                t.answer = u == "" || u == "<p><br><\/p>" ? "" : u) : setTimeout(function() {
                    u = t.QuillEditor.root.innerHTML;
                    t.answer = u == "" || u == "<p><br><\/p>" ? "" : u
                }, 100)),
                t.answer != "" && (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.question.done = !0,
                n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, !1, 0, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, t.answer, null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID))) : t.$emit("attemptsDone", {
                    index: t.index
                });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
        }
        ],
        templateUrl: "app/questions/essay/essay.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.FillFromList", ["swiftassessMobile.services"]).directive("fillFromList", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t) {
            t.question.BoxIDs = t.question.BoxIDs.split(",");
            t.paragraph = t.question.qParagraph.replace(new RegExp("@QID","g"), t.question.QuestionID);
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) #sa-" + t.question.QuestionID + " select").val("0")
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                    if ($(".question:not(.ng-hide) #sa-" + t.question.QuestionID + " select").filter(function() {
                        return $(this).val() != "0"
                    }).length != 0) {
                        t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                        t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                            index: t.index
                        }));
                        $(".question:not(.ng-hide) #sa-" + t.question.QuestionID + " select").each(function(n) {
                            $(this).attr("data-value", t.question.BoxIDs[n])
                        });
                        t.question.done = !0;
                        t.passed = !0;
                        var u = 0
                          , f = $(".question:not(.ng-hide) #sa-" + t.question.QuestionID + " select");
                        t.question.answer = $.map(f.filter(function() {
                            return $(this).val() != "0"
                        }), function(n) {
                            return {
                                BoxID: $(n).attr("data-value"),
                                AnswerID: $(n).val()
                            }
                        });
                        $(t.question.answer).each(function(n, i) {
                            i.BoxID == t.question.BoxIDs[n] && i.AnswerID == t.question.AnswerIDs.split(",")[n] && u++
                        });
                        t.marksGained = 0;
                        t.question.IsPartial ? (t.marksGained = parseInt((t.question.QuestionPoints * (u / t.question.BoxIDs.length)).toFixed(2)),
                        t.marksGained / t.question.QuestionPoints < t.question.PassingPercent && (t.passed = !1)) : u == t.question.BoxIDs.length ? t.marksGained = t.question.QuestionPoints : (t.passed = !1,
                        t.marksGained = 0);
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, JSON.stringify({
                            items: $.map($(".question:not(.ng-hide) #sa-" + t.question.QuestionID + " select").filter(function() {
                                return $(this).val() != "0"
                            }), function(n) {
                                return {
                                    BoxID: $(n).attr("data-value"),
                                    AnswerID: $(n).val()
                                }
                            })
                        }), null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                    }
                } else
                    t.$emit("attemptsDone", {
                        index: t.index
                    });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/ffl/ffl.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.FillInTheBlanks", ["swiftassessMobile.services"]).directive("fillInBlanks", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t) {
            t.paragraph = t.question.qParagraph.replace(new RegExp("@QID","g"), t.question.QuestionID);
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) #sa-" + t.question.QuestionID + " input").val("")
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                    if ($("#sa-" + t.question.QuestionID + " input").filter(function() {
                        return $.trim($(this).val()).length > 0
                    }).length != 0) {
                        t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                        t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                            index: t.index
                        }));
                        t.question.done = !0;
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, !1, 0, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, JSON.stringify({
                            blanks: $.map($("#sa-" + t.question.QuestionID + " input").filter(function() {
                                return $.trim($(this).val()).length > 0
                            }), function(n) {
                                return {
                                    BoxID: $(n).attr("data-value"),
                                    Answer: $(n).val()
                                }
                            })
                        }), null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                    }
                } else
                    t.$emit("attemptsDone", {
                        index: t.index
                    });
                r && t.$emit("submit")
            });
            setTimeout(function() {
                $(".qParagraph input").autoGrowInput({
                    minWidth: 50,
                    maxWidth: 700
                })
            }, 1e3);
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/fib/fib.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.Hotspot", ["swiftassessMobile.services"]).directive("hotspot", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", "User", "$timeout", function(t, i, r, u) {
            t.res_Uri = i.get().res_Uri;
            t.ACUHost = i.get().channel == "ACU" || i.get().channel == "AppACU" ? HttpScheme + "://" + localStorage.ACUhost : "";
            t.question.options.image = t.ACUHost != "" ? t.ACUHost + "/" + t.question.options.image : t.res_Uri + t.question.options.image.replace(t.res_Uri, "");
            u(function() {
                t.hotspot = new HotspotAnswerInitializer(t.question.options)
            }, 10);
            t.$on(t.question.QuestionID + "-clear", function() {
                t.hotspot.clear()
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                    if (!t.hotspot.empty) {
                        t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                        t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                            index: t.index
                        }));
                        t.question.done = !0;
                        var u = t.hotspot.submitAnswer();
                        t.marksGained = u.grade / 100 * t.question.QuestionPoints;
                        t.passed = t.question.options.IsPartial == "true" ? t.marksGained / t.question.QuestionPoints < t.question.PassingPercent ? !1 : !0 : u.grade == 100 ? !0 : !1;
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, u.answer, null, [], [], undefined, t.question.options.IsPartial == "true", t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                    }
                } else
                    t.$emit("attemptsDone", {
                        index: t.index
                    });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
        }
        ],
        templateUrl: "app/questions/hotspot/hotspot.tpl.html"
    }
}
]);
HotspotAnswerInitializer = function(n) {
    var t, i = {
        container: n.id,
        hotspotCanvas: undefined,
        questions: undefined,
        maxWidth: n.maxWidth || 960,
        answerMode: n.answerMode,
        answers: undefined,
        _clickState: undefined,
        _lastClickTime: undefined,
        _lastClickPosition: {
            x: 0,
            y: 0
        },
        _allowSpotAdd: !0,
        _deleteConfirmText: n.deleteConfirmText || "Delete Point",
        IsPartial: n.IsPartial,
        empty: !0,
        init: function() {
            t = this;
            t._lasClickTime = (new Date).getTime();
            var i = document.createElement("img");
            i.onload = function() {
                if (t.hotspotCanvas = new fabric.Canvas($(t.container).find(".hotspotCanvas")[0],{
                    selection: !1
                }),
                t.hotspotCanvas.hoverCursor = "Default",
                t.hotspotCanvas.moveCursor = "Default",
                t.questions = t._reconfigureJSON(n.spots),
                t.hotspotCanvas.loadFromDatalessJSON(t.questions),
                n.answers != undefined && (t.empty = !1,
                $.each(n.answers.answers, function(n, i) {
                    var r = new fabric.Circle({
                        radius: 10,
                        fill: "red",
                        left: i.left,
                        top: i.top,
                        stroke: "fff",
                        strokeDashArray: [1, 0, 1],
                        strokeWidth: 5,
                        shadow: {
                            color: "rgba(0,0,0,1)",
                            blur: 15,
                            affectStroke: !0
                        },
                        hasControls: !1,
                        hasBorders: !1,
                        includeDefaultValues: !1,
                        centerTransform: !0,
                        originX: "center",
                        originY: "center"
                    });
                    t.hotspotCanvas.add(r)
                })),
                $(t.container + " .canvas-container").get(0).addEventListener("touchstart", t._clickHandler, !1),
                $(t.container + " .canvas-container").get(0).addEventListener("MSPointerDown", t._clickHandler, !1),
                $(t.container + " .canvas-container").get(0).addEventListener("pointerdown", t._clickHandler, !1),
                $(t.container + " .canvas-container").get(0).addEventListener("mousedown", t._clickHandler, !1),
                t._objectHoverHandler(),
                $(t.container).find(".hotspotCanvasContainer").css("background", "url('" + n.image + "') no-repeat 0 0"),
                this.width > 940) {
                    var i = Math.floor((960 - Math.min(this.width, t.maxWidth)) / 2) + 1;
                    i = 17 - i
                }
                this.width > t.maxWidth ? ($(t.container).find(".hotspotCanvas").attr("height", this.height * (t.maxWidth / this.width) + "px"),
                $(t.container).find(".hotspotCanvas").attr("width", t.maxWidth + "px"),
                t.hotspotCanvas.setDimensions({
                    height: this.height * (t.maxWidth / this.width),
                    width: t.maxWidth
                }),
                $(t.container).css("width", t.maxWidth + "px"),
                $(t.container).find(".hotspotCanvasContainer").css("background-size", "100%")) : ($(t.container).find(".hotspotCanvas").attr("height", this.height + "px"),
                $(t.container).find(".hotspotCanvas").attr("width", this.width + "px"),
                $(t.container).css("width", this.width + "px"),
                t.hotspotCanvas.setDimensions({
                    height: this.height,
                    width: this.width
                }));
                t._animate()
            }
            ;
            i.src = n.image
        },
        changeClickState: function(n, i) {
            n == undefined || t._clickState == n ? ($(t.container).find(".active:not(.hotspotColor .active)").removeClass("active"),
            t._clickState = undefined) : ($(t.container).find(".active:not(.hotspotColor .active)").removeClass("active"),
            $(i).addClass("active"),
            t._clickState = n)
        },
        deleteSpot: function() {
            var i = t.hotspotCanvas.getActiveObject(), n;
            i != undefined && t.hotspotCanvas.remove(i);
            t.changeClickState(undefined);
            $(t.container).find(".hotspotDelete").addClass("displayN");
            n = !0;
            t.hotspotCanvas.forEachObject(function(t) {
                t.strokeWidth == 5 && (n = !1)
            });
            n && (t.empty = !0)
        },
        clear: function() {
            t.hotspotCanvas.clear();
            $(t.container).find(".hotspotDelete").addClass("displayN");
            t.hotspotCanvas.loadFromDatalessJSON(t.questions);
            t.empty = !0
        },
        submitAnswer: function() {
            var u = [], n = 0, r = 0, e = 0, o = 0, i = [], f;
            return t.hotspotCanvas.forEachObject(function(n) {
                n.strokeWidth == 5 ? u.push(n) : i.push(n)
            }),
            t.answerMode == "All" ? n = t.questions.objects.length : t.answerMode == "Single" ? n = 1 : (f = JSON.stringify(t.questions),
            n = (f.indexOf("red") != -1 ? 1 : 0) + (f.indexOf("blue") != -1 ? 1 : 0) + (f.indexOf("green") != -1 ? 1 : 0)),
            e = 100 / n,
            n - u.length < 0 && (r = e * (n - u.length)),
            $.each(u, function(r, u) {
                return $.each(i, function(n, r) {
                    if (r.containsPoint({
                        x: u.left,
                        y: u.top
                    })) {
                        if (o++,
                        t.answerMode == "All")
                            i.splice(n, 1);
                        else if (t.answerMode == "Single")
                            i = [];
                        else {
                            var f = [];
                            $.each(i, function(n, t) {
                                t.fill != r.fill && f.push(i[n])
                            });
                            i = f
                        }
                        return !1
                    }
                }),
                o == n ? !1 : void 0
            }),
            r += o * e,
            r < 0 && (r = 0),
            {
                answer: {
                    answers: u
                },
                grade: t.IsPartial == "true" ? r : r == 100 ? 100 : 0
            }
        },
        _reconfigureJSON: function(n) {
            var t = JSON.parse(n);
            return n = JSON.parse(n),
            t.objects = [],
            $.each(n.objects, function(n, i) {
                i.hasControls = !1;
                i.hasBorders = !1;
                i.lockMovementX = !0;
                i.lockMovementY = !0;
                i.opacity = 0;
                t.objects.push(i)
            }),
            t
        },
        _addSpot: function(n, i) {
            if (t.empty = !1,
            t._allowSpotAdd) {
                var r = new fabric.Circle({
                    radius: 10,
                    fill: "red",
                    left: n,
                    top: i,
                    stroke: "fff",
                    strokeDashArray: [1, 0, 1],
                    strokeWidth: 5,
                    shadow: {
                        color: "rgba(0,0,0,1)",
                        blur: 15,
                        affectStroke: !0
                    },
                    hasControls: !1,
                    hasBorders: !1,
                    includeDefaultValues: !1,
                    centerTransform: !0,
                    originX: "center",
                    originY: "center"
                });
                t.hotspotCanvas.add(r);
                t.hotspotCanvas.setActiveObject(r);
                $(t.container).find(".hotspotDelete").removeClass("displayN");
                t.changeClickState(undefined);
                t._allowSpotAdd = !1;
                setTimeout(function() {
                    t._allowSpotAdd = !0
                }, 700)
            }
        },
        _clickHandler: function(n) {
            n.pointerType == "mouse" || n.pointerType == "touch" || n.touches == undefined ? (n.offsetX = n.clientX - $(t.container + " canvas").eq(0).offset().left,
            n.offsetY = n.clientY - $(t.container + " canvas").eq(0).offset().top) : (n.offsetX = n.touches[0].pageX - $(t.container + " canvas").eq(0).offset().left,
            n.offsetY = n.touches[0].pageY - $(t.container + " canvas").eq(0).offset().top);
            var i = {};
            i.target = t.hotspotCanvas.findTarget(n);
            t._clickState != undefined ? t._addSpot(n.offsetX, n.offsetY) : i.target == undefined || i.target.strokeWidth != 5 ? $(t.container).find(".hotspotDelete").addClass("displayN") : i.target.type == "circle" && i.target.strokeWidth == 5 && $(t.container).find(".hotspotDelete").removeClass("displayN")
        },
        _DoubleClickHandler: function(n) {
            t._addSpot(n.e.offsetX, n.e.offsetY)
        },
        _objectHoverHandler: function() {
            t.hotspotCanvas.findTarget = function(n) {
                return function() {
                    t.hotspotCanvas.calcOffset();
                    t.hotspotCanvas._offset.left = t.hotspotCanvas._offset.left + $(t.container).parents(".question").scrollLeft();
                    t.hotspotCanvas._offset.top = t.hotspotCanvas._offset.top + $(t.container).parents(".question").scrollTop();
                    var i = n.apply(t.hotspotCanvas, arguments);
                    return i ? t.hotspotCanvas._hoveredTarget !== i && (t.hotspotCanvas._hoveredTarget && t.hotspotCanvas.fire("object:out", {
                        target: t.hotspotCanvas._hoveredTarget
                    }),
                    t.hotspotCanvas.fire("object:over", {
                        target: i
                    }),
                    t.hotspotCanvas._hoveredTarget = i) : t.hotspotCanvas._hoveredTarget && (t.hotspotCanvas.fire("object:out", {
                        target: t.hotspotCanvas._hoveredTarget
                    }),
                    t.hotspotCanvas._hoveredTarget = null),
                    i
                }
            }(t.hotspotCanvas.findTarget);
            t.hotspotCanvas.on("object:over", function(n) {
                n.target.strokeWidth == 5 && (t.hotspotCanvas.hoverCursor = "pointer",
                n.target.radius = 12)
            });
            t.hotspotCanvas.on("object:moving", function(n) {
                n.target.strokeWidth == 5 && (t.hotspotCanvas.hoverCursor = "pointer",
                n.target.radius = 12)
            });
            t.hotspotCanvas.on("object:out", function(n) {
                t.hotspotCanvas.hoverCursor = "default";
                n.target.radius = 10
            });
            $(t.container).on("touchend", function() {
                if (t.hotspotCanvas.getActiveObject()) {
                    var n = t.hotspotCanvas.getActiveObject().radius = 10;
                    t.hotspotCanvas.renderAll()
                }
            })
        },
        _animate: function() {
            t.hotspotCanvas.forEachObject(function(n) {
                n.strokeWidth == 5 && (n == t.hotspotCanvas.getActiveObject() ? n.fill = "transparent" : (n.fill = "red",
                n.setAngle(n.getAngle() + 2)))
            });
            t.hotspotCanvas.renderAll();
            fabric.util.requestAnimFrame(t._animate)
        }
    };
    return i.init(),
    i
}
;
angular.module("swiftassessMobile.Matching", ["swiftassessMobile.services"]).directive("matching", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", "User", "$timeout", function(t, i, r, u) {
            t.res_Uri = i.get().res_Uri;
            t.ACUHost = i.get().channel == "ACU" || i.get().channel == "AppACU" ? HttpScheme + "://" + localStorage.ACUhost + "/" : "";
            t.matchingSVG = matchingSVG(t.index, t.scenario.order, t.question.QuestionID);
            u(function() {
                t.question.answer != undefined && (t.answer = t.question.answer,
                $.each(t.question.answer, function(n, i) {
                    var r, u;
                    u = $("#sa-" + t.question.QuestionID + " .targets .dnd-item[data-value=" + i.answer + "]");
                    r = $("#sa-" + t.question.QuestionID + " .draggables .dnd-item[data-value=" + i.item + "]");
                    t.matchingSVG.connect(r, u)
                }));
                $("#sa-" + t.question.QuestionID + " .draggables .dnd-item").draggable({
                    revert: !0,
                    drag: function(n, i) {
                        t.matchingSVG.refresh($(i.helper))
                    },
                    stop: function(n, i) {
                        t.matchingSVG.refresh($(i.helper))
                    }
                });
                $("#sa-" + t.question.QuestionID + " .draggables .dnd-item").css("-ms-touch-action", "none");
                $("#sa-" + t.question.QuestionID + " .targets .dnd-item").droppable({
                    hoverClass: "dnd-item-active",
                    drop: function(n, i) {
                        var r, u, o, e, f;
                        if (u = $(this),
                        r = $(i.draggable),
                        t.matchingSVG.connect(r, u),
                        o = setInterval(function() {
                            t.matchingSVG.connect(r, u)
                        }, 10),
                        setTimeout(function() {
                            clearInterval(o)
                        }, 500),
                        t.answer == undefined)
                            t.answer = [{
                                item: r.attr("data-value"),
                                answer: u.attr("data-value")
                            }];
                        else {
                            for (e = -1,
                            f = 0; f < t.answer.length; ++f)
                                if (r.attr("data-value") == t.answer[f].item) {
                                    e = f;
                                    break
                                }
                            e != -1 ? t.answer[e].answer = u.attr("data-value") : t.answer.push({
                                item: r.attr("data-value"),
                                answer: u.attr("data-value")
                            })
                        }
                    }
                })
            }, 510);
            t.$on(t.question.QuestionID + "-resize", function() {
                t.matchingSVG.refreshAll();
                setTimeout(function() {
                    t.matchingSVG.refreshAll()
                }, 100)
            });
            t.$on(t.question.QuestionID + "-clear", function() {
                t.matchingSVG.clear();
                t.answer = undefined
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                    if (t.answer != undefined) {
                        t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                        t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                            index: t.index
                        }));
                        t.question.done = !0;
                        t.passed = !0;
                        var u = 0
                          , f = (t.question.QuestionPoints / t.question.items.length).toFixed(2);
                        t.marksGained = t.question.QuestionPoints;
                        $(t.answer).each(function(n, i) {
                            var r = i.item
                              , f = i.answer;
                            $(t.question.items).each(function(n, t) {
                                if (t.ItemID == r && t.AnswerID == f)
                                    return u++,
                                    !1
                            })
                        });
                        u != t.question.items.length && (t.question.IsPartial == !0 ? (t.marksGained = u * f,
                        t.marksGained / t.question.QuestionPoints < t.question.PassingPercent && (t.passed = !1)) : (t.passed = !1,
                        t.marksGained = 0));
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, null, null, [], t.answer, undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                    }
                } else
                    t.$emit("attemptsDone", {
                        index: t.index
                    });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/matching/matching.tpl.html"
    }
}
]);
matchingSVG = function(n, t, i) {
    var o = $("#question-" + n + "-" + t)
      , u = function(t, u) {
        f(t);
        var s = e(t, "middle-right")
          , h = e(u, "middle-left")
          , o = document.createElementNS("http://www.w3.org/2000/svg", "path");
        o.setAttribute("d", "M " + s.x + " " + s.y + " C " + (s.x + 100) + " " + s.y + ", " + (h.x - 100) + " " + h.y + ", " + h.x + " " + h.y);
        o.setAttribute("stroke", "#999");
        o.setAttribute("stroke-width", "4");
        o.setAttribute("fill", "none");
        o.setAttribute("id", n + "-" + r.counter);
        o = $(o).appendTo($(".dndCanvas[id=sa-" + i + "]").find("svg"));
        r.lines.push({
            source: t,
            target: u,
            id: "#" + n + "-" + r.counter
        });
        r.counter++
    }
      , f = function(n) {
        for (var t = 0; t < r.lines.length; t++)
            r.lines[t].source.get(0) == n.get(0) && ($(r.lines[t].id).remove(),
            r.lines.splice(t, 1))
    }
      , e = function(n, t) {
        var i = $(n).offset().left - $(n).parents(".dndCanvas").offset().left
          , r = $(n).offset().top - $(n).parents(".dndCanvas").offset().top;
        return t = t.split("-"),
        t[0] == "middle" && (r = r + $(n).height()),
        t[1] == "right" && (i = i + $(n).width()),
        {
            x: Math.floor(i),
            y: Math.floor(r)
        }
    }
      , s = function() {
        for (var t = r.lines.slice(), n = 0; n < t.length; n++)
            u(t[n].source, t[n].target)
    }
      , h = function(n) {
        for (var t = 0; t < r.lines.length; t++)
            if (r.lines[t].source.get(0) == n.get(0)) {
                u(r.lines[t].source, r.lines[t].target);
                return
            }
    }
      , c = function() {
        for (var n = 0; n < r.lines.length; n++)
            $(r.lines[n].id).remove();
        r.lines = []
    }
      , r = {
        id: n,
        container: o,
        lines: [],
        connect: u,
        detach: f,
        refreshAll: s,
        refresh: h,
        counter: 0,
        clear: c
    };
    return r
}
;
angular.module("swiftassessMobile.ReOrder", ["swiftassessMobile.services", "ui.sortable"]).directive("reOrder", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", "User", function(t, i) {
            var r = t.question.ReorderItems.slice();
            t.res_Uri = i.get().res_Uri;
            t.ACUHost = i.get().channel == "ACU" || i.get().channel == "AppACU" ? HttpScheme + "://" + localStorage.ACUhost + "/" : "";
            t.sortableOptions = {
                placeholder: "ui-state-highlight",
                start: function(n, i) {
                    $(n.target).data("ui-sortable").floating = !0;
                    $(".ui-state-highlight").css("height", i.item.children().eq(0).outerHeight() + "px");
                    $(".ui-state-highlight").css("width", i.item.children().eq(0).outerWidth() + "px");
                    t.question.Orientation != "True" || ($("#sa-" + t.question.QuestionID).find(".ui-state-highlight").addClass(localStorage.lang == "en" ? "floatL" : "floatR"),
                    $("#sa-" + t.question.QuestionID).find(".ui-state-highlight").css("height", i.item.outerHeight()),
                    $("#sa-" + t.question.QuestionID).find(".ui-state-highlight").css("width", i.item.outerWidth()))
                },
                stop: function() {
                    $(".ui-state-highlight").remove()
                }
            };
            $(".sortable").disableSelection();
            t.$on(t.question.QuestionID + "-clear", function() {
                t.question.ReorderItems = r.slice()
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.question.done = !0,
                t.passed = !0,
                $(t.question.ReorderItems).each(function(n, i) {
                    if (i.Order !== n + 1)
                        return t.passed = !1,
                        !1
                }),
                t.marksGained = t.passed ? t.question.QuestionPoints : 0,
                n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.marksGained, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, JSON.stringify({
                    items: t.question.ReorderItems.map(function(n) {
                        return n.ItemID
                    })
                }), null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)) : t.$emit("attemptsDone", {
                    index: t.index
                });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/reorder/reorder.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.ShortAnswer", ["swiftassessMobile.services"]).directive("shortAnswer", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t, i) {
            t.answer = {};
            t.answer.text = "";
            t.resources = i.get().localResources[localStorage.lang];
            t.$on(t.question.QuestionID + "-clear", function() {
                t.answer.text = ""
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                if (t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0) {
                    if (t.answer.text != undefined && t.answer.text != "") {
                        t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                        t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                            index: t.index
                        }));
                        t.question.done = !0;
                        t.question.options.isNumeric;
                        n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, !1, 0, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, t.answer.text, null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)
                    }
                } else
                    t.$emit("attemptsDone", {
                        index: t.index
                    });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/sa/sa.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.TrueOrFalse", ["swiftassessMobile.services"]).directive("trueOrFalse", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t, i) {
            t.selection = undefined;
            t.resources = i.get().localResources[localStorage.lang];
            t.toggleSelection = function(n) {
                $("#check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "-" + n).attr("checked", "checked");
                t.selection = n
            }
            ;
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) input[name='check-" + (t.scenario.QuestionID == null ? "" : t.scenario.QuestionID) + "-" + t.question.QuestionID + "']").attr("checked", !1);
                toast("success", "cleared" + t.question.IsCorrect, n.resources.Success);
                t.selection = undefined
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? t.selection != undefined && (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.question.done = !0,
                t.passed = t.selection === t.question.IsCorrect,
                t.gainedMarks = t.passed ? t.question.QuestionPoints : 0,
                n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, t.passed, t.gainedMarks, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, t.index, t.selection, null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, t.question.SectionID)) : t.$emit("attemptsDone", {
                    index: t.index
                });
                r && t.$emit("submit")
            });
            t.isDarkTheme = function() {
                return theme == "dark"
            }
            ;
            t.isLightTheme = function() {
                return theme == "light"
            }
            ;
            t.getLineHeight = function() {
                return lineHeight
            }
            ;
            t.getLetterSpacing = function() {
                return letterSpacing
            }
            ;
            t.getWordSpacing = function() {
                return wordSpacing
            }
        }
        ],
        templateUrl: "app/questions/tf/tf.tpl.html"
    }
}
]);
angular.module("swiftassessMobile.Rating", ["swiftassessMobile.services"]).directive("qrating", ["LS", function(n) {
    return {
        restrict: "E",
        scope: {
            question: "=question",
            index: "=index",
            scenario: "=scenario"
        },
        controller: ["$scope", "Config", function(t) {
            t.rows = t.question.Data.qRatingRowsData.split("||");
            t.rowIDs = t.question.Data.RowID.split(",");
            t.cols = t.question.Data.qRatingColsSData.split("||");
            t.colIDs = t.question.Data.ColID.split(",");
            t.selection = [];
            t.toggleSelection = function(n, i) {
                t.selection = $.grep(t.selection, function(t) {
                    return t.rowID != n
                });
                t.selection.push({
                    rowID: n,
                    colID: i
                });
                t.question.IsForcedRating && ($(".question:not(.ng-hide) [value$=-" + i + "]:not([value=" + n + "-" + i + "])").removeAttr("checked"),
                t.selection = $.grep(t.selection, function(t) {
                    return t.rowID != n && t.colID == i || t.rowID == n
                }))
            }
            ;
            t.$on(t.question.QuestionID + "-clear", function() {
                $(".question:not(.ng-hide) #question-" + t.question.QuestionID + " input").attr("checked", !1);
                t.selection = []
            });
            t.$on(t.question.QuestionID + "-save", function(i, r) {
                t.question.QuestionAttempts == null || t.question.QuestionAttempts > 0 ? t.selection.length == t.rows.length && (t.question.QuestionAttempts != null && (t.question.QuestionAttempts = t.question.QuestionAttempts - 1,
                t.question.QuestionAttempts == 0 && t.$emit("attemptsDone", {
                    index: t.index
                })),
                t.question.done = !0,
                n.setLS(t.question.QuestionType, t.question.QuestionID, t.resultID, !1, t.question.QuestionPoints, t.question.QuestionAttempts == null ? 0 : t.question.QuestionAttempts, 0, t.index, t.selection, null, [], [], undefined, undefined, t.scenario.QuestionID, t.scenario.QuestionPoints, t.scenario.order, null)) : t.$emit("attemptsDone", {
                    index: t.index
                });
                r && t.$emit("submit")
            })
        }
        ],
        templateUrl: "app/questions/rating/rating.tpl.html"
    }
}
]),
function() {
    function w() {}
    function ei(n) {
        var t = n.length - 1;
        return function() {
            var i = fi.call(arguments, 0, t)
              , r = fi.call(arguments, t);
            return n.apply(this, i.concat([r]))
        }
    }
    function oi(n) {
        return ei(function(t, i) {
            typeof t != "function" && (t = gr(t));
            var r = function(n) {
                return t.apply(n, [n].concat(i))
            };
            return n.call(this, r)
        })
    }
    function i(n) {
        var t = fi.call(arguments, 1);
        return function() {
            return n.apply(this, t)
        }
    }
    function c(n, t) {
        if (!t)
            throw new Error("prayer failed: " + n);
    }
    function b(n) {
        c("a direction was passed", n === t || n === r)
    }
    function si(n, i, u) {
        c("a parent is always present", n);
        c("leftward is properly set up", function() {
            return i ? i[r] === u && i.parent === n : n.ends[t] === u
        }());
        c("rightward is properly set up", function() {
            return u ? u[t] === i && u.parent === n : n.ends[r] === i
        }())
    }
    function ti() {
        window.console && console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')
    }
    function tt(n) {
        return ti(),
        ri(n)
    }
    function ii(i) {
        function u(n) {
            if (!n || !n.nodeType)
                return null;
            var i = s(n).children(".mq-root-block").attr(ft)
              , t = i && a.byId[i].controller;
            return t ? e[t.KIND_OF_MQ](t) : null
        }
        function c(n, t) {
            var i, r, u;
            t && t.handlers && (t.handlers = {
                fns: t.handlers,
                APIClasses: e
            });
            for (i in t)
                t.hasOwnProperty(i) && (r = t[i],
                u = ni[i],
                n[i] = u ? u(r) : r)
        }
        var e, o, h;
        if (!(hi <= i && i <= ci))
            throw "Only interface versions between " + hi + " and " + ci + " supported. You specified: " + i;
        e = {};
        u.L = t;
        u.R = r;
        u.config = function(n) {
            return c(st.p, n),
            this
        }
        ;
        u.registerEmbed = function(n, t) {
            if (!/^[a-z][a-z0-9]*$/i.test(n))
                throw "Embed name must start with letter and be only letters and digits";
            er[n] = t
        }
        ;
        o = e.AbstractMathQuill = f(fr, function(n) {
            n.init = function(n) {
                this.__controller = n;
                this.__options = n.options;
                this.id = n.id;
                this.data = n.data
            }
            ;
            n.__mathquillify = function(n) {
                var t = this.__controller, u = t.root, i = t.container, r;
                t.createTextarea();
                r = i.addClass(n).contents().detach();
                u.jQ = s('<span class="mq-root-block"/>').attr(ft, u.id).appendTo(i);
                this.latex(r.text());
                this.revert = function() {
                    return i.empty().unbind(".mathquill").removeClass("mq-editable-field mq-math-mode mq-text-mode").append(r)
                }
            }
            ;
            n.config = function(n) {
                return c(this.__options, n),
                this
            }
            ;
            n.el = function() {
                return this.__controller.container[0]
            }
            ;
            n.text = function() {
                return this.__controller.exportText()
            }
            ;
            n.latex = function(n) {
                return arguments.length > 0 ? (this.__controller.renderLatexMath(n),
                this.__controller.blurred && this.__controller.cursor.hide().parent.blur(),
                this) : this.__controller.exportLatex()
            }
            ;
            n.html = function() {
                return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g, "").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i, "").replace(/ mq-hasCursor|mq-hasCursor ?/, "").replace(/ class=(""|(?= |>))/g, "")
            }
            ;
            n.reflow = function() {
                return this.__controller.root.postOrder("reflow"),
                this
            }
        });
        u.prototype = o.prototype;
        e.EditableField = f(o, function(i, u) {
            i.__mathquillify = function() {
                return u.__mathquillify.apply(this, arguments),
                this.__controller.editable = !0,
                this.__controller.delegateMouseEvents(),
                this.__controller.editablesTextareaEvents(),
                this
            }
            ;
            i.focus = function() {
                return this.__controller.textarea.focus(),
                this
            }
            ;
            i.blur = function() {
                return this.__controller.textarea.blur(),
                this
            }
            ;
            i.write = function(n) {
                return this.__controller.writeLatex(n),
                this.__controller.scrollHoriz(),
                this.__controller.blurred && this.__controller.cursor.hide().parent.blur(),
                this
            }
            ;
            i.cmd = function(t) {
                var u = this.__controller.notify(), i = u.cursor, r;
                return /^\\[a-z]+$/i.test(t) ? (t = t.slice(1),
                r = n[t],
                r && (t = r(t),
                i.selection && t.replaces(i.replaceSelection()),
                t.createLeftOf(i.show()),
                this.__controller.scrollHoriz())) : i.parent.write(i, t),
                u.blurred && i.hide().parent.blur(),
                this
            }
            ;
            i.select = function() {
                var n = this.__controller;
                for (n.notify("move").cursor.insAtRightEnd(n.root); n.cursor[t]; )
                    n.selectLeft();
                return this
            }
            ;
            i.clearSelection = function() {
                return this.__controller.cursor.clearSelection(),
                this
            }
            ;
            i.moveToDirEnd = function(n) {
                return this.__controller.notify("move").cursor.insAtDirEnd(n, this.__controller.root),
                this
            }
            ;
            i.moveToLeftEnd = function() {
                return this.moveToDirEnd(t)
            }
            ;
            i.moveToRightEnd = function() {
                return this.moveToDirEnd(r)
            }
            ;
            i.keystroke = function(n) {
                for (var n = n.replace(/^\s+|\s+$/g, "").split(/\s+/), t = 0; t < n.length; t += 1)
                    this.__controller.keystroke(n[t], {
                        preventDefault: w
                    });
                return this
            }
            ;
            i.typedText = function(n) {
                for (var t = 0; t < n.length; t += 1)
                    this.__controller.typedText(n.charAt(t));
                return this
            }
            ;
            i.dropEmbedded = function(n, t, i) {
                var u = n - s(window).scrollLeft(), f = t - s(window).scrollTop(), e = document.elementFromPoint(u, f), r;
                this.__controller.seek(s(e), n, t);
                r = dr().setOptions(i);
                r.createLeftOf(this.__controller.cursor)
            }
        });
        u.EditableField = function() {
            throw "wtf don't call me, I'm 'abstract'";
        }
        ;
        u.EditableField.prototype = e.EditableField.prototype;
        for (h in wt)
            (function(n, t) {
                var r = e[n] = t(e);
                u[n] = function(t, f) {
                    var o = u(t), e;
                    return o instanceof r || !t || !t.nodeType ? o : (e = g(r.RootBlock(), s(t), st()),
                    e.KIND_OF_MQ = n,
                    r(e).__mathquillify(f, i))
                }
                ;
                u[n].prototype = r.prototype
            }
            )(h, wt[h]);
        return u
    }
    function sr(n) {
        for (var i = "moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "), t = 0; t < i.length; t += 1)
            (function(t) {
                n[t] = function(n) {
                    this.controller.handle(t, n)
                }
            }
            )(i[t]);
        n.reflow = function() {
            this.controller.handle("reflow");
            this.controller.handle("edited");
            this.controller.handle("edit")
        }
    }
    function ht(n, t, i) {
        return f(bt, {
            ctrlSeq: n,
            htmlTemplate: "<" + t + " " + i + ">&0<\/" + t + ">"
        })
    }
    function di(n) {
        var i = this.parent
          , t = n;
        do {
            if (t[r])
                return n.insLeftOf(i);
            t = t.parent.parent
        } while (t !== i);n.insRightOf(i)
    }
    function br(n, t) {
        n.jQadd = function() {
            t.jQadd.apply(this, arguments);
            this.delimjQs = this.jQ.children(":first").add(this.jQ.children(":last"));
            this.contentjQ = this.jQ.children(":eq(1)")
        }
        ;
        n.reflow = function() {
            var n = this.contentjQ.outerHeight() / parseFloat(this.contentjQ.css("fontSize"));
            gt(this.delimjQs, ir(1 + .2 * (n - 1), 1.2), 1.2 * n)
        }
    }
    function gi(n, u) {
        var u = u || n
          , f = yt[n]
          , e = yt[u];
        d[n] = i(ot, t, n, f, u, e);
        d[f] = i(ot, r, n, f, u, e)
    }
    var ui = window.jQuery, pt, tr = "mathquill-command-id", ft = "mathquill-block-id", ir = Math.min, rr = Math.max, fi = [].slice, gr = ei(function(n, t) {
        return ei(function(i, r) {
            if (n in i)
                return i[n].apply(i, t.concat(r))
        })
    }), f = function(n, t, i) {
        function u(n) {
            return typeof n == "object"
        }
        function r(n) {
            return typeof n == "function"
        }
        function f() {}
        return function e(o, s) {
            function h() {
                var n = new a;
                return r(n.init) && n.init.apply(n, arguments),
                n
            }
            function a() {}
            s === i && (s = o,
            o = Object);
            h.Bare = a;
            var v = f[n] = o[n], l = a[n] = h[n] = h.p = new f, c;
            return l.constructor = h,
            h.mixin = function(t) {
                return a[n] = h[n] = e(h, t)[n],
                h
            }
            ,
            (h.open = function(n) {
                if (c = {},
                r(n) ? c = n.call(h, l, v, h, o) : u(n) && (c = n),
                u(c))
                    for (var i in c)
                        t.call(c, i) && (l[i] = c[i]);
                return r(l.init) || (l.init = o),
                h
            }
            )(s)
        }
    }("prototype", {}.hasOwnProperty), t = -1, r = 1, s = f(ui, function(n) {
        n.insDirOf = function(n, i) {
            return n === t ? this.insertBefore(i.first()) : this.insertAfter(i.last())
        }
        ;
        n.insAtDirEnd = function(n, i) {
            return n === t ? this.prependTo(i) : this.appendTo(i)
        }
    }), nt = f(function(n) {
        n.parent = 0;
        n[t] = 0;
        n[r] = 0;
        n.init = function(n, i, u) {
            this.parent = n;
            this[t] = i;
            this[r] = u
        }
        ;
        this.copy = function(n) {
            return nt(n.parent, n[t], n[r])
        }
    }), a = f(function(n) {
        function u() {
            return i += 1
        }
        n[t] = 0;
        n[r] = 0;
        n.parent = 0;
        var i = 0;
        this.byId = {};
        n.init = function() {
            this.id = u();
            a.byId[this.id] = this;
            this.ends = {};
            this.ends[t] = 0;
            this.ends[r] = 0
        }
        ;
        n.dispose = function() {
            delete a.byId[this.id]
        }
        ;
        n.toString = function() {
            return "{{ MathQuill Node #" + this.id + " }}"
        }
        ;
        n.jQ = s();
        n.jQadd = function(n) {
            return this.jQ = this.jQ.add(n)
        }
        ;
        n.jQize = function(n) {
            function i(n) {
                if (n.getAttribute) {
                    var t = n.getAttribute("mathquill-command-id")
                      , r = n.getAttribute("mathquill-block-id");
                    t && a.byId[t].jQadd(n);
                    r && a.byId[r].jQadd(n)
                }
                for (n = n.firstChild; n; n = n.nextSibling)
                    i(n)
            }
            for (var n = s(n || this.html()), t = 0; t < n.length; t += 1)
                i(n[t]);
            return n
        }
        ;
        n.createDir = function(n, i) {
            b(n);
            var u = this;
            return u.jQize(),
            u.jQ.insDirOf(n, i.jQ),
            i[n] = u.adopt(i.parent, i[t], i[r]),
            u
        }
        ;
        n.createLeftOf = function(n) {
            return this.createDir(t, n)
        }
        ;
        n.selectChildren = function(n, t) {
            return ur(n, t)
        }
        ;
        n.bubble = oi(function(n) {
            for (var i, t = this; t; t = t.parent)
                if (i = n(t),
                i === !1)
                    break;
            return this
        });
        n.postOrder = oi(function(n) {
            return function t(i) {
                i.eachChild(t);
                n(i)
            }(this),
            this
        });
        n.isEmpty = function() {
            return this.ends[t] === 0 && this.ends[r] === 0
        }
        ;
        n.children = function() {
            return v(this.ends[t], this.ends[r])
        }
        ;
        n.eachChild = function() {
            var n = this.children();
            return n.each.apply(n, arguments),
            this
        }
        ;
        n.foldChildren = function(n, t) {
            return this.children().fold(n, t)
        }
        ;
        n.withDirAdopt = function(n, t, i, r) {
            return v(this, this).withDirAdopt(n, t, i, r),
            this
        }
        ;
        n.adopt = function(n, t, i) {
            return v(this, this).adopt(n, t, i),
            this
        }
        ;
        n.disown = function() {
            return v(this, this).disown(),
            this
        }
        ;
        n.remove = function() {
            return this.jQ.remove(),
            this.postOrder("dispose"),
            this.disown()
        }
    }), v = f(function(n) {
        n.init = function(n, i, r) {
            if (r === pt && (r = t),
            b(r),
            c("no half-empty fragments", !n == !i),
            this.ends = {},
            n) {
                c("withDir is passed to Fragment", n instanceof a);
                c("oppDir is passed to Fragment", i instanceof a);
                c("withDir and oppDir have the same parent", n.parent === i.parent);
                this.ends[r] = n;
                this.ends[-r] = i;
                var u = this.fold([], function(n, t) {
                    return n.push.apply(n, t.jQ.get()),
                    n
                });
                this.jQ = this.jQ.add(u)
            }
        }
        ;
        n.jQ = s();
        n.withDirAdopt = function(n, i, r, u) {
            return n === t ? this.adopt(i, r, u) : this.adopt(i, u, r)
        }
        ;
        n.adopt = function(n, i, u) {
            var f, e, o;
            return (si(n, i, u),
            f = this,
            f.disowned = !1,
            e = f.ends[t],
            !e) ? this : (o = f.ends[r],
            i || (n.ends[t] = e),
            u ? u[t] = o : n.ends[r] = o,
            f.ends[r][r] = u,
            f.each(function(u) {
                u[t] = i;
                u.parent = n;
                i && (i[r] = u);
                i = u
            }),
            f)
        }
        ;
        n.disown = function() {
            var u = this, n = u.ends[t], i, f;
            return !n || u.disowned ? u : (u.disowned = !0,
            i = u.ends[r],
            f = n.parent,
            si(f, n[t], n),
            si(f, i, i[r]),
            n[t] ? n[t][r] = i[r] : f.ends[t] = i[r],
            i[r] ? i[r][t] = n[t] : f.ends[r] = n[t],
            u)
        }
        ;
        n.remove = function() {
            return this.jQ.remove(),
            this.each("postOrder", "dispose"),
            this.disown()
        }
        ;
        n.each = oi(function(n) {
            var u = this, i = u.ends[t], f;
            if (!i)
                return u;
            for (; i !== u.ends[r][r]; i = i[r])
                if (f = n(i),
                f === !1)
                    break;
            return u
        });
        n.fold = function(n, t) {
            return this.each(function(i) {
                n = t.call(this, n, i)
            }),
            n
        }
    }), n = {}, d = {}, nu = f(nt, function(n) {
        n.init = function(n, t) {
            this.parent = n;
            this.options = t;
            var i = this.jQ = this._jQ = s('<span class="mq-cursor">&#8203;<\/span>');
            this.blink = function() {
                i.toggleClass("mq-blink")
            }
            ;
            this.upDownCache = {}
        }
        ;
        n.show = function() {
            return this.jQ = this._jQ.removeClass("mq-blink"),
            "intervalId"in this ? clearInterval(this.intervalId) : (this[r] ? this.selection && this.selection.ends[t][t] === this[t] ? this.jQ.insertBefore(this.selection.jQ) : this.jQ.insertBefore(this[r].jQ.first()) : this.jQ.appendTo(this.parent.jQ),
            this.parent.focus()),
            this.intervalId = setInterval(this.blink, 500),
            this
        }
        ;
        n.hide = function() {
            return "intervalId"in this && clearInterval(this.intervalId),
            delete this.intervalId,
            this.jQ.detach(),
            this.jQ = s(),
            this
        }
        ;
        n.withDirInsertAt = function(n, t, i, r) {
            var u = this.parent;
            this.parent = t;
            this[n] = i;
            this[-n] = r;
            u !== t && u.blur && u.blur()
        }
        ;
        n.insDirOf = function(n, t) {
            return b(n),
            this.jQ.insDirOf(n, t.jQ),
            this.withDirInsertAt(n, t.parent, t[n], t),
            this.parent.jQ.addClass("mq-hasCursor"),
            this
        }
        ;
        n.insLeftOf = function(n) {
            return this.insDirOf(t, n)
        }
        ;
        n.insRightOf = function(n) {
            return this.insDirOf(r, n)
        }
        ;
        n.insAtDirEnd = function(n, t) {
            return b(n),
            this.jQ.insAtDirEnd(n, t.jQ),
            this.withDirInsertAt(n, t, 0, t.ends[n]),
            t.focus(),
            this
        }
        ;
        n.insAtLeftEnd = function(n) {
            return this.insAtDirEnd(t, n)
        }
        ;
        n.insAtRightEnd = function(n) {
            return this.insAtDirEnd(r, n)
        }
        ;
        n.jumpUpDown = function(n, t) {
            var i = this, u, f;
            i.upDownCache[n.id] = nt.copy(i);
            u = i.upDownCache[t.id];
            u ? u[r] ? i.insLeftOf(u[r]) : i.insAtRightEnd(u.parent) : (f = i.offset().left,
            t.seek(f, i))
        }
        ;
        n.offset = function() {
            var n = this
              , t = n.jQ.removeClass("mq-cursor").offset();
            return n.jQ.addClass("mq-cursor"),
            t
        }
        ;
        n.unwrapGramp = function() {
            var n = this.parent.parent
              , i = n.parent
              , e = n[r]
              , u = this
              , f = n[t];
            if (n.disown().eachChild(function(t) {
                t.isEmpty() || (t.children().adopt(i, f, e).each(function(t) {
                    t.jQ.insertBefore(n.jQ.first())
                }),
                f = t.ends[r])
            }),
            !this[r])
                if (this[t])
                    this[r] = this[t][r];
                else
                    while (!this[r])
                        if (this.parent = this.parent[r],
                        this.parent)
                            this[r] = this.parent.ends[t];
                        else {
                            this[r] = n[r];
                            this.parent = i;
                            break
                        }
            this[r] ? this.insLeftOf(this[r]) : this.insAtRightEnd(i);
            n.jQ.remove();
            n[t].siblingDeleted && n[t].siblingDeleted(u.options, r);
            n[r].siblingDeleted && n[r].siblingDeleted(u.options, t)
        }
        ;
        n.startSelection = function() {
            for (var t = this.anticursor = nt.copy(this), i = t.ancestors = {}, n = t; n.parent; n = n.parent)
                i[n.parent.id] = n
        }
        ;
        n.endSelection = function() {
            delete this.anticursor
        }
        ;
        n.select = function() {
            var s = this.anticursor, n, h, f, i, u, e, o;
            if (this[t] === s[t] && this.parent === s.parent)
                return !1;
            for (n = this; n.parent; n = n.parent)
                if (n.parent.id in s.ancestors) {
                    h = n.parent;
                    break
                }
            if (c("cursor and anticursor in the same tree", h),
            f = s.ancestors[h.id],
            e = r,
            n[t] !== f)
                for (o = n; o; o = o[r])
                    if (o[r] === f[r]) {
                        e = t;
                        i = n;
                        u = f;
                        break
                    }
            return e === r && (i = f,
            u = n),
            i instanceof nt && (i = i[r]),
            u instanceof nt && (u = u[t]),
            this.hide().selection = h.selectChildren(i, u),
            this.insDirOf(e, this.selection.ends[e]),
            this.selectionChanged(),
            !0
        }
        ;
        n.clearSelection = function() {
            return this.selection && (this.selection.clear(),
            delete this.selection,
            this.selectionChanged()),
            this
        }
        ;
        n.deleteSelection = function() {
            this.selection && (this[t] = this.selection.ends[t][t],
            this[r] = this.selection.ends[r][r],
            this.selection.remove(),
            this.selectionChanged(),
            delete this.selection)
        }
        ;
        n.replaceSelection = function() {
            var n = this.selection;
            return n && (this[t] = n.ends[t][t],
            this[r] = n.ends[r][r],
            delete this.selection),
            n
        }
    }), ur = f(v, function(n, t) {
        n.init = function() {
            t.init.apply(this, arguments);
            this.jQ = this.jQ.wrapAll('<span class="mq-selection"><\/span>').parent()
        }
        ;
        n.adopt = function() {
            return this.jQ.replaceWith(this.jQ = this.jQ.children()),
            t.adopt.apply(this, arguments)
        }
        ;
        n.clear = function() {
            return this.jQ.replaceWith(this.jQ[0].childNodes),
            this
        }
        ;
        n.join = function(n) {
            return this.fold("", function(t, i) {
                return t + i[n]()
            })
        }
    }), g = f(function(n) {
        n.init = function(n, t, i) {
            this.id = n.id;
            this.data = {};
            this.root = n;
            this.container = t;
            this.options = i;
            n.controller = this;
            this.cursor = n.cursor = nu(n, i)
        }
        ;
        n.handle = function(n, i) {
            var u = this.options.handlers, f;
            u && u.fns[n] && (f = u.APIClasses[this.KIND_OF_MQ](this),
            i === t || i === r ? u.fns[n](i, f) : u.fns[n](f))
        }
        ;
        var i = [];
        this.onNotify = function(n) {
            i.push(n)
        }
        ;
        n.notify = function() {
            for (var n = 0; n < i.length; n += 1)
                i[n].apply(this.cursor, arguments);
            return this
        }
    }), wt = {}, st = f(), ni = {}, fr = f(), er = {}, hi, ci, or, e, hr, k, li, bt, et, ai, lr, tu, ar, l, yi, pi, at, ct, kt, wi, ki, rt, vt, ot, yt, kr, su, dr, ri, nr;
    tt.prototype = fr.p;
    tt.interfaceVersion = function(n) {
        if (n !== 1)
            throw "Only interface version 1 supported. You specified: " + n;
        return ti = function() {
            window.console && console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')
        }
        ,
        ti(),
        tt
    }
    ;
    tt.getInterface = ii;
    hi = ii.MIN = 1;
    ci = ii.MAX = 2;
    tt.noConflict = function() {
        return window.MathQuill = or,
        tt
    }
    ;
    or = window.MathQuill;
    window.MathQuill = tt;
    e = f(function(n, t, i) {
        function f(n, t) {
            n = n ? "'" + n + "'" : "EOF";
            throw "Parse Error: " + t + " at " + n;
        }
        n.init = function(n) {
            this._ = n
        }
        ;
        n.parse = function(n) {
            function t(n, t) {
                return t
            }
            return this.skip(e)._("" + n, t, f)
        }
        ;
        n.or = function(n) {
            c("or is passed a parser", n instanceof i);
            var t = this;
            return i(function(i, r, u) {
                function f() {
                    return n._(i, r, u)
                }
                return t._(i, r, f)
            })
        }
        ;
        n.then = function(n) {
            var t = this;
            return i(function(r, u, f) {
                function e(t, r) {
                    var e = n instanceof i ? n : n(r);
                    return c("a parser is returned", e instanceof i),
                    e._(t, u, f)
                }
                return t._(r, e, f)
            })
        }
        ;
        n.many = function() {
            var n = this;
            return i(function(t, i) {
                function u(n, i) {
                    return t = n,
                    r.push(i),
                    !0
                }
                function f() {
                    return !1
                }
                for (var r = []; n._(t, u, f); )
                    ;
                return i(t, r)
            })
        }
        ;
        n.times = function(n, t) {
            arguments.length < 2 && (t = n);
            var r = this;
            return i(function(i, u, f) {
                function c(n, t) {
                    return s.push(t),
                    i = n,
                    !0
                }
                function l(n, t) {
                    return h = t,
                    i = n,
                    !1
                }
                function a() {
                    return !1
                }
                for (var s = [], e = !0, h, o = 0; o < n; o += 1)
                    if (e = r._(i, c, l),
                    !e)
                        return f(i, h);
                for (; o < t && e; o += 1)
                    e = r._(i, c, a);
                return u(i, s)
            })
        }
        ;
        n.result = function(n) {
            return this.then(u(n))
        }
        ;
        n.atMost = function(n) {
            return this.times(0, n)
        }
        ;
        n.atLeast = function(n) {
            var t = this;
            return t.times(n).then(function(n) {
                return t.many().map(function(t) {
                    return n.concat(t)
                })
            })
        }
        ;
        n.map = function(n) {
            return this.then(function(t) {
                return u(n(t))
            })
        }
        ;
        n.skip = function(n) {
            return this.then(function(t) {
                return n.result(t)
            })
        }
        ;
        var o = this.string = function(n) {
            var t = n.length
              , r = "expected '" + n + "'";
            return i(function(i, u, f) {
                var e = i.slice(0, t);
                return e === n ? u(i.slice(t), e) : f(i, r)
            })
        }
          , r = this.regex = function(n) {
            c("regexp parser is anchored", n.toString().charAt(1) === "^");
            var t = "expected " + n;
            return i(function(i, r, u) {
                var e = n.exec(i), f;
                return e ? (f = e[0],
                r(i.slice(f.length), f)) : u(i, t)
            })
        }
          , u = i.succeed = function(n) {
            return i(function(t, i) {
                return i(t, n)
            })
        }
          , s = i.fail = function(n) {
            return i(function(t, i, r) {
                return r(t, n)
            })
        }
          , h = i.letter = r(/^[a-z]/i)
          , l = i.letters = r(/^[a-z]*/i)
          , a = i.digit = r(/^[0-9]/)
          , v = i.digits = r(/^[0-9]*/)
          , y = i.whitespace = r(/^\s+/)
          , p = i.optWhitespace = r(/^\s*/)
          , w = i.any = i(function(n, t, i) {
            return n ? t(n.slice(1), n.charAt(0)) : i(n, "expected any character")
        })
          , b = i.all = i(function(n, t) {
            return t("", n)
        })
          , e = i.eof = i(function(n, t, i) {
            return n ? i(n, "expected EOF") : t(n, n)
        })
    });
    hr = function() {
        function t(t) {
            var u = t.which || t.keyCode, f = n[u], r, i = [];
            return (t.ctrlKey && i.push("Ctrl"),
            t.originalEvent && t.originalEvent.metaKey && i.push("Meta"),
            t.altKey && i.push("Alt"),
            t.shiftKey && i.push("Shift"),
            r = f || String.fromCharCode(u),
            !i.length && !f) ? r : (i.push(r),
            i.join("-"))
        }
        var n = {
            8: "Backspace",
            9: "Tab",
            10: "Enter",
            13: "Enter",
            16: "Shift",
            17: "Control",
            18: "Alt",
            20: "CapsLock",
            27: "Esc",
            32: "Spacebar",
            33: "PageUp",
            34: "PageDown",
            35: "End",
            36: "Home",
            37: "Left",
            38: "Up",
            39: "Right",
            40: "Down",
            45: "Insert",
            46: "Del",
            144: "NumLock"
        };
        return function(n, i) {
            function s(n) {
                f = n;
                clearTimeout(o);
                o = setTimeout(n)
            }
            function a(n) {
                f();
                f = w;
                clearTimeout(o);
                r.val(n);
                n && r[0].select && r[0].select();
                h = !!n
            }
            function v() {
                var n = r[0];
                return ("selectionStart"in n) ? n.selectionStart !== n.selectionEnd : !1
            }
            function l() {
                i.keystroke(t(u), u)
            }
            function y(n) {
                u = n;
                e = null;
                h && s(function(n) {
                    n && n.type === "focusout" || !r[0].select || r[0].select();
                    f = w;
                    clearTimeout(o)
                });
                l()
            }
            function p(n) {
                u && e && l();
                e = n;
                s(b)
            }
            function b() {
                if (!v()) {
                    var n = r.val();
                    n.length === 1 ? (r.val(""),
                    i.typedText(n)) : n && r[0].select && r[0].select()
                }
            }
            function k() {
                u = e = null
            }
            function d() {
                r.focus();
                s(g)
            }
            function g() {
                var n = r.val();
                r.val("");
                n && i.paste(n)
            }
            var u = null, e = null, r = ui(n), c = ui(i.container || r), f = w, o, h;
            return c.bind("keydown keypress input keyup focusout paste", function(n) {
                f(n)
            }),
            h = !1,
            c.bind({
                keydown: y,
                keypress: p,
                focusout: k,
                paste: d
            }),
            {
                select: a
            }
        }
    }();
    g.open(function(n) {
        n.exportText = function() {
            return this.root.foldChildren("", function(n, t) {
                return n + t.text()
            })
        }
    });
    g.open(function(n) {
        n.focusBlurEvents = function() {
            function u() {
                clearTimeout(i);
                n.selection && n.selection.jQ.addClass("mq-blur");
                f()
            }
            function f() {
                n.hide().parent.blur();
                t.container.removeClass("mq-focused");
                s(window).off("blur", u)
            }
            var t = this, r = t.root, n = t.cursor, i;
            t.textarea.focus(function() {
                t.blurred = !1;
                clearTimeout(i);
                t.container.addClass("mq-focused");
                n.parent || n.insAtRightEnd(r);
                n.selection ? (n.selection.jQ.removeClass("mq-blur"),
                t.selectionChanged()) : n.show()
            }).blur(function() {
                t.blurred = !0;
                i = setTimeout(function() {
                    r.postOrder("intentionalBlur");
                    n.clearSelection().endSelection();
                    f()
                });
                s(window).on("blur", u)
            });
            t.blurred = !0;
            n.hide().parent.blur()
        }
    });
    g.open(function(n) {
        n.keystroke = function(n, t) {
            this.cursor.parent.keystroke(n, t, this)
        }
    });
    a.open(function(n) {
        n.keystroke = function(n, i, u) {
            var f = u.cursor;
            switch (n) {
            case "Ctrl-Shift-Backspace":
            case "Ctrl-Backspace":
                u.ctrlDeleteDir(t);
                break;
            case "Shift-Backspace":
            case "Backspace":
                u.backspace();
                break;
            case "Esc":
            case "Tab":
                u.escapeDir(r, n, i);
                return;
            case "Shift-Tab":
            case "Shift-Esc":
                u.escapeDir(t, n, i);
                return;
            case "End":
                u.notify("move").cursor.insAtRightEnd(f.parent);
                break;
            case "Ctrl-End":
                u.notify("move").cursor.insAtRightEnd(u.root);
                break;
            case "Shift-End":
                while (f[r])
                    u.selectRight();
                break;
            case "Ctrl-Shift-End":
                while (f[r] || f.parent !== u.root)
                    u.selectRight();
                break;
            case "Home":
                u.notify("move").cursor.insAtLeftEnd(f.parent);
                break;
            case "Ctrl-Home":
                u.notify("move").cursor.insAtLeftEnd(u.root);
                break;
            case "Shift-Home":
                while (f[t])
                    u.selectLeft();
                break;
            case "Ctrl-Shift-Home":
                while (f[t] || f.parent !== u.root)
                    u.selectLeft();
                break;
            case "Left":
                u.moveLeft();
                break;
            case "Shift-Left":
                u.selectLeft();
                break;
            case "Ctrl-Left":
                break;
            case "Right":
                u.moveRight();
                break;
            case "Shift-Right":
                u.selectRight();
                break;
            case "Ctrl-Right":
                break;
            case "Up":
                u.moveUp();
                break;
            case "Down":
                u.moveDown();
                break;
            case "Shift-Up":
                if (f[t])
                    while (f[t])
                        u.selectLeft();
                else
                    u.selectLeft();
            case "Shift-Down":
                if (f[r])
                    while (f[r])
                        u.selectRight();
                else
                    u.selectRight();
            case "Ctrl-Up":
                break;
            case "Ctrl-Down":
                break;
            case "Ctrl-Shift-Del":
            case "Ctrl-Del":
                u.ctrlDeleteDir(r);
                break;
            case "Shift-Del":
            case "Del":
                u.deleteForward();
                break;
            case "Meta-A":
            case "Ctrl-A":
                for (u.notify("move").cursor.insAtRightEnd(u.root); f[t]; )
                    u.selectLeft();
                break;
            default:
                return
            }
            i.preventDefault();
            u.scrollHoriz()
        }
        ;
        n.moveOutOf = n.moveTowards = n.deleteOutOf = n.deleteTowards = n.unselectInto = n.selectOutOf = n.selectTowards = function() {
            c("overridden or never called on this node")
        }
    });
    g.open(function(n) {
        function i(n, i) {
            var u = n.notify("upDown").cursor
              , f = i + "Into"
              , e = i + "OutOf";
            return u[r][f] ? u.insAtLeftEnd(u[r][f]) : u[t][f] ? u.insAtRightEnd(u[t][f]) : u.parent.bubble(function(n) {
                var t = n[e];
                if (t && (typeof t == "function" && (t = n[e](u)),
                t instanceof a && u.jumpUpDown(n, t),
                t !== !0))
                    return !1
            }),
            n
        }
        this.onNotify(function(n) {
            (n === "move" || n === "upDown") && this.show().clearSelection()
        });
        n.escapeDir = function(n, t, i) {
            b(n);
            var r = this.cursor;
            if (r.parent !== this.root && i.preventDefault(),
            r.parent !== this.root)
                return r.parent.moveOutOf(n, r),
                this.notify("move")
        }
        ;
        ni.leftRightIntoCmdGoes = function(n) {
            if (n && n !== "up" && n !== "down")
                throw '"up" or "down" required for leftRightIntoCmdGoes option, got "' + n + '"';
            return n
        }
        ;
        n.moveDir = function(n) {
            b(n);
            var t = this.cursor
              , i = t.options.leftRightIntoCmdGoes;
            return t.selection ? t.insDirOf(n, t.selection.ends[n]) : t[n] ? t[n].moveTowards(n, t, i) : t.parent.moveOutOf(n, t, i),
            this.notify("move")
        }
        ;
        n.moveLeft = function() {
            return this.moveDir(t)
        }
        ;
        n.moveRight = function() {
            return this.moveDir(r)
        }
        ;
        n.moveUp = function() {
            return i(this, "up")
        }
        ;
        n.moveDown = function() {
            return i(this, "down")
        }
        ;
        this.onNotify(function(n) {
            n !== "upDown" && (this.upDownCache = {})
        });
        this.onNotify(function(n) {
            n === "edit" && this.show().deleteSelection()
        });
        n.deleteDir = function(n) {
            b(n);
            var i = this.cursor
              , u = i.selection;
            return this.notify("edit"),
            u || (i[n] ? i[n].deleteTowards(n, i) : i.parent.deleteOutOf(n, i)),
            i[t].siblingDeleted && i[t].siblingDeleted(i.options, r),
            i[r].siblingDeleted && i[r].siblingDeleted(i.options, t),
            i.parent.bubble("reflow"),
            this
        }
        ;
        n.ctrlDeleteDir = function(n) {
            b(n);
            var i = this.cursor;
            return !i[t] || i.selection ? ctrlr.deleteDir() : (this.notify("edit"),
            v(i.parent.ends[t], i[t]).remove(),
            i.insAtDirEnd(t, i.parent),
            i[t].siblingDeleted && i[t].siblingDeleted(i.options, r),
            i[r].siblingDeleted && i[r].siblingDeleted(i.options, t),
            i.parent.bubble("reflow"),
            this)
        }
        ;
        n.backspace = function() {
            return this.deleteDir(t)
        }
        ;
        n.deleteForward = function() {
            return this.deleteDir(r)
        }
        ;
        this.onNotify(function(n) {
            n !== "select" && this.endSelection()
        });
        n.selectDir = function(n) {
            var t = this.notify("select").cursor, r = t.selection, i;
            b(n);
            t.anticursor || t.startSelection();
            i = t[n];
            i ? r && r.ends[n] === i && t.anticursor[-n] !== i ? i.unselectInto(n, t) : i.selectTowards(n, t) : t.parent.selectOutOf(n, t);
            t.clearSelection();
            t.select() || t.show()
        }
        ;
        n.selectLeft = function() {
            return this.selectDir(t)
        }
        ;
        n.selectRight = function() {
            return this.selectDir(r)
        }
    });
    k = function() {
        function a(n) {
            var t = p();
            return n.adopt(t, 0, 0),
            t
        }
        function h(n) {
            for (var t = n[0] || p(), i = 1; i < n.length; i += 1)
                n[i].children().adopt(t, t.ends[r], 0);
            return t
        }
        var t = e.string
          , i = e.regex
          , v = e.letter
          , y = e.any
          , f = e.optWhitespace
          , w = e.succeed
          , c = e.fail
          , b = v.map(function(n) {
            return it(n)
        })
          , k = i(/^[^${}\\_^]/).map(function(n) {
            return u(n)
        })
          , d = i(/^[^\\a-eg-zA-Z]/).or(t("\\").then(i(/^[a-z]+/i).or(i(/^\s+/).result(" ")).or(y))).then(function(t) {
            var i = n[t];
            return i ? i(t).parser() : c("unknown command: \\" + t)
        })
          , g = d.or(b).or(k)
          , nt = t("{").then(function() {
            return l
        }).skip(t("}"))
          , o = f.then(nt.or(g.map(a)))
          , l = o.many().map(h).skip(f)
          , tt = t("[").then(o.then(function(n) {
            return n.join("latex") !== "]" ? w(n) : c()
        }).many().map(h).skip(f)).skip(t("]"))
          , s = l;
        return s.block = o,
        s.optBlock = tt,
        s
    }();
    g.open(function(n) {
        n.exportLatex = function() {
            return this.root.latex().replace(/(\\[a-z]+) (?![a-z])/ig, "$1")
        }
        ;
        n.writeLatex = function(n) {
            var i = this.notify("edit").cursor, o = e.all, s = e.eof, u = k.skip(s).or(o.result(!1)).parse(n), f;
            return u && !u.isEmpty() && (u.children().adopt(i.parent, i[t], i[r]),
            f = u.jQize(),
            f.insertBefore(i.jQ),
            i[t] = u.ends[r],
            u.finalizeInsert(i.options, i),
            u.ends[r][r].siblingCreated && u.ends[r][r].siblingCreated(i.options, t),
            u.ends[t][t].siblingCreated && u.ends[t][t].siblingCreated(i.options, r),
            i.parent.bubble("reflow")),
            this
        }
        ;
        n.renderLatexMath = function(n) {
            var i = this.root, o = this.cursor, h = e.all, c = e.eof, u = k.skip(c).or(h.result(!1)).parse(n), f, s;
            i.eachChild("postOrder", "dispose");
            i.ends[t] = i.ends[r] = 0;
            u && u.children().adopt(i, 0, 0);
            f = i.jQ;
            u ? (s = u.join("html"),
            f.html(s),
            i.jQize(f.children()),
            i.finalizeInsert(o.options)) : f.empty();
            delete o.selection;
            o.insAtRightEnd(i)
        }
        ;
        n.renderLatexText = function(n) {
            var i = this.root, f = this.cursor, o;
            i.jQ.children().slice(1).remove();
            i.eachChild("postOrder", "dispose");
            i.ends[t] = i.ends[r] = 0;
            delete f.selection;
            f.show().insAtRightEnd(i);
            var l = e.regex
              , s = e.string
              , c = e.eof
              , a = e.all
              , v = s("$").then(k).skip(s("$").or(c)).map(function(n) {
                var i = ai(f), r;
                return i.createBlocks(),
                r = i.ends[t],
                n.children().adopt(r, 0, 0),
                i
            })
              , y = s("\\$").result("$")
              , p = y.or(l(/^[^$]/)).map(u)
              , w = v.or(p).many()
              , h = w.skip(c).or(a.result(!1)).parse(n);
            if (h) {
                for (o = 0; o < h.length; o += 1)
                    h[o].adopt(i, i.ends[r], 0);
                i.jQize().appendTo(i.jQ);
                i.finalizeInsert(f.options)
            }
        }
    });
    g.open(function(n) {
        n.delegateMouseEvents = function() {
            var n = this.root.jQ;
            this.container.bind("mousedown.mathquill", function(t) {
                function o(n) {
                    f = s(n.target)
                }
                function h(n) {
                    r.anticursor || r.startSelection();
                    i.seek(f, n.pageX, n.pageY).cursor.select();
                    f = pt
                }
                function c(n) {
                    r.blink = v;
                    r.selection || (i.editable ? r.show() : e.detach());
                    u.unbind("mousemove", o);
                    s(n.target.ownerDocument).unbind("mousemove", h).unbind("mouseup", c)
                }
                var u = s(t.target).closest(".mq-root-block"), l = a.byId[u.attr(ft) || n.attr(ft)], i = l.controller, r = i.cursor, v = r.blink, e = i.textareaSpan, y = i.textarea, f;
                i.blurred && (i.editable || u.prepend(e),
                y.focus());
                t.preventDefault();
                t.target.unselectable = !0;
                r.blink = w;
                i.seek(s(t.target), t.pageX, t.pageY).cursor.startSelection();
                u.mousemove(o);
                s(t.target.ownerDocument).mousemove(h).mouseup(c)
            })
        }
    });
    g.open(function(n) {
        n.seek = function(n, t) {
            var f = this.notify("select").cursor, i, r, u;
            return n && (i = n.attr(ft) || n.attr(tr),
            i || (r = n.parent(),
            i = r.attr(ft) || r.attr(tr))),
            u = i ? a.byId[i] : this.root,
            c("nodeId is the id of some Node that exists", u),
            f.clearSelection().show(),
            u.seek(t, f),
            this.scrollHoriz(),
            this
        }
    });
    g.open(function(n) {
        n.scrollHoriz = function() {
            var s = this.cursor, h = s.selection, n = this.root.jQ[0].getBoundingClientRect(), e, i;
            if (h) {
                var o = h.jQ[0].getBoundingClientRect()
                  , u = o.left - (n.left + 20)
                  , f = o.right - (n.right - 20);
                if (h.ends[t] === s[r])
                    if (u < 0)
                        i = u;
                    else if (f > 0)
                        i = o.left - f < n.left + 20 ? u : f;
                    else
                        return;
                else if (f > 0)
                    i = f;
                else if (u < 0)
                    i = o.right - u > n.right - 20 ? f : u;
                else
                    return
            } else if (e = s.jQ[0].getBoundingClientRect().left,
            e > n.right - 20)
                i = e - (n.right - 20);
            else if (e < n.left + 20)
                i = e - (n.left + 20);
            else
                return;
            this.root.jQ.stop().animate({
                scrollLeft: "+=" + i
            }, 100)
        }
    });
    g.open(function(n) {
        st.p.substituteTextarea = function() {
            return s("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true />")[0]
        }
        ;
        n.createTextarea = function() {
            var i = this.textareaSpan = s('<span class="mq-textarea"><\/span>'), t = this.options.substituteTextarea(), n;
            if (!t.nodeType)
                throw "substituteTextarea() must return a DOM element, got " + t;
            t = this.textarea = s(t).appendTo(i);
            n = this;
            n.cursor.selectionChanged = function() {
                n.selectionChanged()
            }
            ;
            n.container.bind("copy", function() {
                n.setTextareaSelection()
            })
        }
        ;
        n.selectionChanged = function() {
            var n = this;
            pr(n.container[0]);
            n.textareaSelectionTimeout === pt && (n.textareaSelectionTimeout = setTimeout(function() {
                n.setTextareaSelection()
            }))
        }
        ;
        n.setTextareaSelection = function() {
            this.textareaSelectionTimeout = pt;
            var n = "";
            this.cursor.selection && (n = this.cursor.selection.join("latex"),
            this.options.statelessClipboard && (n = "$" + n + "$"));
            this.selectFn(n)
        }
        ;
        n.staticMathTextareaEvents = function() {
            function u() {
                r.detach();
                n.blurred = !0
            }
            var n = this
              , f = n.root
              , i = n.cursor
              , t = n.textarea
              , r = n.textareaSpan;
            this.container.prepend('<span class="mq-selectable">$' + n.exportLatex() + "$<\/span>");
            n.blurred = !0;
            t.bind("cut paste", !1).focus(function() {
                n.blurred = !1
            }).blur(function() {
                i.selection && i.selection.clear();
                setTimeout(u)
            });
            n.selectFn = function(n) {
                t.val(n);
                n && t.select()
            }
        }
        ;
        n.editablesTextareaEvents = function() {
            var n = this
              , f = n.root
              , t = n.cursor
              , i = n.textarea
              , r = n.textareaSpan
              , u = hr(i, this);
            this.selectFn = function(n) {
                u.select(n)
            }
            ;
            this.container.prepend(r).on("cut", function() {
                t.selection && setTimeout(function() {
                    n.notify("edit");
                    t.parent.bubble("reflow")
                })
            });
            this.focusBlurEvents()
        }
        ;
        n.typedText = function(n) {
            if (n === "\n")
                return this.handle("enter");
            var t = this.notify().cursor;
            t.parent.write(t, n);
            this.scrollHoriz()
        }
        ;
        n.paste = function(n) {
            this.options.statelessClipboard && (n = n.slice(0, 1) === "$" && n.slice(-1) === "$" ? n.slice(1, -1) : "\\text{" + n + "}");
            this.writeLatex(n).cursor.show()
        }
    });
    var cr = f(a, function(n) {
        n.finalizeInsert = function(n, i) {
            var u = this;
            u.postOrder("finalizeTree", n);
            u.postOrder("contactWeld", i);
            u.postOrder("blur");
            u.postOrder("reflow");
            u[r].siblingCreated && u[r].siblingCreated(n, t);
            u[t].siblingCreated && u[t].siblingCreated(n, r);
            u.bubble("reflow")
        }
    })
      , h = f(cr, function(n, i) {
        n.init = function(n, t, r) {
            var u = this;
            i.init.call(u);
            u.ctrlSeq || (u.ctrlSeq = n);
            t && (u.htmlTemplate = t);
            r && (u.textTemplate = r)
        }
        ;
        n.replaces = function(n) {
            n.disown();
            this.replacedFragment = n
        }
        ;
        n.isEmpty = function() {
            return this.foldChildren(!0, function(n, t) {
                return n && t.isEmpty()
            })
        }
        ;
        n.parser = function() {
            var t = k.block
              , n = this;
            return t.times(n.numBlocks()).map(function(t) {
                n.blocks = t;
                for (var i = 0; i < t.length; i += 1)
                    t[i].adopt(n, n.ends[r], 0);
                return n
            })
        }
        ;
        n.createLeftOf = function(n) {
            var r = this
              , u = r.replacedFragment;
            r.createBlocks();
            i.createLeftOf.call(r, n);
            u && (u.adopt(r.ends[t], 0, 0),
            u.jQ.appendTo(r.ends[t].jQ));
            r.finalizeInsert(n.options);
            r.placeCursor(n)
        }
        ;
        n.createBlocks = function() {
            for (var u, n = this, i = n.numBlocks(), f = n.blocks = Array(i), t = 0; t < i; t += 1)
                u = f[t] = p(),
                u.adopt(n, n.ends[r], 0)
        }
        ;
        n.placeCursor = function(n) {
            n.insAtRightEnd(this.foldChildren(this.ends[t], function(n, t) {
                return n.isEmpty() ? n : t
            }))
        }
        ;
        n.moveTowards = function(n, t, i) {
            var r = i && this[i + "Into"];
            t.insAtDirEnd(-n, r || this.ends[-n])
        }
        ;
        n.deleteTowards = function(n, t) {
            this.isEmpty() ? t[n] = this.remove()[n] : this.moveTowards(n, t, null)
        }
        ;
        n.selectTowards = function(n, t) {
            t[-n] = this;
            t[n] = this[n]
        }
        ;
        n.selectChildren = function() {
            return ur(this, this)
        }
        ;
        n.unselectInto = function(n, t) {
            t.insAtDirEnd(-n, t.anticursor.ancestors[this.id])
        }
        ;
        n.seek = function(n, i) {
            function o(n) {
                var i = {};
                return i[t] = n.jQ.offset().left,
                i[r] = i[t] + n.jQ.outerWidth(),
                i
            }
            var u = this, f = o(u), e;
            if (n < f[t])
                return i.insLeftOf(u);
            if (n > f[r])
                return i.insRightOf(u);
            e = f[t];
            u.eachChild(function(s) {
                var h = o(s);
                if (n < h[t])
                    return n - e < h[t] - n ? s[t] ? i.insAtRightEnd(s[t]) : i.insLeftOf(u) : i.insAtLeftEnd(s),
                    !1;
                if (n > h[r])
                    s[r] ? e = h[r] : f[r] - n < n - h[r] ? i.insRightOf(u) : i.insAtRightEnd(s);
                else
                    return s.seek(n, i),
                    !1
            })
        }
        ;
        n.numBlocks = function() {
            var n = this.htmlTemplate.match(/&\d+/g);
            return n ? n.length : 0
        }
        ;
        n.html = function() {
            var u = this, f = u.blocks, e = " mathquill-command-id=" + u.id, t = u.htmlTemplate.match(/<[^<>]+>|[^<>]+/g), i, n, r;
            for (c("no unmatched angle brackets", t.join("") === this.htmlTemplate),
            i = 0,
            n = t[0]; n; i += 1,
            n = t[i])
                if (n.slice(-2) === "/>")
                    t[i] = n.slice(0, -2) + e + "/>";
                else if (n.charAt(0) === "<") {
                    c("not an unmatched top-level close tag", n.charAt(1) !== "/");
                    t[i] = n.slice(0, -1) + e + ">";
                    r = 1;
                    do
                        i += 1,
                        n = t[i],
                        c("no missing close tags", n),
                        n.slice(0, 2) === "<\/" ? r -= 1 : n.charAt(0) === "<" && n.slice(-2) !== "/>" && (r += 1);
                    while (r > 0)
                }
            return t.join("").replace(/>&(\d+)/g, function(n, t) {
                return " mathquill-block-id=" + f[t].id + ">" + f[t].join("html")
            })
        }
        ;
        n.latex = function() {
            return this.foldChildren(this.ctrlSeq, function(n, t) {
                return n + "{" + (t.latex() || " ") + "}"
            })
        }
        ;
        n.textTemplate = [""];
        n.text = function() {
            var n = this
              , t = 0;
            return n.foldChildren(n.textTemplate[t], function(i, r) {
                t += 1;
                var u = r.text();
                return i && n.textTemplate[t] === "(" && u[0] === "(" && u.slice(-1) === ")" ? i + u.slice(1, -1) + n.textTemplate[t] : i + r.text() + (n.textTemplate[t] || "")
            })
        }
    })
      , y = f(h, function(n, t) {
        n.init = function(n, i, r) {
            r || (r = n && n.length > 1 ? n.slice(1) : n);
            t.init.call(this, n, i, [r])
        }
        ;
        n.parser = function() {
            return e.succeed(this)
        }
        ;
        n.numBlocks = function() {
            return 0
        }
        ;
        n.replaces = function(n) {
            n.remove()
        }
        ;
        n.createBlocks = w;
        n.moveTowards = function(n, t) {
            t.jQ.insDirOf(n, this.jQ);
            t[-n] = this;
            t[n] = this[n]
        }
        ;
        n.deleteTowards = function(n, t) {
            t[n] = this.remove()[n]
        }
        ;
        n.seek = function(n, t) {
            n - this.jQ.offset().left < this.jQ.outerWidth() / 2 ? t.insLeftOf(this) : t.insRightOf(this)
        }
        ;
        n.latex = function() {
            return this.ctrlSeq
        }
        ;
        n.text = function() {
            return this.textTemplate
        }
        ;
        n.placeCursor = w;
        n.isEmpty = function() {
            return !0
        }
    })
      , u = f(y, function(n, t) {
        n.init = function(n, i) {
            t.init.call(this, n, "<span>" + (i || n) + "<\/span>")
        }
    })
      , o = f(y, function(n, t) {
        n.init = function(n, i, r) {
            t.init.call(this, n, '<span class="mq-binary-operator">' + i + "<\/span>", r)
        }
    })
      , p = f(cr, function(i, f) {
        i.join = function(n) {
            return this.foldChildren("", function(t, i) {
                return t + i[n]()
            })
        }
        ;
        i.html = function() {
            return this.join("html")
        }
        ;
        i.latex = function() {
            return this.join("latex")
        }
        ;
        i.text = function() {
            return this.ends[t] === this.ends[r] && this.ends[t] !== 0 ? this.ends[t].text() : this.join("text")
        }
        ;
        i.keystroke = function(n, i, u) {
            if (u.options.spaceBehavesLikeTab && (n === "Spacebar" || n === "Shift-Spacebar")) {
                i.preventDefault();
                u.escapeDir(n === "Shift-Spacebar" ? t : r, n, i);
                return
            }
            return f.keystroke.apply(this, arguments)
        }
        ;
        i.moveOutOf = function(n, t, i) {
            var r = i && this.parent[i + "Into"];
            !r && this[n] ? t.insAtDirEnd(-n, this[n]) : t.insDirOf(n, this.parent)
        }
        ;
        i.selectOutOf = function(n, t) {
            t.insDirOf(n, this.parent)
        }
        ;
        i.deleteOutOf = function(n, t) {
            t.unwrapGramp()
        }
        ;
        i.seek = function(n, i) {
            var u = this.ends[r];
            if (!u || u.jQ.offset().left + u.jQ.outerWidth() < n)
                return i.insAtRightEnd(this);
            if (n < this.ends[t].jQ.offset().left)
                return i.insAtLeftEnd(this);
            while (n < u.jQ.offset().left)
                u = u[t];
            return u.seek(n, i)
        }
        ;
        i.chToCmd = function(t) {
            var i;
            return t.match(/^[a-eg-zA-Z]$/) ? it(t) : /^\d$/.test(t) ? ar(t) : (i = d[t] || n[t]) ? i(t) : u(t)
        }
        ;
        i.write = function(n, t) {
            var i = this.chToCmd(t);
            n.selection && i.replaces(n.replaceSelection());
            i.createLeftOf(n.show())
        }
        ;
        i.focus = function() {
            return this.jQ.addClass("mq-hasCursor"),
            this.jQ.removeClass("mq-empty"),
            this.isEmpty() && this.jQ.hasClass("blurr") && this.jQ.addClass("mq-empty"),
            this
        }
        ;
        i.blur = function() {
            return this.jQ.removeClass("mq-hasCursor"),
            this.isEmpty() && this.jQ.addClass("mq-empty"),
            this
        }
    });
    wt.StaticMath = function(n) {
        return f(n.AbstractMathQuill, function(t, i) {
            this.RootBlock = p;
            t.__mathquillify = function() {
                return i.__mathquillify.call(this, "mq-math-mode"),
                this.__controller.delegateMouseEvents(),
                this.__controller.staticMathTextareaEvents(),
                this
            }
            ;
            t.init = function() {
                i.init.apply(this, arguments);
                this.__controller.root.postOrder("registerInnerField", this.innerFields = [], n.MathField)
            }
            ;
            t.latex = function() {
                var t = i.latex.apply(this, arguments);
                return arguments.length > 0 && this.__controller.root.postOrder("registerInnerField", this.innerFields = [], n.MathField),
                t
            }
        })
    }
    ;
    li = f(p, sr);
    wt.MathField = function(n) {
        return f(n.EditableField, function(n, t) {
            this.RootBlock = li;
            n.__mathquillify = function(n, i) {
                return this.config(n),
                i > 1 && (this.__controller.root.reflow = w),
                t.__mathquillify.call(this, "mq-editable-field mq-math-mode"),
                delete this.__controller.root.reflow,
                this
            }
        })
    }
    ;
    bt = f(a, function(n, i) {
        function f(n) {
            var t, i;
            return n.jQ[0].normalize(),
            t = n.jQ[0].firstChild,
            c("only node in TextBlock span is Text node", t.nodeType === 3),
            i = et(t.data),
            i.jQadd(t),
            n.children().disown(),
            i.adopt(n, 0, 0)
        }
        n.ctrlSeq = "\\text";
        n.replaces = function(n) {
            n instanceof v ? this.replacedText = n.remove().jQ.text() : typeof n == "string" && (this.replacedText = n)
        }
        ;
        n.jQadd = function(n) {
            i.jQadd.call(this, n);
            this.ends[t] && this.ends[t].jQadd(this.jQ[0].firstChild)
        }
        ;
        n.createLeftOf = function(n) {
            var u = this, f;
            if (i.createLeftOf.call(this, n),
            u[r].siblingCreated && u[r].siblingCreated(n.options, t),
            u[t].siblingCreated && u[t].siblingCreated(n.options, r),
            u.bubble("reflow"),
            n.insAtRightEnd(u),
            u.replacedText)
                for (f = 0; f < u.replacedText.length; f += 1)
                    u.write(n, u.replacedText.charAt(f))
        }
        ;
        n.parser = function() {
            var n = this
              , t = e.string
              , i = e.regex
              , r = e.optWhitespace;
            return r.then(t("{")).then(i(/^[^}]*/)).skip(t("}")).map(function(t) {
                return et(t).adopt(n, 0, 0),
                n
            })
        }
        ;
        n.textContents = function() {
            return this.foldChildren("", function(n, t) {
                return n + t.text
            })
        }
        ;
        n.text = function() {
            return '"' + this.textContents() + '"'
        }
        ;
        n.latex = function() {
            return "\\text{" + this.textContents() + "}"
        }
        ;
        n.html = function() {
            return '<span class="mq-text-mode" mathquill-command-id=' + this.id + ">" + this.textContents() + "<\/span>"
        }
        ;
        n.moveTowards = function(n, t) {
            t.insAtDirEnd(-n, this)
        }
        ;
        n.moveOutOf = function(n, t) {
            t.insDirOf(n, this)
        }
        ;
        n.unselectInto = n.moveTowards;
        n.selectTowards = h.prototype.selectTowards;
        n.deleteTowards = h.prototype.deleteTowards;
        n.selectOutOf = function(n, t) {
            t.insDirOf(n, this)
        }
        ;
        n.deleteOutOf = function(n, t) {
            this.isEmpty() && t.insRightOf(this)
        }
        ;
        n.write = function(n, f) {
            if (n.show().deleteSelection(),
            f !== "$")
                n[t] ? n[t].appendText(f) : et(f).createLeftOf(n);
            else if (this.isEmpty())
                n.insRightOf(this),
                u("\\$", "$").createLeftOf(n);
            else if (n[r])
                if (n[t]) {
                    var e = bt()
                      , o = this.ends[t];
                    o.disown();
                    o.adopt(e, 0, 0);
                    n.insLeftOf(this);
                    i.createLeftOf.call(e, n)
                } else
                    n.insLeftOf(this);
            else
                n.insRightOf(this)
        }
        ;
        n.seek = function(n, i) {
            var s, o;
            i.hide();
            var l = f(this)
              , a = this.jQ.width() / this.text.length
              , h = Math.round((n - this.jQ.offset().left) / a);
            h <= 0 ? i.insAtLeftEnd(this) : h >= l.text.length ? i.insAtRightEnd(this) : i.insLeftOf(l.splitRight(h));
            for (var e = n - i.show().offset().left, u = e && e < 0 ? t : r, c = u; i[u] && e * c > 0; )
                i[u].moveTowards(u, i),
                c = e,
                e = n - i.offset().left;
            u * e < -u * c && i[-u].moveTowards(-u, i);
            i.anticursor ? i.anticursor.parent === this && (s = i[t] && i[t].text.length,
            this.anticursorPosition === s ? i.anticursor = nt.copy(i) : (this.anticursorPosition < s ? (o = i[t].splitRight(this.anticursorPosition),
            i[t] = o) : o = i[r].splitRight(this.anticursorPosition - s),
            i.anticursor = nt(this, o[t], o))) : this.anticursorPosition = i[t] && i[t].text.length
        }
        ;
        n.blur = function() {
            p.prototype.blur.call(this);
            f(this)
        }
        ;
        n.focus = p.prototype.focus
    });
    et = f(a, function(n, i) {
        function u(n, i) {
            return i.charAt(n === t ? 0 : -1 + i.length)
        }
        n.init = function(n) {
            i.init.call(this);
            this.text = n
        }
        ;
        n.jQadd = function(n) {
            this.dom = n;
            this.jQ = s(n)
        }
        ;
        n.jQize = function() {
            return this.jQadd(document.createTextNode(this.text))
        }
        ;
        n.appendText = function(n) {
            this.text += n;
            this.dom.appendData(n)
        }
        ;
        n.prependText = function(n) {
            this.text = n + this.text;
            this.dom.insertData(0, n)
        }
        ;
        n.insTextAtDirEnd = function(n, t) {
            b(t);
            t === r ? this.appendText(n) : this.prependText(n)
        }
        ;
        n.splitRight = function(n) {
            var t = et(this.text.slice(n)).adopt(this.parent, this, this[r]);
            return t.jQadd(this.dom.splitText(n)),
            this.text = this.text.slice(0, n),
            t
        }
        ;
        n.moveTowards = function(n, t) {
            b(n);
            var i = u(-n, this.text)
              , r = this[-n];
            return r ? r.insTextAtDirEnd(i, n) : et(i).createDir(-n, t),
            this.deleteTowards(n, t)
        }
        ;
        n.latex = function() {
            return this.text
        }
        ;
        n.deleteTowards = function(n, t) {
            this.text.length > 1 ? n === r ? (this.dom.deleteData(0, 1),
            this.text = this.text.slice(1)) : (this.dom.deleteData(-1 + this.text.length, 1),
            this.text = this.text.slice(0, -1)) : (this.remove(),
            this.jQ.remove(),
            t[n] = this[n])
        }
        ;
        n.selectTowards = function(n, t) {
            var i, f, e, r;
            return b(n),
            i = t.anticursor,
            f = u(-n, this.text),
            i[n] === this ? (r = et(f).createDir(n, t),
            i[n] = r,
            t.insDirOf(n, r)) : (e = this[-n],
            e ? e.insTextAtDirEnd(f, n) : (r = et(f).createDir(-n, t),
            r.jQ.insDirOf(-n, t.selection.jQ)),
            this.text.length === 1 && i[-n] === this && (i[-n] = this[-n])),
            this.deleteTowards(n, t)
        }
    });
    d.$ = n.text = n.textnormal = n.textrm = n.textup = n.textmd = bt;
    n.em = n.italic = n.italics = n.emph = n.textit = n.textsl = ht("\\textit", "i", 'class="mq-text-mode"');
    n.strong = n.bold = n.textbf = ht("\\textbf", "b", 'class="mq-text-mode"');
    n.sf = n.textsf = ht("\\textsf", "span", 'class="mq-sans-serif mq-text-mode"');
    n.tt = n.texttt = ht("\\texttt", "span", 'class="mq-monospace mq-text-mode"');
    n.textsc = ht("\\textsc", "span", 'style="font-variant:small-caps" class="mq-text-mode"');
    n.uppercase = ht("\\uppercase", "span", 'style="text-transform:uppercase" class="mq-text-mode"');
    n.lowercase = ht("\\lowercase", "span", 'style="text-transform:lowercase" class="mq-text-mode"');
    ai = f(h, function(n, i) {
        n.init = function(n) {
            i.init.call(this, "$");
            this.cursor = n
        }
        ;
        n.htmlTemplate = '<span class="mq-math-mode">&0<\/span>';
        n.createBlocks = function() {
            i.createBlocks.call(this);
            this.ends[t].cursor = this.cursor;
            this.ends[t].write = function(n, i) {
                i !== "$" ? p.prototype.write.call(this, n, i) : this.isEmpty() ? (n.insRightOf(this.parent),
                this.parent.deleteTowards(dir, n),
                u("\\$", "$").createLeftOf(n.show())) : n[r] ? n[t] ? p.prototype.write.call(this, n, i) : n.insLeftOf(this.parent) : n.insRightOf(this.parent)
            }
        }
        ;
        n.latex = function() {
            return "$" + this.ends[t].latex() + "$"
        }
    });
    lr = f(li, function(n, t) {
        n.keystroke = function(n) {
            if (n !== "Spacebar" && n !== "Shift-Spacebar")
                return t.keystroke.apply(this, arguments)
        }
        ;
        n.write = function(n, t) {
            if (n.show().deleteSelection(),
            t === "$")
                ai(n).createLeftOf(n);
            else {
                var i;
                t === "<" ? i = "&lt;" : t === ">" && (i = "&gt;");
                u(t, i).createLeftOf(n)
            }
        }
    });
    wt.TextField = function(n) {
        return f(n.EditableField, function(n, t) {
            this.RootBlock = lr;
            n.__mathquillify = function() {
                return t.__mathquillify.call(this, "mq-editable-field mq-text-mode")
            }
            ;
            n.latex = function(n) {
                return arguments.length > 0 ? (this.__controller.renderLatexText(n),
                this.__controller.blurred && this.__controller.cursor.hide().parent.blur(),
                this) : this.__controller.exportLatex()
            }
        })
    }
    ;
    tu = d["\\"] = f(h, function(i, f) {
        i.ctrlSeq = "\\";
        i.replaces = function(n) {
            this._replacedFragment = n.disown();
            this.isEmpty = function() {
                return !1
            }
        }
        ;
        i.htmlTemplate = '<span class="mq-latex-command-input mq-non-leaf">\\<span>&0<\/span><\/span>';
        i.textTemplate = ["\\"];
        i.createBlocks = function() {
            f.createBlocks.call(this);
            this.ends[t].focus = function() {
                return this.parent.jQ.addClass("mq-hasCursor"),
                this.isEmpty() && this.parent.jQ.removeClass("mq-empty"),
                this
            }
            ;
            this.ends[t].blur = function() {
                return this.parent.jQ.removeClass("mq-hasCursor"),
                this.isEmpty() ? this : void 0
            }
            ;
            this.ends[t].write = function(n, t) {
                n.show().deleteSelection();
                t.match(/[a-z]/i) ? u(t).createLeftOf(n) : (this.parent.renderCommand(n),
                t === "\\" && this.isEmpty() || this.parent.parent.write(n, t))
            }
            ;
            this.ends[t].keystroke = function(n, t, i) {
                if (n === "Tab" || n === "Enter" || n === "Spacebar") {
                    this.parent.renderCommand(i.cursor);
                    t.preventDefault();
                    return
                }
                return f.keystroke.apply(this, arguments)
            }
        }
        ;
        i.createLeftOf = function(n) {
            if (f.createLeftOf.call(this, n),
            this._replacedFragment) {
                var t = this.jQ[0];
                this.jQ = this._replacedFragment.jQ.addClass("mq-blur").bind("mousedown mousemove", function(n) {
                    return s(n.target = t).trigger(n),
                    !1
                }).insertBefore(this.jQ).add(this.jQ)
            }
        }
        ;
        i.latex = function() {
            return "\\" + this.ends[t].latex() + " "
        }
        ;
        i.renderCommand = function(i) {
            var f, u;
            this.jQ = this.jQ.last();
            this.remove();
            this[r] ? i.insLeftOf(this[r]) : i.insAtRightEnd(this.parent);
            f = this.ends[t].latex();
            f || (f = " ");
            u = n[f];
            u ? (u = u(f),
            this._replacedFragment && u.replaces(this._replacedFragment),
            u.createLeftOf(i)) : (u = bt(),
            u.replaces(f),
            u.createLeftOf(i),
            i.insRightOf(u),
            this._replacedFragment && this._replacedFragment.remove())
        }
    });
    n.notin = n.cong = n.equiv = n.oplus = n.otimes = f(o, function(n, t) {
        n.init = function(n) {
            t.init.call(this, "\\" + n + " ", "&" + n + ";")
        }
    });
    n[""] = n.ne = n.neq = i(o, "\\ne ", "&ne;");
    n.ast = n.star = n.loast = n.lowast = i(o, "\\ast ", "&lowast;");
    n.therefor = n.therefore = i(o, "\\therefore ", "&there4;");
    n.cuz = n.because = i(o, "\\because ", "&#8757;");
    n.prop = n.propto = i(o, "\\propto ", "&prop;");
    n[""] = n.asymp = n.approx = i(o, "\\approx ", "&asymp;");
    n.isin = n["in"] = i(o, "\\in ", "&isin;");
    n.ni = n.contains = i(o, "\\ni ", "&ni;");
    n.notni = n.niton = n.notcontains = n.doesnotcontain = i(o, "\\not\\ni ", "&#8716;");
    n.sub = n.subset = i(o, "\\subset ", "&sub;");
    n.sup = n.supset = n.superset = i(o, "\\supset ", "&sup;");
    n.nsub = n.notsub = n.nsubset = n.notsubset = i(o, "\\not\\subset ", "&#8836;");
    n.nsup = n.notsup = n.nsupset = n.notsupset = n.nsuperset = n.notsuperset = i(o, "\\not\\supset ", "&#8837;");
    n.sube = n.subeq = n.subsete = n.subseteq = i(o, "\\subseteq ", "&sube;");
    n.supe = n.supeq = n.supsete = n.supseteq = n.supersete = n.superseteq = i(o, "\\supseteq ", "&supe;");
    n.nsube = n.nsubeq = n.notsube = n.notsubeq = n.nsubsete = n.nsubseteq = n.notsubsete = n.notsubseteq = i(o, "\\not\\subseteq ", "&#8840;");
    n.nsupe = n.nsupeq = n.notsupe = n.notsupeq = n.nsupsete = n.nsupseteq = n.notsupsete = n.notsupseteq = n.nsupersete = n.nsuperseteq = n.notsupersete = n.notsuperseteq = i(o, "\\not\\supseteq ", "&#8841;");
    n.N = n.naturals = n.Naturals = i(u, "\\mathbb{N}", "&#8469;");
    n.P = n.primes = n.Primes = n.projective = n.Projective = n.probability = n.Probability = i(u, "\\mathbb{P}", "&#8473;");
    n.Z = n.integers = n.Integers = i(u, "\\mathbb{Z}", "&#8484;");
    n.Q = n.rationals = n.Rationals = i(u, "\\mathbb{Q}", "&#8474;");
    n.R = n.reals = n.Reals = i(u, "\\mathbb{R}", "&#8477;");
    n.C = n.complex = n.Complex = n.complexes = n.Complexes = n.complexplane = n.Complexplane = n.ComplexPlane = i(u, "\\mathbb{C}", "&#8450;");
    n.H = n.Hamiltonian = n.quaternions = n.Quaternions = i(u, "\\mathbb{H}", "&#8461;");
    n.quad = n.emsp = i(u, "\\quad ", "    ");
    n.qquad = i(u, "\\qquad ", "        ");
    n.diamond = i(u, "\\diamond ", "&#9671;");
    n.bigtriangleup = i(u, "\\bigtriangleup ", "&#9651;");
    n.ominus = i(u, "\\ominus ", "&#8854;");
    n.uplus = i(u, "\\uplus ", "&#8846;");
    n.bigtriangledown = i(u, "\\bigtriangledown ", "&#9661;");
    n.sqcap = i(u, "\\sqcap ", "&#8851;");
    n.triangleleft = i(u, "\\triangleleft ", "&#8882;");
    n.sqcup = i(u, "\\sqcup ", "&#8852;");
    n.triangleright = i(u, "\\triangleright ", "&#8883;");
    n.odot = n.circledot = i(u, "\\odot ", "&#8857;");
    n.bigcirc = i(u, "\\bigcirc ", "&#9711;");
    n.dagger = i(u, "\\dagger ", "&#0134;");
    n.ddagger = i(u, "\\ddagger ", "&#135;");
    n.wr = i(u, "\\wr ", "&#8768;");
    n.amalg = i(u, "\\amalg ", "&#8720;");
    n.models = i(u, "\\models ", "&#8872;");
    n.prec = i(u, "\\prec ", "&#8826;");
    n.succ = i(u, "\\succ ", "&#8827;");
    n.preceq = i(u, "\\preceq ", "&#8828;");
    n.succeq = i(u, "\\succeq ", "&#8829;");
    n.simeq = i(u, "\\simeq ", "&#8771;");
    n.mid = i(u, "\\mid ", "&#8739;");
    n.ll = i(u, "\\ll ", "&#8810;");
    n.gg = i(u, "\\gg ", "&#8811;");
    n.parallel = i(u, "\\parallel ", "&#8741;");
    n.nparallel = i(u, "\\nparallel ", "&#8742;");
    n.bowtie = i(u, "\\bowtie ", "&#8904;");
    n.sqsubset = i(u, "\\sqsubset ", "&#8847;");
    n.sqsupset = i(u, "\\sqsupset ", "&#8848;");
    n.smile = i(u, "\\smile ", "&#8995;");
    n.sqsubseteq = i(u, "\\sqsubseteq ", "&#8849;");
    n.sqsupseteq = i(u, "\\sqsupseteq ", "&#8850;");
    n.doteq = i(u, "\\doteq ", "&#8784;");
    n.frown = i(u, "\\frown ", "&#8994;");
    n.vdash = i(u, "\\vdash ", "&#8870;");
    n.dashv = i(u, "\\dashv ", "&#8867;");
    n.nless = i(u, "\\nless ", "&#8814;");
    n.ngtr = i(u, "\\ngtr ", "&#8815;");
    n.longleftarrow = i(u, "\\longleftarrow ", "&#8592;");
    n.longrightarrow = i(u, "\\longrightarrow ", "&#8594;");
    n.Longleftarrow = i(u, "\\Longleftarrow ", "&#8656;");
    n.Longrightarrow = i(u, "\\Longrightarrow ", "&#8658;");
    n.longleftrightarrow = i(u, "\\longleftrightarrow ", "&#8596;");
    n.updownarrow = i(u, "\\updownarrow ", "&#8597;");
    n.Longleftrightarrow = i(u, "\\Longleftrightarrow ", "&#8660;");
    n.Updownarrow = i(u, "\\Updownarrow ", "&#8661;");
    n.mapsto = i(u, "\\mapsto ", "&#8614;");
    n.nearrow = i(u, "\\nearrow ", "&#8599;");
    n.hookleftarrow = i(u, "\\hookleftarrow ", "&#8617;");
    n.hookrightarrow = i(u, "\\hookrightarrow ", "&#8618;");
    n.searrow = i(u, "\\searrow ", "&#8600;");
    n.leftharpoonup = i(u, "\\leftharpoonup ", "&#8636;");
    n.rightharpoonup = i(u, "\\rightharpoonup ", "&#8640;");
    n.swarrow = i(u, "\\swarrow ", "&#8601;");
    n.leftharpoondown = i(u, "\\leftharpoondown ", "&#8637;");
    n.rightharpoondown = i(u, "\\rightharpoondown ", "&#8641;");
    n.nwarrow = i(u, "\\nwarrow ", "&#8598;");
    n.ldots = i(u, "\\ldots ", "&#8230;");
    n.cdots = i(u, "\\cdots ", "&#8943;");
    n.vdots = i(u, "\\vdots ", "&#8942;");
    n.ddots = i(u, "\\ddots ", "&#8945;");
    n.surd = i(u, "\\surd ", "&#8730;");
    n.triangle = i(u, "\\triangle ", "&#9651;");
    n.ell = i(u, "\\ell ", "&#8467;");
    n.top = i(u, "\\top ", "&#8868;");
    n.flat = i(u, "\\flat ", "&#9837;");
    n.natural = i(u, "\\natural ", "&#9838;");
    n.sharp = i(u, "\\sharp ", "&#9839;");
    n.wp = i(u, "\\wp ", "&#8472;");
    n.bot = i(u, "\\bot ", "&#8869;");
    n.clubsuit = i(u, "\\clubsuit ", "&#9827;");
    n.diamondsuit = i(u, "\\diamondsuit ", "&#9826;");
    n.heartsuit = i(u, "\\heartsuit ", "&#9825;");
    n.spadesuit = i(u, "\\spadesuit ", "&#9824;");
    n.parallelogram = i(u, "\\parallelogram ", "&#9649;");
    n.square = i(u, "\\square ", "&#11036;");
    n.oint = i(u, "\\oint ", "&#8750;");
    n.bigcap = i(u, "\\bigcap ", "&#8745;");
    n.bigcup = i(u, "\\bigcup ", "&#8746;");
    n.bigsqcup = i(u, "\\bigsqcup ", "&#8852;");
    n.bigvee = i(u, "\\bigvee ", "&#8744;");
    n.bigwedge = i(u, "\\bigwedge ", "&#8743;");
    n.bigodot = i(u, "\\bigodot ", "&#8857;");
    n.bigotimes = i(u, "\\bigotimes ", "&#8855;");
    n.bigoplus = i(u, "\\bigoplus ", "&#8853;");
    n.biguplus = i(u, "\\biguplus ", "&#8846;");
    n.lfloor = i(u, "\\lfloor ", "&#8970;");
    n.rfloor = i(u, "\\rfloor ", "&#8971;");
    n.lceil = i(u, "\\lceil ", "&#8968;");
    n.rceil = i(u, "\\rceil ", "&#8969;");
    n.opencurlybrace = n.lbrace = i(u, "\\lbrace ", "{");
    n.closecurlybrace = n.rbrace = i(u, "\\rbrace ", "}");
    n.lbrack = i(u, "[");
    n.rbrack = i(u, "]");
    n[""] = n.int = n.integral = i(y, "\\int ", "<big>&int;<\/big>");
    n.slash = i(u, "/");
    n.vert = i(u, "|");
    n.perp = n.perpendicular = i(u, "\\perp ", "&perp;");
    n.nabla = n.del = i(u, "\\nabla ", "&nabla;");
    n.hbar = i(u, "\\hbar ", "&#8463;");
    n.AA = n.Angstrom = n.angstrom = i(u, "\\text\\AA ", "&#8491;");
    n.ring = n.circ = n.circle = i(u, "\\circ ", "&#8728;");
    n.bull = n.bullet = i(u, "\\bullet ", "&bull;");
    n.setminus = n.smallsetminus = i(u, "\\setminus ", "&#8726;");
    n.not = n[""] = n.neg = i(u, "\\neg ", "&not;");
    n[""] = n.dots = n.ellip = n.hellip = n.ellipsis = n.hellipsis = i(u, "\\dots ", "&hellip;");
    n.converges = n.darr = n.dnarr = n.dnarrow = n.downarrow = i(u, "\\downarrow ", "&darr;");
    n.dArr = n.dnArr = n.dnArrow = n.Downarrow = i(u, "\\Downarrow ", "&dArr;");
    n.diverges = n.uarr = n.uparrow = i(u, "\\uparrow ", "&uarr;");
    n.uArr = n.Uparrow = i(u, "\\Uparrow ", "&uArr;");
    n.to = i(o, "\\to ", "&rarr;");
    n.rarr = n.rightarrow = i(u, "\\rightarrow ", "&rarr;");
    n.implies = i(o, "\\Rightarrow ", "&rArr;");
    n.rArr = n.Rightarrow = i(u, "\\Rightarrow ", "&rArr;");
    n.gets = i(o, "\\gets ", "&larr;");
    n.larr = n.leftarrow = i(u, "\\leftarrow ", "&larr;");
    n.impliedby = i(o, "\\Leftarrow ", "&lArr;");
    n.lArr = n.Leftarrow = i(u, "\\Leftarrow ", "&lArr;");
    n.harr = n.lrarr = n.leftrightarrow = i(u, "\\leftrightarrow ", "&harr;");
    n.iff = i(o, "\\Leftrightarrow ", "&hArr;");
    n.hArr = n.lrArr = n.Leftrightarrow = i(u, "\\Leftrightarrow ", "&hArr;");
    n.Re = n.Real = n.real = i(u, "\\Re ", "&real;");
    n.Im = n.imag = n.image = n.imagin = n.imaginary = n.Imaginary = i(u, "\\Im ", "&image;");
    n.part = n.partial = i(u, "\\partial ", "&part;");
    n.infty = n.infin = n.infinity = i(u, "\\infty ", "&infin;");
    n.alef = n.alefsym = n.aleph = n.alephsym = i(u, "\\aleph ", "&alefsym;");
    n.xist = n.xists = n.exist = n.exists = i(u, "\\exists ", "&exist;");
    n.and = n.land = n.wedge = i(u, "\\wedge ", "&and;");
    n.or = n.lor = n.vee = i(u, "\\vee ", "&or;");
    n.o = n.O = n.empty = n.emptyset = n.oslash = n.Oslash = n.nothing = n.varnothing = i(o, "\\varnothing ", "&empty;");
    n.cup = n.union = i(o, "\\cup ", "&cup;");
    n.cap = n.intersect = n.intersection = i(o, "\\cap ", "&cap;");
    n.deg = n.degree = i(u, "\\degree ", "&deg;");
    n.ang = n.angle = i(u, "\\angle ", "&ang;");
    n.measuredangle = i(u, "\\measuredangle ", "&#8737;");
    ar = f(u, function(i, r) {
        i.createLeftOf = function(i) {
            i.options.autoSubscriptNumerals && i.parent !== i.parent.parent.sub && (i[t]instanceof l && i[t].isItalic !== !1 || i[t]instanceof lt && i[t][t]instanceof l && i[t][t].isItalic !== !1) ? (n._().createLeftOf(i),
            r.createLeftOf.call(this, i),
            i.insRightOf(i.parent.parent)) : r.createLeftOf.call(this, i)
        }
    });
    l = f(y, function(n, i) {
        n.init = function(n, t) {
            i.init.call(this, n, "<var>" + (t || n) + "<\/var>")
        }
        ;
        n.text = function() {
            var n = this.ctrlSeq;
            return !this[t] || this[t]instanceof l || this[t]instanceof o || this[t].ctrlSeq === "\\ " || (n = "*" + n),
            !this[r] || this[r]instanceof o || this[r]instanceof lt || (n += "*"),
            n
        }
    });
    st.p.autoCommands = {
        _maxLength: 0
    };
    ni.autoCommands = function(t) {
        var r, i;
        if (!/^[a-z]+(?: [a-z]+)*$/i.test(t))
            throw '"' + t + '" not a space-delimited list of only letters';
        var e = t.split(" ")
          , u = {}
          , f = 0;
        for (r = 0; r < e.length; r += 1) {
            if (i = e[r],
            i.length < 2)
                throw 'autocommand "' + i + '" not minimum length of 2';
            if (n[i] === yi)
                throw '"' + i + '" is a built-in operator name';
            u[i] = 1;
            f = rr(f, i.length)
        }
        return u._maxLength = f,
        u
    }
    ;
    var it = f(l, function(i, u) {
        function f(n) {
            return n instanceof y && !(n instanceof o)
        }
        i.init = function(n) {
            return u.init.call(this, this.letter = n)
        }
        ;
        i.createLeftOf = function(i) {
            var o = i.options.autoCommands, s = o._maxLength, e, f;
            if (s > 0) {
                for (var r = this.letter, f = i[t], e = 1; f instanceof it && e < s; )
                    r = f.letter + r,
                    f = f[t],
                    e += 1;
                while (r.length) {
                    if (o.hasOwnProperty(r)) {
                        for (e = 2,
                        f = i[t]; e < r.length; e += 1,
                        f = f[t])
                            ;
                        return v(f, i[t]).remove(),
                        i[t] = f[t],
                        n[r](r).createLeftOf(i)
                    }
                    r = r.slice(1)
                }
            }
            u.createLeftOf.apply(this, arguments)
        }
        ;
        i.italicize = function(n) {
            return this.isItalic = n,
            this.jQ.toggleClass("mq-operator-name", !n),
            this
        }
        ;
        i.finalizeTree = i.siblingDeleted = i.siblingCreated = function(n, i) {
            i !== t && this[r]instanceof it || this.autoUnItalicize(n)
        }
        ;
        i.autoUnItalicize = function(n) {
            var y = n.autoOperatorNames, u, e, s, o, i, h, a, p, l, c, w;
            if (y._maxLength !== 0) {
                for (u = this.letter,
                e = this[t]; e instanceof it; e = e[t])
                    u = e.letter + u;
                for (s = this[r]; s instanceof it; s = s[r])
                    u += s.letter;
                v(e[r] || this.parent.ends[t], s[t] || this.parent.ends[r]).each(function(n) {
                    n.italicize(!0).jQ.removeClass("mq-first mq-last");
                    n.ctrlSeq = n.letter
                });
                n: for (o = 0,
                i = e[r] || this.parent.ends[t]; o < u.length; o += 1,
                i = i[r])
                    for (h = ir(y._maxLength, u.length - o); h > 0; h -= 1)
                        if (a = u.slice(o, o + h),
                        y.hasOwnProperty(a)) {
                            for (p = 0,
                            l = i; p < h; p += 1,
                            l = l[r])
                                l.italicize(!1),
                                c = l;
                            w = vi.hasOwnProperty(a);
                            i.ctrlSeq = (w ? "\\" : "\\operatorname{") + i.ctrlSeq;
                            c.ctrlSeq += w ? " " : "}";
                            iu.hasOwnProperty(a) && c[t][t][t].jQ.addClass("mq-last");
                            f(i[t]) && i.jQ.addClass("mq-first");
                            f(c[r]) && c.jQ.addClass("mq-last");
                            o += h - 1;
                            i = c;
                            continue n
                        }
            }
        }
    })
      , vi = {}
      , ut = st.p.autoOperatorNames = {
        _maxLength: 9
    }
      , iu = {
        limsup: 1,
        liminf: 1,
        projlim: 1,
        injlim: 1
    };
    (function() {
        for (var r, t, u, i = "arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "), n = 0; n < i.length; n += 1)
            vi[i[n]] = ut[i[n]] = 1;
        for (r = "sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),
        n = 0; n < r.length; n += 1)
            vi[r[n]] = 1;
        for (t = "sin cos tan sec cosec csc cotan cot ctg".split(" "),
        n = 0; n < t.length; n += 1)
            ut[t[n]] = ut["arc" + t[n]] = ut[t[n] + "h"] = ut["ar" + t[n] + "h"] = ut["arc" + t[n] + "h"] = 1;
        for (u = "gcf hcf lcm proj span".split(" "),
        n = 0; n < u.length; n += 1)
            ut[u[n]] = 1
    }
    )();
    ni.autoOperatorNames = function(n) {
        var i, t;
        if (!/^[a-z]+(?: [a-z]+)*$/i.test(n))
            throw '"' + n + '" not a space-delimited list of only letters';
        var f = n.split(" ")
          , r = {}
          , u = 0;
        for (i = 0; i < f.length; i += 1) {
            if (t = f[i],
            t.length < 2)
                throw '"' + t + '" not minimum length of 2';
            r[t] = 1;
            u = rr(u, t.length)
        }
        return r._maxLength = u,
        r
    }
    ;
    yi = f(y, function(n) {
        n.init = function(n) {
            this.ctrlSeq = n
        }
        ;
        n.createLeftOf = function(n) {
            for (var i = this.ctrlSeq, t = 0; t < i.length; t += 1)
                it(i.charAt(t)).createLeftOf(n)
        }
        ;
        n.parser = function() {
            for (var i = this.ctrlSeq, n = p(), t = 0; t < i.length; t += 1)
                it(i.charAt(t)).adopt(n, n.ends[r], 0);
            return e.succeed(n.children())
        }
    });
    for (pi in ut)
        ut.hasOwnProperty(pi) && (n[pi] = yi);
    n.operatorname = f(h, function(n) {
        n.createLeftOf = w;
        n.numBlocks = function() {
            return 1
        }
        ;
        n.parser = function() {
            return k.block.map(function(n) {
                return n.children()
            })
        }
    });
    n.f = f(it, function(n, t) {
        n.init = function() {
            y.p.init.call(this, this.letter = "f", '<var class="mq-f">f<\/var>')
        }
        ;
        n.italicize = function(n) {
            return this.jQ.html("f").toggleClass("mq-f", n),
            t.italicize.apply(this, arguments)
        }
    });
    n[" "] = n.space = i(u, "\\ ", "&nbsp;");
    n["'"] = n.prime = i(u, "'", "&prime;");
    n.backslash = i(u, "\\backslash ", "\\");
    d["\\"] || (d["\\"] = n.backslash);
    n.$ = i(u, "\\$", "$");
    at = f(y, function(n, t) {
        n.init = function(n, i) {
            t.init.call(this, n, '<span class="mq-nonSymbola">' + (i || n) + "<\/span>")
        }
    });
    n["@"] = at;
    n["&"] = i(at, "\\&", "&amp;");
    n["%"] = i(at, "\\%", "%");
    n.alpha = n.beta = n.gamma = n.delta = n.zeta = n.eta = n.theta = n.iota = n.kappa = n.mu = n.nu = n.xi = n.rho = n.sigma = n.tau = n.chi = n.psi = n.omega = f(l, function(n, t) {
        n.init = function(n) {
            t.init.call(this, "\\" + n + " ", "&" + n + ";")
        }
    });
    n.phi = i(l, "\\phi ", "&#981;");
    n.phiv = n.varphi = i(l, "\\varphi ", "&phi;");
    n.epsilon = i(l, "\\epsilon ", "&#1013;");
    n.epsiv = n.varepsilon = i(l, "\\varepsilon ", "&epsilon;");
    n.piv = n.varpi = i(l, "\\varpi ", "&piv;");
    n.sigmaf = n.sigmav = n.varsigma = i(l, "\\varsigma ", "&sigmaf;");
    n.thetav = n.vartheta = n.thetasym = i(l, "\\vartheta ", "&thetasym;");
    n.upsilon = n.upsi = i(l, "\\upsilon ", "&upsilon;");
    n.gammad = n.Gammad = n.digamma = i(l, "\\digamma ", "&#989;");
    n.kappav = n.varkappa = i(l, "\\varkappa ", "&#1008;");
    n.rhov = n.varrho = i(l, "\\varrho ", "&#1009;");
    n.pi = n[""] = i(at, "\\pi ", "&pi;");
    n.lambda = i(at, "\\lambda ", "&lambda;");
    n.Upsilon = n.Upsi = n.upsih = n.Upsih = i(y, "\\Upsilon ", '<var style="font-family: serif">&upsih;<\/var>');
    n.Gamma = n.Delta = n.Theta = n.Lambda = n.Xi = n.Pi = n.Sigma = n.Phi = n.Psi = n.Omega = n.forall = f(u, function(n, t) {
        n.init = function(n) {
            t.init.call(this, "\\" + n + " ", "&" + n + ";")
        }
    });
    ct = f(h, function(n) {
        n.init = function(n) {
            this.latex = n
        }
        ;
        n.createLeftOf = function(n) {
            var i = k.parse(this.latex);
            i.children().adopt(n.parent, n[t], n[r]);
            n[t] = i.ends[r];
            i.jQize().insertBefore(n.jQ);
            i.finalizeInsert(n.options, n);
            i.ends[r][r].siblingCreated && i.ends[r][r].siblingCreated(n.options, t);
            i.ends[t][t].siblingCreated && i.ends[t][t].siblingCreated(n.options, r);
            n.parent.bubble("reflow")
        }
        ;
        n.parser = function() {
            var n = k.parse(this.latex).children();
            return e.succeed(n)
        }
    });
    n[""] = i(ct, "^1");
    n[""] = i(ct, "^2");
    n[""] = i(ct, "^3");
    n[""] = i(ct, "\\frac14");
    n[""] = i(ct, "\\frac12");
    n[""] = i(ct, "\\frac34");
    kt = f(o, function(n) {
        n.init = u.prototype.init;
        n.contactWeld = n.siblingCreated = n.siblingDeleted = function(n, i) {
            if (i !== r)
                return this.jQ[0].className = !this[t] || this[t]instanceof o ? "" : "mq-binary-operator",
                this
        }
    });
    n["+"] = i(kt, "+", "+");
    n[""] = n["-"] = i(kt, "-", "&minus;");
    n[""] = n.pm = n.plusmn = n.plusminus = i(kt, "\\pm ", "&plusmn;");
    n.mp = n.mnplus = n.minusplus = i(kt, "\\mp ", "&#8723;");
    d["*"] = n.sdot = n.cdot = i(o, "\\cdot ", "&middot;", "*");
    var dt = f(o, function(n, i) {
        n.init = function(n, t) {
            this.data = n;
            this.strict = t;
            var r = t ? "Strict" : "";
            i.init.call(this, n["ctrlSeq" + r], n["html" + r], n["text" + r])
        }
        ;
        n.swap = function(n) {
            this.strict = n;
            var t = n ? "Strict" : "";
            this.ctrlSeq = this.data["ctrlSeq" + t];
            this.jQ.html(this.data["html" + t]);
            this.textTemplate = [this.data["text" + t]]
        }
        ;
        n.deleteTowards = function(n) {
            if (n === t && !this.strict) {
                this.swap(!0);
                this.bubble("reflow");
                return
            }
            i.deleteTowards.apply(this, arguments)
        }
    })
      , vr = {
        ctrlSeq: "\\le ",
        html: "&le;",
        text: "",
        ctrlSeqStrict: "<",
        htmlStrict: "&lt;",
        textStrict: "<"
    }
      , yr = {
        ctrlSeq: "\\ge ",
        html: "&ge;",
        text: "",
        ctrlSeqStrict: ">",
        htmlStrict: "&gt;",
        textStrict: ">"
    };
    n["<"] = n.lt = i(dt, vr, !0);
    n[">"] = n.gt = i(dt, yr, !0);
    n[""] = n.le = n.leq = i(dt, vr, !1);
    n[""] = n.ge = n.geq = i(dt, yr, !1);
    wi = f(o, function(n, i) {
        n.init = function() {
            i.init.call(this, "=", "=")
        }
        ;
        n.createLeftOf = function(n) {
            if (n[t]instanceof dt && n[t].strict) {
                n[t].swap(!1);
                n[t].bubble("reflow");
                return
            }
            i.createLeftOf.apply(this, arguments)
        }
    });
    n["="] = wi;
    n[""] = n.times = i(o, "\\times ", "&times;", "[x]");
    n[""] = n.div = n.divide = n.divides = i(o, "\\div ", "&divide;", "[/]");
    d["~"] = n.sim = i(o, "\\sim ", "~", "~");
    var gt, pr = w, ru = document.createElement("div"), wr = ru.style, bi;
    for (ki in {
        transform: 1,
        WebkitTransform: 1,
        MozTransform: 1,
        OTransform: 1,
        msTransform: 1
    })
        if (ki in wr) {
            bi = ki;
            break
        }
    bi ? gt = function(n, t, i) {
        n.css(bi, "scale(" + t + "," + i + ")")
    }
    : "filter"in wr ? (pr = function(n) {
        n.className = n.className
    }
    ,
    gt = function(n, t, i) {
        function r() {
            n.css("marginRight", (u.width() - 1) * (t - 1) / t + "px")
        }
        var u, f;
        t /= 1 + (i - 1) / 2;
        n.css("fontSize", i + "em");
        n.hasClass("mq-matrixed-container") || n.addClass("mq-matrixed-container").wrapInner('<span class="mq-matrixed"><\/span>');
        u = n.children().css("filter", "progid:DXImageTransform.Microsoft.Matrix(M11=" + t + ",SizingMethod='auto expand')");
        r();
        f = setInterval(r);
        s(window).load(function() {
            clearTimeout(f);
            r()
        })
    }
    ) : gt = function(n, t, i) {
        n.css("fontSize", i + "em")
    }
    ;
    rt = f(h, function(n, t) {
        n.init = function(n, i, r) {
            t.init.call(this, n, "<" + i + " " + r + ">&0<\/" + i + ">")
        }
    });
    n.mathrm = i(rt, "\\mathrm", "span", 'class="mq-roman mq-font"');
    n.mathit = i(rt, "\\mathit", "i", 'class="mq-font"');
    n.mathbf = i(rt, "\\mathbf", "b", 'class="mq-font"');
    n.mathsf = i(rt, "\\mathsf", "span", 'class="mq-sans-serif mq-font"');
    n.mathtt = i(rt, "\\mathtt", "span", 'class="mq-monospace mq-font"');
    n.underline = i(rt, "\\underline", "span", 'class="mq-non-leaf mq-underline"');
    n.overline = n.bar = i(rt, "\\overline", "span", 'class="mq-non-leaf mq-overline"');
    n.overrightarrow = i(rt, "\\overrightarrow", "span", 'class="mq-non-leaf mq-overarrow mq-arrow-right"');
    n.overleftarrow = i(rt, "\\overleftarrow", "span", 'class="mq-non-leaf mq-overarrow mq-arrow-left"');
    var hu = n.textcolor = f(h, function(n, t) {
        n.setColor = function(n) {
            this.color = n;
            this.htmlTemplate = '<span class="mq-textcolor" style="color:' + n + '">&0<\/span>'
        }
        ;
        n.latex = function() {
            return "\\textcolor{" + this.color + "}{" + this.blocks[0].latex() + "}"
        }
        ;
        n.parser = function() {
            var n = this
              , r = e.optWhitespace
              , i = e.string
              , u = e.regex;
            return r.then(i("{")).then(u(/^[#\w\s.,()%-]*/)).skip(i("}")).then(function(i) {
                return n.setColor(i),
                t.parser.call(n)
            })
        }
    })
      , cu = n["class"] = f(h, function(n, t) {
        n.parser = function() {
            var n = this
              , i = e.string
              , r = e.regex;
            return e.optWhitespace.then(i("{")).then(r(/^[-\w\s\\\xA0-\xFF]*/)).skip(i("}")).then(function(i) {
                return n.htmlTemplate = '<span class="mq-class ' + i + '">&0<\/span>',
                t.parser.call(n)
            })
        }
    })
      , lt = f(h, function(n, i) {
        n.ctrlSeq = "_{...}^{...}";
        n.createLeftOf = function(n) {
            if (n[t] || !n.options.supSubsRequireOperand)
                return i.createLeftOf.apply(this, arguments)
        }
        ;
        n.contactWeld = function(n) {
            for (var e, f, u, s, o, i = t; i; i = i === t ? r : !1)
                if (this[i]instanceof lt) {
                    for (e = "sub"; e; e = e === "sub" ? "sup" : !1)
                        (f = this[e],
                        u = this[i][e],
                        f) && (u ? f.isEmpty() ? o = nt(u, 0, u.ends[t]) : (f.jQ.children().insAtDirEnd(-i, u.jQ),
                        s = f.children().disown(),
                        o = nt(u, s.ends[r], u.ends[t]),
                        i === t ? s.adopt(u, u.ends[r], 0) : s.adopt(u, 0, u.ends[t])) : this[i].addBlock(f.disown()),
                        this.placeCursor = function(n, t) {
                            return function(r) {
                                r.insAtDirEnd(-i, n || t)
                            }
                        }(u, f));
                    this.remove();
                    n && n[t] === this && (i === r && o ? o[t] ? n.insRightOf(o[t]) : n.insAtLeftEnd(o.parent) : n.insRightOf(this[i]));
                    break
                }
            this.respace()
        }
        ;
        st.p.charsThatBreakOutOfSupSub = "";
        n.finalizeTree = function() {
            this.ends[t].write = function(n, i) {
                if (n.options.autoSubscriptNumerals && this === this.parent.sub) {
                    if (i === "_")
                        return;
                    var u = this.chToCmd(i);
                    return u instanceof y ? n.deleteSelection() : n.clearSelection().insRightOf(this.parent),
                    u.createLeftOf(n.show())
                }
                n[t] && !n[r] && !n.selection && n.options.charsThatBreakOutOfSupSub.indexOf(i) > -1 && n.insRightOf(this.parent);
                p.p.write.apply(this, arguments)
            }
        }
        ;
        n.moveTowards = function(n, t) {
            t.options.autoSubscriptNumerals && !this.sup ? t.insDirOf(n, this) : i.moveTowards.apply(this, arguments)
        }
        ;
        n.deleteTowards = function(n, r) {
            if (r.options.autoSubscriptNumerals && this.sub) {
                var u = this.sub.ends[-n];
                u instanceof y ? u.remove() : u && u.deleteTowards(n, r.insAtDirEnd(-n, this.sub));
                this.sub.isEmpty() && (this.sub.deleteOutOf(t, r.insAtLeftEnd(this.sub)),
                this.sup && r.insDirOf(-n, this))
            } else
                i.deleteTowards.apply(this, arguments)
        }
        ;
        n.latex = function() {
            function n(n, t) {
                var i = t && t.latex();
                return t ? n + (i.length === 1 ? i : "{" + (i || " ") + "}") : ""
            }
            return n("_", this.sub) + n("^", this.sup)
        }
        ;
        n.respace = n.siblingCreated = n.siblingDeleted = function(n, i) {
            i !== r && this.jQ.toggleClass("mq-limit", this[t].ctrlSeq === "\\int ")
        }
        ;
        n.addBlock = function(n) {
            this.supsub === "sub" ? (this.sup = this.upInto = this.sub.upOutOf = n,
            n.adopt(this, this.sub, 0).downOutOf = this.sub,
            n.jQ = s('<span class="mq-sup"/>').append(n.jQ.children()).attr(ft, n.id).prependTo(this.jQ)) : (this.sub = this.downInto = this.sup.downOutOf = n,
            n.adopt(this, 0, this.sup).upOutOf = this.sup,
            n.jQ = s('<span class="mq-sub"><\/span>').append(n.jQ.children()).attr(ft, n.id).appendTo(this.jQ.removeClass("mq-sup-only")),
            this.jQ.append('<span style="display:inline-block;width:0">&#8203;<\/span>'));
            for (var t = 0; t < 2; t += 1)
                (function(n, t, i, r) {
                    n[t].deleteOutOf = function(u, f) {
                        if (f.insDirOf(this[u] ? -u : u, this.parent),
                        !this.isEmpty()) {
                            var e = this.ends[u];
                            this.children().disown().withDirAdopt(u, f.parent, f[u], f[-u]).jQ.insDirOf(-u, f.jQ);
                            f[-u] = e
                        }
                        n.supsub = i;
                        delete n[t];
                        delete n[r + "Into"];
                        n[i][r + "OutOf"] = di;
                        delete n[i].deleteOutOf;
                        t === "sub" && s(n.jQ.addClass("mq-sup-only")[0].lastChild).remove();
                        this.remove()
                    }
                }
                )(this, "sub sup".split(" ")[t], "sup sub".split(" ")[t], "down up".split(" ")[t])
        }
    });
    n.subscript = n._ = f(lt, function(n, i) {
        n.supsub = "sub";
        n.htmlTemplate = '<span class="mq-supsub mq-non-leaf"><span class="mq-sub">&0<\/span><span style="display:inline-block;width:0">&#8203;<\/span><\/span>';
        n.textTemplate = ["_"];
        n.finalizeTree = function() {
            this.downInto = this.sub = this.ends[t];
            this.sub.upOutOf = di;
            i.finalizeTree.call(this)
        }
    });
    n.superscript = n.supscript = n["^"] = f(lt, function(n, t) {
        n.supsub = "sup";
        n.htmlTemplate = '<span class="mq-supsub mq-non-leaf mq-sup-only"><span class="mq-sup">&0<\/span><\/span>';
        n.textTemplate = ["^"];
        n.finalizeTree = function() {
            this.upInto = this.sup = this.ends[r];
            this.sup.downOutOf = di;
            t.finalizeTree.call(this)
        }
    });
    vt = f(h, function(n, i) {
        n.init = function(n, t) {
            var i = '<span class="mq-large-operator mq-non-leaf"><span class="mq-to"><span>&1<\/span><\/span><big>' + t + '<\/big><span class="mq-from"><span>&0<\/span><\/span><\/span>';
            y.prototype.init.call(this, n, i)
        }
        ;
        n.createLeftOf = function(n) {
            i.createLeftOf.apply(this, arguments);
            n.options.sumStartsWithNEquals && (it("n").createLeftOf(n),
            wi().createLeftOf(n))
        }
        ;
        n.latex = function() {
            function n(n) {
                return n.length === 1 ? n : "{" + (n || " ") + "}"
            }
            return this.ctrlSeq + "_" + n(this.ends[t].latex()) + "^" + n(this.ends[r].latex())
        }
        ;
        n.parser = function() {
            for (var u = e.string, f = e.optWhitespace, o = e.succeed, s = k.block, n = this, t = n.blocks = [p(), p()], i = 0; i < t.length; i += 1)
                t[i].adopt(n, n.ends[r], 0);
            return f.then(u("_").or(u("^"))).then(function(i) {
                var u = t[i === "_" ? 0 : 1];
                return s.then(function(t) {
                    return t.children().adopt(u, u.ends[r], 0),
                    o(n)
                })
            }).many().result(n)
        }
        ;
        n.finalizeTree = function() {
            this.downInto = this.ends[t];
            this.upInto = this.ends[r];
            this.ends[t].upOutOf = this.ends[r];
            this.ends[r].downOutOf = this.ends[t]
        }
    });
    n[""] = n.sum = n.summation = i(vt, "\\sum ", "&sum;");
    n[""] = n.prod = n.product = i(vt, "\\prod ", "&prod;");
    n.coprod = n.coproduct = i(vt, "\\coprod ", "&#8720;");
    var uu = n.frac = n.dfrac = n.cfrac = n.fraction = f(h, function(n) {
        n.ctrlSeq = "\\frac";
        n.htmlTemplate = '<span class="mq-fraction mq-non-leaf"><span class="mq-numerator">&0<\/span><span class="mq-denominator">&1<\/span><span style="display:inline-block;width:0">&#8203;<\/span><\/span>';
        n.textTemplate = ["(", ")/(", ")"];
        n.finalizeTree = function() {
            this.upInto = this.ends[r].upOutOf = this.ends[t];
            this.downInto = this.ends[t].downOutOf = this.ends[r]
        }
    })
      , fu = n.over = d["/"] = f(uu, function(i, u) {
        i.createLeftOf = function(i) {
            if (!this.replacedFragment) {
                for (var f = i[t]; f && !(f instanceof o || f instanceof (n.text || w) || f instanceof vt || f.ctrlSeq === "\\ " || /^[,;:]$/.test(f.ctrlSeq)); )
                    f = f[t];
                f instanceof vt && f[r]instanceof lt && (f = f[r],
                f[r]instanceof lt && f[r].ctrlSeq != f.ctrlSeq && (f = f[r]));
                f !== i[t] && (this.replaces(v(f[r] || i.parent.ends[t], i[t])),
                i[t] = f)
            }
            u.createLeftOf.call(this, i)
        }
    })
      , eu = n.sqrt = n[""] = f(h, function(n, t) {
        n.ctrlSeq = "\\sqrt";
        n.htmlTemplate = '<span class="mq-non-leaf"><span class="mq-scaled mq-sqrt-prefix">&radic;<\/span><span class="mq-non-leaf mq-sqrt-stem">&0<\/span><\/span>';
        n.textTemplate = ["sqrt(", ")"];
        n.parser = function() {
            return k.optBlock.then(function(n) {
                return k.block.map(function(t) {
                    var i = ou();
                    return i.blocks = [n, t],
                    n.adopt(i, 0, 0),
                    t.adopt(i, n, 0),
                    i
                })
            }).or(t.parser.call(this))
        }
        ;
        n.reflow = function() {
            var n = this.ends[r].jQ;
            gt(n.prev(), 1, n.innerHeight() / +n.css("fontSize").slice(0, -2) - .1)
        }
    })
      , lu = n.vec = f(h, function(n) {
        n.ctrlSeq = "\\vec";
        n.htmlTemplate = '<span class="mq-non-leaf"><span class="mq-vector-prefix">&rarr;<\/span><span class="mq-vector-stem">&0<\/span><\/span>';
        n.textTemplate = ["vec(", ")"]
    })
      , ou = n.nthroot = f(eu, function(n) {
        n.htmlTemplate = '<sup class="mq-nthroot mq-non-leaf">&0<\/sup><span class="mq-scaled"><span class="mq-sqrt-prefix mq-scaled">&radic;<\/span><span class="mq-sqrt-stem mq-non-leaf">&1<\/span><\/span>';
        n.textTemplate = ["sqrt[", "](", ")"];
        n.latex = function() {
            return "\\sqrt[" + this.ends[t].latex() + "]{" + this.ends[r].latex() + "}"
        }
    });
    ot = f(f(h, br), function(n, i) {
        n.init = function(n, u, f, e, o) {
            i.init.call(this, "\\left" + e, pt, [u, f]);
            this.side = n;
            this.sides = {};
            this.sides[t] = {
                ch: u,
                ctrlSeq: e
            };
            this.sides[r] = {
                ch: f,
                ctrlSeq: o
            }
        }
        ;
        n.numBlocks = function() {
            return 1
        }
        ;
        n.html = function() {
            return this.htmlTemplate = '<span class="mq-non-leaf"><span class="mq-scaled mq-paren' + (this.side === r ? " mq-ghost" : "") + '">' + this.sides[t].ch + '<\/span><span class="mq-non-leaf">&0<\/span><span class="mq-scaled mq-paren' + (this.side === t ? " mq-ghost" : "") + '">' + this.sides[r].ch + "<\/span><\/span>",
            i.html.call(this)
        }
        ;
        n.latex = function() {
            return "\\left" + this.sides[t].ctrlSeq + this.ends[t].latex() + "\\right" + this.sides[r].ctrlSeq
        }
        ;
        n.oppBrack = function(n, i, u) {
            return i instanceof ot && i.side && i.side !== -u && (this.sides[this.side].ch === "|" || i.side === -this.side) && (!n.restrictMismatchedBrackets || yt[this.sides[this.side].ch] === i.sides[i.side].ch || {
                "(": "]",
                "[": ")"
            }[this.sides[t].ch] === i.sides[r].ch) && i
        }
        ;
        n.closeOpposing = function(n) {
            n.side = 0;
            n.sides[this.side] = this.sides[this.side];
            n.delimjQs.eq(this.side === t ? 0 : 1).removeClass("mq-ghost").html(this.sides[this.side].ch)
        }
        ;
        n.createLeftOf = function(n) {
            var e, u, f;
            this.replacedFragment || (e = n.options,
            u = this.oppBrack(e, n[t], t) || this.oppBrack(e, n[r], r) || this.oppBrack(e, n.parent.parent));
            u ? (f = this.side = -u.side,
            this.closeOpposing(u),
            u === n.parent.parent && n[f] && (v(n[f], n.parent.ends[f], -f).disown().withDirAdopt(-f, u.parent, u, u[f]).jQ.insDirOf(f, u.jQ),
            u.bubble("reflow"))) : (u = this,
            f = u.side,
            u.replacedFragment ? u.side = 0 : n[-f] && (u.replaces(v(n[-f], n.parent.ends[-f], f)),
            n[-f] = 0),
            i.createLeftOf.call(u, n));
            f === t ? n.insAtLeftEnd(u.ends[t]) : n.insRightOf(u)
        }
        ;
        n.placeCursor = w;
        n.unwrap = function() {
            this.ends[t].children().disown().adopt(this.parent, this, this[r]).jQ.insertAfter(this.jQ);
            this.remove()
        }
        ;
        n.deleteSide = function(n, i, r) {
            var e = this.parent, u = this[n], h = e.ends[n], o, s, f;
            if (n === this.side) {
                this.unwrap();
                u ? r.insDirOf(-n, u) : r.insAtDirEnd(n, e);
                return
            }
            if (o = r.options,
            s = !this.side,
            this.side = -n,
            this.oppBrack(o, this.ends[t].ends[this.side], n))
                this.closeOpposing(this.ends[t].ends[this.side]),
                f = this.ends[t].ends[n],
                this.unwrap(),
                f.siblingCreated && f.siblingCreated(r.options, n),
                u ? r.insDirOf(-n, u) : r.insAtDirEnd(n, e);
            else {
                if (this.oppBrack(o, this.parent.parent, n))
                    this.parent.parent.closeOpposing(this),
                    this.parent.parent.unwrap();
                else {
                    if (i && s) {
                        this.unwrap();
                        u ? r.insDirOf(-n, u) : r.insAtDirEnd(n, e);
                        return
                    }
                    this.sides[n] = {
                        ch: yt[this.sides[this.side].ch],
                        ctrlSeq: yt[this.sides[this.side].ctrlSeq]
                    };
                    this.delimjQs.removeClass("mq-ghost").eq(n === t ? 0 : 1).addClass("mq-ghost").html(this.sides[n].ch)
                }
                u ? (f = this.ends[t].ends[n],
                v(u, h, -n).disown().withDirAdopt(-n, this.ends[t], f, 0).jQ.insAtDirEnd(n, this.ends[t].jQ.removeClass("mq-empty")),
                f.siblingCreated && f.siblingCreated(r.options, n),
                r.insDirOf(-n, u)) : i ? r.insDirOf(n, this) : r.insAtDirEnd(n, this.ends[t])
            }
        }
        ;
        n.deleteTowards = function(n, t) {
            this.deleteSide(-n, !1, t)
        }
        ;
        n.finalizeTree = function() {
            this.ends[t].deleteOutOf = function(n, t) {
                this.parent.deleteSide(n, !0, t)
            }
            ;
            this.finalizeTree = this.intentionalBlur = function() {
                this.delimjQs.eq(this.side === t ? 1 : 0).removeClass("mq-ghost");
                this.side = 0
            }
        }
        ;
        n.siblingCreated = function(n, t) {
            t === -this.side && this.finalizeTree()
        }
    });
    yt = {
        "(": ")",
        ")": "(",
        "[": "]",
        "]": "[",
        "{": "}",
        "}": "{",
        "\\{": "\\}",
        "\\}": "\\{",
        "&lang;": "&rang;",
        "&rang;": "&lang;",
        "\\langle ": "\\rangle ",
        "\\rangle ": "\\langle ",
        "|": "|"
    };
    gi("(");
    gi("[");
    gi("{", "\\{");
    n.langle = i(ot, t, "&lang;", "&rang;", "\\langle ", "\\rangle ");
    n.rangle = i(ot, r, "&lang;", "&rang;", "\\langle ", "\\rangle ");
    d["|"] = i(ot, t, "|", "|", "|", "|");
    n.left = f(h, function(n) {
        n.parser = function() {
            var n = e.regex
              , i = e.string
              , r = e.succeed
              , t = e.optWhitespace;
            return t.then(n(/^(?:[([|]|\\\{)/)).then(function(r) {
                var u = r.charAt(0) === "\\" ? r.slice(1) : r;
                return k.then(function(f) {
                    return i("\\right").skip(t).then(n(/^(?:[\])|]|\\\})/)).map(function(n) {
                        var i = n.charAt(0) === "\\" ? n.slice(1) : n
                          , t = ot(0, u, i, r, n);
                        return t.blocks = [f],
                        f.adopt(t, 0, 0),
                        t
                    })
                })
            })
        }
    });
    n.right = f(h, function(n) {
        n.parser = function() {
            return e.fail("unmatched \\right")
        }
    });
    kr = n.binom = n.binomial = f(f(h, br), function(n) {
        n.ctrlSeq = "\\binom";
        n.htmlTemplate = '<span class="mq-non-leaf"><span class="mq-paren mq-scaled">(<\/span><span class="mq-non-leaf"><span class="mq-array mq-non-leaf"><span>&0<\/span><span>&1<\/span><\/span><\/span><span class="mq-paren mq-scaled">)<\/span><\/span>';
        n.textTemplate = ["choose(", ",", ")"]
    });
    su = n.choose = f(kr, function(n) {
        n.createLeftOf = fu.prototype.createLeftOf
    });
    n.editable = n.MathQuillMathField = f(h, function(n, i) {
        n.ctrlSeq = "\\MathQuillMathField";
        n.htmlTemplate = '<span class="mq-editable-field"><span class="mq-root-block">&0<\/span><\/span>';
        n.parser = function() {
            var n = this
              , t = e.string
              , r = e.regex
              , u = e.succeed;
            return t("[").then(r(/^[a-z][a-z0-9]*/i)).skip(t("]")).map(function(t) {
                n.name = t
            }).or(u()).then(i.parser.call(n))
        }
        ;
        n.finalizeTree = function() {
            var n = g(this.ends[t], this.jQ, st());
            n.KIND_OF_MQ = "MathField";
            n.editable = !0;
            n.createTextarea();
            n.editablesTextareaEvents();
            n.cursor.insAtRightEnd(n.root);
            sr(n.root)
        }
        ;
        n.registerInnerField = function(n, i) {
            n.push(n[this.name] = i(this.ends[t].controller))
        }
        ;
        n.latex = function() {
            return this.ends[t].latex()
        }
        ;
        n.text = function() {
            return this.ends[t].text()
        }
    });
    dr = n.embed = f(y, function(n) {
        n.setOptions = function(n) {
            function t() {
                return ""
            }
            return this.text = n.text || t,
            this.htmlTemplate = n.htmlString || "",
            this.latex = n.latex || t,
            this
        }
        ;
        n.parser = function() {
            var n = this;
            return string = e.string,
            regex = e.regex,
            succeed = e.succeed,
            string("{").then(regex(/^[a-z][a-z0-9]*/i)).skip(string("}")).then(function(t) {
                return string("[").then(regex(/^[-\w\s]*/)).skip(string("]")).or(succeed()).map(function(i) {
                    return n.setOptions(er[t](i))
                })
            })
        }
    });
    ri = ii(1);
    for (nr in ri)
        (function(n, t) {
            typeof t == "function" ? (tt[n] = function() {
                return ti(),
                t.apply(this, arguments)
            }
            ,
            tt[n].prototype = t.prototype) : tt[n] = t
        }
        )(nr, ri[nr])
}(),
function(n) {
    var r = function() {
        return n("<img/>").attr({
            src: this.src
        })
    }
      , u = {
        gif: r,
        png: r,
        swf: function() {
            return n("<embed/>").attr({
                src: this.src,
                type: "application/x-shockwave-flash"
            })
        }
    }
      , t = {
        "{f}": "format",
        "{e}": "equation"
    }
      , i = {
        "+": "2B",
        "=": "3D"
    };
    n.fn.latex = function(r) {
        return r = n.extend({}, n.fn.latex.defaults, r),
        r.format = u[r.format] ? r.format : "gif",
        this.each(function() {
            var s = n(this), h, f, o, e = r.url;
            r.equation = n.trim(s.text());
            for (f in t)
                t.hasOwnProperty(f) && (h = e.indexOf(f)) >= 0 && (e = e.replace(f, r[t[f]]));
            for (f in i)
                i.hasOwnProperty(f) && (h = e.indexOf(f)) >= 0 && (e = e.replace(f, "%" + i[f]));
            r.src = e;
            o = u[r.format].call(r);
            s.html("").append(o);
            r.callback && r.callback.call(o)
        })
    }
    ;
    n.fn.latex.defaults = {
        format: "gif",
        url: "http://latex.codecogs.com/{f}.latex?{e}"
    }
}(jQuery);
